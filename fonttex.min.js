var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(L,k,V){L!=Array.prototype&&L!=Object.prototype&&(L[k]=V.value)};$jscomp.getGlobal=function(L){return"undefined"!=typeof window&&window===L?L:"undefined"!=typeof global&&null!=global?global:L};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var L=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+L++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var L=$jscomp.global.Symbol.iterator;L||(L=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[L]&&$jscomp.defineProperty(Array.prototype,L,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(L){var k=0;return $jscomp.iteratorPrototype(function(){return k<L.length?{done:!1,value:L[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(L){$jscomp.initSymbolIterator();L={next:L};L[$jscomp.global.Symbol.iterator]=function(){return this};return L};
!function(){function L(){console.log.apply(console,arguments)}function k(a,b){this.name=a;this.type="primitive";this["function"]=b}function V(a,b){this.type="macro";a instanceof k||a instanceof V?(a.proxy&&(a=a.original),this.proxy=!0,this.isLet=!!b,this.original=a):(this.proxy=!1,this.replacement=a||[],this.parameters=b||[])}function g(a,b,d,f){this.type="integer";this.register=!0;this.message=f||"";a instanceof g?(this.value=a.value,this.parent=a,this.min=a.min,this.max=a.max):(this.min=null===
b||void 0===b?-9007199254740991:b,this.max=null===d||void 0===b?9007199254740991:d,a=Math.round(a),isFinite(a)||(a=9007199254740991*Math.sign(a)),9007199254740991<a?a=-9007199254740991+a%9007199254740991:-9007199254740991>a&&(a=9007199254740991+a%9007199254740991),this.value=isNaN(a)?0:Math.round(a))}function C(a,b,d){this.type="dimension";this.message=d||"";this.register=!0;a instanceof C?(this.sp=new g(a.sp),this.em=new g(a.em),this.message=b||"",this.parent=a):a instanceof N?(this.sp=new g(0),
this.em=new g(a.mu/18),this.message=b||""):(this.sp=new g(a),this.em=new g(b))}function N(a,b){this.type="mu dimension";this.message=b||"";this.register=!0;a instanceof N?(this.mu=new g(a.mu),this.parent=a):this.mu=a instanceof C?new g(a.em/18+a.sp/65536/12*18):new g(a)}function P(a,b,d,f){this.type="glue";this.message=f||"";this.register=!0;a instanceof P?(this.start=new C(a.start),this.stretch=new C(a.stretch),this.shrink=new C(a.shrink),this.parent=a):(this.start=new C(a),this.stretch=b instanceof
t?b:new C(b),this.shrink=d instanceof t?d:new C(d))}function W(a,b,d,f){this.type="mu glue";this.message=f||"";this.register=!0;a instanceof W?(this.start=new N(a.start),this.stretch=new N(a.stretch),this.shrink=new N(a.shrink),this.parent=a):(this.start=new N(a),this.stretch=b instanceof t?b:new N(b),this.shrink=d instanceof t?d:new N(d))}function t(a,b,d){this.type="infinite dimension";this.message=d||"";this.register=!0;this.number=new g(a);this.magnitude=new g(b)}function R(a,b,c,f){function m(a){for(;;){var f=
b.eat();if(!f)break;else if("command"==f.type||"character"==f.type&&f.cat===d.cats.active)if(f="command"==f.type?c.last.defs.primitive[f.name]||c.last.defs.macros[f.name]:c.last.defs.active[f["char"]])if(f===d.defs.primitive["if"]||f.isLet&&f.original===d.defs.primitive["if"]||f===d.defs.primitive.ifcase||f.isLet&&f.original===d.defs.primitive.ifcase||f===d.defs.primitive.ifcat||f.isLet&&f.original===d.defs.primitive.ifcat||f===d.defs.primitive.ifdim||f.isLet&&f.original===d.defs.primitive.ifdim||
f===d.defs.primitive.ifeof||f.isLet&&f.original===d.defs.primitive.ifeof||f===d.defs.primitive.iffalse||f.isLet&&f.original===d.defs.primitive.iffalse||f===d.defs.primitive.ifodd||f.isLet&&f.original===d.defs.primitive.ifodd||f===d.defs.primitive.ifnum||f.isLet&&f.original===d.defs.primitive.ifnum||f===d.defs.primitive.ifhmode||f.isLet&&f.original===d.defs.primitive.ifhmode||f===d.defs.primitive.ifinner||f.isLet&&f.original===d.defs.primitive.ifinner||f===d.defs.primitive.ifmmode||f.isLet&&f.original===
d.defs.primitive.ifmmode||f===d.defs.primitive.iftrue||f.isLet&&f.original===d.defs.primitive.iftrue||f===d.defs.primitive.ifvmode||f.isLet&&f.original===d.defs.primitive.ifvmode||f===d.defs.primitive.ifvoid||f.isLet&&f.original===d.defs.primitive.ifvoid||f===d.defs.primitive.ifx||f.isLet&&f.original===d.defs.primitive.ifx)m("fi"),b.eat();else{if("else"==a&&(f===d.defs.primitive["else"]||f.isLet&&f.original===d.defs.primitive["else"]))break;if(f===d.defs.primitive.fi||f.isLet&&f.original===d.defs.primitive.fi){b.revert();
break}}}}function A(){for(var a=[];;){var f=b.eat();if(f)if("command"==f.type||"character"==f.type&&f.cat===d.cats.active){var m="command"==f.type?c.last.defs.primitive[f.name]||c.last.defs.macros[f.name]:c.last.defs.active[f["char"]];if(m){if(m===d.defs.primitive["if"]||m.isLet&&m.original===d.defs.primitive["if"]||m===d.defs.primitive.ifcase||m.isLet&&m.original===d.defs.primitive.ifcase||m===d.defs.primitive.ifcat||m.isLet&&m.original===d.defs.primitive.ifcat||m===d.defs.primitive.ifdim||m.isLet&&
m.original===d.defs.primitive.ifdim||m===d.defs.primitive.ifeof||m.isLet&&m.original===d.defs.primitive.ifeof||m===d.defs.primitive.iffalse||m.isLet&&m.original===d.defs.primitive.iffalse||m===d.defs.primitive.ifodd||m.isLet&&m.original===d.defs.primitive.ifodd||m===d.defs.primitive.ifnum||m.isLet&&m.original===d.defs.primitive.ifnum||m===d.defs.primitive.ifhmode||m.isLet&&m.original===d.defs.primitive.ifhmode||m===d.defs.primitive.ifinner||m.isLet&&m.original===d.defs.primitive.ifinner||m===d.defs.primitive.ifmmode||
m.isLet&&m.original===d.defs.primitive.ifmmode||m===d.defs.primitive.iftrue||m.isLet&&m.original===d.defs.primitive.iftrue||m===d.defs.primitive.ifvmode||m.isLet&&m.original===d.defs.primitive.ifvmode||m===d.defs.primitive.ifvoid||m.isLet&&m.original===d.defs.primitive.ifvoid||m===d.defs.primitive.ifx||m.isLet&&m.original===d.defs.primitive.ifx)if(m=A()){a.push(f);a.push.apply(a,m);continue}else return null;a.push(f);if(m===d.defs.primitive.fi||m.isLet&&m.original===d.defs.primitive.fi)return a}else a.push(f)}else a.push(f);
else return null}}var g=[];if(a)for(;;)if(a=b.eat())if("command"==a.type||"character"==a.type&&a.cat==d.cats.active){var h="command"==a.type?c.last.defs.primitive[a.name]||c.last.defs.macros[a.name]:c.last.defs.active[a["char"]];if(h)if(h===d.defs.primitive["if"]||h.isLet&&h.original===d.defs.primitive["if"]||h===d.defs.primitive.ifcase||h.isLet&&h.original===d.defs.primitive.ifcase||h===d.defs.primitive.ifcat||h.isLet&&h.original===d.defs.primitive.ifcat||h===d.defs.primitive.ifdim||h.isLet&&h.original===
d.defs.primitive.ifdim||h===d.defs.primitive.ifeof||h.isLet&&h.original===d.defs.primitive.ifeof||h===d.defs.primitive.iffalse||h.isLet&&h.original===d.defs.primitive.iffalse||h===d.defs.primitive.ifodd||h.isLet&&h.original===d.defs.primitive.ifodd||h===d.defs.primitive.ifnum||h.isLet&&h.original===d.defs.primitive.ifnum||h===d.defs.primitive.ifhmode||h.isLet&&h.original===d.defs.primitive.ifhmode||h===d.defs.primitive.ifinner||h.isLet&&h.original===d.defs.primitive.ifinner||h===d.defs.primitive.ifmmode||
h.isLet&&h.original===d.defs.primitive.ifmmode||h===d.defs.primitive.iftrue||h.isLet&&h.original===d.defs.primitive.iftrue||h===d.defs.primitive.ifvmode||h.isLet&&h.original===d.defs.primitive.ifvmode||h===d.defs.primitive.ifvoid||h.isLet&&h.original===d.defs.primitive.ifvoid||h===d.defs.primitive.ifx||h.isLet&&h.original===d.defs.primitive.ifx)if(h=A())g.push(a),g.push.apply(g,h);else return this.invalid=!0,b.loadState(f),[this];else if(h===d.defs.primitive["else"]||h.proxy&&h.original===d.defs.primitive["else"])m("fi");
else if(h===d.defs.primitive.fi||h.proxy&&h.original===d.defs.primitive.fi)break;else g.push(a);else g.push(a)}else g.push(a);else return this.invalid=!0,b.loadState(f),[this];else for(m("else");;)if(a=b.eat())if("command"==a.type||"character"==a.type&&a.cat==d.cats.active)if(h="command"==a.type?c.last.defs.primitive[a.name]||c.last.defs.macros[a.name]:c.last.defs.active[a["char"]])if(h===d.defs.primitive["if"]||h.isLet&&h.original===d.defs.primitive["if"]||h===d.defs.primitive.ifcase||h.isLet&&h.original===
d.defs.primitive.ifcase||h===d.defs.primitive.ifcat||h.isLet&&h.original===d.defs.primitive.ifcat||h===d.defs.primitive.ifdim||h.isLet&&h.original===d.defs.primitive.ifdim||h===d.defs.primitive.ifeof||h.isLet&&h.original===d.defs.primitive.ifeof||h===d.defs.primitive.iffalse||h.isLet&&h.original===d.defs.primitive.iffalse||h===d.defs.primitive.ifodd||h.isLet&&h.original===d.defs.primitive.ifodd||h===d.defs.primitive.ifnum||h.isLet&&h.original===d.defs.primitive.ifnum||h===d.defs.primitive.ifhmode||
h.isLet&&h.original===d.defs.primitive.ifhmode||h===d.defs.primitive.ifinner||h.isLet&&h.original===d.defs.primitive.ifinner||h===d.defs.primitive.ifmmode||h.isLet&&h.original===d.defs.primitive.ifmmode||h===d.defs.primitive.iftrue||h.isLet&&h.original===d.defs.primitive.iftrue||h===d.defs.primitive.ifvmode||h.isLet&&h.original===d.defs.primitive.ifvmode||h===d.defs.primitive.ifvoid||h.isLet&&h.original===d.defs.primitive.ifvoid||h===d.defs.primitive.ifx||h.isLet&&h.original===d.defs.primitive.ifx)if(h=
A())g.push(a),g.push.apply(g,h);else return this.invalid=!0,b.loadState(f),[this];else if(h&&(h===d.defs.primitive.fi||h.proxy&&h.original===d.defs.primitive.fi))break;else g.push(a);else g.push(a);else g.push(a);else return this.invalid=!0,b.loadState(f),[this];return g}window.fontTeX=window.fontTeX||{};if(!(fontTeX.version&&["0","4","1"].map(function(a){return String.fromCharCode(48+ +a)}).join("")<fontTeX.version.split(".").map(function(a){return String.fromCharCode(48+ +a)}).join(""))){fontTeX.version=
"0.4.1";fontTeX.config=function(a,b){var d=Object.keys(O);if("string"==typeof a&&d.includes(a.toLowerCase())){1<arguments.length&&(b=O[a.toLowerCase()][1](b),"number"!=typeof b||isFinite(b)||(b=0),O[a.toLowerCase()][0]=b);var f=O[a.toLowerCase()][0]}else{if("string"==typeof a)return null;f={};for(var m=0,A=d.length;m<A;m++){var g=d[m];a&&g in a&&(a[g]=O[g][1](a[g]),"number"!=typeof a[g]||isFinite(a[g])||(a[g]=0),O[g][0]=a[g]);f[g]=O[g][0]}}if(!!T.interval!=!!O["autoupdate.enabled"][0]||T.rate!=O["autoupdate.rate"][0])clearInterval(T.interval),
T.rate=Math.max(O["autoupdate.rate"][0],0)||T.rate,O["autoupdate.enabled"][0]&&Math.max(O["autoupdate.rate"][0],0)?(T.interval=setInterval(T.listener,T.rate),T.listener()):T.interval=0;else for(d=T.data,m=0,A=d.length;m<A;m++)d[m].texInstance.renderIn(d[m].elem);return f};var O={"autoupdate.enabled":[!0,Boolean],"autoupdate.rate":[500,Number],parsehtml:[!0,Boolean],"radical.build":[!0,Boolean],"radical.w":[.5,Number],"radical.t":[.15,Number],"radical.h":[1.25,Number],"radical.verticalthreshold":[2.75,
Number],"operator.growamount":[1.75,Number],"operator.growchars":["\u2211\u222b\u220f\u2210",String]},T={interval:0,data:[],rate:O["autoupdate.rate"][0],listener:function(){for(var a=T.data,b=0,d=a.length,f=0;b<d;b++)if(a[b].styles.fontSize!=a[b].oldFontSize||a[b].styles.fontFamily!=a[b].oldFontFamily||a[b].styles.color!=a[b].oldColor)a[b].texInstance.renderIn(a[b].elem),a[b].oldFontSize=a[b].styles.fontSize,a[b].oldFontFamily=a[b].styles.fontFamily,a[b].oldColor=a[b].styles.color,f++;return f}};
T.interval=setInterval(T.listener,O["autoupdate.rate"][0]);fontTeX.updateTeX=T.listener;fontTeX.render=function(a){for(var b=[],c=a;a;)if(a.charCodeAt(0)in d.cats){var f=function(b){var c=a[b]||"",f=d.cats[c.charCodeAt(0)];if(!f||0!=f.value&&3!=f.value&&13!=f.value)return[{},0];f=f.value;if(f==d.cats.escape){if(a.charCodeAt(b+1)in d.cats&&d.cats[a.charCodeAt(b+1)].value==d.cats.letter){f="";for(b+=1;a[b]&&a.charCodeAt(b)in d.cats&&d.cats[a.charCodeAt(b)].value==d.cats.letter;b++)f+=a[b];if(d.defs.macros[f])b=
d.defs.macros[f];else return[{},0]}else if(a[b+1]&&(d.defs.primitive[a[b+1]]||d.defs.macros[a[b+1]]))f=a[b+1],b=d.defs.primitive[a[b+1]]||d.defs.macros[a[b+1]];else return[{},0];var m=!1;b.isLet&&(b=b.original,m=!0);return b===d.defs.primitive["["]?[{type:"command",name:"[",cat:-1},f.length+1]:b===d.defs.primitive["("]?[{type:"command",name:"(",cat:-1},f.length+1]:m&&b.replacement&&1==b.replacement.length&&b.replacement[0].cat==d.cats.math?[{"char":c,cat:d.cats.math},f.length+1]:[{},0]}if(f==d.cats.math)return[{"char":c,
cat:d.cats.math},1];if(f==d.cats.active&&d.defs.active[c])return d.defs.active[c].isLet&&d.defs.active[c].original===d.defs.primitive["["]?[{type:"command",name:"[",cat:-1},1]:d.defs.active[c].isLet&&d.defs.active[c].original===d.defs.primitive["("]?[{type:"command",name:"(",cat:-1},1]:d.defs.active[c].isLet&&d.defs.active[c].original.replacement&&1==d.defs.active[c].original.replacement.length&&d.defs.active[c].original.replacement[0].cat==d.cats.math?[{"char":c,cat:d.cats.math},1]:[{},0]},m=f(0),
A=null,g=0;3==m[0].cat?(g+=m[1],f=f(m[1]),3==f[0].cat?(A="display",g+=f[1]):A="inline"):"command"==m[0].type&&"["==m[0].name?(A="display",g+=m[1]):"command"==m[0].type&&"("==m[0].name&&(A="inline",g+=m[1]);if("display"==A){A=fontTeX._tokenize(a.substring(g),"display");if(!A[2]){b.push(a);a="";break}a=A[1];b.push([A[0],"display"])}else if("inline"==A){A=fontTeX._tokenize(a.substring(g),"inline");if(!A[2]){b.push(a);a="";break}a=A[1];b.push([A[0],"text"])}else"string"==typeof b[b.length-1]?b[b.length-
1]+=a[0]:b.push(a[0]),a=a.substring(1)}else"string"==typeof b[b.length-1]?b[b.length-1]+=a[0]:b.push(a[0]),a=a.substring(1);return new fontTeX.ParsedFontTeX(c,b)};fontTeX.renderSelf=function(a){if("string"==typeof a)return this.renderSelf(document.querySelectorAll(a));if(a instanceof HTMLElement)return this.renderSelf([a]);if(!isNaN(a.length))for(var b=0,d=a.length;b<d;b++){var f=a[b].getAttribute("data-fontTeX-input");null===f&&(f=a[b].innerHTML);fontTeX.render(f)["in"](a[b]);a[b].setAttribute("data-fontTeX-input",
f)}};fontTeX.ParsedFontTeX=function(a,b){this.TeXstring=a;this.parsedTokens=b};fontTeX.ParsedFontTeX.prototype={"in":function(a){var b=this.parsedTokens;if("string"==typeof a)return this["in"](document.querySelectorAll(a));if(a instanceof HTMLElement)return this["in"]([a]);if(!isNaN(a.length))for(var d=0,f=a.length;d<f;d++){a[d].innerHTML="";if(a[d].hasAttribute("data-fontTeX-container-id")){var m=T.data,A=+a[d].getAttribute("data-fontTeX-container-id"),g=T.data[A].styles;m[A]={elem:a[d],styles:m[A].styles,
texInstance:this,oldFontFamily:g.fontFamily,oldFontSize:g.fontSize,oldColor:g.color}}else m=T.data,A=m.length,g=getComputedStyle(a[d]),a[d].setAttribute("data-fontTeX-container-id",A),m[A]={elem:a[d],styles:g,texInstance:this,oldFontFamily:g.fontFamily,oldFontSize:g.fontSize,oldColor:g.oldColor};if(O.parsehtml[0]){var h="",n=[];m=0;for(A=b.length;m<A;m++)if("string"==typeof b[m])h+=b[m];else{var k=(Math.random()*Math.random()+"").replace(".",""),G=(Math.random()*Math.random()+"").replace(".","");
n.push([k,G,fontTeX._genHTML(a[d],b[m][0],b[m][1],g)]);h+="<span data-fontTeX-ID-1"+k+" data-fontTeX-ID-2"+G+"></span>"}g=document.createElement("div");g.innerHTML=h;m=0;for(A=n.length;m<A;m++)if(h=g.querySelector("[data-fontTeX-ID-1"+n[m][0]+"][data-fontTeX-ID-2"+n[m][1]+"]"))h.parentNode.insertBefore(n[m][2],h),h.parentNode.removeChild(h);m=0;for(A=g.childNodes.length;m<A;m++)a[d].appendChild(g.firstChild)}else{n=document.createDocumentFragment();m=0;for(A=b.length;m<A;m++)"string"==typeof b[m]?
n.appendChild(document.createTextNode(b[m])):n.appendChild(fontTeX._genHTML(a[d],b[m][0],b[m][1],g));a[d].appendChild(n)}a[d].setAttribute("data-fontTeX-input",this.TeXstring)}},renderIn:function(a){this["in"].apply(this,arguments)},again:function(){this.parsedTokens=fontTeX.render(this.TeXstring).parsedTokens;return this},rerender:function(){return this.again.apply(this,arguments)},TeXstring:"",parsedTokens:null};fontTeX._tokenize=function(a,b){function c(a,h){function l(a,c){c||(c=this);if(a&&("command"==
a.type||"character"==a.type&&a.cat==d.cats.active)){if(a.invalid){var l=("command"==a.type?a.escapeChar+a.name:a["char"]).split("");l=l.map(function(b){return{type:"character",cat:d.cats.all,"char":b,code:b.charCodeAt(0),invalid:!0,recognized:a.recognized}});return[{type:"character",cat:1,"char":"{",code:123,invalid:!0}].concat(l).concat({type:"character",cat:2,"char":"}",code:125,invalid:!0})}if(a.ignore)return[{type:"ignored command",token:a}];if("command"==a.type){if(a.name in u.last.defs.macros){if(u.last.defs.macros[a.name].proxy&&
"primitive"==u.last.defs.macros[a.name].original.type)return l=u.last.defs.macros[a.name].original["function"].call(a,{mouth:c,tokens:u.last.tokens,toggles:L,catOf:m,mathCodeOf:A,scopes:u,openGroups:w,contexts:M,Scope:f,style:b}),a.recognized=!0,Array.isArray(l)?l:[];a.recognized=!0;l=u.last.defs.macros[a.name];l.proxy&&(l=l.original);$jscomp.initSymbol();var U=Symbol();c.saveState(U);for(var h=[],x=0,H=l.parameters.length;x<H;x++){var g=l.parameters[x];if(g.cat==d.cats.param)if(l.parameters[x+1]&&
l.parameters[x+1].cat!=d.cats.param){g=l.parameters[x+1];h.push([]);for(r=0;;){var n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(U),[a];if(n[0].type==g.type&&n[0].cat==g.cat&&n[0].code==g.code&&n[0].name==g.name){c.revert();break}h[h.length-1]=h[h.length-1].concat(n);r++}1==r&&h[h.length-1][0].cat==d.cats.open&&h[h.length-1][h[h.length-1].length-1].cat==d.cats.close&&(h[h.length-1].shift(),h[h.length-1].pop())}else{n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(U),[a];2<n.length&&
(n.shift(),n.pop());h.push(n)}else if(n=c.eat(),!g||!n||g.type!=n.type||g.cat!=n.cat||g.code!=n.code||g.name!=n.name)return a.invalid=!0,c.loadState(U),[a]}n=[];x=0;for(H=l.replacement.length;x<H;x++)if(l.replacement[x].cat==d.cats.param)l.replacement[x+1].cat==d.cats.param?(n.push(l.replacement[x+1]),x++):(U=l.replacement[x+1]["char"]-1,U>h.length?n=n.concat({type:"character",cat:d.cats.all,"char":l.replacement[x]["char"],code:macros.replacement[x].code,invalid:!0}):(n=n.concat(h[U]),x++));else{U=
{};for(var E in l.replacement[x])U[E]=l.replacement[x][E];n.push(U)}return n}if(a.name in u.last.defs.primitive)return l=u.last.defs.primitive[a.name]["function"].call(a,{mouth:c,tokens:u.last.tokens,toggles:L,catOf:m,scopes:u,openGroups:w,contexts:M,Scope:f,style:b}),a.recognized=!0,Array.isArray(l)?l:[];if(a.name in u.last.registers.named)return[u.last.registers.named[a.name]];a.invalid=!0;return[a]}if("character"==a.type){if(a["char"]in u.last.defs.active){if(u.last.defs.active[a["char"]].proxy&&
"primitive"==u.last.defs.active[a["char"]].original.type)return l=(u.last.defs.active[a["char"]].proxy?u.last.defs.active[a["char"]].original:u.last.defs.active[a["char"]])["function"].call(a,{mouth:c,tokens:u.last.tokens,toggles:L,catOf:m,scopes:u,openGroups:w,contexts:M,Scope:f,style:b}),a.recognized=!0,Array.isArray(l)?l:[];a.recognized=!0;$jscomp.initSymbol();l=u.last.defs.active[a["char"]];U=Symbol();c.saveState(U);l.proxy&&(l=l.original);h=[];x=0;for(H=l.parameters.length;x<H;x++)if(g=l.parameters[x],
g.cat==d.cats.param)if(l.parameters[x+1]&&l.parameters[x+1].cat!=d.cats.param){g=l.parameters[x+1];var r=0;for(h.push([]);;){n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(U),[a];if(n[0].type==g.type&&n[0].cat==g.cat&&n.code==g.code&&n.name==n.name){c.revert();break}h[h.length-1].push(n);r++}1==r&&h[h.length-1][0].cat==d.cats.open&&h[h.length-1][h[h.length-1].length-1].cat==d.cats.close&&(h[h.length-1].shift(),h[h.length-1].pop())}else{n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(U),
[a];2<n.length&&(n.shift(),n.pop());h.push([n])}else if(n=c.eat(),!g||!n||g.type!=n.type||g.cat!=n.cat||g.code!=n.code||g.name!=n.name)return a.invalid=!0,c.loadState(U),[a];n=[];x=0;for(H=l.replacement.length;x<H;x++)if(l.replacement[x].cat==d.cats.param)l.replacement[x+1].cat==d.cats.param?n.push(l.replacement[x+1]):n=n.concat(h[l.replacement[x+1]["char"]-1]),x++;else{U={};for(E in l.replacement[x])U[E]=l.replacement[x][E];n.push(U)}return n}a.invalid=!0;return[a]}}else return[a]}this.queue=(h||
X).slice();this.string="string"==typeof a?a:Y;this.history=[];this.savedStates={};this.eat=function(a){switch(a){default:if(this.queue.length){if(this.queue[0].cat==d.cats.whitespace&&"pre space"!=a)return this.queue.shift(),this.eat(a);this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});return this.queue.shift()}if(0==this.string.length)return null;if(m(this.string[0])==d.cats.escape){if(!this.string[1]||"\n"==this.string[1])return this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()}),this.string=this.string.substring(2),{type:"command",escapeChar:this.string[0],name:"",nameType:"command"};this.string[1]==this.string[2]&&m(this.string[1])==d.cats["super"]&&Y[4]&&"0123456789abcdef".includes(Y[3])&&"0123456789abcdef".includes(Y[4])?this.string=this.string[0]+String.fromCharCode(this.string[3]+this.string[4],16)+this.string.substring(5):this.string[1]==this.string[2]&&m(this.string[1])==d.cats["super"]&&128>Y[3].charCodeAt(0)&&(this.string=
this.string[0]+String.fromCharCode((this.string[3].charCodeAt(0)+64)%128)+this.string.substring(4));if(m(this.string[1])==d.cats.letter){for(var b="",f=1;;f++)if(m(this.string[f])==d.cats.letter)b+=this.string[f];else if(this.string[f]==this.string[f+1]&&m(this.string[f])==d.cats["super"]&&"0123456789abcdef".includes(this.string[f+2])&&"0123456789abcdef".includes(this.string[f+3]))this.string=this.string.substring(0,f)+String.fromCharCode(this.string.substring(f+2,f+4),16)+this.string.substring(0,
f+4),f--;else if(this.string[f]==this.string[f+1]&&m(this.string[f])==d.cats["super"]&&128>this.string.charCodeAt(f+2))this.string=this.string.substring(0,f)+String.fromCharCode((this.string.charCodeAt(f+2)+64)%128)+this.string.substring(f+3),f--;else break;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});var h={type:"command",escapeChar:this.string[0],name:b,nameType:"command"};this.string=this.string.substring(1+b.length)}else this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()}),h={type:"command",escapeChar:this.string[0],name:this.string[1],nameType:"symbol"},this.string=this.string.substring(2);return h}if(m(this.string[0])==d.cats["super"]&&this.string[0]==this.string[1]&&m(this.string[0])==d.cats["super"]&&"0123456789abcdef".includes(this.string[2])&&"0123456789abcdef".includes(this.string[3]))return this.string=String.fromCharCode(parseInt(this.string.substring(2,4),16))+this.string.substring(4),this.eat(a);if(m(this.string[0])==
d.cats["super"]&&this.string[0]==this.string[1]&&m(this.string[0])==d.cats["super"]&&128>this.string.charCodeAt(2))return this.string=String.fromCharCode((this.string.charCodeAt(2)+64)%128)+this.string.substring(3),this.eat(a);if([1,2,3,4,6,7,8,11,12,13].includes(m(this.string[0])))return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),b=this.string[0],this.string=this.string.substring(1),{type:"character","char":b,code:b.charCodeAt(0),cat:m(b)};if(m(this.string[0])==
d.cats.eol){b=this.string.indexOf("\n");for(this.string=this.string.substring(~b?b+1:this.string.length);m(this.string[0])==d.cats.whitespace;)this.string=this.string.substring(1);"pre space"==a&&this.queue.unshift({type:"character","char":" ",code:32,cat:d.cats.whitespace});return this.eat(a)}if(m(this.string[0])==d.cats.comment)return b=this.string.indexOf("\n"),this.string=this.string.substring(~b?b+1:this.string.length),this.eat(a);if(m(this.string[0])==d.cats.whitespace&&"pre space"!=a||m(this.string[0])==
d.cats.ignored)return this.string=this.string.substring(1),this.eat();if(m(this.string[0])==d.cats.whitespace&&"pre space"==a)return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),b=this.string[0],this.string=this.string.substring(1),{type:"character","char":b,code:b.charCodeAt(0),cat:d.cats.whitespace};if(m(this.string[0])==d.cats.invalid)return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),b=this.string[0],
this.string=this.string.substring(1),{type:"character","char":b,code:b.charCodeAt(0),cat:d.cats.all,invalid:!0};break;case "argument":b=new c(this.string,this.queue);for(var x=0,n=[];;){if(h=b.eat())h.cat==d.cats.open?x++:h.cat==d.cats.close&&x--;else break;n.push(h);if(0==x)break}if(0<x||0==n.length)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return n;case "integer":b=new c(this.string,this.queue);x=1;
a="start";var A=0,r=!1;for(n="pre space";;){h=b.eat(n);if(!h)break;if("start"==a&&("command"==h.type||"character"==h.type&&h.cat==d.cats.active))if((f="command"==h.type?u.last.defs.primitive[h.name]||u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===
d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||
f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(h,b);if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||h.cat!=d.cats.whitespace)if("start"==a&&h.cat==d.cats.all&&"-"==h["char"])x*=-1;else if("start"!=
a||h.cat!=d.cats.all||"+"!=h["char"])if("start"==a&&h.register){"integer"==h.type?A=h.value:"dimension"==h.type?A=h.sp.value+12*h.em.value:"mu dimension"==h.type?A=12*h.mu.value/18:"glue"==h.type?A=h.start.sp.value+12*h.start.em.value:"mu glue"==h.type&&(A=12*h.start.mu.value/18);r=!0;break}else if("start"==a)n="unsigned int",b.revert();else{b.revert();break}}if(!r)return null;A*=x;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=
b.string;return new g(A);case "dimension":b=new c(this.string,this.queue);x=1;a="start";var p=r=!1;A=" ";var q=0,v=0,G=!1;for(n="pre space";!p;){h=b.eat(n);if(!h)break;if("start"==a&&("command"==h.type||"character"==h.type&&h.cat==d.cats.active))if((f="command"==h.type?u.last.defs.primitive[h.name]||u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||
f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||
f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(h,b);if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||h.cat!=d.cats.whitespace)if("start"==
a&&h.cat==d.cats.all&&"-"==h["char"])x*=-1;else if("start"!=a||h.cat!=d.cats.all||"+"!=h["char"])if("start"==a&&!r&&h.register){if("integer"==h.type?(A=h.value,"decimal"==h.message&&(A/=65536),A=" "+A,n="pre space",a="unit start"):"dimension"==h.type?(q=h.sp.value,v=h.em.value,p=!0):"mu dimension"==h.type?(v=h.mu.value/18,p=!0):"glue"==h.type?(q=h.start.sp.value,v=h.start.em.value,p=!0):"mu glue"==h.type&&(v=h.start.mu.value/18,p=!0),r=!0,p)break}else if(r&&"unit start"==a&&h.cat==d.cats.whitespace)a=
"unit start";else if(r&&h.register){A=parseFloat((A+" ").replace(" .",".").replace(". ","")||"0");"integer"==h.type?q=A*h.value:"dimension"==h.type?(q=A*h.sp.value,v=A*h.em.value):"mu dimension"==h.type?v=A*h.mu.value/18:"glue"==h.type?(q=A*h.start.sp.value,v=A*h.start.em.value):"mu glue"==h.type&&(v=A*h.start.mu.value);p=!0;break}else if(!r||G||"t"!=h["char"]&&"T"!=h["char"])if(!r||G||"e"!=h["char"]&&"E"!=h["char"])if(!r||"p"!=h["char"]&&"P"!=h["char"])if(!r||"i"!=h["char"]&&"I"!=h["char"])if(!r||
"b"!=h["char"]&&"B"!=h["char"])if(!r||"c"!=h["char"]&&"C"!=h["char"])if(!r||"m"!=h["char"]&&"M"!=h["char"])if(!r||"d"!=h["char"]&&"D"!=h["char"])if(!r||"s"!=h["char"]&&"S"!=h["char"])if("start"!=a||r){b.revert();break}else n="factor",b.revert();else if(h=b.eat("pre space"),!h||"p"!=h["char"]&&"P"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=parseFloat((A+" ").replace(" .",".").replace(". ","")||"0"),p=!0;else if(h=b.eat("pre space"),!h||"d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active){b.revert(2);
break}else q=81133568*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0")/1157,p=!0;else if(h=b.eat("pre space"),!h||"m"!=h["char"]&&"M"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=4718592*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0")/2.54/10,p=!0;else if(h=b.eat("pre space"),!h||"m"!=h["char"]&&"M"!=h["char"]||h.cat==d.cats.active)if(!h||"c"!=h["char"]&&"C"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=81133568*parseFloat((A+" ").replace(" .",".").replace(". ",
"")||"0")/1157*12,p=!0;else q=4718592*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0")/2.54,p=!0;else if(h=b.eat("pre space"),!h||"p"!=h["char"]&&"P"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=65536*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0"),p=!0;else if(h=b.eat("pre space"),!h||"n"!=h["char"]&&"N"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=4718592*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0"),p=!0;else if(h=b.eat("pre space"),
!h||"t"!=h["char"]&&"T"!=h["char"]||h.cat==d.cats.active)if(!h||"c"!=h["char"]&&"C"!=h["char"]||h.cat==d.cats.active)if(!h||"x"!=h["char"]&&"X"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=786432*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0")/16,p=!0;else q=786432*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0"),p=!0;else q=65536*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0"),p=!0;else{h=b.eat("pre space");if(!h||"m"!=h["char"]&&"M"!=h["char"]||h.cat==
d.cats.active)if(!h||"x"!=h["char"]&&"X"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else v=233*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0")/480*65536;else v=65536*parseFloat((A+" ").replace(" .",".").replace(". ","")||"0");p=!0}else{a=b.eat("pre space");if(!a||"r"!=a["char"]&&"R"!=a["char"]||a.cat==d.cats.active)b.revert(2);else if(h=b.eat("pre space"),!h||"u"!=h["char"]&&"U"!=a["char"]||h.cat==d.cats.active)b.revert(3);else if(a=b.eat("pre space"),!a||"e"!=a["char"]&&"E"!=
a["char"]||a.cat==d.cats.active)b.revert(4);else{G=!0;a="unit start";continue}break}}if(!r||!p)return null;q*=x;v*=x;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return G?new C(1E3*q/u.last.registers.named.mag.value,1E3*v/u.last.registers.named.mag.value):new C(q,v);case "mu dimension":b=new c(this.string,this.queue);x=1;a="start";p=r=!1;A=" ";q=0;for(n="pre space";!p;){h=b.eat(n);if(!h)break;if("start"==a&&("command"==
h.type||"character"==h.type&&h.cat==d.cats.active))if((f="command"==h.type?u.last.defs.primitive[h.name]||u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||
f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===
d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(h,b);if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||h.cat!=d.cats.whitespace)if("start"==a&&h.cat==d.cats.all&&"-"==h["char"])x*=-1;else if("start"!=a||h.cat!=d.cats.all||"+"!=h["char"])if("start"==a&&!r&&h.register){if("integer"==h.type?
(A=h.value,"decimal"==h.message&&(A/=65536),A=" "+A,n="pre space",a="unit start"):"dimension"==h.type?(q=h.em.value/65536*18,p=!0):"mu dimension"==h.type?(q=h.mu.value/65536,p=!0):"glue"==h.type?(q=h.start.em.value/65536*18,p=!0):"mu glue"==h.type&&(q=h.start.mu.value/65536,p=!0),r=!0,p)break}else if(r&&"unit start"==a&&h.cat==d.cats.whitespace)a="unit start";else if(r&&h.register&&"mu glue"==h.type){A=parseFloat((A+" ").replace(" .",".").replace(". ","")||"0");q=A*h.start.mu.value/65536;p=!0;break}else if(!r||
"m"!=h["char"]&&"M"!=h["char"])if("start"!=a||r){b.revert();break}else n="factor",b.revert();else{h=b.eat("pre space");if(!h||"u"!=h["char"]&&"U"!=h["char"]||h.cat==d.cats.active){b.revert(2);break}else q=parseFloat((A+" ").replace(" .",".").replace(". ","")||"0");p=!0}}if(!r||!p)return null;q*=x;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new N(65536*q);case "glue":b=new c(this.string,this.queue);r=A=x=1;a=
"start";var k=!1;p=!1;n="pre space";for(var H;;){h=b.eat(n);if(!h&&("post start"!=a&&"stretch signs"!=a||"dimension"!=n)&&("post stretch"!=a&&"shrink signs"!=a||"dimension"!=n)){q&&b.loadState(q);break}if(h||"dimension"!=n)if("start"!=a&&"signs"!=a&&"post start"!=a&&"stretch signs"!=a&&"post stretch"!=a&&"shrink signs"!=a||"command"!=h.type&&("character"!=h.type||h.cat!=d.cats.active)){if("start"!=a&&"signs"!=a&&"post start"!=a&&"post stretch"!=a&&"stretch signs"!=a&&"shrink signs"!=a||h.cat!=d.cats.whitespace)if("start"!=
a&&"signs"!=a||h.cat!=d.cats.all||"-"!=h["char"])if("start"!=a&&"signs"!=a||h.cat!=d.cats.all||"+"!=h["char"])if("start"!=a&&"signs"!=a||!h.register||"glue"!=h.type)if("start"!=a&&"signs"!=a||!h.register||"dimension"!=h.type)if("start"==a||"signs"==a)n="dimension",b.revert();else if("post start"!=a||!v||p||k||"p"!=h["char"])if("post start"==a&&p&&h.cat==d.cats.all&&"-"==h["char"])A*=-1,a="stretch signs";else if("post start"==a&&p&&h.cat==d.cats.all&&"+"==h["char"])a="stretch signs";else if(("post start"==
a||"stretch signs"==a)&&p&&h.register&&"dimension"==h.type)G=new C(h.sp.value*A,h.em.value*r),a="post stretch",n="pre space",$jscomp.initSymbol(),b.saveState(q=Symbol());else if(("post start"==a||"stretch signs"==a)&&p&&h.register&&"integer"==h.type){n="pre space";if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");
!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),G=new t(h.value*A,1)):(f=b.eat("pre space"),!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),G=new t(h.value*A,2)):G=new t(h.value*A,3));a="post stretch";$jscomp.initSymbol();b.saveState(q=Symbol());continue}b.loadState(q);break}else if("post start"!=a&&"stretch signs"!=a||!p)if(("post start"!=a||p)&&"post stretch"!=a||k||"m"!=h["char"])if("post stretch"==a&&k&&h.cat==d.cats.all&&"-"==h["char"])r*=-1,a=
"shrink signs";else if("post stretch"==a&&k&&h.cat==d.cats.all&&"+"==h["char"])a="shrink signs";else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&k&&h.register&&"dimension"==h.type){H=new C(h.sp.value*r,h.em.value*r);break}else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&k&&h.register&&"integer"==h.type){if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&
("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),H=new t(h.value*r,1)):(f=b.eat("pre space"),!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),H=new t(h.value*r,2)):H=new t(h.value*r,3));break}b.loadState(q);break}else if("post stretch"!=a&&"shrink signs"!=a&&"post start"!=a||!k){q?b.loadState(q):b.revert();break}else n="dimension",b.revert();else{if(!(!(f=b.eat("pre space"))||
"i"!=f["char"]&&"I"!=f["char"]||f.cat==d.cats.active||!(h=b.eat("pre space"))||"n"!=h["char"]&&"N"!=h["char"]||h.cat==d.cats.active||!(h=b.eat("pre space"))||"u"!=h["char"]&&"U"!=h["char"]||h.cat==d.cats.active||!(h=b.eat("pre space"))||"s"!=h["char"]&&"S"!=h["char"])&&h.cat!=d.cats.active){k=!0;continue}b.loadState(q);break}else n="dimension",b.revert();else{if((f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active&&(h=b.eat("pre space"))&&("u"==h["char"]||"U"==h["char"])&&
h.cat!=d.cats.active&&(h=b.eat("pre space"))&&("s"==h["char"]||"S"==h["char"])&&h.cat!=d.cats.active){p=!0;continue}b.loadState(q);break}else v=new C(h.sp.value*x,h.em.value*x),a="post start",n="pre space",$jscomp.initSymbol(),b.saveState(q=Symbol());else{v=new C(h.start.sp.value*x,h.start.em.value*x);G=new C(h.stretch.sp.value*x,h.stretch.em.value*x);H=new C(h.shrink.sp.value*x,h.shrink.em.value*x);break}else a="signs";else x*=-1,a="signs"}else if((f="command"==h.type?u.last.defs.primitive[h.name]||
u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||
f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(h,b);
if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else n="factor"}if(!v)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new P(v,G,H);case "mu glue":b=new c(this.string,this.queue);r=A=x=1;a="start";p=k=!1;for(n="pre space";;){h=b.eat(n);if(!h&&("post start"!=a&&"stretch signs"!=
a||"mu dimension"!=n)&&("post stretch"!=a&&"shrink signs"!=a||"mu dimension"!=n)){q&&b.loadState(q);break}if(h||"mu dimension"!=n)if("start"!=a&&"signs"!=a&&"post start"!=a&&"stretch signs"!=a&&"post stretch"!=a&&"shrink signs"!=a||"command"!=h.type&&("character"!=h.type||h.cat!=d.cats.active)){if("start"!=a&&"signs"!=a&&"post start"!=a&&"post stretch"!=a&&"stretch signs"!=a&&"shrink signs"!=a||h.cat!=d.cats.whitespace)if("start"!=a&&"signs"!=a||h.cat!=d.cats.all||"-"!=h["char"])if("start"!=a&&"signs"!=
a||h.cat!=d.cats.all||"+"!=h["char"])if("start"!=a&&"signs"!=a||!h.register||"mu glue"!=h.type)if("start"!=a&&"signs"!=a||!h.register||"mu dimension"!=h.type)if("start"==a||"signs"==a)n="mu dimension",b.revert();else if("post start"!=a||!v||p||k||"p"!=h["char"])if("post start"==a&&p&&h.cat==d.cats.all&&"-"==h["char"])A*=-1,a="stretch signs";else if("post start"==a&&p&&h.cat==d.cats.all&&"+"==h["char"])a="stretch signs";else if(("post start"==a||"stretch signs"==a)&&p&&h.register&&"mu dimension"==
h.type)G=new N(h.mu.value*A),a="post stretch",n="pre space",$jscomp.initSymbol(),b.saveState(q=Symbol());else if(("post start"==a||"stretch signs"==a)&&p&&h.register&&"integer"==h.type){n="pre space";if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?
(b.revert(),G=new t(h.value*A,1)):(f=b.eat("pre space"),!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(b.revert(),G=new t(h.value*A,2)):G=new t(h.value*A,3));a="post stretch";$jscomp.initSymbol();b.saveState(q=Symbol());continue}b.loadState(q);break}else if("post start"!=a&&"stretch signs"!=a||!p)if(("post start"!=a||p)&&"post stretch"!=a||k||"m"!=h["char"])if("post stretch"==a&&k&&h.cat==d.cats.all&&"-"==h["char"])r*=-1,a="shrink signs";else if("post stretch"==a&&k&&h.cat==d.cats.all&&
"+"==h["char"])a="shrink signs";else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&k&&h.register&&"mu dimension"==h.type){H=new N(h.mu.value*r);break}else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&k&&h.register&&"integer"==h.type){if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");
!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?H=new t(h.value*r,1):(f=b.eat("pre space"),H=!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?new t(h.value*r,2):new t(h.value*r,3));break}b.loadState(q);break}else if("post stretch"!=a&&"shrink signs"!=a&&"post start"!=a||!k){q?b.loadState(q):b.revert();break}else n="mu dimension",b.revert();else{if(!(!(f=b.eat("pre space"))||"i"!=f["char"]&&"I"!=f["char"]||f.cat==d.cats.active||!(h=b.eat("pre space"))||"n"!=h["char"]&&"N"!=h["char"]||
h.cat==d.cats.active||!(h=b.eat("pre space"))||"u"!=h["char"]&&"U"!=h["char"]||h.cat==d.cats.active||!(h=b.eat("pre space"))||"s"!=h["char"]&&"S"!=h["char"])&&h.cat!=d.cats.active){k=!0;continue}b.loadState(q);break}else n="mu dimension",b.revert();else{if((f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active&&(h=b.eat("pre space"))&&("u"==h["char"]||"U"==h["char"])&&h.cat!=d.cats.active&&(h=b.eat("pre space"))&&("s"==h["char"]||"S"==h["char"])&&h.cat!=d.cats.active){p=!0;
continue}b.loadState(q);break}else v=new N(h.mu.value*x),a="post start",n="pre space",$jscomp.initSymbol(),b.saveState(q=Symbol());else{v=new N(h.start.mu.value*x);G=new N(h.stretch.mu.value*x);H=new N(h.shrink.mu.value*x);break}else a="signs";else x*=-1,a="signs"}else if((f="command"==h.type?u.last.defs.primitive[h.name]||u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||
f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||
f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(h,b);if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else n="factor"}if(!v)return null;
this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new W(v,G,H);case "unsigned int":b=new c(this.string,this.queue);a="start";A=0;for(r=!1;;){h=b.eat("pre space");if(!h)break;if("grave"==a){if("command"==h.type&&1==h.name.length)A=h.name.charCodeAt(0);else if("character"==h.type)A=h["char"].charCodeAt(0);else return null;r=!0;break}else if("start"==a&&("command"==h.type||"character"==h.type&&h.cat==d.cats.active))if((f=
"command"==h.type?u.last.defs.primitive[h.name]||u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||
f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=
l(h,b);if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||h.cat!=d.cats.whitespace)if("start"==a&&h.register&&"integer"==h.type){A=h.value;r=!0;break}else if(("decimal"==a||"start"==a)&&h.cat==d.cats.all&&47<h.code&&58>h.code)A=10*A+ +h["char"],a="decimal",r=!0;else if("start"==a&&h.cat==d.cats.all&&"'"==h["char"])a="octal";else if("start"==a&&
h.cat==d.cats.all&&'"'==h["char"])a="hexadecimal";else if("start"==a&&h.cat==d.cats.all&&"`"==h["char"])a="grave";else if("octal"==a&&h.cat==d.cats.all&&47<h.code&&56>h.code)A=8*A+ +h["char"],r=!0;else if("hexadecimal"==a&&(h.cat==d.cats.all&&47<h.code&&58>h.code||(h.cat==d.cats.all||h.cat==d.cats.letter)&&64<h.code&&71>h.code))A=16*A+parseInt(h["char"],16),r=!0;else{b.revert();break}}if(!r)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();
this.string=b.string;return new g(A);case "factor":b=new c(this.string,this.queue);a="start";n="pre space";r=!1;for(A="";;){h=b.eat(n);if(!h)break;if("start"==a&&("command"==h.type||"character"==h.type&&h.cat==d.cats.active))if((f="command"==h.type?u.last.defs.primitive[h.name]||u.last.defs.macros[h.name]||u.last.registers.named[h.name]:u.last.defs.active[h["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===
d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||
f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(h,b);if(1==f.length&&f[0]===h&&h.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||h.cat!=d.cats.whitespace)if("start"==
a&&h.register&&"integer"==h.type){A=h.value.toString();r=!0;break}else if(("pre decimal"==a||"start"==a)&&h.cat==d.cats.all&&47<h.code&&58>h.code)A+=h["char"],a="pre decimal",r=!0;else if("pre decimal"!=a&&"start"!=a||h.cat!=d.cats.all||"."!=h["char"]&&","!=h["char"])if("post decimal"==a&&h.cat==d.cats.all&&47<h.code&&58>h.code)A+=h["char"];else if("start"==a)n="unsigned int",b.revert();else{b.revert();break}else A+=".",a="post decimal",r=!0}if(!r)return null;this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new g(65536*A,null,null,"decimal")}};this.preview=function(a){(a=this.eat(a))&&this.revert();return a};this.revert=function(a){for(a="number"==typeof a?a:1;0<a&&0!=this.history.length;a--){this.string=this.history[this.history.length-1].string;for(var b=0,d=this.history[this.history.length-1].queue.length;b<d;b++)this.queue[b]=this.history[this.history.length-1].queue[b];this.queue.length=this.history[this.history.length-
1].queue.length;this.history=this.history[this.history.length-1].history}return this};this.finalize=function(){for(var b=0,d=this.queue.length;b<d;b++)(h||X)[b]=this.queue[b];(h||X).length=this.queue.length;"string"!=typeof a&&(Y=this.string)};this.saveState=function(a){this.savedStates[a]={queue:this.queue.slice(),string:this.string,history:this.history.slice()};return this};this.loadState=function(a){this.string=this.savedStates[a].string;this.history=this.savedStates[a].history;for(var b=0,d=this.savedStates[a].queue.length;b<
d;b++)this.queue[b]=this.savedStates[a].queue[b];this.queue.length=this.savedStates[a].queue.length;return this};this.expand=l}function f(){var a=this.parentScope=u.last||d;this.defs={primitive:{},macros:{},active:{}};this.registers={count:{},dimen:{},skip:{},muskip:{},named:{}};this.cats={};this.mathcodes={};this.lc={};this.uc={};this.font={};for(var b in a.defs.primitive)this.defs.primitive[b]=a.defs.primitive[b];for(b in a.defs.macros)this.defs.macros[b]=a.defs.macros[b];for(b in a.defs.active)this.defs.active[b]=
a.defs.active[b];for(b in a.lc)this.lc[b]=new g(a.lc[b]);for(b in a.uc)this.uc[b]=new g(a.uc[b]);for(b in a.font)this.font[b]=a.font[b];for(b in a.cats)!isNaN(b)&&(this.cats[b]=new g(a.cats[b]));for(b in a.mathcodes)!isNaN(b)&&(this.mathcodes[b]=new g(a.mathcodes[b]));for(b in a.registers.count)this.registers.count[b]=new g(a.registers.count[b]);for(b in a.registers.dimen)this.registers.dimen[b]=new C(a.registers.dimen[b]);for(b in a.registers.skip)this.registers.skip[b]=new P(a.registers.skip[b]);
for(b in a.registers.muskip)this.registers.muskip[b]=new W(a.registers.muskip[b]);for(b in a.registers.named){var c=a.registers.named[b],f="integer"==c.type?"count":"dimension"==c.type?"dimen":"glue"==c.type?"skip":"muskip";if(Object.values(a.registers[f]).includes(c))for(var h in a.registers[f])a.registers.named[b]===a.registers[f][h]&&(this.registers.named[b]=this.registers[f][h]);else this.registers.named[b]=new ("integer"==c.type?g:"dimension"==c.type?C:"glue"==c.type?P:W)(c)}this.tokens=[];this.split=
!1;u.push(this)}function m(a){if(!a)return null;a=a.charCodeAt(0);return a in u.last.cats?u.last.cats[a].value:d.cats.all}function A(a){if(!a)return null;a=a.charCodeAt(0);return a in u.last.mathcodes?u.last.mathcodes[a].value:d.mathcodes.ord}function v(a){for(var b=0,d=a.length;b<d;b++)if(a[b].ignore&&"command"==a[b].type)a[b].invalid?(d=(a[b].escapeChar+a[b].name).split("").map(function(d){return{type:"atom",atomType:a[b].recognized?0:7,nucleus:{type:"symbol","char":d,code:d.charCodeAt(0),invalid:!0},
superscript:null,subscript:null}}),a.splice(b,1,{type:"atom",atomType:0,nucleus:d,superscript:null,subscript:null})):a.splice(b,1),d=a.length,b--;else if(a[b].ignore&&!a[b].invalid)a.splice(b,1),d=a.length,b--;else if("fraction"==a[b].type)v(a[b].numerator),v(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++)for(var c=0,f=a[b].cellData[b].length;c<f;c++)v(a[b][c].content);else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&v(a[b].nucleus),Array.isArray(a[b].superscript)&&
v(a[b].superscript),Array.isArray(a[b].subscript)&&v(a[b].subscript)):"mathchoice"==a[b].type?v(a[b].groups):"box"==a[b].type?v([a[b].content]):"family modifier"==a[b].type&&"rad"==a[b].value&&v(a[b].index)}function h(a){for(var b=0,d=a.length;b<d;b++)if("family modifier"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"atom",atomType:a[b].value,nucleus:[a[b+1]],superscript:a[b+1].superscript,subscript:a[b+1].subscript,index:a[b].index}),a[b].nucleus[0].superscript=null,a[b].nucleus[0].subscript=
null,d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)h(a[b].numerator),h(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=a[b].cellData[b].length;c<
f;c++)h(a[b][c].content)}else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&h(a[b].nucleus),Array.isArray(a[b].superscript)&&h(a[b].superscript),Array.isArray(a[b].subscript)&&h(a[b].subscript),Array.isArray(a[b].index)&&h(a[b].index)):"mathchoice"==a[b].type?h(a[b].groups):"box"==a[b].type&&h([a[b].content])}function n(a){for(var b=0,d=a.length;b<d;b++)if("accent modifier"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"atom",atomType:"acc",nucleus:[a[b+1]],superscript:a[b+1].superscript,
subscript:a[b+1].subscript,accChar:a[b]["char"],accCode:a[b].code}),a[b].nucleus[0].superscript=null,a[b].nucleus[0].subscript=null,d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)n(a[b].numerator),
n(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=a[b].cellData[b].length;c<f;c++)n(a[b][c].content)}else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&n(a[b].nucleus),Array.isArray(a[b].superscript)&&n(a[b].superscript),Array.isArray(a[b].subscript)&&n(a[b].subscript),Array.isArray(a[b].index)&&n(a[b].index)):"mathchoice"==a[b].type?n(a[b].groups):"box"==a[b].type&&n([a[b].content])}function k(a){for(var b=0,d=a.length;b<d;b++)if("limit modifier"==
a[b].type)if(a[b-1]&&"atom"==a[b-1].type&&1==a[b-1].atomType)a[b-1].limits=a[b].value,a.splice(b,1),d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)k(a[b].numerator),k(a[b].denominator);
else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=a[b].cellData[b].length;c<f;c++)k(a[b][c].content)}else"atom"==a[b].type?(1==a[b].atomType&&(a[b].limits="display"),Array.isArray(a[b].nucleus)&&k(a[b].nucleus),Array.isArray(a[b].superscript)&&k(a[b].superscript),Array.isArray(a[b].subscript)&&k(a[b].subscript),Array.isArray(a[b].index)&&k(a[b].index)):"mathchoice"==a[b].type?k(a[b].groups):"box"==a[b].type&&k([a[b].content])}function G(a){for(var b=0,d=a.length;b<d;b++)if("box wrapper"==
a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"box",boxType:a[b].value,to:a[b].to,spread:a[b].spread,content:a[b+1],superscript:a[b+1].superscript,subscript:a[b+1].subscript}),a[b].content.superscript=null,a[b].content.subscript=null,d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});
a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)G(a[b].numerator),G(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=a[b].cellData[b].length;c<f;c++)G(a[b][c].content)}else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&G(a[b].nucleus),Array.isArray(a[b].superscript)&&G(a[b].superscript),Array.isArray(a[b].subscript)&&G(a[b].subscript),Array.isArray(a[b].index)&&G(a[b].index)):"mathchoice"==a[b].type?
G(a[b].groups):"box"==a[b].type&&G([a[b].content])}function p(a){for(var b=0,d=a.length;b<d;b++)if("atom"==a[b].type){if(Array.isArray(a[b].nucleus)&&p(a[b].nucleus),Array.isArray(a[b].superscript)&&p(a[b].superscript),Array.isArray(a[b].subscript)&&p(a[b].subscript),Array.isArray(a[b].index)&&p(a[b].index),Array.isArray(a[b].nucleus)&&1==a[b].nucleus.length)[0,2,3,4,5,6,"inner"].includes(a[b].nucleus[0].atomType)&&!["over","under","rad"].includes(a[b].atomType)?a[b].nucleus[0].superscript||a[b].nucleus[0].subscript?
a[b].superscript||a[b].subscript||(a[b].superscript=a[b].nucleus[0].superscript,a[b].subscript=a[b].nucleus[0].subscript,a[b].nucleus=a[b].nucleus[0].nucleus,b--):(a[b].nucleus=a[b].nucleus[0].nucleus,b--):7==a[b].nucleus[0].atomType&&0==a[b].atomType?a[b].nucleus[0].superscript||a[b].nucleus[0].subscript?a[b].superscript||a[b].subscript||(a[b].superscript=a[b].nucleus[0].superscript,a[b].subscript=a[b].nucleus[0].subscript,a[b].nucleus=a[b].nucleus[0].nucleus,a[b].atomType=7,b--):(a[b].nucleus=a[b].nucleus[0].nucleus,
a[b].atomType=7,b--):7==a[b].nucleus[0].atomType||!["over","under","rad","accent"].includes(a[b].atomType)||a[b].nucleus[0].superscript||a[b].nucleus[0].subscript||(a[b].nucleus=a[b].nucleus[0].nucleus)}else if("fraction"==a[b].type)a[b].numerator&&Array.isArray(a[b].numerator)&&1==a[b].numerator.length&&!a[b].numerator.subscript&&!a[b].numerator.superscript&&Array.isArray(a[b].numerator[0].nucleus)&&(a[b].numerator=a[b].numerator[0].nucleus),a[b].denominator&&Array.isArray(a[b].denominator.nucleus)&&
1==a[b].denominator.length&&!a[b].denominator.subscript&&!a[b].denominator.superscript&&Array.isArray(a[b].denominator[0].nucleus)&&(a[b].denominator=a[b].denominator[0].nucleus),p(a[b].numerator),p(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++)for(var c=0,f=a[b].cellData[b].length;c<f;c++)p(a[b][c].content);else"mathchoice"==a[b].type?p(a[b].groups):"box"==a[b].type&&p([a[b].content])}if("display"!==b&&"inline"!==b)throw new TypeError('No "display" or "inline" style specified for fontTeX._tokenize.');
var X=[],Y=a,u=[];Object.defineProperty(u,"last",{get:function(){return this[this.length-1]}});new f;var L={global:!1},M=[];Object.defineProperty(M,"last",{get:function(){return this[this.length-1]}});for(var K=new c,w=[];;){var B=K.eat();if(null===B)return[[],a,!1];if("command"==B.type||"character"==B.type&&B.cat==d.cats.active){"mathchoice"==M.last&&M.last.failed();var q=K.expand(B,K);K.queue.unshift.apply(K.queue,q)}else{if("character"==B.type&&B.cat==d.cats.param)"mathchoice"==M.last&&M.last.failed(),
K.queue.unshift({type:"character",cat:d.cats.all,"char":B["char"],code:B.code,invalid:!0});else if("character"==B.type&&B.cat==d.cats.math)if("mathchoice"==M.last&&M.last.failed(),"display"==b){for(var D=new c(K.string,K.queue),Q=!1;;){q=D.eat();if(!q)break;if("command"==q.type||"character"==q.type&&q.cat==d.cats.active)q=D.expand(q,D),D.queue.unshift.apply(D.queue,q);else{"character"==q.type&&q.cat==d.cats.math&&(Q=!0,D.finalize(),K.string=D.string);break}}if(Q)break;else K.queue.unshift({type:"character",
cat:d.cats.all,"char":B["char"],code:B.code,invalid:!0})}else break;else if("character"==B.type&&B.cat==d.cats["super"]){"mathchoice"==M.last&&M.last.failed();D=null;for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){D=u.last.tokens[q];break}D||(u.last.tokens.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null}),D=u.last.tokens[u.last.tokens.length-1]);D.superscript?u.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol",
"char":B["char"],code:B.code,invalid:!0},superscript:null,subscript:null}):"superscript"==M.last?(D.superscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code,invalid:!0},superscript:null,subscript:null}],M.pop()):"subscript"==M.last?(D.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code,invalid:!0},superscript:null,subscript:null}],M.pop()):(B={type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code},superscript:null,
subscript:null,ignore:!0},u.last.tokens.push(B),M.push({toString:function(){return"superscript"},token:B}))}else if("character"==B.type&&B.cat==d.cats.sub){"mathchoice"==M.last&&M.last.failed();D=null;for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){D=u.last.tokens[q];break}D||(u.last.tokens.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null}),D=u.last.tokens[u.last.tokens.length-1]);D.subscript?u.last.tokens.push({type:"atom",
atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code,invalid:!0},superscript:null,subscript:null}):"superscript"==M.last?(D.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code,invalid:!0},superscript:null,subscript:null}],M.pop()):"subscript"==M.last?(D.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code,invalid:!0},superscript:null,subscript:null}],M.pop()):(B={type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],
code:B.code},superscript:null,subscript:null,ignore:!0},u.last.tokens.push(B),M.push({toString:function(){return"subscript"},token:B}))}else if("character"==B.type&&B.cat==d.cats.open)D={type:"atom",atomType:0,nucleus:{type:"symbol","char":B["char"],code:B.code},superscript:null,subscript:null,ignore:!0},w.push(D),M.push("scope"),new f,u.last.tokens.push(D);else if("character"==B.type&&B.cat==d.cats.close)if(!w.length||u.last.delimited||u.last.semisimple||u.last.isHalign||u.last.isHalignCell||"scope"!=
M.last)K.queue.unshift({type:"character",cat:d.cats.all,"char":B["char"],code:B.code,invalid:!0});else if(w.pop(),M.pop(),Q=u.last.isFrac?[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:u.last.fracNumerator,denominator:u.last.tokens,barWidth:u.last.barWidth,delims:[u.last.fracLeftDelim,u.last.fracRightDelim],nullDelimiterSpace:new C(u.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}]:u.last.tokens,u.last.root&&(u.last.root.invalid=!0),"superscript"==M.last){u.pop();
for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){u.last.tokens[q].superscript=Q;break}M.pop()}else if("subscript"==M.last){u.pop();for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){u.last.tokens[q].subscript=Q;break}M.pop()}else u.last.isFrac?(u.pop(),u.last.tokens.push(Q[0])):(u.pop(),u.last.tokens.push({type:"atom",atomType:0,nucleus:Q,superscript:null,subscript:null})),"mathchoice"==M.last&&4==++M.last.current&&
M.last.succeeded();else if("character"==B.type&&B.cat==d.cats.alignment){"mathchoice"==M.last&&M.last.failed();if(!u.last.isHalignCell||"scope"!=M.last){K.queue.unshift({type:"character",cat:d.cats.all,"char":B["char"],code:B.code,invalid:!0});continue}var O=u[u.length-2].cellData[u[u.length-2].cellData.length-1];D=u[u.length-2];if(!O[O.length-1].omit&&!B.postPreamble){var S=-1;q=0;for(var ba=O.length;q<ba;q++)S+=O[q].span;if(D.preamble[S])Q=D.preamble[S][1];else if(~D.repeatPreambleAt)q=D.preamble.slice(D.repeatPreambleAt,
D.preamble.length),Q=q[(S-D.repeatPreambleAt)%q.length][1];else{K.queue.unshift({type:"character",cat:d.cats.all,"char":B["char"],code:B.code,invalid:!0});continue}if(!D.preamble[++S]&&!~D.repeatPreambleAt){K.queue.unshift({type:"character",cat:d.cats.all,"char":B["char"],code:B.code,invalid:!0});continue}K.queue.unshift.apply(K.queue,Q.concat(B));B.postPreamble=!0;continue}e.scopes.last.root&&(e.scopes.last.root.invalid=!0);M.pop();Q=u.last.tokens;u.last.isFrac?(O[O.length-1].content.push({type:"atom",
atomType:"inner",nucleus:[{type:"fraction",numerator:u.last.fracNumerator,denominator:Q,barWidth:u.last.barWidth,delims:[u.last.fracLeftDelim,u.last.fracRightDelim],nullDelimiterSpace:new C(u.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),u.pop()):(u.pop(),O[O.length-1].content=O[O.length-1].content.concat(Q));$jscomp.initSymbol();S=Symbol();K.saveState(S);for(O.push({type:"cell",content:[],omit:!1,span:1});;)if(B=K.eat(),!B){K.loadState(S);break}else if("character"==
B.type&&B.cat!=d.cats.active){K.loadState(S);break}else if("command"==B.type||"character"==B.type&&B.cat==d.cats.active){if(B.name in u.last.registers.named){K.loadState(S);break}q="command"==B.type?u.last.defs.primitive[B.name]||u.last.defs.macros[B.name]:u.last.defs.active[B["char"]];if(!q){K.loadState(S);break}if(q===d.defs.primitive.the||q.proxy&&q.original===d.defs.primitive.the||q===d.defs.primitive.expandafter||q.proxy&&q.original===d.defs.primitive.expandafter||q===d.defs.primitive.number||
q.proxy&&q.original===d.defs.primitive.number||q===d.defs.primitive.romannumeral||q.proxy&&q.original===d.defs.primitive.romannumeral||q===d.defs.primitive.csname||q.proxy&&q.original===d.defs.primitive.csname||q===d.defs.primitive.string||q.proxy&&q.original===d.defs.primitive.string||q===d.defs.primitive["if"]||q.isLet&&q.original===d.defs.primitive["if"]||q===d.defs.primitive.ifcase||q.isLet&&q.original===d.defs.primitive.ifcase||q===d.defs.primitive.ifcat||q.isLet&&q.original===d.defs.primitive.ifcat||
q===d.defs.primitive.ifdim||q.isLet&&q.original===d.defs.primitive.ifdim||q===d.defs.primitive.ifeof||q.isLet&&q.original===d.defs.primitive.ifeof||q===d.defs.primitive.iffalse||q.isLet&&q.original===d.defs.primitive.iffalse||q===d.defs.primitive.ifodd||q.isLet&&q.original===d.defs.primitive.ifodd||q===d.defs.primitive.ifnum||q.isLet&&q.original===d.defs.primitive.ifnum||q===d.defs.primitive.ifhmode||q.isLet&&q.original===d.defs.primitive.ifhmode||q===d.defs.primitive.ifinner||q.isLet&&q.original===
d.defs.primitive.ifinner||q===d.defs.primitive.ifmmode||q.isLet&&q.original===d.defs.primitive.ifmmode||q===d.defs.primitive.iftrue||q.isLet&&q.original===d.defs.primitive.iftrue||q===d.defs.primitive.ifvmode||q.isLet&&q.original===d.defs.primitive.ifvmode||q===d.defs.primitive.ifvoid||q.isLet&&q.original===d.defs.primitive.ifvoid||q===d.defs.primitive.ifx||q.isLet&&q.original===d.defs.primitive.ifx){if(q=K.expand(B,K),1==q.length&&q[0]===B&&B.invalid){K.loadState(S);break}}else{if(q===d.defs.primitive.omit||
q.proxy&&q.original===d.defs.primitive.omit){O[O.length-1].omit=!0;break}if("primitive"==q.type||q.proxy&&"primitive"==q.original.type){K.loadState(S);break}q=K.expand(B,K);if(1==q.length&&q[0]==-B&&B.invalid){K.loadState(S);break}}K.queue.unshift.apply(K.queue,q)}M.push("scope");new f;u.last.isHalignCell=!0;if(!O[O.length-1].omit){S=-1;q=0;for(ba=O.length;q<ba;q++)S+=O[q].span;D.preamble[S]?Q=D.preamble[S][0]:~D.repeatPreambleAt&&(q=D.preamble.slice(D.repeatPreambleAt,D.preamble.length),Q=q[(S-D.repeatPreambleAt)%
q.length][0]);K.queue.unshift.apply(K.queue,Q)}}else if("character"==B.type){"mathchoice"==M.last&&M.last.failed();D={type:"symbol","char":B["char"],code:B.code,invalid:B.invalid};Q=B.forcedMathCode+1?B.forcedMathCode:A(D["char"]);B.invalid&&B.recognized&&(Q=0);if(Q==d.mathcodes.active)if(u.last.defs.active[B["char"]]){K.queue.unshift.apply(K.queue,(u.last.defs.active[B["char"]].replacement||u.last.defs.active[B["char"]].original.replacement).slice());continue}else B.invalid=D.invalid=!0,Q=0;if("superscript"==
M.last){for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){u.last.tokens[q].superscript=[{type:"atom",atomType:Q,nucleus:D,superscript:null,subscript:null}];break}M.pop()}else if("subscript"==M.last){for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){u.last.tokens[q].subscript=[{type:"atom",atomType:Q,nucleus:D,superscript:null,subscript:null}];break}M.pop()}else u.last.tokens.push({type:"atom",atomType:Q,
nucleus:D,superscript:null,subscript:null})}else if(B.register)if("mathchoice"==M.last&&M.last.failed(),$jscomp.initSymbol(),D=Symbol(),K.saveState(D),(q=K.eat())&&"character"==q.type&&"="==q["char"]&&q.cat==d.cats.all||q&&K.revert(),"integer"==B.type){var aa=K.eat("integer");if(aa){if(aa.value<B.min||aa.value>B.max){K.loadState(D);continue}D=B;if(L.global&&0<=u.last.registers.named.globaldefs.value||0<u.last.registers.named.globaldefs.value)for(;B.parent;)B=B.parent,B.value=aa.value;D.value=aa.value;
L.global=!1}else K.loadState(D)}else if("dimension"==B.type)if(q=K.eat("dimension")){B.sp.value=q.sp.value;B.em.value=q.em.value;if(L.global&&0<=u.last.registers.named.globaldefs.value||0<u.last.registers.named.globaldefs.value)for(;B.parent;)B=B.parent,B.sp.value=q.sp.value,B.em.value=q.em.value;L.global=!1}else K.loadState(D);else if("mu dimension"==B.type)if(q=K.eat("mu dimension")){B.mu.value=q.mu.value;if(L.global&&0<=u.last.registers.named.globaldefs.value||0<u.last.registers.named.globaldefs.value)for(;B.parent;)B=
B.parent,B.mu.value=aa.mu.value;L.global=!1}else K.loadState(D);else if("glue"==B.type)if(q=K.eat("glue")){B.start.sp.value=q.start.sp.value;B.start.em.value=q.start.em.value;B.stretch="infinite dimension"==q.stretch.type?new t(q.stretch.number.value,q.stretch.magnitude.value):new C(q.stretch.sp.value,q.stretch.em.value);B.shrink="infinite dimension"==q.shrink.type?new t(q.shrink.number.value,q.shrink.magnitude.value):new C(q.shrink.sp.value,q.shrink.em.value);if(L.global&&0<=u.last.registers.named.globaldefs.value||
0<u.last.registers.named.globaldefs.value)for(;B.parent;)B=B.parent,B.start.sp.value=q.start.sp.value,B.start.em.value=q.start.em.value,B.stretch="infinite dimension"==q.stretch.type?new t(q.stretch.number.value,q.stretch.magnitude.value):new C(q.stretch.sp.value,q.stretch.em.value),B.shrink="infinite dimension"==q.shrink.type?new t(q.shrink.number.value,q.shrink.magnitude.value):new C(q.shrink.sp.value,q.shrink.em.value);L.global=!1}else K.loadState(D);else{if("mu glue"==B.type)if(q=K.eat("mu glue")){B.start.mu.value=
q.start.mu.value;B.stretch="infinite dimension"==q.stretch.type?new t(q.stretch.number.value,q.stretch.magnitude.value):new N(q.stretch.mu.value);B.shrink="infinite dimension"==q.shrink.type?new t(q.shrink.number.value,q.shrink.magnitude.value):new N(q.shrink.mu.value);if(L.global&&0<=u.last.registers.named.globaldefs.value||0<u.last.registers.named.globaldefs.value)for(;B.parent;)B=B.parent,B.start.mu.value=q.start.mu.value,B.stretch="infinite dimension"==q.stretch.type?new t(q.stretch.number.value,
q.stretch.magnitude.value):new N(q.stretch.mu.value),B.shrink="infinite dimension"==q.shrink.type?new t(q.shrink.number.value,q.shrink.magnitude.value):new N(q.shrink.mu.value);L.global=!1}else K.loadState(D)}else if("ignored command"==B.type){u.last.tokens.push(B.token);continue}for(var F in L)L[F]&&(L[F].invalid=!0,L[F]=!1)}}if("superscript"==M.last||"subscript"==M.last)M.last.token.invalid=!0,M.last.token.ignore=!1;for(;u.last!=u[0];)if(M.pop(),Q=u.last.tokens,u.last.root&&(u.last.root.invalid=
!0),"superscript"==M.last){u.pop();for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){u.last.tokens[q].superscript=Q;break}M.pop()}else if("subscript"==M.last){u.pop();for(q=u.last.tokens.length-1;0<=q;q--)if("atom"==u.last.tokens[q].type&&!u.last.tokens[q].ignore){u.last.tokens[q].subscript=Q;break}M.pop()}else u.last.isFrac?(u[u.length-2].tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:u.last.fracNumerator,denominator:Q,
barWidth:u.last.barWidth,delims:[u.last.fracLeftDelim,u.last.fracRightDelim],nullDelimiterSpace:new C(u.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),u.pop()):(u.pop(),u.last.tokens.push({type:"atom",atomType:0,nucleus:Q,superscript:null,subscript:null}));u[0].isFrac&&(Q=u[0].tokens,u[0].tokens=[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:u[0].fracNumerator,denominator:Q,barWidth:u[0].barWidth,delims:[u[0].fracLeftDelim,u[0].fracRightDelim],nullDelimiterSpace:new C(u[0].registers.named.nulldelimiterspace)}],
superscript:null,subscript:null}]);q=0;for(ba=w.length;q<ba;q++)w[q].invalid=!0;v(u[0].tokens);h(u[0].tokens);n(u[0].tokens);k(u[0].tokens);G(u[0].tokens);p(u[0].tokens);K.finalize();return 2<arguments.length&&arguments[2]?u[0]:[u[0].tokens,Y,!0]};fontTeX.format=function(a){a=fontTeX._tokenize(a+"$","inline",!0);d.defs.macros={};d.defs.active={};d.registers.count={};d.registers.dimen={};d.registers.skip={};d.registers.muskip={};d.registers.named={};for(var b in a.defs.macros)d.defs.macros[b]=a.defs.macros[b];
for(b in a.defs.active)d.defs.active[b]=a.defs.active[b];var c=[];for(b in a.registers.count)d.registers.count[b]=new g(a.registers.count[b].value);for(b in a.registers.dimen)d.registers.dimen[b]=new C(a.registers.dimen[b].sp.value,a.registers.dimen[b].em.value);for(b in a.registers.skip)d.registers.skip[b]=new P,d.registers.skip[b].start.sp.value=a.registers.skip[b].start.sp.value,d.registers.skip[b].start.em.value=a.registers.skip[b].start.em.value,d.registers.skip[b].stretch="infinite dimension"==
a.registers.skip[b].stretch.type?new t(a.registers.skip[b].stretch.number.value,a.registers.skip[b].stretch.magnitude.value):new C(a.registers.skip[b].stretch.sp.value,a.registers.skip[b].stretch.em.value),d.registers.skip[b].shrink="infinite dimension"==a.registers.skip[b].shrink.type?new t(a.registers.skip[b].shrink.number.value,a.registers.skip[b].shrink.magnitude.value):new C(a.registers.skip[b].shrink.sp.value,a.registers.skip[b].shrink.em.value);for(b in a.registers.muskip)d.registers.muskip[b]=
new W,d.registers.muskip[b].start.mu.value=a.registers.muskip[b].start.mu.value,d.registers.muskip[b].stretch="infinite dimension"==a.registers.muskip[b].stretch.type?new t(a.registers.muskip[b].stretch.number.value,a.registers.muskip[b].stretch.magnitude.value):new N(a.registers.muskip[b].stretch.mu.value),d.registers.muskip[b].shrink="infinite dimension"==a.registers.muskip[b].shrink.type?new t(a.registers.muskip[b].shrink.number.value,a.registers.muskip[b].shrink.magnitude.value):new N(a.registers.muskip[b].shrink.mu.value);
for(b in a.registers.named)c.includes(a.registers.named[b])?d.registers.named[b]=a.registers.named[b]:"integer"==a.registers.named[b].type?d.registers.named[b]=new g(a.registers.named[b].value):"dimension"==a.registers.named[b].type?d.registers.named[b]=new C(a.registers.named[b].sp.value,a.registers.named[b].em.value):"mu dimension"==a.registers.named[b].type?d.registers.named[b]=new N(a.registers.named[b].mu.value):"glue"==a.registers.named[b].type?(d.registers.named[b]=new P,d.registers.named[b].start.sp.value=
a.registers.named[b].start.sp.value,d.registers.named[b].start.em.value=a.registers.named[b].start.em.value,d.registers.named[b].stretch="infinite dimension"==a.registers.named[b].stretch.type?new t(a.registers.named[b].stretch.number.value,a.registers.named[b].stretch.magnitude.value):new C(a.registers.named[b].stretch.sp.value,a.registers.named[b].stretch.em.value),d.registers.named[b].shrink="infinite dimension"==a.registers.named[b].shrink.type?new t(a.registers.named[b].shrink.number.value,a.registers.named[b].shrink.magnitude.value):
new C(a.registers.named[b].shrink.sp.value,a.registers.named[b].shrink.em.value)):"mu glue"==a.registers.named[b].type&&(d.registers.named[b]=new W,d.registers.named[b].start.mu.value=a.registers.named[b].start.mu.value,d.registers.named[b].stretch="infinite dimension"==a.registers.named[b].stretch.type?new t(a.registers.named[b].stretch.number.value,a.registers.named[b].stretch.magnitude.value):new N(a.registers.named[b].stretch.mu.value),d.registers.named[b].shrink="infinite dimension"==a.registers.named[b].shrink.type?
new t(a.registers.named[b].shrink.number.value,a.registers.named[b].shrink.magnitude.value):new N(a.registers.named[b].shrink.mu.value));for(b in a.cats)d.cats[b].value=a.cats[b].value;for(b in a.mathcodes)d.mathcodes[b].value=a.mathcodes[b].value;for(b in a.uc)d.uc[b].value=a.uc[b].value;for(b in a.lc)d.lc[b].value=a.lc[b].value};fontTeX._genHTML=function(a,b,c,f){function m(a){for(var b=0,d=a.children.length;b<d;b++)m(a.children[b]);a.style.flexWrap&&(a.style.flexWrap="nowrap");return a}function A(b,
g,p,v,k){function u(c,k,F){var l=b[k],x=b[k+1]||{};switch(c){default:if("glue"!=l.type&&"kern"!=l.type&&"vglue"!=l.type&&"vkern"!=l.type)return u(2,k,F);l.italicCorrection&&(l.italicCorrection=Z||"");if("glue"==l.type&&l.isNonScript)return"script"!=g&&"scriptscript"!=g||"glue"!=x.type&&"vglue"!=x.type&&"kern"!=x.type&&"vkern"!=x.type||(b.splice(k+1,1),F--),[k,F];"glue"==l.type&&"mu glue"==l.glue.type?l.glue=new P(new C(0,l.glue.start.mu.value/18),"infinite dimension"==l.glue.stretch.type?l.glue.stretch:
new C(0,~~(l.glue.stretch.mu.value/18)),"infinite dimension"==l.glue.shrink.type?l.glue.shrink:new C(0,~~(l.glue.shrink.mu.value/18))):"kern"==l.type&&"mu dimension"==l.dimen.type?l.dimen=new C(0,~~(l.dimen.mu.value/18)):"vglue"==l.type&&(l.type="vkern",l.dimen=l.glue.start,delete l.glue);B.push(l);break;case 2:return"font modifier"==l.type?(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"].includes(l.value)?g=l.value.substring(0,l.value.length-5):v=l.value,b.splice(k,1),k--,F--,[k,F]):
u(3,k,F);case 3:return"mathchoice"==l.type?(c=l.groups[{display:0,text:1,script:2,scriptscript:3}[g]],b.splice.bind(b,k,1).apply(b,c.nucleus),F+=c.nucleus.length-1,k--,[k,F]):u(4,k,F);case 4:if("atom"==l.type&&2==l.atomType){if(!q[0]||[1,2,3,4,6].includes(q[q.length-1].atomType))l.atomType=0;return u(10,k,F)}return u(5,k,F);case 5:if("atom"!=l.type||!q.length||3!=l.atomType&&5!=l.atomType&&6!=l.atomType)return u(6,k,F);q[0]&&2==q[q.length-1].atomType&&(q[q.length-1].atomType=0);return u(10,k,F);case 6:return"atom"==
l.type&&[4,"inner","over","under","vcenter","rad","acc"].includes(l.atomType)?u(10,k,F):u(7,k,F);case 7:return"atom"==l.type&&1==l.atomType?("display"==l.limits&&(l.limits="display"==g),u(10,k,F)):u(8,k,F);case 8:if("fraction"==l.type&&l){k=function(a,b,c){switch(b){default:B.splice(B.length-(c?1:0),0,{type:"kern",dimen:l.nullDelimiterSpace});break;case "|":case "/":case "\\":case "\u2016":case "\u23aa":case "\u23d0":case "\u27e8":case "\u27e9":var d=Math.max(X,fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,
n));a.style.height=d+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";a.height=100;a.width=fontTeX.fontDimen.widthOf(b,n)/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))*100;d=a.getContext("2d");d.textAlign="center";d.font=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))+"px "+n;d.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,n)/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n)));l.div.insertBefore(a,
c?l.div.firstElementChild:null);break;case "(":case ")":d=Math.max(X,fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.style.height=d+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";if(2>=d)a.height=100,a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n)),d=a.getContext("2d"),d.textAlign="center",d.font=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,
n))+"px "+n,d.translate(0,100),d.fillText(b,a.width/2,100*-fontTeX.fontDimen.depthOf(b,n)/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n)));else{var f=fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n);a.height=50*d;a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));d=a.getContext("2d");d.textAlign="center";d.font=100/f+"px "+n;d.fillText(b,a.width/2,50-100*fontTeX.fontDimen.depthOf(b,
n)/f);var h=d.getImageData(0,0,a.width,50);d.clearRect(0,0,a.width,a.height);d.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,n)/f);d.clearRect(0,50,a.width,a.height);d.putImageData(h,0,a.height-50);var m=d.createImageData(a.width,a.height-100);b=d.getImageData(0,49,a.width,1).data;f=h.data.slice(0,4*a.width);for(var g=0,A=m.height/2;g<A;g++)for(var k=0,p=a.width;k<p;k++)m.data[g*a.width*4+4*k]=b[4*k],m.data[g*a.width*4+4*k+1]=b[4*k+1],m.data[g*a.width*4+4*k+2]=b[4*k+2],m.data[g*a.width*
4+4*k+3]=b[4*k+3],m.data[~~(g+m.height/2)*a.width*4+4*k]=f[4*k],m.data[~~(g+m.height/2)*a.width*4+4*k+1]=f[4*k+1],m.data[~~(g+m.height/2)*a.width*4+4*k+2]=f[4*k+2],m.data[~~(g+m.height/2)*a.width*4+4*k+3]=f[4*k+3];d.putImageData(m,0,50)}l.div.insertBefore(a,c?l.div.firstElementChild:null);break;case "[":case "]":case "\u27ee":case "\u27ef":case "\u2191":case "\u2193":case "\u2195":case "\u21d1":case "\u21d3":case "\u21d5":case "\u2308":case "\u2309":case "\u230a":case "\u230b":case "\u23b0":case "\u23b1":d=
Math.max(X,fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.style.height=d+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";f=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.height=100*Math.max(d,1);a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));d=a.getContext("2d");d.textAlign="center";d.font=f+"px "+n;d.fillText(b,a.width/2,50-
fontTeX.fontDimen.depthOf(b,n)*f);h=d.getImageData(0,0,a.width,50);d.clearRect(0,0,a.width,a.height);d.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,n)*f);d.clearRect(0,50,a.width,a.height);d.putImageData(h,0,a.height-50);if(100<a.height){m=d.createImageData(a.width,a.height-100);b=d.getImageData(0,49,a.width,1).data;f=h.data.slice(0,4*a.width);g=0;for(A=m.height/2;g<A;g++)for(k=0,p=a.width;k<p;k++)m.data[g*a.width*4+4*k]=b[4*k],m.data[g*a.width*4+4*k+1]=b[4*k+1],m.data[g*a.width*4+4*k+2]=
b[4*k+2],m.data[g*a.width*4+4*k+3]=b[4*k+3],m.data[~~(g+m.height/2)*a.width*4+4*k]=f[4*k],m.data[~~(g+m.height/2)*a.width*4+4*k+1]=f[4*k+1],m.data[~~(g+m.height/2)*a.width*4+4*k+2]=f[4*k+2],m.data[~~(g+m.height/2)*a.width*4+4*k+3]=f[4*k+3];d.putImageData(m,0,50)}l.div.insertBefore(a,c?l.div.firstElementChild:null);break;case "{":case "}":d=Math.max(X,fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.style.height=d+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign=
"middle";f=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.height=100*Math.max(d,1);a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));d=a.getContext("2d");d.textAlign="center";d.font=f+"px "+n;d.fillText(b,a.width/2,33-fontTeX.fontDimen.depthOf(b,n)*f);h=d.getImageData(0,0,a.width,33);d.clearRect(0,0,a.width,a.height);d.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,n)*f);g=d.getImageData(0,
0,a.width,33);d.clearRect(0,0,a.width,a.height);d.fillText(b,a.width/2,a.height/2+50-fontTeX.fontDimen.depthOf(b,n)*f);d.clearRect(0,0,a.width,Math.floor(a.height/2)-17);d.clearRect(0,Math.ceil(a.height/2)+17,a.width,a.height);d.putImageData(g,0,0);d.putImageData(h,0,a.height-33);if(100<a.height){m=d.createImageData(a.width,Math.ceil(a.height/2)-50);b=g.data.slice(128*a.width,132*a.width);f=d.getImageData(0,Math.ceil(a.height/2)-16,a.width,1).data;g=0;for(A=m.height/2;g<A;g++)for(k=0,p=a.width;k<
p;k++)m.data[g*a.width*4+4*k]=b[4*k],m.data[g*a.width*4+4*k+1]=b[4*k+1],m.data[g*a.width*4+4*k+2]=b[4*k+2],m.data[g*a.width*4+4*k+3]=b[4*k+3],m.data[~~(g+m.height/2)*a.width*4+4*k]=f[4*k],m.data[~~(g+m.height/2)*a.width*4+4*k+1]=f[4*k+1],m.data[~~(g+m.height/2)*a.width*4+4*k+2]=f[4*k+2],m.data[~~(g+m.height/2)*a.width*4+4*k+3]=f[4*k+3];var q=d.createImageData(a.width,Math.ceil(a.height/2)-50);b=d.getImageData(0,Math.floor(a.height/2)+16,a.width,1).data;f=h.data.slice(0,4*a.width);g=0;for(A=m.height/
2;g<A;g++)for(k=0,p=a.width;k<p;k++)q.data[g*a.width*4+4*k]=b[4*k],q.data[g*a.width*4+4*k+1]=b[4*k+1],q.data[g*a.width*4+4*k+2]=b[4*k+2],q.data[g*a.width*4+4*k+3]=b[4*k+3],q.data[~~(g+m.height/2)*a.width*4+4*k]=f[4*k],q.data[~~(g+m.height/2)*a.width*4+4*k+1]=f[4*k+1],q.data[~~(g+m.height/2)*a.width*4+4*k+2]=f[4*k+2],q.data[~~(g+m.height/2)*a.width*4+4*k+3]=f[4*k+3];d.putImageData(m,0,33);d.putImageData(q,0,a.height/2+17)}l.div.insertBefore(a,c?l.div.firstElementChild:null)}};c={type:"atom",atomType:"inner",
nucleus:null,superscript:null,subscript:null,style:g,div:document.createElement("div")};B.push(c);q.push(c);l.style=g;l.div=c.div;l.div.style.display="inline-block";l.div.style.whiteSpace="nowrap";var r=fontTeX.fontDimen.heightOf("x",n)/2+fontTeX.fontDimen.baselineHeightOf(n),H=document.createElement("div"),E=document.createElement("div");H.style.display=E.style.display="inline-block";H.style.verticalAlign="text-bottom";H.style.position="relative";E.style.verticalAlign="text-bottom";E.style.position=
"relative";A(l.numerator,"display"==g?"text":"text"==g?"script":"scriptscript",p,v,H);A(l.denominator,"display"==g?"text":"text"==g?"script":"scriptscript",!0,v,E);c="from font"==l.barWidth?new C(0,65536*fontTeX.fontDimen.visibleWidthOf("|",n)):new C(l.barWidth);c.em.value+=c.sp.value/65536/6*8/h*65536;c.sp.value=0;F=c.em.value/65536+"em";var y=c.em.value*("text"==g||"script"==g?.707106781:1)/65536+"em";x=c.em.value*("script"==g||"scriptscript"==g?.707106781:1)/65536;a.appendChild(E);a.appendChild(H);
c=H.offsetWidth;var w=H.offsetHeight/h,G=c*("text"==g||"script"==g?.707106781:1),t=E.offsetHeight/h,D=E.offsetWidth,z=t*("text"==g||"script"==g?.707106781:1),L=D*("text"==g||"script"==g?.707106781:1);a.removeChild(E);a.removeChild(H);"text"==g||"script"==g?(H.style.fontSize=E.style.fontSize=".707106781em",H.style.paddingTop="calc("+r/.707106781+"em + "+F+" / 2)",H.style.top="calc("+-r/.707106781+"em - "+F+" / 2)",E.style.top="calc("+(t-r/.707106781)+"em + "+F+"/ 2 - "+t+"em)",l.div.style.paddingBottom=
"calc("+(z-r)+"em + "+y+" / 2)"):(H.style.fontSize=E.style.fontSize="",H.style.paddingTop="calc("+r+"em + "+y+" / 2)",H.style.top="calc("+-r+"em - "+y+" / 2)",E.style.top="calc("+(t-r)+"em + "+y+"/ 2 - "+t+"em)",l.div.style.paddingBottom="calc("+(t-r)+"em + "+y+" / 2)");E.style.height=0;F=c>D?E:H;var J=c>D?H:E,M=document.createElement("div"),N=document.createElement("div"),I=document.createElement("div");M.style.display="inline-block";M.style.position="relative";M.style.verticalAlign="text-bottom";
M.style.top=-r+"em";M.style.width=".05em";M.style.height=0;N.style.borderTop=y+" solid currentColor";N.style.padding="0 .05em";N.style.position="relative";N.style.top="calc("+y+" / -2)";N.style.display="inline-block";N.style.height=0;I.style.display="inline-block";I.style.visibility="hidden";M.style.webkitUserSelect=M.style.mozUserSelect=M.style.msUserSelect=M.style.userSelect="none";I.style.width=Math.max(G,L)/h+"em";N.appendChild(I);M.appendChild(N);l.div.appendChild(M);y=document.createElement("div");
r=document.createElement("div");I=document.createElement("div");G=F.firstElementChild;L=document.createElement("div");M=document.createElement("div");G&&(G.style.width="100%",G.insertBefore(L,G.firstElementChild),G.appendChild(M),r.appendChild(G));y.style.position="relative";y.style.display="inline-block";I.style.display="inline-block";I.style.width=0;I.style.height=(c>D?t:w)+"em";I.innerHTML="\u00a0";I.style.width=Math.max(c,D)/h+"em";r.style.position="absolute";L.style.flexGrow=M.style.flexGrow=
L.style.flexShrink=M.style.flexShrink=1;F.style.width=r.style.left=r.style.right=r.style.top=0;y.appendChild(r);y.appendChild(I);F.appendChild(y);l.div.appendChild(F);l.div.appendChild(J);F=document.createElement("div");F.style.display="inline-block";F.style.width=".05em";l.div.appendChild(F);F=document.createElement("canvas");r=document.createElement("canvas");var X="display"==g?2.416666666:"text"==g?1.416666666:0;F.style.display=r.style.display="inline-block";">"==l.delims[0]&&(l.delims[0]="\u27e9");
">"==l.delims[1]&&(l.delims[1]="\u27e9");"<"==l.delims[0]&&(l.delims[0]="\u27e8");"<"==l.delims[1]&&(l.delims[1]="\u27e8");k(F,l.delims[0],!0);k(r,l.delims[1],!1);c={display:{display:1,text:1,script:.707106781,scriptscript:.5},text:{display:1,text:1,script:.707106781,scriptscript:.5},script:{display:1.414213562,text:1.414213562,script:1,scriptscript:.707106781},scriptscript:{display:2,text:2,script:1.414213562,scriptscript:1}}[K.displayedStyle][g];l.div.renderedDepth=(z-fontTeX.fontDimen.heightOf("x",
n)/2+x/2+(-E.baseline-E.baselineOffset+E.renderedDepth)*("text"==g||"script"==g?.707106781:1))*c;l.div.renderedHeight=(fontTeX.fontDimen.heightOf("x",n)/2+x/2+(H.baseline+H.baselineOffset+H.renderedHeight)*("text"==g||"script"==g?.707106781:1))*c;l.div.baseline=E.baseline*c*("text"==g||"script"==g?.707106781:1);l.div.baselineOffset=(z-fontTeX.fontDimen.heightOf("x",n)/2+x/2-E.baseline*("text"==g||"script"==g?.707106781:1))*c;Z=" "}else u(9,k,F);break;case 9:u(10,k,F);break;case 10:x=!1;"box"==l.type&&
(x=l,l=l.content);if("atom"==l.type){c={display:{display:1,text:1,script:.707106781,scriptscript:.5},text:{display:1,text:1,script:.707106781,scriptscript:.5},script:{display:1.414213562,text:1.414213562,script:1,scriptscript:.707106781},scriptscript:{display:2,text:2,script:1.414213562,scriptscript:1}}[K.displayedStyle][g];if(["over","under","rad"].includes(l.atomType)&&(l.subscript||l.superscript)||"rad"==l.atomType&&1!=c)l.nucleus=[{type:"atom",atomType:l.atomType,nucleus:l.nucleus,superscript:null,
subscript:null,index:l.index,invalid:l.invalid}],l.atomType=0;B.push(l);q.push(l);l.style=g;l.div=document.createElement("div");l.div.style.display="inline-block";l.div.style.whiteSpace="nowrap";l.div.renderedHeight=0;l.div.renderedDepth=-.5;l.div.baselineOffset=0;if(l.invalid){if(l.nucleus&&"symbol"==l.nucleus.type)l.nucleus.invalid=!0;else if(l.nucleus)for(k=0,F=l.nucleus.length;k<F;k++)l.nucleus[k].invalid=!0;l.superscript&&(l.superscript[0].invalid=!0);l.subscript&&(l.subscript[0].invalid=!0)}![0,
1,2,3,4,5,6,"inner"].includes(l.atomType)||!l.nucleus||1!=l.nucleus.length||1!=l.nucleus[0].atomType||l.nucleus[0].limits||l.superscript||l.subscript||l.nucleus[0].nucleus&&("symbol"==l.nucleus[0].nucleus.type&&O["operator.growchars"][0].includes(l.nucleus[0].nucleus["char"])||1==l.nucleus[0].nucleus.length&&7==l.nucleus[0].nucleus[0].atomType&&O["operator.growchars"][0].includes(l.nucleus[0].nucleus[0].nucleus[0]["char"]))||(l.superscript=l.nucleus[0].superscript,l.subscript=l.nucleus[0].subscript,
l.nucleus=l.nucleus[0].nucleus);J=0;l.nucleus&&"symbol"==l.nucleus.type?(10==l.nucleus.code?(l.isLineBreak=!0,l.div.style.width="100%"):(l.div.innerHTML='<div style="white-space:pre;display:inline-block;'+(l.nucleus.invalid?"color:red;":"")+{nm:7==l.atomType?'font-style:italic"><div style="display:inline-block;margin:0 '+fontTeX.fontDimen.italCorrOf(l.nucleus["char"],n)+"em 0 "+fontTeX.fontDimen.leftOffsetOf(l.nucleus["char"],n,"it")+"em":"",rm:"",bf:"font-weight:bold;",it:"font-style:italic;",sl:"font-style:oblique;"}[v]+
'">'+(45==l.nucleus.code?"\u2212":l.nucleus["char"])+"</div>"+(7==l.atomType?"</div>":""),k="nm"==v?7==l.atomType?"it":"nm":v,l.div.renderedHeight=fontTeX.fontDimen.heightOf(l.nucleus["char"],n,k)*c,l.div.renderedDepth=fontTeX.fontDimen.trueDepthOf(l.nucleus["char"],n,k)*c,l.div.baseline=fontTeX.fontDimen.baselineHeightOf(n)*c,J=fontTeX.fontDimen.scriptOffsetOf(l.nucleus["char"],n,"nm"==v&&7==l.atomType?"it":v)),Z=l.nucleus["char"]):Array.isArray(l.nucleus)&&(Z=A(l.nucleus,g,p||"over"==l.atomType||
"rad"==l.atomType,v,l.div)||Z,l.div.renderedHeight*=c,l.div.renderedDepth*=c,l.div.baseline*=c,l.div.baselineOffset*=c,!l.div.firstElementChild.empty||l.superscript||l.subscript||l.delimited||["rad","acc","over","under"].includes(l.atomType)||(l.div.empty=!0));l.div.style.fontSize=c+"em";"display"==g&&l.atomType==d.mathcodes.op&&l.nucleus&&("symbol"==l.nucleus.type||1==l.nucleus.length&&l.nucleus[0].nucleus&&"symbol"==l.nucleus[0].nucleus.type&&7==l.nucleus[0].atomType)&&(F=1,O["operator.growchars"][0].includes(l.nucleus["char"]||
l.nucleus[0].nucleus["char"])&&(F=O["operator.growamount"][0],l.div.renderedHeight*=F,l.div.renderedDepth*=F,l.div.firstElementChild.style.fontSize=F+"em",J*=F),r=fontTeX.fontDimen.heightOf("x",n)/2,k=(l.div.renderedHeight-r-l.div.renderedDepth-r)/2,l.div.firstElementChild.style.top=k/F+"em",l.div.renderedHeight-=k,l.div.renderedDepth+=k,l.div.firstElementChild.style.position="relative",l.div.firstElementChild.style.marginTop=-k/F+"em",l.div.firstElementChild.style.marginBottom=k/F+"em");l.delimited&&
(k=function(a,b,d){switch(b){default:B.splice(B.length-(d?1:0),0,{type:"kern",dimen:l.nullDelimiterSpace});break;case "|":case "/":case "\\":case "\u2016":case "\u23aa":case "\u23d0":case "\u27e8":case "\u27e9":var c=fontTeX.fontDimen.heightOf("x",n)/2,f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";l.div.renderedHeight=
Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);a.height=100;a.width=fontTeX.fontDimen.widthOf(b,n)/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))*100;var h=a.getContext("2d");h.textAlign="center";h.font=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))+"px "+n;h.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,n)/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n)));l.div.insertBefore(a,d?l.div.firstElementChild:
null);break;case "(":case ")":c=fontTeX.fontDimen.heightOf("x",n)/2;f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";l.div.renderedHeight=Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);if(2>=f)a.height=100,a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*
100*(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n)),h=a.getContext("2d"),h.textAlign="center",h.font=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))+"px "+n,h.translate(0,100),h.fillText(b,a.width/2,100*-fontTeX.fontDimen.depthOf(b,n)/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n)));else{var m=fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n);a.height=50*f;a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*
(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));h=a.getContext("2d");h.textAlign="center";h.font=100/m+"px "+n;h.fillText(b,a.width/2,50-100*fontTeX.fontDimen.depthOf(b,n)/m);c=h.getImageData(0,0,a.width,50);h.clearRect(0,0,a.width,a.height);h.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,n)/m);h.clearRect(0,50,a.width,a.height);h.putImageData(c,0,a.height-50);var g=h.createImageData(a.width,a.height-100);b=h.getImageData(0,49,a.width,1).data;m=c.data.slice(0,4*a.width);
f=0;for(var A=g.height/2;f<A;f++)for(var k=0,p=a.width;k<p;k++)g.data[f*a.width*4+4*k]=b[4*k],g.data[f*a.width*4+4*k+1]=b[4*k+1],g.data[f*a.width*4+4*k+2]=b[4*k+2],g.data[f*a.width*4+4*k+3]=b[4*k+3],g.data[~~(f+g.height/2)*a.width*4+4*k]=m[4*k],g.data[~~(f+g.height/2)*a.width*4+4*k+1]=m[4*k+1],g.data[~~(f+g.height/2)*a.width*4+4*k+2]=m[4*k+2],g.data[~~(f+g.height/2)*a.width*4+4*k+3]=m[4*k+3];h.putImageData(g,0,50)}l.div.insertBefore(a,d?l.div.firstElementChild:null);break;case "[":case "]":case "\u27ee":case "\u27ef":case "\u2191":case "\u2193":case "\u2195":case "\u21d1":case "\u21d3":case "\u21d5":case "\u2308":case "\u2309":case "\u230a":case "\u230b":case "\u23b0":case "\u23b1":c=
fontTeX.fontDimen.heightOf("x",n)/2;f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";m=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.height=100*Math.max(f,1);a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));
h=a.getContext("2d");h.textAlign="center";h.font=m+"px "+n;h.fillText(b,a.width/2,50-fontTeX.fontDimen.depthOf(b,n)*m);l.div.renderedHeight=Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);c=h.getImageData(0,0,a.width,50);h.clearRect(0,0,a.width,a.height);h.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,n)*m);h.clearRect(0,50,a.width,a.height);h.putImageData(c,0,a.height-50);if(100<a.height){g=h.createImageData(a.width,a.height-100);b=h.getImageData(0,
49,a.width,1).data;m=c.data.slice(0,4*a.width);f=0;for(A=g.height/2;f<A;f++)for(k=0,p=a.width;k<p;k++)g.data[f*a.width*4+4*k]=b[4*k],g.data[f*a.width*4+4*k+1]=b[4*k+1],g.data[f*a.width*4+4*k+2]=b[4*k+2],g.data[f*a.width*4+4*k+3]=b[4*k+3],g.data[~~(f+g.height/2)*a.width*4+4*k]=m[4*k],g.data[~~(f+g.height/2)*a.width*4+4*k+1]=m[4*k+1],g.data[~~(f+g.height/2)*a.width*4+4*k+2]=m[4*k+2],g.data[~~(f+g.height/2)*a.width*4+4*k+3]=m[4*k+3];h.putImageData(g,0,50)}l.div.insertBefore(a,d?l.div.firstElementChild:
null);break;case "{":case "}":c=fontTeX.fontDimen.heightOf("x",n)/2;f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,n)+"em";a.style.verticalAlign="middle";m=100/(fontTeX.fontDimen.heightOf(b,n)+fontTeX.fontDimen.depthOf(b,n));a.height=100*Math.max(f,1);a.width=fontTeX.fontDimen.widthOf(b,n)/fontTeX.fontDimen.heightOf(b,n)*100*(fontTeX.fontDimen.heightOf(b,n)+
fontTeX.fontDimen.depthOf(b,n));h=a.getContext("2d");h.textAlign="center";h.font=m+"px "+n;l.div.renderedHeight=Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);h.fillText(b,a.width/2,33-fontTeX.fontDimen.depthOf(b,n)*m);c=h.getImageData(0,0,a.width,33);h.clearRect(0,0,a.width,a.height);h.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,n)*m);f=h.getImageData(0,0,a.width,33);h.clearRect(0,0,a.width,a.height);h.fillText(b,a.width/2,a.height/2+50-fontTeX.fontDimen.depthOf(b,
n)*m);h.clearRect(0,0,a.width,Math.floor(a.height/2)-17);h.clearRect(0,Math.ceil(a.height/2)+17,a.width,a.height);h.putImageData(f,0,0);h.putImageData(c,0,a.height-33);if(100<a.height){g=h.createImageData(a.width,Math.ceil(a.height/2)-50);b=f.data.slice(128*a.width,132*a.width);m=h.getImageData(0,Math.ceil(a.height/2)-16,a.width,1).data;f=0;for(A=g.height/2;f<A;f++)for(k=0,p=a.width;k<p;k++)g.data[f*a.width*4+4*k]=b[4*k],g.data[f*a.width*4+4*k+1]=b[4*k+1],g.data[f*a.width*4+4*k+2]=b[4*k+2],g.data[f*
a.width*4+4*k+3]=b[4*k+3],g.data[~~(f+g.height/2)*a.width*4+4*k]=m[4*k],g.data[~~(f+g.height/2)*a.width*4+4*k+1]=m[4*k+1],g.data[~~(f+g.height/2)*a.width*4+4*k+2]=m[4*k+2],g.data[~~(f+g.height/2)*a.width*4+4*k+3]=m[4*k+3];var q=h.createImageData(a.width,Math.ceil(a.height/2)-50);b=h.getImageData(0,Math.floor(a.height/2)+16,a.width,1).data;m=c.data.slice(0,4*a.width);f=0;for(A=g.height/2;f<A;f++)for(k=0,p=a.width;k<p;k++)q.data[f*a.width*4+4*k]=b[4*k],q.data[f*a.width*4+4*k+1]=b[4*k+1],q.data[f*a.width*
4+4*k+2]=b[4*k+2],q.data[f*a.width*4+4*k+3]=b[4*k+3],q.data[~~(f+g.height/2)*a.width*4+4*k]=m[4*k],q.data[~~(f+g.height/2)*a.width*4+4*k+1]=m[4*k+1],q.data[~~(f+g.height/2)*a.width*4+4*k+2]=m[4*k+2],q.data[~~(f+g.height/2)*a.width*4+4*k+3]=m[4*k+3];h.putImageData(g,0,33);h.putImageData(q,0,a.height/2+17)}l.div.insertBefore(a,d?l.div.firstElementChild:null)}},F=document.createElement("canvas"),r=document.createElement("canvas"),F.style.display=r.style.display="inline-block",">"==l.delims[0]&&(l.delims[0]=
"\u27e9"),">"==l.delims[1]&&(l.delims[1]="\u27e9"),"<"==l.delims[0]&&(l.delims[0]="\u27e8"),"<"==l.delims[1]&&(l.delims[1]="\u27e8"),k(F,l.delims[0],!0),k(r,l.delims[1],!1));!l.superscript&&!l.subscript||1==l.atomType&&l.limits?(l.superscript||l.subscript)&&1==l.atomType&&l.limits&&(w=l.div.firstElementChild,a.appendChild(l.div),t=l.div.offsetWidth,a.removeChild(l.div),l.subscript&&!l.superscript?(l.div.renderedDepth=Math.max(l.div.renderedDepth,0),z=document.createElement("div"),k=document.createElement("div"),
z.style.display="inline-block",z.style.verticalAlign="text-bottom",z.style.position="relative",k.innerText="\u00a0",k.style.verticalAlign="text-top",k.style.display="inline-block",k.style.width=0,A(l.subscript,"display"==g||"text"==g?"script":"scriptscript",!0,v,z),z.style.fontSize="scriptscript"==g?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)",a.appendChild(z),H=z.offsetWidth+1,z.style.fontSize="50px",E=z.offsetHeight/50,a.removeChild(z),"scriptscript"==g?(z.style.fontSize="",
z.style.top=-z.baseline-z.baselineOffset-l.div.renderedDepth+"em",k.style.paddingBottom=E-l.div.baseline+l.div.baselineOffset+l.div.renderedDepth+"em"):(z.style.fontSize=".707106781em",z.style.top=(-l.div.baseline-l.div.baselineOffset+l.div.renderedDepth)/.707106781+"em",k.style.paddingBottom=.707106781*E-l.div.baseline-l.div.baselineOffset+l.div.renderedDepth+"em"),z.style.height=0,H<t?(F=z.firstElementChild,J=w,l.div.insertBefore(z,w),z.style.width=0):(F=w,J=z.firstElementChild,l.div.appendChild(z)),
y=document.createElement("div"),y.style.display="inline-block",y.style.position="relative",I=document.createElement("div"),I.style.display="inline-block",I.style.width=0,I.style.visibility="hidden",I.style.webkitUserSelect=I.style.mozUserSelect=I.style.msUserSelect=I.style.userSelect="none",I.appendChild(m(F.cloneNode(!0))),y.appendChild(I),I=document.createElement("div"),I.style.position="absolute",I.style.left=I.style.right=0,I.style.textAlign="center",I.style.display="inline-block",I.appendChild(F),
y.appendChild(I),y.style.width=Math.max(H,t)/h/("scriptscript"!=g&&J==w?.707106781:1)+"em",H<t?z.appendChild(y):(I=document.createElement("div"),I.style.display="inline-block",I.style.width=0,I.appendChild(y),l.div.insertBefore(I,z)),l.div.insertBefore(k,l.div.firstElementChild),l.div.renderedDepth+=(E*("scriptscript"==g?1:.707106781)-z.baseline-z.baselineOffset+z.renderedDepth)*c):l.superscript&&!l.subscript?(r=document.createElement("div"),r.style.display="inline-block",r.style.verticalAlign="text-bottom",
A(l.superscript,"display"==g||"text"==g?"script":"scriptscript",p,v,r),r.style.fontSize="scriptscript"==g?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)",a.appendChild(r),H=r.offsetWidth+1,r.style.fontSize="50px",E=r.offsetHeight/50,a.removeChild(r),"scriptscript"==g?(r.style.fontSize="",r.style.marginBottom=l.div.baseline+l.div.baselineOffset+l.div.renderedHeight+"em"):(r.style.fontSize=".707106781em",r.style.marginBottom=(l.div.baseline+l.div.baselineOffset+l.div.renderedHeight)/
.707106781+"em"),H<t?(F=r.firstElementChild,J=w,l.div.insertBefore(r,w),r.style.width=0):(F=w,J=r.firstElementChild,l.div.appendChild(r)),y=document.createElement("div"),y.style.display="inline-block",y.style.position="relative",I=document.createElement("div"),I.style.display="inline-block",I.style.width=0,I.style.visibility="hidden",I.style.webkitUserSelect=I.style.mozUserSelect=I.style.msUserSelect=I.style.userSelect="none",I.appendChild(m(F.cloneNode(!0))),y.appendChild(I),I=document.createElement("div"),
I.style.position="absolute",I.style.left=I.style.right=0,I.style.textAlign="center",I.style.display="inline-block",I.appendChild(F),y.appendChild(I),y.style.width=Math.max(H,t)/h/("scriptscript"!=g&&J==w?.707106781:1)+"em",H<t?r.appendChild(y):(I=document.createElement("div"),I.style.display="inline-block",I.style.width=0,I.appendChild(y),l.div.insertBefore(I,r)),l.div.renderedHeight+=(r.baseline+r.baselineOffset+r.renderedHeight)*("scriptscript"==g?1:.707106781)*c):l.superscript&&l.subscript&&(l.div.renderedDepth=
Math.max(l.div.renderedDepth,0),z=document.createElement("div"),z.style.display="inline-block",z.style.verticalAlign="text-bottom",z.style.position="relative",A(l.subscript,"display"==g||"text"==g?"script":"scriptscript",!0,v,z),z.style.fontSize="scriptscript"==g?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)",a.appendChild(z),y=z.offsetWidth+1,z.style.fontSize="50px",F=z.offsetHeight/50,a.removeChild(z),r=document.createElement("div"),r.style.display="inline-block",r.style.verticalAlign=
"text-bottom",r.style.position="relative",A(l.superscript,"display"==g||"text"==g?"script":"scriptscript",p,v,r),r.style.fontSize="scriptscript"==g?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)",a.appendChild(r),I=r.offsetWidth+1,r.style.fontSize="50px",a.removeChild(r),k=document.createElement("div"),k.innerText="\u00a0",k.style.verticalAlign="text-top",k.style.display="inline-block",k.style.width=0,"scriptscript"==g?(z.style.fontSize=r.style.fontSize="",z.style.top=-z.baseline-
z.baselineOffset-l.div.renderedDepth+"em",k.style.paddingBottom=E-l.div.baseline+l.div.baselineOffset+l.div.renderedDepth+"em",r.style.marginBottom=l.div.baseline+l.div.baselineOffset+l.div.renderedHeight+"em"):(z.style.fontSize=r.style.fontSize=".707106781em",z.style.top=(-l.div.baseline-l.div.baselineOffset+l.div.renderedDepth)/.707106781+"em",k.style.paddingBottom=.707106781*F-l.div.baseline+l.div.baselineOffset+l.div.renderedDepth+"em",r.style.marginBottom=(l.div.baseline+l.div.baselineOffset+
l.div.renderedHeight)/.707106781+"em"),z.style.height=0,y<=I&&t<=I?(l.div.insertBefore(z,w),l.div.appendChild(r),z.style.width=0,y=document.createElement("div"),J=document.createElement("div"),y.style.display=J.style.display="inline-block",y.style.position=J.style.position="relative",D=document.createElement("div"),t=document.createElement("div"),D.style.display=t.style.display="inline-block",D.style.width=t.style.width=0,D.style.visibility=t.style.visibility="hidden",D.style.webkitUserSelect=D.style.mozUserSelect=
D.style.msUserSelect=D.style.userSelect=t.style.webkitUserSelect=t.style.mozUserSelect=t.style.msUserSelect=t.style.userSelect="none",D.appendChild(m(z.firstElementChild.cloneNode(!0))),t.appendChild(m(w.cloneNode(!0))),y.appendChild(D),J.appendChild(t),D=document.createElement("div"),t=document.createElement("div"),D.style.position=t.style.position="absolute",D.style.left=D.style.right=0,t.style.left=t.style.right=0,D.style.textAlign=t.style.textAlign="center",D.style.display=t.style.display="inline-block",
D.appendChild(z.firstElementChild),t.appendChild(w),y.appendChild(D),J.appendChild(t),y.style.width=I/h/("scriptscript"!=g?.707106781:1)+"em",J.style.width=I/h+"em",z.appendChild(y),I=document.createElement("div"),I.style.display="inline-block",I.style.width=0,I.appendChild(J),l.div.insertBefore(I,r)):y<=t&&I<=t?(l.div.insertBefore(z,w),l.div.insertBefore(r,w),z.style.width=r.style.width=0,y=document.createElement("div"),I=document.createElement("div"),y.style.display=I.style.display="inline-block",
y.style.position=I.style.position="relative",D=document.createElement("div"),G=document.createElement("div"),D.style.display=G.style.display="inline-block",D.style.width=G.style.width=0,D.style.visibility=G.style.visibility="hidden",D.style.webkitUserSelect=D.style.mozUserSelect=D.style.msUserSelect=D.style.userSelect=G.style.webkitUserSelect=G.style.mozUserSelect=G.style.msUserSelect=G.style.userSelect="none",D.appendChild(m(z.firstElementChild.cloneNode(!0))),G.appendChild(m(r.firstElementChild.cloneNode(!0))),
y.appendChild(D),I.appendChild(G),D=document.createElement("div"),G=document.createElement("div"),D.style.position=G.style.position="absolute",D.style.left=D.style.right=0,G.style.left=G.style.right=0,D.style.textAlign=G.style.textAlign="center",D.style.display=G.style.display="inline-block",D.appendChild(z.firstElementChild),G.appendChild(r.firstElementChild),y.appendChild(D),I.appendChild(G),y.style.width=t/h/("scriptscript"!=g?.707106781:1)+"em",I.style.width=t/h/("scriptscript"!=g?.707106781:
1)+"em",z.appendChild(y),r.appendChild(I)):t<=y&&I<=y&&(l.div.insertBefore(r,w),l.div.appendChild(z),r.style.width=0,I=document.createElement("div"),J=document.createElement("div"),I.style.display=J.style.display="inline-block",I.style.position=J.style.position="relative",G=document.createElement("div"),t=document.createElement("div"),G.style.display=t.style.display="inline-block",G.style.width=t.style.width=0,G.style.visibility=t.style.visibility="hidden",G.style.webkitUserSelect=G.style.mozUserSelect=
G.style.msUserSelect=G.style.userSelect=t.style.webkitUserSelect=t.style.mozUserSelect=t.style.msUserSelect=t.style.userSelect="none",G.appendChild(m(r.firstElementChild.cloneNode(!0))),t.appendChild(m(w.cloneNode(!0))),I.appendChild(G),J.appendChild(t),G=document.createElement("div"),t=document.createElement("div"),G.style.position=t.style.position="absolute",G.style.left=G.style.right=0,t.style.left=t.style.right=0,G.style.textAlign=t.style.textAlign="center",G.style.display=t.style.display="inline-block",
G.appendChild(r.firstElementChild),t.appendChild(w),I.appendChild(G),J.appendChild(t),I.style.width=y/h/("scriptscript"!=g?.707106781:1)+"em",J.style.width=y/h+"em",r.appendChild(I),I=document.createElement("div"),I.style.display="inline-block",I.style.width=0,I.appendChild(J),l.div.insertBefore(I,z)),l.div.insertBefore(k,l.div.firstElementChild),l.div.renderedDepth+=(F*("scriptscript"==g?1:.707106781)-z.baseline-z.baselineOffset+z.renderedDepth)*c,l.div.renderedHeight+=(r.baseline+r.baselineOffset+
r.renderedHeight)*("scriptscript"==g?1:.707106781)*c)):l.subscript&&!l.superscript?(z=document.createElement("div"),k=document.createElement("div"),z.style.display="inline-block",z.style.verticalAlign="text-bottom",z.style.position="relative",k.style.verticalAlign="text-top",k.innerText="\u00a0",k.style.display="inline-block",k.style.width=0,A(l.subscript,"display"==g||"text"==g?"script":"scriptscript",!0,v,z),z.style.fontSize="50px",a.appendChild(z),E=z.offsetHeight/50,a.removeChild(z),"scriptscript"==
g?(z.style.fontSize="",z.style.top=Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)+Math.max(Math.max(l.div.renderedDepth,0)/c+.2,z.renderedHeight-fontTeX.fontDimen.heightOf("x",n))-E+"em",k.style.paddingBottom=Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)+Math.max(Math.max(l.div.renderedDepth,0)/c+.2,z.renderedHeight-fontTeX.fontDimen.heightOf("x",n))-E+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(z.renderedDepth+Math.max(Math.max(l.div.renderedDepth,
0)/c+.2,z.renderedHeight-fontTeX.fontDimen.heightOf("x",n)))*c)):(z.style.fontSize=".707106781em",z.style.top=Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)/.707106781+Math.max(Math.max(l.div.renderedDepth,0)/c/.707106781+.2,z.renderedHeight-fontTeX.fontDimen.heightOf("x",n))-E+"em",k.style.paddingBottom=.707106781*Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/c/.707106781+.2,z.renderedHeight-
fontTeX.fontDimen.heightOf("x",n))+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(.707106781*z.renderedDepth+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/c/.707106781+.2,z.renderedHeight-fontTeX.fontDimen.heightOf("x",n)))*c)),z.style.height=0,l.div.appendChild(z),l.div.insertBefore(k,z)):l.superscript&&!l.subscript?(r=document.createElement("div"),A(l.superscript,"display"==g||"text"==g?"script":"scriptscript",p,v,r),r.style.display="inline-block",r.style.verticalAlign="text-bottom",
r.style.position="relative","scriptscript"==g?(r.style.top=Math.max(r.baseline,r.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)-Math.max(l.div.renderedHeight/c+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",r.style.paddingTop=-Math.max(r.baseline,r.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(n)+Math.max(l.div.renderedHeight/c+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,
(r.renderedHeight+Math.max(l.div.renderedHeight/c+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n)))*c)):(r.style.fontSize=".707106781em",r.style.top=Math.max(r.baseline,r.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)/.707106781-Math.max(l.div.renderedHeight/c/.707106781+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",r.style.paddingTop=-Math.max(r.baseline,r.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(n)/
.707106781+Math.max(l.div.renderedHeight/c/.707106781+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,.707106781*(r.renderedHeight+Math.max(l.div.renderedHeight/c/.707106781+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n)))*c)),l.div.appendChild(r)):l.subscript&&l.superscript&&(z=document.createElement("div"),k=document.createElement("div"),z.style.display="inline-block",
k.style.verticalAlign="text-top",k.innerText="\u00a0",k.style.display="inline-block",k.style.width=0,A(l.subscript,"display"==g||"text"==g?"script":"scriptscript",!0,v,z),z.style.fontSize="50px",a.appendChild(z),y=z.offsetHeight,I=z.offsetWidth,a.removeChild(z),r=document.createElement("div"),r.style.display="inline-block",A(l.superscript,"display"==g||"text"==g?"script":"scriptscript",p,v,r),r.style.fontSize="50px",a.appendChild(r),E=r.offsetHeight,w=r.offsetWidth,a.removeChild(r),r.style.marginLeft=
J+"em",F=w+J>I?z:r,J=w+J>I?r:z,E/=50,y/=50,z.style.verticalAlign=r.style.verticalAlign="text-bottom",r.style.position=z.style.position="relative","scriptscript"==g?(z.style.fontSize=r.style.fontSize="",r.style.top=Math.max(r.baseline,r.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)-Math.max(l.div.renderedHeight/c+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",r.style.paddingTop=-Math.max(r.baseline,r.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(n)+
Math.max(l.div.renderedHeight/c+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,(r.renderedHeight+Math.max(l.div.renderedHeight/c+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n)))*c),z.style.top=Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)+Math.max(Math.max(l.div.renderedDepth,0)/c+.2,z.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",n))-
y+"em",k.style.paddingBottom=Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)+Math.max(Math.max(l.div.renderedDepth,0)/c+.2,z.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",n))-E+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(z.renderedDepth+Math.max(Math.max(l.div.renderedDepth,0)/c+.2,z.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",n)))*c)):(z.style.fontSize=r.style.fontSize=".707106781em",r.style.top=Math.max(r.baseline,r.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)/
.707106781-Math.max(l.div.renderedHeight/c/.707106781+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",r.style.paddingTop=-Math.max(r.baseline,r.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(n)/.707106781+Math.max(l.div.renderedHeight/c/.707106781+(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,.707106781*(r.renderedHeight+Math.max(l.div.renderedHeight/c/.707106781+
(p?.1:.2)-r.renderedHeight,r.renderedDepth+(p?.9:1)*fontTeX.fontDimen.heightOf("x",n)))*c),z.style.top=Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)/.707106781+Math.max(Math.max(l.div.renderedDepth,0)/c/.707106781+.2,z.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",n))-y+"em",k.style.paddingBottom=.707106781*Math.max(z.baseline,z.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(n)+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/c/.707106781+.2,z.renderedHeight-
.8*fontTeX.fontDimen.heightOf("x",n))+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(.707106781*z.renderedDepth+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/c/.707106781+.2,z.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",n)))*c)),z.style.height=0,F.style.width=0,l.div.appendChild(k),l.div.appendChild(F),l.div.appendChild(J));x&&"horizontal"==x.boxType?(x.to?(H=new C(x.to),H.em.value+=H.sp.value/65536/6*8/h*65536,H.sp.value=0):x.spread&&(H=new C(x.spread),H.em.value+=H.sp.value/65536/
6*8/h*65536,H.sp.value=0,x=l.div.style.fontSize,l.div.style.fontSize="50px",a.appendChild(l.div),k=l.div.offsetWidth/50,a.removeChild(l.div),l.div.style.fontSize=x,H.em.value+=65536*k),0>H.em.value?(B.splice(B.length-1,0,{type:"kern",dimen:H}),l.div.firstElementChild.style.width=0):l.div.firstElementChild.style.width=H.em.value/65536+"em",l.div.firstElementChild.style.flexWrap=""):x&&"vertical"==x.boxType&&(x.to?(E=new C(x.to),E.em.value+=E.sp.value/65536/6*8/h*65536,E.sp.value=0):x.spread&&(E=new C(x.spread),
E.em.value+=E.sp.value/65536/6*8/h*65536,E.sp.value=0,x=l.div.style.fontSize,l.div.style.fontSize="50px",a.appendChild(l.div),k=l.div.offsetHeight/50,a.removeChild(l.div),l.div.style.fontSize=x,E.em.value+=65536*k),0>E.em.value?(l.div.firstElementChild.style.height=0,l.div.firstElementChild.style.verticalAlign="text-bottom",l.div.firstElementChild.style.position="relative",l.div.firstElementChild.style.top=-E.em.value/65536+"em",l.div.renderedHeight=0,l.div.renderedDepth=0):(l.div.firstElementChild.style.height=
E.em.value/65536+"em",l.div.firstElementChild.style.verticalAlign="text-bottom",l.div.renderedDepth=Math.min(fontTeX.fontDimen.baselineHeightOf(n),E.em.value/65536),l.div.renderedHeight=Math.max(E.em.value/65536-fontTeX.fontDimen.baselineHeightOf(n),0)),l.div.firstElementChild.style.flexWrap="");switch(l.atomType){case "over":l.div.renderedHeight=Math.max(l.div.renderedHeight||0,fontTeX.fontDimen.heightOf("x",n)/2);J=document.createElement("div");E=document.createElement("div");H=document.createElement("div");
k=document.createElement("div");x=m(l.div.cloneNode(!0));E.style.display="inline-block";E.style.width=E.style.height=0;E.style.position="relative";E.style.top=-fontTeX.fontDimen.baselineHeightOf(n)-l.div.renderedHeight/c-fontTeX.fontDimen.visibleWidthOf("|",n)-.12+"em";E.style.verticalAlign="text-bottom";E.style.pointerEvents="none";H.style.display="inline-block";H.style.webkitUserSelect=H.style.mozUserSelect=H.style.msUserSelect=H.style.userSelect="none";H.style.position="relative";J.style.position=
"absolute";J.style.left=J.style.right=0;J.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",n)+"em solid currentColor";H.appendChild(J);x.style.visibility="hidden";x.style.fontSize="";H.appendChild(x);E.appendChild(H);l.div.insertBefore(E,l.div.firstElementChild);k.style.height=l.div.renderedHeight/c+fontTeX.fontDimen.visibleWidthOf("|",n)+.16+"em";k.style.display="inline-block";k.style.width=0;l.div.insertBefore(k,E);l.div.renderedHeight+=fontTeX.fontDimen.visibleWidthOf("|",n)+.16;break;case "under":l.div.renderedDepth=
Math.max(l.div.renderedDepth||0,0);F=document.createElement("div");E=document.createElement("div");H=document.createElement("div");k=document.createElement("div");x=m(l.div.cloneNode(!0));E.style.display="inline-block";E.style.width=E.style.height=0;E.style.position="relative";E.style.top=-fontTeX.fontDimen.baselineHeightOf(n)+l.div.renderedDepth/c+.12+"em";E.style.verticalAlign="text-bottom";E.style.pointerEvents="none";H.style.display="inline-block";H.style.webkitUserSelect=H.style.mozUserSelect=
H.style.msUserSelect=H.style.userSelect="none";H.style.position="relative";F.style.position="absolute";F.style.left=F.style.right=0;F.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",n)+"em solid currentColor";H.appendChild(F);x.style.visibility="hidden";x.style.fontSize="";x.style.height=0;H.appendChild(x);E.appendChild(H);l.div.insertBefore(E,l.div.firstElementChild);k.style.verticalAlign="text-top";k.innerText="\u00a0";k.style.paddingBottom=fontTeX.fontDimen.visibleWidthOf("|",n)+.16-fontTeX.fontDimen.baselineHeightOf(n)+
l.div.renderedDepth/c+"em";k.style.display="inline-block";k.style.width=0;l.div.insertBefore(k,E);l.div.renderedDepth+=fontTeX.fontDimen.visibleWidthOf("|",n)+.16;break;case "acc":c=document.createElement("div");H=document.createElement("div");c.style.display="inline-block";c.style.position="relative";"it"==v?c.style.fontStyle="italic":"sl"==v?c.style.fontStyle="oblique":"bf"==v&&(c.style.fontWeight="bold");c.style.top=Math.min(fontTeX.fontDimen.heightOf("x",n),l.div.renderedHeight)-l.div.renderedHeight+
"em";c.style.width=0;c.style.lineHeight=1.1;c.style.height="1.1em";c.style.verticalAlign="text-bottom";c.innerText=l.accChar;k=(k=!l.nucleus||"symbol"!=l.nucleus.type||"it"!=v&&"sl"!=v?0:fontTeX.fontDimen.italCorrOf(l.accChar,n))||(l.nucleus&&1==l.nucleus.length&&l.nucleus[0].nucleus&&"symbol"==l.nucleus[0].nucleus.type&&7==l.nucleus[0].atomType&&"nm"==v?fontTeX.fontDimen.italCorrOf(l.accChar,n):0);x=l.div.style.fontSize;l.div.style.fontSize="50px";a.appendChild(l.div);c.style.left=(l.div.offsetWidth/
50-fontTeX.fontDimen.widthOf(l.accChar,n,v))/2+k+"em";a.removeChild(l.div);l.div.style.fontSize=x;l.div.insertBefore(c,l.div.firstElementChild);H.style.display="inline-block";H.style.width=0;H.style.height=l.div.renderedHeight-Math.min(fontTeX.fontDimen.heightOf("x",n),l.div.renderedHeight)+fontTeX.fontDimen.heightOf(l.accChar,n,v)+"em";l.div.insertBefore(H,c);l.div.renderedHeight=l.div.renderedHeight-Math.min(fontTeX.fontDimen.heightOf("x",n),l.div.renderedHeight)+fontTeX.fontDimen.heightOf(l.accChar,
n,v);break;case "vcenter":r=fontTeX.fontDimen.heightOf("x",n)/2;k=l.div.renderedHeight-r-(l.div.renderedDepth+r);l.div.style.position="relative";l.div.style.top=k/2+"em";l.div.style.marginTop=-k/2+"em";l.div.style.marginBottom=k/2+"em";l.div.renderedHeight-=k/2;l.div.renderedDepth+=k/2;break;case "rad":l.div.renderedHeight=Math.max(l.div.renderedHeight||0,fontTeX.fontDimen.heightOf("x",n)/2),l.div.renderedDepth=Math.max(l.div.renderedDepth||0,0),a.appendChild(l.div),H=l.div.offsetWidth/h,a.removeChild(l.div),
J=document.createElement("div"),E=document.createElement("div"),F=document.createElement("div"),k=document.createElement("div"),x=m(l.div.cloneNode(!0)),E.style.display="inline-block",E.style.width=E.style.height=0,E.style.position="relative",E.style.top=-fontTeX.fontDimen.baselineHeightOf(n)-l.div.renderedHeight/c-fontTeX.fontDimen.visibleWidthOf("|",n)-.12+"em",E.style.verticalAlign="text-bottom",E.style.pointerEvents="none",F.style.display="inline-block",F.style.webkitUserSelect=F.style.mozUserSelect=
F.style.msUserSelect=F.style.userSelect="none",F.style.position="relative",J.style.position="absolute",F.style.width=H+"em",J.style.left=J.style.right=0,J.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",n)+"em solid currentColor",F.appendChild(J),F.appendChild(document.createTextNode("\u00a0")),E.appendChild(F),l.div.insertBefore(E,l.div.firstElementChild),k.style.height=l.div.renderedHeight/c+fontTeX.fontDimen.visibleWidthOf("|",n)+.16+"em",k.style.display="inline-block",k.style.width=0,l.div.insertBefore(k,
E),l.div.renderedHeight+=(fontTeX.fontDimen.visibleWidthOf("|",n)+.16)*c,c=document.createElement("canvas"),H=x=0,O["radical.build"][0]?(y=fontTeX.fontDimen.visibleWidthOf("|",n),c.height=(l.div.renderedDepth+l.div.renderedHeight)*h,c.style.height=l.div.renderedDepth+l.div.renderedHeight+"em",c.style.position="relative",c.style.top=l.div.renderedDepth+"em",c.style.marginLeft=".1em",c.style.marginTop=-l.div.renderedDepth+"em",x=y,F=l.div.renderedHeight+l.div.renderedDepth-.04-x/2,J=Math.max(O["radical.w"][0]),
z=Math.max(0,Math.min(J,O["radical.t"][0])),r=Math.max(0,O["radical.h"][0]),y=F/Math.max(0,O["radical.verticalthreshold"][0]),I=Math.sqrt(y),w=Math.sqrt(3),l.div.renderedHeight+l.div.renderedDepth<Math.max(0,O["radical.verticalthreshold"][0])?(r=Math.min(l.div.renderedHeight+l.div.renderedDepth,r/Math.max(O["radical.verticalthreshold"][0],0)),t=x*y*w/(6*y*y+2),c.width=(-x*(z*(y-1)-y*J-F*I+J)/(2*F)+t+J)*h,c.style.width=(-x*z*(y-1)+x*y*J-J*(x-2*F)+F*(x+2*t))/(2*F)+"em",E=c.getContext("2d"),E.fillStyle=
f.color,H=[Math.max(-x*(z*(y-1)-y*J-F*I+J)/(2*F),0)+t+J,F-x/2],D=[Math.min(-x*(-z*(y-1)+y*J+F*I-J)/(2*F)+t+J,H[0]),F+x/2],G=[-(4*z*z*y*w*(y-1)*(y-1)-z*(y-1)*(4*y*y*J*w+3*x*w*Math.pow(y,1.5)-4*y*(F*(r-1)-t*w)+4*F*r)-F*(4*y*y*J*(r-1)+x*Math.pow(y,1.5)*(3*r+2)-4*y*(r*J-t*(r-1))-3*x*r*I-4*r*t))/(4*(w*z*y*(y-1)+F*(y*(r-1)-r))),-(r*F+y*z*w)/(y*(J-z))*(-(4*z*z*y*w*(y-1)*(y-1)-z*(y-1)*(4*y*y*J*w+3*x*w*Math.pow(y,1.5)-4*y*(F*(r-1)-t*w)+4*F*r)-F*(4*y*y*J*(r-1)+x*Math.pow(y,1.5)*(3*r+2)-4*y*(r*J-t*(r-1))-3*
x*r*I-4*r*t))/(4*(w*z*y*(y-1)+F*(y*(r-1)-r)))-y*(J-z)-z-3*x*I/4-t)],L=[Math.max(-z*(y-1)+y*J+x/2*I+t,-G[1]*(D[0]-G[0])/(D[1]-G[1])+G[0]+H[0]-(D[0]-G[0])/(D[1]-G[1])*(H[1]-G[1]+(D[1]-G[1])/(D[0]-G[0])*G[0])),0],E.beginPath(),E.moveTo(H[0]*h,c.height-H[1]*h),E.lineTo((-x*(z*(y-1)-y*J-F*I+J)/(2*F)+t+J)*h,c.height-(F+x/2)*h),E.lineTo(D[0]*h,c.height-D[1]*h),E.lineTo(G[0]*h,c.height-G[1]*h),E.lineTo((8*z*z*y*w*(y-1)-z*(8*y*y*J*w+6*x*Math.pow(y,1.5)*w+y*(x+8*t*w)+8*F*r)+x*y*J-6*x*F*r*I-8*F*r*t)/(8*(z*y*
w*(y-1)-y*y*J*w-F*r))*h,c.height-(H=y*w*(8*z*z*y*w*(y-1)-z*(8*y*y*J*w+6*x*Math.pow(y,1.5)*w+y*(x+8*t*w)+8*F*r)+x*y*J-6*x*F*r*I-8*F*r*t)/(8*(z*y*w*(y-1)-y*y*J*w-F*r))+r*F+x/8)*h),E.lineTo(0,c.height-(r*F+x/8)*h),E.lineTo(2*t*h,c.height-(r*F-x/8)*h),E.lineTo((8*z*z*y*w*(y-1)-z*(8*y*y*w*(J-2*t)-6*x*Math.pow(y,1.5)*w-y*(x-8*t*w)+8*F*r)-16*t*y*y*J*w-x*y*J+6*x*F*r*I-8*F*r*t)/(8*(z*y*w*(y-1)-y*y*J*w-F*r))*h,c.height-(y*w*((8*z*z*y*w*(y-1)-z*(8*y*y*w*(J-2*t)-6*x*Math.pow(y,1.5)*w-y*(x-8*t*w)+8*F*r)-16*t*
y*y*J*w-x*y*J+6*x*F*r*I-8*F*r*t)/(8*(z*y*w*(y-1)-y*y*J*w-F*r))-2*t)+r*F-x/8)*h),E.lineTo((-z*(y-1)+y*J-.75*x*I+t)*h,c.height),E.lineTo(L[0]*h,c.height),E.closePath(),E.fill(),x=(D[0]-G[0])/(D[1]-G[1])*(H-G[1])+G[0]):(r=Math.max(0,Math.min(F,O["radical.h"][0])),c.width=(8*J+x*(4+w))/8*h,c.style.width=(8*J+x*(4+w))/8+"em",E=c.getContext("2d"),E.fillStyle=f.color,E.beginPath(),E.moveTo((J+x*(w+4)/8)*h,.04*h),E.lineTo((J+x*(w-4)/8)*h,.04*h),E.lineTo((J+x*(w-4)/8)*h,c.height-5*x*(r+z*w)/(4*(J-z))*h),E.lineTo((z*
(4*J*w+x*(3*w+2)+4*r)-x*(2*J-3*r-1.5*J-r/2*w))/(4*(J*w+r))*h,c.height-(H=(z*(4*J*w+x*(3*w+2)+4*r)-x*(2*J-3*r))/(4*(J*w+r))*w+r+x/2)*h),E.lineTo(0,c.height-(x/8+r)*h),E.lineTo(x*w/4*h,c.height-(-x/8+r)*h),E.lineTo((z*(4*J*w-x*(3*w+2)+4*r)+x*(2*J-3*r+1.5*J+r/2*w))/(4*(J*w+r))*h,c.height-((z*(4*J*w-x*(3*w+2)+4*r)+x*(2*J-3*r))/(4*(J*w+r))*w+r-x/2)*h),E.lineTo((J-x*(6-w)/8)*h,c.height),E.lineTo((J+x*(w+4)/8)*h,c.height),E.closePath(),E.fill(),x=J+x*(w-4)/8)):(c.height=(fontTeX.fontDimen.heightOf("\u221a",
n)+fontTeX.fontDimen.depthOf("\u221a",n))*h,c.width=fontTeX.fontDimen.widthOf("\u221a",n)*h,E=c.getContext("2d"),c.style.height=l.div.renderedHeight+l.div.renderedDepth+"em",c.style.width=fontTeX.fontDimen.widthOf("\u221a",n)+"em",c.style.position="relative",c.style.top=l.div.renderedDepth+"em",c.style.marginTop=-l.div.renderedDepth+"em",E.textAlign="center",E.font=h+"px "+n,E.fillText("\u221a",c.width/2,c.height*(1-fontTeX.fontDimen.depthOf("\u221a",n)))),l.div.insertBefore(c,k),l.index.length&&
(k=document.createElement("div"),k.style.display="inline-block",k.style.position="relative",A(l.index,"scriptscript",!1,v,k),k.style.fontSize="50px",a.appendChild(k),k.style.marginLeft=Math.max(-k.offsetWidth/50,-(x+.05)/("script"==g?.707106781:"scriptscript"==g?1:.5))+"em",a.removeChild(k),k.style.fontSize=("script"==g?.707106781:"scriptscript"==g?1:.5)+"em",k.style.top=-Math.max(H-l.div.renderedDepth,fontTeX.fontDimen.heightOf("x",n)/2)/("script"==g?.707106781:"scriptscript"==g?1:.5)-k.renderedDepth-
.1+"em",k.style.left=(.05+x)/("script"==g?.707106781:"scriptscript"==g?1:.5)+"em",l.div.insertBefore(k,c))}}else u(11,k,F);break;case 11:"rule"==l.type&&(k=document.createElement("div"),E=H="100%",y="",k.style.background="currentColor",l.height&&(E=new C(l.height),E.em.value+=E.sp.value/65536/6*8/h*65536,E=E.em.value/65536),l.depth&&(y=new C(l.depth),y.em.value+=y.sp.value/65536/6*8/h*65536,y=y.em.value/65536),l.width&&(H=new C(l.width),H.em.value+=H.sp.value/65536/6*8/h*65536,H=H.em.value/65536),
"v"==l.ruleType?("100%"==E?(k.style.alignSelf="stretch",k.renderedDepth=k.renderedHeight=0):(k.style.height=Math.max(E+y,0)+"em",k.style.marginBottom=k.style.top=y+"em",k.style.marginTop=-y+"em",k.style.position="relative",k.renderedHeight=Math.max(E,0),k.renderedDepth=Math.max(y,0)),0>H?B.add({type:"kern",dimen:new C(0,65536*H)}):k.style.width=H+"em"):"h"==l.ruleType&&(k.style.width="100%"==H?"100%":H+"em",k.style.height=Math.max(E+y,0)+"em",k.style.marginBottom=k.style.top=y+"em",k.style.marginTop=
-y+"em",k.style.position="relative",B.push({type:"atom",atomType:0,nucleus:{},superscript:null,subscript:null,style:g,isLineBreak:!0,div:document.createElement("div")}),B[B.length-1].div.style.width="100%",q.push(B[B.length-1])),c={type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null,style:g,div:k,isLineBreak:"h"==l.ruleType},B.push(c),q.push(c),"h"==l.ruleType&&(B.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null,isLineBreak:!0,div:document.createElement("div")}),
B[B.length-1].div.style.width="100%",q.push(B[B.length-1])))}}function G(a,b,d){var c=B[b],f=q.indexOf(c);switch(a){case 1:c.italicCorrection&&(c.dimen=new C(0,65536*fontTeX.fontDimen.italCorrOf(c.italicCorrection,n)));"glue"==c.type&&"dimension"==c.glue.stretch.type&&0==c.glue.stretch.sp.value&&0==c.glue.stretch.em.value&&"dimension"==c.glue.shrink.type&&0==c.glue.shrink.sp.value&&0==c.glue.shrink.em.value&&(c.type="kern",c.dimen=c.glue.start);if("vkern"==c.type&&(c.dimen.sp.value||c.dimen.em.value))D+=
c.dimen.em.value,D+=c.dimen.sp.value/65536/6*8/h*65536,w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",D&&(w.last.style.position="relative",w.last.style.marginTop=D/65536+"em",w.last.style.marginBottom=-D/65536+"em",w.last.style.top=-D/65536+"em",w.last.verticalRaise=D);else if("kern"==c.type&&(c.dimen.sp.value||c.dimen.em.value)){if(!w.last.lastElementChild||w.last.lastElementChild.style.marginRight)f=document.createElement("div"),
f.style.display="inline-block",w.last.appendChild(f);w.last.lastElementChild.style.marginRight=c.dimen.sp.value?c.dimen.em.value?"calc("+c.dimen.sp.value/65536+"pt + "+c.dimen.em.value/65536+"em)":c.dimen.sp.value/65536+"pt":c.dimen.em.value/65536+"em"}else if("glue"==c.type){f=document.createElement("div");f.style.width=c.glue.start.sp.value?c.glue.start.em.value?"calc("+c.glue.start.sp.value/65536+"pt + "+c.glue.start.em.value/65536+"em)":c.glue.start.sp.value/65536+"pt":c.glue.start.em.value/65536+
"em";if("infinite dimension"==c.glue.stretch.type)f.style.flexGrow=Math.pow(1290,c.glue.stretch.magnitude.value);else if(c.glue.stretch.sp.value||c.glue.stretch.em.value)f.style.flexGrow=1,f.style.maxWidth="calc("+(c.glue.start.sp.value?c.glue.start.em.value?"("+c.glue.start.sp.value/65536+"pt + "+c.glue.start.em.value/65536+"em)":c.glue.start.sp.value/65536+"pt":c.glue.start.em.value/65536+"em")+" + "+(c.glue.stretch.sp.value?c.glue.stretch.em.value?"("+c.glue.stretch.sp.value/65536+"pt + "+c.glue.stretch.em.value/
65536+"em)":c.glue.stretch.sp.value/65536+"pt":c.glue.stretch.em.value/65536+"em")+")";if("infinite dimension"==c.glue.shrink.type)f.style.flexShrink=Math.pow(1290,c.glue.shrink.magnitude.value);else if(c.glue.shrink.sp.value||c.glue.shrink.em.value)f.style.flexShrink=1,f.style.minWidth="calc("+(c.glue.start.sp.value?c.glue.start.em.value?"("+c.glue.start.sp.value/65536+"pt + "+c.glue.start.em.value/65536+"em)":c.glue.start.sp.value/65536+"pt":c.glue.start.em.value/65536+"em")+" - "+(c.glue.shrink.sp.value?
c.glue.shrink.em.value?"("+c.glue.shrink.sp.value/65536+"pt + "+c.glue.shrink.em.value/65536+"em)":c.glue.shrink.sp.value/65536+"pt":c.glue.shrink.em.value/65536+"em")+")";w.push(f);w.push(document.createElement("div"));w.last.style.display="inline-flex";w.last.style.flexWrap="nowrap";w.last.style.alignItems="baseline";D&&(w.last.style.position="relative",w.last.style.marginTop=D/65536+"em",w.last.style.marginBottom=-D/65536+"em",w.last.style.top=-D/65536+"em",w.last.verticalRaise=D)}G(2,b,d);break;
case 2:if("atom"==c.type){if(0!=f&&2==c.atomType){if("display"==g||"text"==g)w.push(document.createElement("div")),w.last.style.flexShrink=1,w.last.style.flexGrow=1,w.last.style.maxWidth=".3333333em",w.last.style.width=".2222222em";w.push(document.createElement("div"));w.last.style.display="inline-flex";w.last.style.flexWrap="nowrap";w.last.style.alignItems="baseline";D&&(w.last.style.position="relative",w.last.style.marginTop=D/65536+"em",w.last.style.marginBottom=-D/65536+"em",w.last.style.top=
-D/65536+"em",w.last.verticalRaise=D)}if(0!=f&&3==c.atomType){if("display"==g||"text"==g&&3!=q[f-1].atomType&&4!=q[f-1].atomType)w.push(document.createElement("div")),6==q[f-1].atomType?w.last.style.width=".1666667em":(w.last.style.flexGrow=1,w.last.style.maxWidth=".5555555em",w.last.style.width=".2777778em");w.push(document.createElement("div"));w.last.style.display="inline-flex";w.last.style.flexWrap="nowrap";w.last.style.alignItems="baseline";D&&(w.last.style.position="relative",w.last.style.marginTop=
D/65536+"em",w.last.style.marginBottom=-D/65536+"em",w.last.style.top=-D/65536+"em",w.last.verticalRaise=D)}if(0!=f){b=q[f-1].atomType;d=c.atomType;b={0:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},1:{0:1,1:1,3:0,4:0,5:0,6:0,7:1,inner:-1},2:{0:-2,1:-2,4:-2,7:-2,inner:-2},3:{0:-3,1:-3,3:0,4:-3,5:0,6:0,7:-3,inner:-3},4:{0:0,1:0,3:0,4:0,5:0,6:0,7:0,inner:0},5:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},6:{0:0,1:0,3:0,4:0,5:0,6:0,7:0,inner:0},7:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},inner:{0:-1,1:1,
2:0,3:0,4:-1,5:0,6:-1,7:-1,inner:-1}}["string"==typeof b&&"inner"!=b?0:b]["string"==typeof d&&"inner"!=d?0:d];d=document.createElement("div");0>b&&(b="script"==c.style||"scriptscript"==c.style?0:-b);switch(b){case 1:d.style.width=".1666667em";break;case 2:d.style.width=".2222222em";d.style.maxWidth=".3333333em";d.style.flexGrow="1";d.style.flexShrink="1";break;case 3:d.style.width=".2777778em",d.style.maxWidth=".5555555em",d.style.flexGrow="1"}b&&w.last.appendChild(d)}w.last.renderedHeight=Math.max(w.last.renderedHeight||
0,c.div.renderedHeight);w.last.renderedDepth=Math.max(w.last.renderedDepth||0,c.div.renderedDepth);w.last.baseline+w.last.baselineOffset>c.div.baseline+c.div.baselineOffset?(w.last.baseline=w.last.baseline||0,w.last.baselineOffset=w.last.baselineOffset||0):(w.last.baseline=c.div.baseline,w.last.baselineOffset=c.div.baselineOffset);c.isLineBreak?(w.push(c.div),w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",
D&&(w.last.style.position="relative",w.last.style.marginTop=D/65536+"em",w.last.style.marginBottom=-D/65536+"em",w.last.style.top=-D/65536+"em",w.last.verticalRaise=D)):w.last.appendChild(c.div);if(6==c.atomType){if("display"==g||"text"==g&&q[f+1]&&3!=q[f+1].atomType)w.push(document.createElement("div")),w.last.style.width=".1666667em";w.push(document.createElement("div"));w.last.style.display="inline-flex";w.last.style.flexWrap="nowrap";w.last.style.alignItems="baseline";D&&(w.last.style.position=
"relative",w.last.style.marginTop=D/65536+"em",w.last.style.marginBottom=-D/65536+"em",w.last.style.top=-D/65536+"em",w.last.verticalRaise=D)}}}}if(b.length){var Z=null,K=document.createElement("div");K.style.display="inline-flex";K.style.flexWrap="wrap";K.style.alignItems="baseline";K.displayedStyle=g;K.crampedStyle=p;K.style.justifyContent="display"==c?"center":"initial";var w=[document.createElement("div")];Object.defineProperty(w,"last",{get:function(){return this[this.length-1]}});w[0].style.display=
"inline-flex";w[0].style.flexWrap="nowrap";w[0].style.alignItems="baseline";for(var B=[],q=[],D=0,t=0,L=b.length;t<L;t++){var N=u(1,t,L);N&&(t=N[0],L=N[1])}q.length&&2==q[q.length-1].atomType&&(q[q.length-1].atomType=0);B.length||(K.empty=!0);t=0;for(L=B.length;t<L;t++)if(N=G(1,t,L))t=N[0],L=N[1];t=0;for(L=w.length;t<L;t++)K.appendChild(w[t]),K.renderedHeight=Math.max(K.renderedHeight||0,(w[t].renderedHeight||0)+(w[t].verticalRaise||0)/65536),K.renderedDepth=Math.max(K.renderedDepth||0,(w[t].renderedDepth||
0)-(w[t].verticalRaise||0)/65536),K.baselineOffset+K.baseline>w[t].baselineOffset+w[t].baseline?(K.baseline=K.baseline||0,K.baselineOffset=K.baselineOffset||0):(K.baseline=w[t].baseline,K.baselineOffset=w[t].baselineOffset);k.appendChild(K);k.renderedHeight=Math.max(k.renderedHeight||0,K.renderedHeight);k.renderedDepth=Math.max(k.renderedDepth||0,K.renderedDepth);k.baselineOffset+k.baseline>K.baselineOffset+K.baseline?(k.baseline=k.baseline||0,k.baselineOffset=k.baselineOffset||0):(k.baseline=K.baseline,
k.baselineOffset=K.baselineOffset);return Z}t=document.createElement("div");t.style.display="inline-flex";t.displayedStyle=g;t.crampedStyle=p;t.renderedDepth=0;t.renderedHeight=0;k.renderedHeight=k.renderedHeight||0;k.renderedDepth=k.renderedDepth||0;k.baseline=fontTeX.fontDimen.baselineHeightOf(n);k.baselineOffset=0;k.appendChild(t);t.empty=!0}var g=document.createElement("div");"display"==c?g.style.textAlign="center":g.style.display="inline-block";var h=parseFloat(f.fontSize),n=f.fontFamily;A(b,
c,!1,"nm",g);g.firstElementChild.empty&&1==g.children.length&&(g=document.createTextNode(""));return g};var d={defs:{primitive:{"(":new k("(",function(a){this.invalid=!0;return[this]}),")":new k(")",function(a){if("inline"==a.style)return[{type:"character","char":"$",code:36,cat:d.cats.math}];this.invalid=!0;return[this]}),"/":new k("/",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:new C(0),italicCorrection:!0});
return[]}),"[":new k("[",function(a){this.invalid=!0;return[this]}),"]":new k("]",function(a){if("display"==a.style)return[{type:"character","char":"$",code:36,cat:d.cats.math},{type:"character","char":"$",code:36,cat:d.cats.math}];this.invalid=!0;return[this]}),above:new k("above",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracRightDelim=
".";a.scopes.last.barWidth=b;a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),abovewithdelims:new k("abovewithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("dimension");if(!c)return this.invalid=!0,[this];for(;;){var f=a.mouth.eat();if(f&&("command"==
f.type||"character"==f.type&&f.cat==d.cats.active))f=a.mouth.expand(f,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,f);else if(f&&"character"==f.type&&d.delims.includes(f.code)&&(f.cat==d.cats.all||f.cat==d.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=f["char"];break}else a.scopes.last.fracLeftDelim=f["char"];else return this.invalid=!0,a.mouth.loadState(b),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth=c;a.scopes.last.root&&
(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),accent:new k("accent",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(b),[this];a.tokens.push({type:"accent modifier","char":String.fromCharCode(c.value),code:c.value,
token:this});return[]}),advance:new k("advance",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register){var f=a.mouth.eat();if(!f||"character"!=f.type||"b"!=f["char"]&&"B"!=f["char"]||f.cat==d.cats.active)if(f)a.mouth.revert();
else return this.invalid=!0,a.mouth.loadState(b),[this];else f=a.mouth.eat(),(!f||"character"!=f.type||"y"!=f["char"]&&"Y"!=f["char"]||f.cat==d.cats.active)&&a.mouth.revert(2);if("integer"==c.type)if(f=a.mouth.eat("integer")){c.value+=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.value=b.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("dimension"==
c.type)if(f=a.mouth.eat("dimension")){c.sp.value+=f.sp.value;c.em.value+=f.em.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.sp.value=b.sp.value,c.em.value=b.em.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("mu dimension"==c.type)if(f=a.mouth.eat("mu dimension")){c.mu.value+=f.mu.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.mu.value=b.mu.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("glue"==c.type)if(f=a.mouth.eat("glue")){c.start.sp.value+=f.start.sp.value;c.start.em.value+=f.start.em.value;if("infinite dimension"==f.stretch.type)if("infinite dimension"==c.stretch.type&&c.stretch.magnitude.value==f.stretch.magnitude.value)c.stretch.value+=f.stretch.value;else{if("infinite dimension"!=c.stretch.type||
c.stretch.magnitude.value<f.stretch.magnitude.value)c.stretch=new t(f.stretch.number.value,f.stretch.magnitude.value)}else"infinite dimension"!=c.stretch.type&&(c.stretch.sp.value+=f.stretch.sp.value,c.stretch.em.value+=f.stretch.em.value);if("infinite dimension"==f.shrink.type)if("infinite dimension"==c.shrink.type&&c.shrink.magnitude.value==f.shrink.magnitude.value)c.shrink.value+=f.shrink.value;else{if("infinite dimension"!=c.shrink.type||c.shrink.magnitude.value<f.shrink.magnitude.value)c.shrink=
new t(f.shrink.number.value,f.shrink.magnitude.value)}else"infinite dimension"!=c.shrink.type&&(c.shrink.sp.value+=f.shrink.sp.value,c.shrink.em.value+=f.shrink.em.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.sp.value+=f.start.sp.value,c.start.em.value+=f.start.em.value,c.stretch="infinite dimension"==b.stretch.type?new t(b.stretch.number.value,b.stretch.magnitude.value):new C(b.stretch.sp.value,
b.stretch.em.value),c.shrink="infinite dimension"==b.shrink.type?new t(b.shrink.number.value,b.shrink.magnitude.value):new C(b.shrink.sp.value,b.shrink.em.value);a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("mu glue"==c.type)if(f=a.mouth.eat("mu glue")){c.start.mu.value+=f.start.mu.value;if("infinite dimension"==f.stretch.type)if("infinite dimension"==c.stretch.type&&c.stretch.magnitude.value==f.stretch.magnitude.value)c.stretch.value+=f.stretch.value;else{if("infinite dimension"!=
c.stretch.type||c.stretch.magnitude.value<f.stretch.magnitude.value)c.stretch=new t(f.stretch.number.value,f.stretch.magnitude.value)}else"infinite dimension"!=c.stretch.type&&(c.stretch.mu.value+=f.stretch.mu.value);if("infinite dimension"==f.shrink.type)if("infinite dimension"==c.shrink.type&&c.shrink.magnitude.value==f.shrink.magnitude.value)c.shrink.value+=f.shrink.value;else{if("infinite dimension"!=c.shrink.type||c.shrink.magnitude.value<f.shrink.magnitude.value)c.shrink=new t(f.shrink.number.value,
f.shrink.magnitude.value)}else"infinite dimension"!=c.shrink.type&&(c.shrink.mu.value+=f.shrink.mu.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.mu.value=b.start.mu.value,c.stretch="infinite dimension"==b.stretch.type?new t(b.stretch.number.value,b.stretch.magnitude.value):new N(b.stretch.mu.value),"infinite dimension"==b.shrink.type?c.shrink=new t(b.shrink.number.value,b.shrink.magnitude.value):
c.stretch=new N(b.shrink.mu.value);a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];break}else return this.invalid=!0,a.mouth.loadState(b),[this]}return[]}),atop:new k("atop",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracLeftDelim=a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth=new C(0);a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=
a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),atopwithdelims:new k("atopwithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||
c.cat==d.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=c["char"];break}else a.scopes.last.fracLeftDelim=c["char"];else return this.invalid=!0,a.mouth.loadState(b),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth=new C(0);a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),begingroup:new k("begingroup",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);new a.Scope;a.scopes.last.semisimple=!0;a.openGroups.push(this);a.contexts.push("scope");this.ignore=!0;a.scopes.last.tokens.push(this);return[]}),bf:new k("bf",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"bf"});return[]}),catcode:new k("catcode",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");if(b){if(0>b.value)return a.mouth.revert(),this.invalid=!0,[this];if(!(b.value in d.cats)){d.cats[b.value]=new g(d.cats.all,0,15);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].cats[b.value]=new g((0==c?d:a.scopes[c-1]).cats[b.value])}return[a.scopes.last.cats[b.value]]}this.invalid=!0;return[this]}),"char":new k("char",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=
!0,[this];a.mouth.queue.unshift({type:"character",cat:d.cats.all,"char":String.fromCharCode(b.value),code:b.value});return[]}),chardef:new k("chardef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&
"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];b=new V([{type:"character",cat:d.cats.all,"char":String.fromCharCode(f.value),code:f.value}],[]);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){d.defs.macros[c.name]=b;delete d.registers.named[c.name];f=0;for(var m=a.scopes.length;f<m;f++)a.scopes[f].defs.macros[c.name]=b,delete a.scopes[f].registers.named[c.name]}else a.scopes.last.defs.macros[c.name]=
b,delete a.scopes.last.registers.named[c.name];a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[!0]}),count:new k("count",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.count[b.value]){d.registers.count[b.value]=new g(0);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.count[b.value]=new g((c?a.scopes[c-1]:d).registers.count[b.value])}return[a.scopes.last.registers.count[b.value]]}),countdef:new k("countdef",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];c=c.name;
f=f.value;if(!d.registers.count[f]){d.registers.count[f]=new g(0);b=0;for(var m=a.scopes.length;b<m;b++)a.scopes[b].registers.count[f]=new g((b?a.scopes[b-1]:d).registers.count[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.count[f],delete d.defs.macros[c],b=0,m=a.scopes.length;b<m;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.count[f],delete a.scopes[b].defs.macros[c];else a.scopes.last.registers.named[c]=
a.scopes.last.registers.count[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(b),[!0]}),cr:new k("cr",function(a){if(!a.scopes.last.isHalign&&!a.scopes.last.isHalignCell||"scope"!=a.contexts.last)return this.invalid=!0,[this];if(a.scopes.last.isHalignCell){var b=a.scopes[a.scopes.length-2].cellData[a.scopes[a.scopes.length-2].cellData.length-1],c=a.scopes[a.scopes.length-2];if(!b[b.length-1].omit&&!this.postPreamble){a=-1;for(var f=0,m=b.length;f<m;f++)a+=b[f].span;
if(c.preamble[a])c=c.preamble[a][1];else if(~c.repeatPreambleAt)b=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),c=b[(a-c.repeatPreambleAt)%b.length][1];else return this.invalid=!0,[this];this.postPreamble=!0;return c.concat(this)}a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.contexts.pop();c=a.scopes.last.tokens;a.scopes.last.isFrac?(b[b.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:c,barWidth:a.scopes.last.barWidth,
delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new C(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),b=a.scopes.last.cellData[a.scopes.last.cellData.length-1],b[b.length-1].content=b[b.length-1].content.concat(c))}$jscomp.initSymbol();f=Symbol();for(a.mouth.saveState(f);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}else if("character"==c.type&&c.cat!=
d.cats.active){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||
b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||
b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||
b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=
a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}}else{if(b===d.defs.primitive.noalign||b.proxy&&b.original===d.defs.primitive.noalign){b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}a.scopes.last.noAligns.push(b);break}if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}b=a.mouth.expand(c,
a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}$jscomp.initSymbol();f=Symbol();for(a.mouth.saveState(f);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(f);break}else if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}b="command"==c.type?
a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&
b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||
b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||
b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);break}}else{if(b===d.defs.primitive.crcr||b.proxy&&b.original===d.defs.primitive.crcr)break;if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);break}b=a.mouth.expand(c,
a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}$jscomp.initSymbol();f=Symbol();for(a.mouth.saveState(f);;)if(c=a.mouth.eat()){if("character"==c.type&&c.cat==d.cats.close){c=a.scopes.last;if(~c.repeatPreambleAt)for(b=Math.max.apply(Math,c.cellData.map(function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].span;return b})),f=c.tabSkips.slice(c.repeatPreambleAt+1,c.tabSkips.length),m=0;c.tabSkips.length<b+1;)c.tabSkips.push(f[m]),
m=(m+1)%f.length;a.scopes.pop();a.scopes.last.tokens.push({type:"atom",atomType:"inner",nucleus:{type:"table",cellData:c.cellData,tabSkips:c.tabSkips,noAligns:c.noAligns},superscript:null,subscript:null});return[]}if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:
a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&
b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||
b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||
b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);break}}else{if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);break}b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}}else{a.mouth.loadState(f);break}$jscomp.initSymbol();
f=Symbol();a.mouth.saveState(f);for(a.scopes.last.cellData.push([{type:"cell",content:[],omit:!1,span:1}]);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(f);break}else if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];
if(!b){a.mouth.loadState(f);break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||
b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||
b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===
d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);break}}else{if(b===d.defs.primitive.omit||b.proxy&&b.original===d.defs.primitive.omit){a.scopes.last.cellData[a.scopes.last.cellData.length-1][0].omit=!0;break}if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);break}b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);
break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}c=a.scopes.last;a.contexts.push("scope");new a.Scope;a.scopes.last.isHalignCell=!0;return c.cellData[c.cellData.length-1][0].omit?[]:c.preamble[0][0]}),crcr:new k("crcr",null),csname:new k("csname",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=[];;){var f=a.mouth.eat("pre space");if(f){if(0!=c.length||f.cat!=d.cats.whitespace)if("command"==f.type||"character"==f.type&&f.cat==d.cats.active){if(f.name in a.scopes.last.registers.named)return this.invalid=
!0,a.mouth.loadState(b),[this];var m="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(!m)return this.invalid=!0,a.mouth.loadState(b),[this];m.proxy&&(m=m.original);if(m===d.defs.primitive.endcsname)break;else if(m===d.defs.primitive.the||m===d.defs.primitive.expandafter||m===d.defs.primitive.number||m===d.defs.primitive.romannumeral||m===d.defs.primitive.csname||m===d.defs.primitive.string||m===d.defs.primitive["if"]||
m===d.defs.primitive.ifcase||m===d.defs.primitive.ifcat||m===d.defs.primitive.ifdim||m===d.defs.primitive.ifeof||m===d.defs.primitive.iffalse||m===d.defs.primitive.ifodd||m===d.defs.primitive.ifnum||m===d.defs.primitive.ifhmode||m===d.defs.primitive.ifinner||m===d.defs.primitive.ifmmode||m===d.defs.primitive.iftrue||m===d.defs.primitive.ifvmode||m===d.defs.primitive.ifvoid||m===d.defs.primitive.ifx){m=a.mouth.expand(f,a.mouth);if(1==m.length&&m[0]===f&&m[0].invalid)return this.invalid=!0,a.mouth.loadState(b),
[this];a.mouth.queue.unshift.apply(a.mouth.queue,m);continue}else if(m instanceof k)return this.invalid=!0,a.mouth.loadState(b),[this];m=a.mouth.expand(f,a.mouth);if(1==m.length&&m[0]===f&&m[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m)}else c.push(f)}else return this.invalid=!0,a.mouth.loadState(b),[this]}return[{type:"command",nameType:"command",escapeChar:String.fromCharCode(a.scopes.last.registers.named.escapechar.value),name:c.map(function(a){return a["char"]}).join("")}]}),
day:new k("day",function(a){return[new g((new Date).getDate())]}),def:new k("def",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||
c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];for(var m=[],g=0,k=!1;;){var h=a.mouth.eat();if(h)if(h.cat==d.cats.open){a.mouth.revert();break}else if(h.cat==d.cats.param){var n=a.mouth.eat("pre space");if(n)if(n.cat==d.cats.open)k=!0,a.mouth.revert(),m.push({type:"character",cat:d.cats.open,"char":n["char"],code:n.code});else if(48<n.code&&58>n.code&&n.cat==d.cats.all&&+n["char"]==g+1)m.push(h),g++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=
!0,a.mouth.loadState(b),[this]}else m.push(h);else return this.invalid=!0,a.mouth.loadState(b),[this]}g=0;n=[];for(var t=!1;;){if(h=a.mouth.eat("pre space"))if("character"!=h.type||h.cat!=d.cats.param||t)if("character"==h.type&&h.cat==d.cats.open)g++;else if("character"==h.type&&h.cat==d.cats.close){if(g--,0==g)break}else t&&(t=!1);else{var G=a.mouth.eat("pre space");if(G&&(G.cat==d.cats.param||G.cat==d.cats.all&&G["char"]<=m.length&&1<=G["char"]))a.mouth.revert(),G.cat==d.cats.param&&(t=!0);else return this.invalid=
!0,a.mouth.loadState(b),[this]}else return this.invalid=!0,a.mouth.loadState(b),[this];n.push(h)}n.shift();k&&n.push(m[m.length-1]);b=new V(n,m);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==f)for(d.defs.macros[c]=b,delete d.registers.named[c],f=0,m=a.scopes.length;f<m;f++)a.scopes[f].defs.macros[c]=b,delete a.scopes[f].registers[c];else for(d.defs.active[c]=b,delete d.registers.named[c],f=0,m=a.scopes.length;f<
m;f++)a.scopes[f].defs.ative[c]=b,delete a.scopes[f].registers[c];else a.scopes.last.defs["macro"==f?"macros":"active"][c]=b,delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),dimen:new k("dimen",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.dimen[b.value]){d.registers.dimen[b.value]=new C(0,0);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.dimen[b.value]=new C((c?a.scopes[c-1]:d).registers.dimen[b.value])}return[a.scopes.last.registers.dimen[b.value]]}),
dimendef:new k("dimendef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),
[!0];c=c.name;f=f.value;if(!d.registers.dimen[f]){d.registers.dimen[f]=new C(0,0);b=0;for(var m=a.scopes.length;b<m;b++)a.scopes[b].registers.dimen[f]=new C((b?a.scopes[b-1]:d).registers.dimen[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.dimen[f],delete d.defs.macros[c],b=0,m=a.scopes.length;b<m;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.dimen[f],delete a.scopes[b].defs.macros[c];
else a.scopes.last.registers.named[c]=a.scopes.last.registers.dimen[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(countDefSym),[!0]}),displaylimits:new k("displaylimits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:"display",token:this});return[]}),displaystyle:new k("displaystyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"font modifier",value:"displaystyle"});return[]}),divide:new k("divide",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register)if(c&&c.register){var f=a.mouth.eat();if(!f||
"character"!=f.type||"b"!=f["char"]&&"B"!=f["char"]||f.cat==d.cats.active)if(f)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(b),[this];else f=a.mouth.eat(),(!f||"character"!=f.type||"y"!=f["char"]&&"Y"!=f["char"]||f.cat==d.cats.active)&&a.mouth.revert(2);if(f=a.mouth.eat("integer"))if("integer"==c.type){c.value=~~(c.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,
c.value=b.value;a.toggles.global=!1}else if("dimension"==c.type){c.sp.value=~~(c.sp.value/f.value);c.em.value=~~(c.em.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.sp.value=b.sp.value,c.em.value=b.em.value;a.toggles.global=!1}else if("mu dimension"==c.type){c.mu.value=~~(c.mu.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=
c.parent,c.mu.value=b.mu.value;a.toggles.global=!1}else if("glue"==c.type){c.start.sp.value=~~(c.start.sp.value/f.value);c.start.em.value=~~(c.start.em.value/f.value);"infinite dimension"==c.stretch.type?c.stretch.number.value=~~(c.stretch.number.value/f.value):(c.stretch.sp.value=~~(c.stretch.sp.value/f.value),c.stretch.em.value=~~(c.stretch.em.value/f.value));"infinite dimension"==c.shrink.type?c.shrink.number.value=~~(c.shrink.number.value/f.value):(c.shrink.sp.value=~~(c.shrink.sp.value/f.value),
c.shrink.em.value=~~(c.shrink.em.value/f.value));b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.sp.value=b.start.sp.value,c.start.em.value=b.start.em.value,c.stretch="infinite dimension"==b.stretch.type?new t(b.stretch.number.value,b.stretch.magnitude.value):new C(b.stretch.sp.value,b.stretch.em.value),c.shrink="infinite dimension"==b.shrink.type?new t(b.shrink.number.value,b.shrink.magnitude.value):
new C(b.shrink.sp.value,b.shrink.em.value);a.toggles.global=!1}else{if("mu glue"==c.type){c.start.mu.value=~~(c.start.mu.value/f.value);"infinite dimension"==c.stretch.type?c.stretch.number.value=~~(c.stretch.number.value/f.value):c.stretch.mu.value=~~(c.stretch.mu.value/f.value);"infinite dimension"==c.shrink.type?c.shrink.number.value=~~(c.shrink.number.value/f.value):c.shrink.mu.value=~~(c.shrink.mu.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=
c.parent,c.start.mu.value=b.start.mu.value,c.stretch="infinite dimension"==b.stretch.type?new t(b.stretch.number.value,b.stretch.magnitude.value):new N(b.stretch.mu.value),c.shrink="infinite dimension"==b.shrink.type?new t(b.shrink.number.value,b.shrink.magnitude.value):new N(b.shrink.mu.value);a.toggles.global=!1}}else return this.invalid=!0,a.mouth.loadState(b),[this];break}else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}return[]}),
edef:new k("edef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=
!0,a.mouth.loadState(b),[this];for(var m=[],g=0,v=!1;;){var h=a.mouth.eat();if(h)if(h.cat==d.cats.open){a.mouth.revert();break}else if(h.cat==d.cats.param){var n=a.mouth.eat("pre space");if(n)if(n.cat==d.cats.open)v=!0,a.mouth.revert(),m.push({type:"character",cat:d.cats.open,"char":n["char"],code:n.code});else if(48<n.code&&58>n.code&&n.cat==d.cats.all&&+n["char"]==g+1)m.push(h),g++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}else m.push(h);
else return this.invalid=!0,a.mouth.loadState(b),[this]}g=0;n=[];for(var t=!1,G=!1;;)if(h=a.mouth.eat())if("character"!=h.type||h.cat!=d.cats.param||G)if("character"==h.type&&h.cat==d.cats.open)g++,n.push(h),t=!1;else if("character"==h.type&&h.cat==d.cats.close){g--;if(0==g)break;n.push(h);t=!1}else if(t)n.push(h),t=!1;else if("command"==h.type||"character"==h.type&&h.cat==d.cats.active)if(h.name in a.scopes.last.registers.named)n.push(h);else{var p="command"==h.type?a.scopes.last.defs.primitive[h.name]||
a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h["char"]];if(!p)return this.invalid=!0,a.mouth.loadState(b),[this];if(p===d.defs.primitive.the||p.proxy&&p.original===d.defs.primitive.the||p===d.defs.primitive.expandafter||p.proxy&&p.original===d.defs.primitive.expandafter||p===d.defs.primitive.number||p.proxy&&p.original===d.defs.primitive.number||p===d.defs.primitive.romannumeral||p.proxy&&p.original===d.defs.primitive.romannumeral||p===d.defs.primitive.csname||p.proxy&&p.original===
d.defs.primitive.csname||p===d.defs.primitive.string||p.proxy&&p.original===d.defs.primitive.string||p===d.defs.primitive["if"]||p.isLet&&p.original===d.defs.primitive["if"]||p===d.defs.primitive.ifcase||p.isLet&&p.original===d.defs.primitive.ifcase||p===d.defs.primitive.ifcat||p.isLet&&p.original===d.defs.primitive.ifcat||p===d.defs.primitive.ifdim||p.isLet&&p.original===d.defs.primitive.ifdim||p===d.defs.primitive.ifeof||p.isLet&&p.original===d.defs.primitive.ifeof||p===d.defs.primitive.iffalse||
p.isLet&&p.original===d.defs.primitive.iffalse||p===d.defs.primitive.ifodd||p.isLet&&p.original===d.defs.primitive.ifodd||p===d.defs.primitive.ifnum||p.isLet&&p.original===d.defs.primitive.ifnum||p===d.defs.primitive.ifhmode||p.isLet&&p.original===d.defs.primitive.ifhmode||p===d.defs.primitive.ifinner||p.isLet&&p.original===d.defs.primitive.ifinner||p===d.defs.primitive.ifmmode||p.isLet&&p.original===d.defs.primitive.ifmmode||p===d.defs.primitive.iftrue||p.isLet&&p.original===d.defs.primitive.iftrue||
p===d.defs.primitive.ifvmode||p.isLet&&p.original===d.defs.primitive.ifvmode||p===d.defs.primitive.ifvoid||p.isLet&&p.original===d.defs.primitive.ifvoid||p===d.defs.primitive.ifx||p.isLet&&p.original===d.defs.primitive.ifx){p=a.mouth.expand(h,a.mouth);if(1==p.length&&p[0]===h&&h.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,p)}else p===d.defs.primitive.noexpand||p.proxy&&p.original===d.defs.primitive.noexpand?t=!0:p instanceof k||p.proxy&&p.original instanceof
k?n.push(h):a.mouth.queue.unshift.apply(a.mouth.queue,a.mouth.expand(h,a.mouth))}else n.push(h);else{if((p=a.mouth.eat("pre space"))&&(p.cat==d.cats.param||p.cat==d.cats.all&&p["char"]<=m.length&&1<=p["char"]))a.mouth.revert(),p.cat==d.cats.param&&(G=!0);else return this.invalid=!0,a.mouth.loadState(b),[this];n.push(h);t=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];n.shift();v&&n.push(m[m.length-1]);p=new V(n,m);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value)if("macro"==f)for(d.defs.macros[c]=p,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.macros[c]=p,delete a.scopes[b].registers.named[c];else for(d.defs.active[c]=p,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.ative[c]=p,delete a.scopes[b].registers.named[c];else a.scopes.last.defs["macro"==f?"macros":"active"][c]=p,delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),"else":new k("else",
function(a){this.invalid=!0;return[this]}),endcsname:new k("endcsname",function(a){this.invalid=!0;return[this]}),endgroup:new k("endgroup",function(a){if(!a.openGroups.length||a.scopes.last.delimited||a.scopes.last.isHalign||a.scopes.last.isHalignCell||!a.scopes.last.semisimple||"scope"!=a.contexts.last)return this.invalid=!0,[this];a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.openGroups.pop();a.contexts.pop();var b=a.scopes.last.tokens;a.scopes.last.isFrac?(a.scopes[a.scopes.length-2].tokens.push({type:"atom",
atomType:0,nucleus:[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:b,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new C(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),a.scopes.last.tokens.push({type:"atom",atomType:0,nucleus:b,superscript:null,subscript:null}))}),Error:new k("Error",
function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"character"==c.type&&c.cat==d.cats.open){for(var f=0,m=[];;)if(c=a.mouth.eat("pre space"))if("character"==c.type&&c.cat==d.cats.open)f++,m.push(c["char"]);else if("character"==c.type&&c.cat==d.cats.close){if(!f)break;f--;m.push(c["char"])}else"command"==c.type?(m.push(c.escapeChar),m.push.apply(m,c.name.split(""))):m.push(c["char"]);else return this.invalid=!0,a.mouth.loadState(b),[this];return m.map(function(a){return{type:"character",
"char":a,code:a.charCodeAt(0),cat:12,invalid:!0,recognized:!0}})}this.invalid=!0;return[this]}),expandafter:new k("expandafter",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];var d=a.mouth.eat(),m=a.mouth.expand(d,a.mouth);return 1==m.length&&m[0]===d&&d.invalid?(this.invalid=!0,a.mouth.loadState(b),[this]):[c].concat(m)}),ExpandedError:new k("ExpandedError",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
var c=a.mouth.eat();if(c&&"character"==c.type&&c.cat==d.cats.open){for(var f=0,m=[],g=!1;;)if(c=a.mouth.eat("pre space")){if("character"==c.type&&c.cat==d.cats.open)f++,m.push(c["char"]);else if("character"==c.type&&c.cat==d.cats.close){if(!f)break;f--;m.push(c["char"])}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){var v="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!v)return this.invalid=!0,
a.mouth.loadState(b),[this];v.proxy&&(v=v.original);if(v===d.defs.primitive.noexpand){g=!0;continue}else if(!g&&(v===d.defs.primitive.the||v===d.defs.primitive.expandafter||v===d.defs.primitive.number||v===d.defs.primitive.romannumeral||v===d.defs.primitive.csname||v===d.defs.primitive.string||v===d.defs.primitive["if"]||v===d.defs.primitive.ifcase||v===d.defs.primitive.ifcat||v===d.defs.primitive.ifdim||v===d.defs.primitive.ifeof||v===d.defs.primitive.iffalse||v===d.defs.primitive.ifodd||v===d.defs.primitive.ifnum||
v===d.defs.primitive.ifhmode||v===d.defs.primitive.ifinner||v===d.defs.primitive.ifmmode||v===d.defs.primitive.iftrue||v===d.defs.primitive.ifvmode||v===d.defs.primitive.ifvoid||v===d.defs.primitive.ifx)){g=a.mouth.expand(c,a.mouth);if(1==g.length&&g[0]===c&&g[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g);g=!1;continue}else if(v instanceof k){m.push(String.fromCharCode(a.scopes.last.registers.named.escapechar.value));m.push.apply(m,v.name.split(""));
g=!1;continue}if(g)m.push(String.fromCharCode(a.scopes.last.registers.named.escapechar.value)),m.push.apply(m,c.name.split(""));else{g=a.mouth.expand(c,a.mouth);if(1==g.length&&g[0]===c&&g[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g)}}else m.push(c["char"]);g=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];return m.map(function(a){return{type:"character","char":a,code:a.charCodeAt(0),cat:12,invalid:!0,recognized:!0}})}this.invalid=
!0;return[this]}),fi:new k("fi",function(a){this.invalid=!0;return[this]}),futurelet:new k("futurelet",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",
c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];var m=a.mouth.eat();m&&"character"==m.type&&"="==m["char"]&&m.cat==d.cats.all||m&&a.mouth.revert();m=a.mouth.eat();if(!m)return this.invalid=!0,a.mouth.loadState(b),[this];var g=a.mouth.eat();if(g)if("command"==g.type||"character"==g.type&&g.cat==d.cats.active)if(b="command"==g.type?a.scopes.last.defs.primitive[g.name]||a.scopes.last.defs.macros[g.name]:a.scopes.last.defs.active[g.name])b=
new V(b,"primitive"==b.type||b.isLet);else{if("command"==g.type&&"macro"==f){var k=a.scopes.last.registers.named[g.name];if(k){if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){d.registers.named[c]=k;delete d.defs.macros[c];var h=0;for(f=a.scopes.length;h<f;h++)a.scopes[h].registers.named[c]=k,delete a.scopes[h].defs.macros[c]}else a.scopes.last.registers.named[c]=k,delete a.scopes.last.defs.macros[c];a.toggles.global=!1;return[]}}}else b=
new V(new V([g]),!0);else return this.invalid=!0,a.mouth.loadState(b),[this];if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==f)for(b?d.defs.macros[c]=b:delete d.defs.macros[c],delete d.registers.named[c],h=0,f=a.scopes.length;h<f;h++)b?a.scopes[h].defs.macros[c]=b:delete a.scopes[h].defs.macros[c],delete a.scopes[h].registers.named[c];else for(b?d.defs.active[c]=b:delete a.scopes[h].defs.macros[c],delete d.registers.named[c],
h=0,f=a.scopes.length;h<f;h++)b?a.scopes[h].defs.ative[c]=b:delete a.scopes[h].defs.macros[c],delete a.scopes[h].registers.named[c];else b?a.scopes.last.defs["macro"==f?"macros":"active"][c]=b:delete a.scopes.last.defs["macro"==f?"macros":"active"][c],delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[m,g]}),gdef:new k("gdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];for(var m=[],g=0,k=!1;;){var h=a.mouth.eat();if(h)if(h.cat==d.cats.open){a.mouth.revert();break}else if(h.cat==d.cats.param){var n=a.mouth.eat("pre space");
if(n)if(n.cat==d.cats.open)k=!0,a.mouth.revert(),m.push({type:"character",cat:d.cats.open,"char":n["char"],code:n.code});else if(48<n.code&&58>n.code&&n.cat==d.cats.all&&+n["char"]==g+1)m.push(h),g++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}else m.push(h);else return this.invalid=!0,a.mouth.loadState(b),[this]}g=0;n=[];for(var t=!1;;){h=a.mouth.eat();if(!h)return this.invalid=!0,a.mouth.loadState(b),[this];if("character"==h.type&&
h.cat==d.cats.param&&!t){var G=a.mouth.eat("pre space");if(G&&(G.cat==d.cats.param||G.cat==d.cats.all&&G["char"]<=m.length&&1<=G["char"]))a.mouth.revert(),G.cat==d.cats.param&&(t=!0);else return this.invalid=!0,a.mouth.loadState(b),[this]}else if("character"==h.type&&h.cat==d.cats.open)g++;else if("character"==h.type&&h.cat==d.cats.close&&(g--,0==g))break;n.push(h)}n.shift();k&&n.push(m[m.length-1]);b=new V(n,m);if(0>a.scopes.last.registers.named.globaldefs.value)a.scopes.last.defs["macro"==f?"macros":
"active"][c]=b,delete a.scopes.last.registers.named[c];else if("macro"==f)for(d.defs.macros[c]=b,delete d.registers.named[c],f=0,m=a.scopes.length;f<m;f++)a.scopes[f].defs.macros[c]=b,delete a.scopes[f].registers.named[c];else for(d.defs.active[c]=b,delete d.registers.named[c],f=0,m=a.scopes.length;f<m;f++)a.scopes[f].defs.ative[c]=b,delete a.scopes[f].registers.named[c];a.toggles.global=!1;return[]}),global:new k("global",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.toggles.global=this;this.ignore=!0;return[this]}),halign:new k("halign",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c||c.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];for(var f=[[[]]],m=-1,g=[new P(a.scopes.last.registers.named.tabskip)],k=!1;;){c=a.mouth.eat("pre space");if(!c)return this.invalid=!0,a.mouth.loadState(b),[this];if("command"==c.type||"character"==c.type&&c.car==d.cats.active){var h="command"==c.type?
a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]||a.scopes.last.registers.named[c.name]:a.scopes.last.defs.active[c["char"]];if(!h){(f[f.length-1][1]||f[f.length-1][0]).push(c);continue}else if(h===d.defs.primitive.cr||h.isLet&&h.original===d.defs.primitive.cr)if(f[f.length-1][1]){g.push(new P(a.scopes.last.registers.named.tabskip));h=k||g[0];c=a.scopes.last.registers.named.tabskip;c.start.sp.value=h.start.sp.value;c.start.em.value=h.start.em.value;c.stretch="infinite dimension"==
h.stretch.type?new t(h.stretch.number.value,h.stretch.magnitude.value):new C(h.stretch.sp.value,h.stretch.em.value);c.shrink="infinite dimension"==h.shrink.type?new t(h.shrink.number.value,h.shrink.magnitude.value):new C(h.shrink.sp.value,h.shrink.em.value);break}else return this.invalid=!0,a.mouth.loadState(b),[this];else if(h===a.scopes.last.registers.named.tabskip){$jscomp.initSymbol();var n=Symbol();a.mouth.saveState(n);(h=a.mouth.eat())&&"character"==h.type&&"="==h["char"]&&h.cat==d.cats.all||
h&&a.mouth.revert();h=a.mouth.eat("glue");if(!h){a.mouth.loadState(n);(f[f.length-1][1]||f[f.length-1][0]).push(c);continue}c=a.scopes.last.registers.named.tabskip;c.start.sp.value=h.start.sp.value;c.start.em.value=h.start.em.value;c.stretch="infinite dimension"==h.stretch.type?new t(h.stretch.number.value,h.stretch.magnitude.value):new C(h.stretch.sp.value,h.stretch.em.value);c.shrink="infinite dimension"==h.shrink.type?new t(h.shrink.number.value,h.shrink.magnitude.value):new C(h.shrink.sp.value,
h.shrink.em.value);if(0<a.scopes.last.registers.named.globaldefs.value)for(k=new P(c);c.parent;)c=c.parent,c.start.sp.value=h.start.sp.value,c.start.em.value=h.start.em.value,c.stretch="infinite dimension"==h.stretch.type?new t(h.stretch.number.value,h.stretch.magnitude.value):new C(h.stretch.sp.value,h.stretch.em.value),"infinite dimension"==h.shrink.type?g.shrink=new t(h.shrink.number.value,h.shrink.magnitude.value):c.shrink=new C(h.shrink.sp.value,h.shrink.em.value);continue}else if(h===d.defs.primitive.span||
h.isLet&&h.original===d.defs.primitive.span){c=a.mouth.eat();if(!c)return this.invalid=!0,a.mouth.loadState(b),[this];h=a.mouth.expand(c,a.mouth);if(1==h.length&&h[0]===c&&c.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h);continue}else if(h.isLet&&h.original.replacement[0]&&h.original.replacement[0].cat==d.cats.param){if(f[f.length-1][1])return this.invalid=!0,a.mouth.loadState(b),[this];f[f.length-1][1]=[];continue}else if(h.isLet&&h.original.replacement[0]&&
h.original.replacement[0].cat==d.cats.alignment){if(~m||f[f.length-1][0].length||f[f.length-1][1])if(f[f.length-1][1])f.push([[]]),g.push(new P(a.scopes.last.registers.named.tabskip));else return this.invalid=!0,a.mouth.loadState(b),[this];else m=f.length-1;continue}}else if(c.cat==d.cats.param){if(f[f.length-1][1])return this.invalid=!0,a.mouth.loadState(b),[this];f[f.length-1][1]=[];continue}else if(c.cat==d.cats.alignment){if(~m||f[f.length-1][0].length||f[f.length-1][1])if(f[f.length-1][1])f.push([[]]),
g.push(new P(a.scopes.last.registers.named.tabskip));else return this.invalid=!0,a.mouth.loadState(b),[this];else m=f.length-1;continue}else if(c.cat==d.cats.whitespace&&!f[f.length-1][0].length&&!f[f.length-1][1])continue;(f[f.length-1][1]||f[f.length-1][0]).push(c)}b={type:"atom",atomType:0,nucleus:("command"==this.type?this.escapeChar+this.name:this["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0)},superscript:null,subscript:null}}),
superscript:null,subscript:null,ignore:!0};a.openGroups.push(b);a.contexts.push("scope");new a.Scope;a.scopes.last.tokens.push(b);a.scopes.last.isHalign=!0;a.scopes.last.cellData=[];a.scopes.last.preamble=f;a.scopes.last.repeatPreambleAt=m;a.scopes.last.tabSkips=g;a.scopes.last.noAligns=[];a.mouth.revert();return[]}),hbox:new k("hbox",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c,
f;;){var m=a.mouth.eat();if(!m)return this.invalid=!0,[this];if("command"==m.type||"character"==m.type&&m.cat==d.cats.active){var g="command"==m.type?a.scopes.last.defs.primitive[m.name]||a.scopes.last.defs.macros[m.name]:a.scopes.last.defs.active[m["char"]];if(g&&(g===d.defs.primitive.relax||g.proxy&&g.original===d.defs.primitive.relax))break;m=a.mouth.expand(m,a.mouth);a.mouth.queue.unshift.apply(a.mouth.queue,m)}else if("character"!=m.type||"t"!=m["char"]&&"T"!=m["char"])if("character"!=m.type||
"s"!=m["char"]&&"S"!=m["char"])if("character"==m.type&&m.cat==d.cats.open){a.mouth.revert();break}else return this.invalid=!0,a.mouth.loadState(b),[this];else{c=a.mouth.eat();m=a.mouth.eat();g=a.mouth.eat();var k=a.mouth.eat(),h=a.mouth.eat();if(!c||"character"!=c.type||"p"!=c["char"]&&"P"!=c["char"]||c.cat==d.cats.active||!m||"character"!=m.type||"r"!=m["char"]&&"R"!=m["char"]||m.cat==d.cats.active||!g||"character"!=g.type||"e"!=g["char"]&&"E"!=g["char"]||g.cat==d.cats.active||!k||"character"!=k.type||
"a"!=k["char"]&&"A"!=k["char"]||k.cat==d.cats.active||!h||"character"!=h.type||"d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active||!(m=a.mouth.eat("dimension")))return this.invalid=!0,a.mouth.loadState(b),[this];c=m;break}else if(f=a.mouth.eat("pre space"),f&&"character"==f.type&&("o"==f["char"]||"O"==m["char"])&&m.cat!=d.cats.active&&(m=a.mouth.eat("dimension"))){f=m;break}else return this.invalid=!0,a.mouth.loadState(b),[this]}m=a.mouth.preview();if(!m||"character"!=m.type||m.cat!=d.cats.open)return this.invalid=
!0,a.mouth.loadState(b),[this];f||c||(c=new C(0,0));a.tokens.push({type:"box wrapper",value:"horizontal",to:f,spread:c,token:this});return[]}),hfil:new k("hfil",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:new P(new C(0),new t(1,1),new C(0))});return[]}),hfill:new k("hfill",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",
glue:new P(new C(0),new t(1,2),new C(0))});return[]}),hrule:new k("hrule",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=b=!1,f=!1;;){var m=a.mouth.eat();if(!m){a.mouth.revert();break}if("h"!=m["char"]&&"H"!=m["char"]||m.cat==d.cats.active)if("d"!=m["char"]&&"D"!=m["char"]||m.cat==d.cats.active)if("w"!=m["char"]&&"W"!=m["char"]||m.cat==d.cats.active)a.mouth.revert();else if(m=
a.mouth.eat("pre space"),!m||"i"!=m["char"]&&"I"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?2:1);else if(m=a.mouth.eat("pre space"),!m||"d"!=m["char"]&&"D"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?3:2);else if(m=a.mouth.eat("pre space"),!m||"t"!=m["char"]&&"T"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?4:3);else if(m=a.mouth.eat("pre space"),!m||"h"!=m["char"]&&"H"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?5:4);else if(m=a.mouth.eat("dimension")){f=m;continue}else a.mouth.revert(5);
else if(m=a.mouth.eat("pre space"),!m||"e"!=m["char"]&&"E"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?2:1);else if(m=a.mouth.eat("pre space"),!m||"p"!=m["char"]&&"P"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?3:2);else if(m=a.mouth.eat("pre space"),!m||"t"!=m["char"]&&"T"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?4:3);else if(m=a.mouth.eat("pre space"),!m||"h"!=m["char"]&&"H"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?5:4);else if(m=a.mouth.eat("dimension")){c=m;continue}else a.mouth.revert(5);
else if(m=a.mouth.eat("pre space"),!m||"e"!=m["char"]&&"E"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?2:1);else if(m=a.mouth.eat("pre space"),!m||"i"!=m["char"]&&"I"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?3:2);else if(m=a.mouth.eat("pre space"),!m||"g"!=m["char"]&&"G"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?4:3);else if(m=a.mouth.eat("pre space"),!m||"h"!=m["char"]&&"H"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?5:4);else if(m=a.mouth.eat("pre space"),!m||"t"!=m["char"]&&
"T"!=m["char"]||m.cat==d.cats.active)a.mouth.revert(m?6:5);else if(m=a.mouth.eat("dimension")){b=m;continue}else a.mouth.revert(6);break}b=b||new C(0,65536/30);c=c||new C(0,0);a.tokens.push({type:"rule",ruleType:"h",height:b,depth:c,width:f});return[]}),hskip:new k("hskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:b});return[]}),"if":new k("if",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=[],f=!1;2>c.length;){var m=a.mouth.eat("pre space");if(m){if("character"!=m.type||m.cat!=d.cats.whitespace||0!=c.length)if("character"==m.type&&c.cat!=d.cats.active)c.push(m),f=!1;else if(f)c.push(m),f=!1;else if("command"==m.type||"character"==m.type&&m.cat==d.cats.active)if(m.name in a.scopes.last.registers.named)c.push(m);else{var g=
"command"==m.type?a.scopes.last.defs.primitive[m.name]||a.scopes.last.defs.macros[m.name]:a.scopes.last.defs.active[m["char"]];if(!g)return this.invalid=!0,a.mouth.loadState(b),[this];if(g===d.defs.primitive.the||g.proxy&&g.original===d.defs.primitive.the||g===d.defs.primitive.expandafter||g.proxy&&g.original===d.defs.primitive.expandafter||g===d.defs.primitive.number||g.proxy&&g.original===d.defs.primitive.number||g===d.defs.primitive.romannumeral||g.proxy&&g.original===d.defs.primitive.romannumeral||
g===d.defs.primitive.csname||g.proxy&&g.original===d.defs.primitive.csname||g===d.defs.primitive.string||g.proxy&&g.original===d.defs.primitive.string||g===d.defs.primitive["if"]||g.isLet&&g.original===d.defs.primitive["if"]||g===d.defs.primitive.ifcase||g.isLet&&g.original===d.defs.primitive.ifcase||g===d.defs.primitive.ifcat||g.isLet&&g.original===d.defs.primitive.ifcat||g===d.defs.primitive.ifdim||g.isLet&&g.original===d.defs.primitive.ifdim||g===d.defs.primitive.ifeof||g.isLet&&g.original===d.defs.primitive.ifeof||
g===d.defs.primitive.iffalse||g.isLet&&g.original===d.defs.primitive.iffalse||g===d.defs.primitive.ifodd||g.isLet&&g.original===d.defs.primitive.ifodd||g===d.defs.primitive.ifnum||g.isLet&&g.original===d.defs.primitive.ifnum||g===d.defs.primitive.ifhmode||g.isLet&&g.original===d.defs.primitive.ifhmode||g===d.defs.primitive.ifinner||g.isLet&&g.original===d.defs.primitive.ifinner||g===d.defs.primitive.ifmmode||g.isLet&&g.original===d.defs.primitive.ifmmode||g===d.defs.primitive.iftrue||g.isLet&&g.original===
d.defs.primitive.iftrue||g===d.defs.primitive.ifvmode||g.isLet&&g.original===d.defs.primitive.ifvmode||g===d.defs.primitive.ifvoid||g.isLet&&g.original===d.defs.primitive.ifvoid||g===d.defs.primitive.ifx||g.isLet&&g.original===d.defs.primitive.ifx){g=a.mouth.expand(m,a.mouth);if(1==g.length&&g[0]===m&&m.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g)}else if(g===d.defs.primitive.noexpand||g.proxy&&g.original===d.defs.primitive.noexpand)f=!0;
else if(g instanceof k||g.proxy&&g.original instanceof k)c.push(m);else{g=a.mouth.expand(m,a.mouth);if(1==g.length&&g[0]==-m&&m.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g)}}else c.push(m)}else return this.invalid=!0,a.mouth.loadState(b),[this]}return R.call(this,"command"==c[0].type&&"command"==c[1].type||"character"==c[0].type&&c[0]["char"]==c[1]["char"],a.mouth,a.scopes,b)}),ifcase:new k("ifcase",function(a){function b(c){for(;;){var f=
a.mouth.eat();if(!f)break;else if("command"==f.type||"character"==f.type&&f.cat===d.cats.active)if(f="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]])if(f===d.defs.primitive["if"]||f.isLet&&f.original===d.defs.primitive["if"]||f===d.defs.primitive.ifcase||f.isLet&&f.original===d.defs.primitive.ifcase||f===d.defs.primitive.ifcat||f.isLet&&f.original===d.defs.primitive.ifcat||f===d.defs.primitive.ifdim||f.isLet&&f.original===
d.defs.primitive.ifdim||f===d.defs.primitive.ifeof||f.isLet&&f.original===d.defs.primitive.ifeof||f===d.defs.primitive.iffalse||f.isLet&&f.original===d.defs.primitive.iffalse||f===d.defs.primitive.ifodd||f.isLet&&f.original===d.defs.primitive.ifodd||f===d.defs.primitive.ifnum||f.isLet&&f.original===d.defs.primitive.ifnum||f===d.defs.primitive.ifhmode||f.isLet&&f.original===d.defs.primitive.ifhmode||f===d.defs.primitive.ifinner||f.isLet&&f.original===d.defs.primitive.ifinner||f===d.defs.primitive.ifmmode||
f.isLet&&f.original===d.defs.primitive.ifmmode||f===d.defs.primitive.iftrue||f.isLet&&f.original===d.defs.primitive.iftrue||f===d.defs.primitive.ifvmode||f.isLet&&f.original===d.defs.primitive.ifvmode||f===d.defs.primitive.ifvoid||f.isLet&&f.original===d.defs.primitive.ifvoid||f===d.defs.primitive.ifx||f.isLet&&f.original===d.defs.primitive.ifx)b("fi"),a.mouth.eat();else{if("or"==c&&(f===d.defs.primitive.or||f.isLet&&f.original===d.defs.primitive.or))break;if(("or"==c||"else"==c)&&(f===d.defs.primitive["else"]||
f.isLet&&f.original===d.defs.primitive["else"])){m=!0;break}if(f===d.defs.primitive.fi||f.isLet&&f.original===d.defs.primitive.fi){a.mouth.revert();break}}}}if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var c=Symbol();a.mouth.saveState(c);var f=a.mouth.eat("integer");if(!f)return this.invalid=!0,[this];c=[];var m=!1;f=f.value;if(0>f)b("else");else for(;0<f&&!m;f--)b("or");for(;;)if(f=a.mouth.eat())if("command"==f.type||"character"==
f.type&&f.cat==d.cats.active){var g="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(g&&(g===d.defs.primitive.fi||g.isLet&&g.original===d.defs.primitive.fi))return c;!m&&g&&(g===d.defs.primitive.or||g.isLet&&g.original===d.defs.primitive.or||g===d.defs.primitive["else"]||g.isLet&&g.original===d.defs.primitive["else"])?b("fi"):(f=a.mouth.expand(f,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,f))}else c.push(f);else return this.invalid=
!0,a.mouth.loadState(stateSymbol),[this]}),ifcat:new k("ifcat",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=[],f=!1;2>c.length;){var m=a.mouth.eat("pre space");if(m){if("character"!=m.type||m.cat!=d.cats.whitespace||0!=c.length)if("character"==m.type&&c.cat!=d.cats.active)c.push(m),f=!1;else if(f)c.push(m),f=!1;else if("command"==m.type||"character"==m.type&&m.cat==d.cats.active)if(m.name in
a.scopes.last.registers.named)c.push(m);else{var g="command"==m.type?a.scopes.last.defs.primitive[m.name]||a.scopes.last.defs.macros[m.name]:a.scopes.last.defs.active[m["char"]];if(!g)return this.invalid=!0,a.mouth.loadState(b),[this];if(g===d.defs.primitive.the||g.proxy&&g.original===d.defs.primitive.the||g===d.defs.primitive.expandafter||g.proxy&&g.original===d.defs.primitive.expandafter||g===d.defs.primitive.number||g.proxy&&g.original===d.defs.primitive.number||g===d.defs.primitive.romannumeral||
g.proxy&&g.original===d.defs.primitive.romannumeral||g===d.defs.primitive.csname||g.proxy&&g.original===d.defs.primitive.csname||g===d.defs.primitive.string||g.proxy&&g.original===d.defs.primitive.string||g===d.defs.primitive["if"]||g.isLet&&g.original===d.defs.primitive["if"]||g===d.defs.primitive.ifcase||g.isLet&&g.original===d.defs.primitive.ifcase||g===d.defs.primitive.ifcat||g.isLet&&g.original===d.defs.primitive.ifcat||g===d.defs.primitive.ifdim||g.isLet&&g.original===d.defs.primitive.ifdim||
g===d.defs.primitive.ifeof||g.isLet&&g.original===d.defs.primitive.ifeof||g===d.defs.primitive.iffalse||g.isLet&&g.original===d.defs.primitive.iffalse||g===d.defs.primitive.ifodd||g.isLet&&g.original===d.defs.primitive.ifodd||g===d.defs.primitive.ifnum||g.isLet&&g.original===d.defs.primitive.ifnum||g===d.defs.primitive.ifhmode||g.isLet&&g.original===d.defs.primitive.ifhmode||g===d.defs.primitive.ifinner||g.isLet&&g.original===d.defs.primitive.ifinner||g===d.defs.primitive.ifmmode||g.isLet&&g.original===
d.defs.primitive.ifmmode||g===d.defs.primitive.iftrue||g.isLet&&g.original===d.defs.primitive.iftrue||g===d.defs.primitive.ifvmode||g.isLet&&g.original===d.defs.primitive.ifvmode||g===d.defs.primitive.ifvoid||g.isLet&&g.original===d.defs.primitive.ifvoid||g===d.defs.primitive.ifx||g.isLet&&g.original===d.defs.primitive.ifx){g=a.mouth.expand(m,a.mouth);if(1==g.length&&g[0]===m&&m.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g)}else if(g===d.defs.primitive.noexpand||
g.proxy&&g.original===d.defs.primitive.noexpand)f=!0;else if(g instanceof k||g.proxy&&g.original instanceof k)c.push(m);else{g=a.mouth.expand(m,a.mouth);if(1==g.length&&g[0]==-m&&m.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g)}}else c.push(m)}else return this.invalid=!0,a.mouth.loadState(b),[this]}return R.call(this,"command"==c[0].type&&"command"==c[1].type||"character"==c[0].type&&c[0].cat==c[1].cat,a.mouth,a.scopes,b)}),ifdim:new k("ifdim",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("dimension");if(!c)return this.invalid=!0,[this];c=c.sp.value+12*c.em.value;var f=a.mouth.eat();if(!f||f.cat==d.cats.active&&("<"==f["char"]||"="==f["char"]||">"==f["char"]))return this.invalid=!0,a.mouth.loadState(b),[this];var g=a.mouth.eat("dimension");if(!g)return this.invalid=!0,a.mouth.loadState(b),[this];g=g.sp.value+
12*g.em.value;return R.call(this,"<"==f["char"]?c<g:"="==f["char"]?c==g:c>g,a.mouth,a.scopes,b)}),ifeof:new k("ifeof",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return R.call(this,!0,a.mouth,a.scopes,b)}),iffalse:new k("iffalse",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
return R.call(this,!1,a.mouth,a.scopes,b)}),ifodd:new k("ifodd",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("integer");return c?R.call(this,1==c.value%2,a.mouth,a.scopes,b):(this.invalid=!0,[this])}),ifnum:new k("ifnum",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
var c=a.mouth.eat("integer");if(!c)return this.invalid=!0,[this];var f=a.mouth.eat();if(!f||f.cat==d.cats.active&&("<"==f["char"]||"="==f["char"]||">"==f["char"]))return this.invalid=!0,a.mouth.loadState(b),[this];var g=a.mouth.eat("integer");return g?R.call(this,"<"==f["char"]?c.value<g.value:"="==f["char"]?c.value==g.value:c.value>g.value,a.mouth,a.scopes,b):(this.invalid=!0,a.mouth.loadState(b),[this])}),ifhmode:new k("ifhmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return R.call(this,!1,a.mouth,a.scopes,b)}),ifinner:new k("ifinner",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return R.call(this,"inline"==a.style,a.mouth,a.scopes,b)}),ifmmode:new k("ifmmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();
var b=Symbol();a.mouth.saveState(b);return R.call(this,!0,a.mouth,a.scopes,b)}),iftrue:new k("iftrue",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return R.call(this,!0,a.mouth,a.scopes,b)}),ifvmode:new k("ifvmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return R.call(this,
!1,a.mouth,a.scopes,b)}),ifvoid:new k("ifvoid",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return R.call(this,!0,a.mouth,a.scopes,b)}),ifx:new k("ifx",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];var f=a.mouth.eat("pre space");
if(!f)return this.invalid=!0,a.mouth.loadState(b),[this];(c="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:"character"==c.type&&c.cat==d.cats.active?a.scopes.last.defs.active[c["char"]]:c)&&c.proxy&&(c=c.original);(f="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:"character"==f.type&&f.cat==d.cats.active?a.scopes.last.defs.active[f["char"]]:f)&&f.proxy&&(f=f.original);if(!c&&!f)return R.call(this,!0,a.mouth,a.scopes,
b);if(!c||!f||c.type!=f.type)return R.call(this,!1,a.mouth,a.scopes,b);if("character"==c.type)return R.call(this,c["char"]==f["char"]&&c.cat==f.cat,a.mouth,a.scopes,b);if("primitive"==c.type)return R.call(this,c===f,a.mouth,a.scopes,b);if(c.parameters.length!=f.parameters.length||c.replacement.length!=f.replacement.length)return R.call(this,!1,a.mouth,a.scopes,b);for(var g=0,k=c.parameters.length;g<k;g++)if("character"!=c.parameters[g].type||c.parameters[g]["char"]!=f.parameters[g]["char"]||c.parameters[g].cat!=
f.parameters[g].cat)if("command"!=c.parameters[g].type||c.parameters[g].name!=f.parameters[g].name)return R.call(this,!1,a.mouth,a.scopes,b);g=0;for(k=c.replacement.length;g<k;g++)if("character"!=c.replacement[g].type||c.replacement[g]["char"]!=f.replacement[g]["char"]||c.replacement[g].cat!=f.replacement[g].cat)if("command"!=c.replacement[g].type||c.replacement[g].name!=f.replacement[g].name)return R.call(this,!1,a.mouth,a.scopes,b);return R.call(this,!0,a.mouth,a.scopes,b)}),it:new k("it",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"it"});return[]}),kern:new k("kern",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:b});return[]}),lccode:new k("lccode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];
var b=a.mouth.eat("integer");if(b||0>b.value)return[a.scopes.last.lc[b.value]=a.scopes.last.lc[b.value]||new g(0)];this.invalid=!0;return[this]}),left:new k("left",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&
"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter)){new a.Scope;a.scopes.last.delimited=!0;a.scopes.last.leftDelimiter=c["char"];a.scopes.last.nullDelimiterSpace=new C(a.scopes.last.registers.named.nulldelimiterspace);a.openGroups.push(this);a.contexts.push("scope");a.scopes.last.tokens.push(this);a.scopes.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol","char":c["char"],code:c.code},subscript:null,superscript:null});this.ignore=!0;break}else return this.invalid=
!0,a.mouth.loadState(b),[this]}}),let:new k("let",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=
!0,a.mouth.loadState(b),[this];var g=a.mouth.eat();g&&"character"==g.type&&"="==g["char"]&&g.cat==d.cats.all||g&&a.mouth.revert();if(g=a.mouth.eat())if("command"==g.type||"character"==g.type&&g.cat==d.cats.active)if(b="command"==g.type?a.scopes.last.defs.primitive[g.name]||a.scopes.last.defs.macros[g.name]:a.scopes.last.defs.active[g.name])b=new V(b,"primitive"==b.type||b.isLet);else{if("command"==g.type&&"macro"==f&&(g=a.scopes.last.registers.named[g.name])){if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value){d.registers.named[c]=g;delete d.defs.macros[c];f=0;for(var k=a.scopes.length;f<k;f++)a.scopes[f].registers.named[c]=g,delete a.scopes[f].defs.macros[c]}else a.scopes.last.registers.named[c]=g,delete a.scopes.last.defs.macros[c];a.toggles.global=!1;return[]}}else b=new V(new V([g]),!0);else return this.invalid=!0,a.mouth.loadState(b),[this];if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==
f)for(b?d.defs.macros[c]=b:delete d.defs.macros[c],delete d.registers.named[c],f=0,k=a.scopes.length;f<k;f++)b?a.scopes[f].defs.macros[c]=b:delete a.scopes[f].defs.macros[c],delete a.scopes[f].registers.named[c];else for(b?d.defs.active[c]=b:delete d.defs.active[c],delete d.registers.named[c],f=0,k=a.scopes.length;f<k;f++)b?a.scopes[f].defs.active[c]=b:delete a.scopes[f].defs.active[c],delete a.scopes[f].registers[c];else b?a.scopes.last.defs["macro"==f?"macros":"active"][c]=b:delete a.scopes.last.defs["macro"==
f?"macros":"active"][c],delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),limits:new k("limits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:!0,token:this});return[]}),lower:new k("lower",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];b.sp.value*=-1;
b.em.value*=-1;a.tokens.push({type:"vkern",dimen:b});return[]}),lowercase:new k("lowercase",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("pre space");if(!c||c.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];c=[];for(var f=1;;){var g=a.mouth.eat("pre space");if(g)if("character"==g.type&&g.cat==d.cats.open)f++,c.push(g);else if("character"==g.type&&
g.cat==d.cats.close)if(f--,0<f)c.push(g);else break;else c.push(g);else return this.invalid=!0,a.mouth.loadState(b),[this]}b=0;for(f=c.length;b<f;b++)"character"==c[b].type&&a.scopes.last.lc[c[b].code]&&0<a.scopes.last.lc[c[b].code].value&&(c[b].code=a.scopes.last.lc[c[b].code].value,c[b]["char"]=String.fromCharCode(c[b].code));return c}),mathbin:new k("mathbin",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",
value:2,token:this});return[]}),mathchar:new k("mathchar",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(65536>b.value)var c=0;else if(524288>b.value){var f=b.value%65536;c=(b.value-f)/65536;b.value=f}else c=0;a.mouth.queue.unshift({type:"character",cat:d.cats.all,"char":String.fromCharCode(b.value),code:b.value,forcedMathCode:c});return[]}),mathchardef:new k("mathchardef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];if(65536>f.value)b=0;else if(524288>f.value){var g=f.value%65536;b=(f.value-g)/65536;f.value=g}else b=
0;f=new V([{type:"character",cat:d.cats.all,"char":String.fromCharCode(f.value),code:f.value,forcedMathCode:b}],[]);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.defs.macros[c.name]=f,delete d.registers.named[c.name],b=0,g=a.scopes.length;b<g;b++)a.scopes[b].defs.macros[c.name]=f,delete a.scopes[b].registers.named[c.name];else a.scopes.last.defs.macros[c.name]=f,delete a.scopes.last.registers.named[c.name];a.toggles.global=
!1}else return this.invalid=!0,a.mouth.loadState(b),[!0]}),mathchoice:new k("mathchoice",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b={type:"command",nameType:"command",escapeChar:this.escapeChar,name:"mathchoice",recognized:!0};a.contexts.push({toString:function(){return"mathchoice"},token:b,current:0,failed:function(){this.token.invalid=!0;a.contexts.pop()},succeeded:function(){a.contexts.pop();this.token.type="mathchoice";this.token.groups=
a.scopes.last.tokens.splice(a.scopes.last.tokens.length-4,4);this.token.ignore=!1}});a.tokens.push(b);b.ignore=!0}),mathclose:new k("mathclose",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:5,token:this});return[]}),mathcode:new k("mathcode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");if(b){if(0>b.value)return a.mouth.revert(),
this.invalid=!0,[this];if(!(b.value in d.mathcodes)){d.mathcodes[b.value]=new g(d.mathcodes.ord,0,8);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].mathcodes[b.value]=new g((0==c?d:a.scopes[c-1]).mathcodes[b.value])}return[a.scopes.last.mathcodes[b.value]]}this.invalid=!0;return[this]}),mathinner:new k("mathinner",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"inner",token:this});return[]}),
mathop:new k("mathop",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:1,token:this});return[]}),mathopen:new k("mathopen",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:4,token:this});return[]}),mathord:new k("mathord",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"family modifier",value:0,token:this});return[]}),mathpunct:new k("mathpunct",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:6,token:this});return[]}),mathrel:new k("mathrel",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:3,token:this});return[]}),message:new k("message",
function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"character"==c.type&&c.cat==d.cats.open){for(var f=0,g=[];;)if(c=a.mouth.eat("pre space"))if("character"==c.type&&c.cat==d.cats.open)f++,g.push(c["char"]);else if("character"==c.type&&c.cat==d.cats.close){if(!f)break;f--;g.push(c["char"])}else"command"==c.type?(g.push(c.escapeChar),g.push.apply(g,c.name.split(""))):g.push(c["char"]);else return this.invalid=!0,a.mouth.loadState(b),[this];L(g.join(""))}else return this.invalid=
!0,[this]}),mkern:new k("mkern",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("mu dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:b});return[]}),month:new k("month",function(a){return[new g((new Date).getMonth()+1)]}),mskip:new k("mskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("mu glue");if(!b)return this.invalid=
!0,[this];a.tokens.push({type:"glue",glue:b});return[]}),multiply:new k("multiply",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register)if(c&&c.register){var f=a.mouth.eat();if(!f||"character"!=f.type||
"b"!=f["char"]&&"B"!=f["char"]||f.cat==d.cats.active)if(f)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(b),[this];else f=a.mouth.eat(),(!f||"character"!=f.type||"y"!=f["char"]&&"Y"!=f["char"]||f.cat==d.cats.active)&&a.mouth.revert(2);if(f=a.mouth.eat("integer"))if("integer"==c.type){c.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.value=b.value;a.toggles.global=
!1}else if("dimension"==c.type){c.sp.value*=f.value;c.em.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.sp.value=b.sp.value,c.em.value=b.em.value;a.toggles.global=!1}else if("mu dimension"==c.type){c.mu.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.mu.value=
b.mu.value;a.toggles.global=!1}else if("glue"==c.type){c.start.sp.value*=f.value;c.start.em.value*=f.value;"infinite dimension"==c.stretch.type?c.stretch.number.value*=f.value:(c.stretch.sp.value*=f.value,c.stretch.em.value*=f.value);"infinite dimension"==c.shrink.type?c.shrink.number.value*=f.value:(c.shrink.sp.value*=f.value,c.shrink.em.value*=f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,
c.start.sp.value=b.start.sp.value,c.start.em.value=b.start.em.value,c.stretch="infinite dimension"==b.stretch.type?new t(b.stretch.number.value,b.stretch.magnitude.value):new C(b.stretch.sp.value,b.stretch.em.value),c.shrink="infinite dimension"==b.shrink.type?new t(b.shrink.number.value,b.shrink.magnitude.value):new C(b.shrink.sp.value,b.shrink.em.value);a.toggles.global=!1}else{if("mu glue"==c.type){c.start.mu.value*=f.value;"infinite dimension"==c.stretch.type?c.stretch.number.value*=f.value:c.stretch.mu.value*=
f.value;"infinite dimension"==c.shrink.type?c.shrink.number.value*=f.value:c.shrink.mu.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.mu.value=b.start.mu.value,c.stretch="infinite dimension"==b.stretch.type?new t(b.stretch.number.value,b.stretch.magnitude.value):new N(b.stretch.mu.value),c.shrink="infinite dimension"==b.shrink.type?new t(b.shrink.number.value,b.shrink.magnitude.value):
new N(b.shrink.mu.value);a.toggles.global=!1}}else return this.invalid=!0,a.mouth.loadState(b),[this];break}else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}return[]}),muskip:new k("muskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.muskip[b.value]){d.registers.muskip[b.value]=new W(new N(0,
0),new N(0,0),new N(0,0));for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.muskip[b.value]=new W((c?a.scopes[c-1]:d).registers.muskip[b.value])}return[a.scopes.last.registers.muskip[b.value]]}),muskipdef:new k("muskipdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=
!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];c=c.name;f=f.value;if(!d.registers.muskip[f]){d.registers.muskip[f]=new W(new N(0),new N(0),new N(0));b=0;for(var g=a.scopes.length;b<g;b++)a.scopes[b].registers.muskip[f]=new W((b?a.scopes[b-1]:d).registers.muskip[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.muskip[f],delete d.defs.macros[c],b=0,g=a.scopes.length;b<g;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.muskip[f],delete a.scopes[b].defs.macros[c];else a.scopes.last.registers.named[c]=a.scopes.last.registers.muskip[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(countDefSym),[!0]}),noexpand:new k("noexpand",function(a){var b=a.mouth.eat();if(!b)return this.invalid=
!0,[this];a.mouth.revert();return"command"==b.type||"character"==b.type&&b.cat==d.cats.active?(this.invalid=!0,[this]):[]}),nolimits:new k("nolimits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:!1,token:this});return[]}),nonscript:new k("nonscript",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",isNonScript:!0});
return[]}),normalfont:new k("normalfont",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"nm"});return[]}),number:new k("number",function(a){a=a.mouth.eat("integer");return a?a.value.toString().split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}}):(this.invalid=!0,[this])}),of:new k("of",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];if(a.scopes.last.root){var b=a.scopes.last.tokens.indexOf(a.scopes.last.root);a.tokens.push({type:"family modifier",value:"rad",index:a.scopes.last.tokens.splice(b,a.scopes.last.tokens.length-b+1).slice(1),token:this});a.scopes.last.root=!1;return[]}this.invalid=!0;return[this]}),omit:new k("omit",function(a){this.invalid=!0;return[this]}),or:new k("or",function(a){this.invalid=!0;return[this]}),over:new k("over",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracLeftDelim=a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth="from font";a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),overline:new k("overline",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"over",token:this});return[]}),overwithdelims:new k("overwithdelims",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=c["char"];
break}else a.scopes.last.fracLeftDelim=c["char"];else return this.invalid=!0,a.mouth.loadState(b),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth="from font";a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),raise:new k("raise",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");
if(!b)return this.invalid=!0,[this];a.tokens.push({type:"vkern",dimen:b});return[]}),relax:new k("relax",function(a){return"superscript"==a.contexts.last||"subscript"==a.contexts.last?(this.invalid=!0,[this]):[]}),right:new k("right",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last||!a.openGroups.length||!a.scopes.last.delimited||a.scopes.last.isHalign||a.scopes.last.isHalignCell||a.scopes.last.semisimple)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();
for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter)){if("scope"!=a.contexts.last)return this.invalid=!0,a.mouth.loadState(b),[this];a.openGroups.pop();a.contexts.pop();b=a.scopes.last.tokens;a.scopes.last.root&&(a.scopes.last.root.invalid=!0);if(a.scopes.last.isFrac)a.scopes.last.fracNumerator.shift(),
a.scopes.last.fracNumerator.shift(),a.scopes[a.scopes.length-2].tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:b,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new C(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null,delimited:!0,nullDelimiterSpace:new C(a.scopes.last.registers.named.nulldelimiterspace),delims:[a.scopes.last.leftDelimiter,
c["char"]]}),a.scopes.pop();else{b.shift();b.shift();var f=a.scopes.last.leftDelimiter;a.scopes.pop();a.scopes.last.tokens.push({type:"atom",atomType:"inner",nucleus:b,superscript:null,subscript:null,delimited:!0,nullDelimiterSpace:new C(a.scopes.last.registers.named.nulldelimiterspace),delims:[f,c["char"]]})}break}else return this.invalid=!0,a.mouth.loadState(b),[this]}}),rm:new k("rm",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",
value:"rm"});return[]}),romannumeral:new k("romannumeral",function(a){var b=a.mouth.eat("integer");if(!b)return this.invalid=!0,[this];if(0>=b.value)return this.invalid=!0,a.mouth.revert(),[this];var c="";b=b.value;c=~~(b/1E3);b%=1E3;a=~~(b/100);b%=100;var f=~~(b/10);b%=10;c=Array(c+1).join("m");c=3>a?c+Array(a+1).join("c"):4==a?c+"cd":9>a?c+("d"+Array(a%5+1).join("c")):c+"cm";c=3>f?c+Array(f+1).join("x"):4==f?c+"xl":9>f?c+("l"+Array(f%5+1).join("x")):c+"xc";c=3>b?c+Array(b+1).join("i"):4==b?c+"iv":
9>b?c+("v"+Array(b%5+1).join("i")):c+"ix";return c.split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}})}),scriptscriptstyle:new k("scriptscriptstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"scriptscriptstyle"});return[]}),scriptstyle:new k("scriptstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"font modifier",value:"scriptstyle"});return[]}),show:new k("show",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.string,c=a.mouth.eat();if(!c)return this.invalid=!0,[this];b='"'+this.escapeChar+this.name+b.substring(0,b.length-a.mouth.string.length)+'":\n';if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){var f="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:
a.scopes.last.defs.active[c["char"]];if(f){if("primitive"==f.type||f.isLet&&"primitive"==f.original.type)return L(b+c.escapeChar+c.name+"="+String.fromCharCode(a.scopes.last.registers.named.escapechar.value)+(f.original||f).name),[];if(f.isLet)b+=(c.escapeChar+c.name||c["char"])+"=",c=f.original.replacement[0];else{f.proxy&&(f=f.original);b+=(c.escapeChar+c.name||c["char"])+"=macro:\n";c=a=0;for(var g=f.parameters.length;c<g;c++)b="character"==f.parameters[c].type&&f.parameters[c].cat!=d.cats.param?
b+f.parameters[c]["char"]:"character"==f.parameters[c].type?b+(f.parameters[c]["char"]+ ++a):b+(f.parameters[c].escapeChar+f.parameters[c].name);b+="->";c=0;for(g=f.replacement.length;c<g;c++)b="character"==f.replacement[c].type?b+f.replacement[c]["char"]:b+(f.replacement[c].escapeChar+f.replacement[c].name);L(b);return[]}}else return L(b+c.escapeChar+c.name+"=undefined."),[]}switch(c.cat){case d.cats.open:L(b+"begin-group character "+c["char"]+".");break;case d.cats.close:L(b+"end-group character "+
c["char"]+".");break;case d.cats.math:L(b+"math shift character "+c["char"]+".");break;case d.cats.alignment:L(b+"alignment tab character "+c["char"]+".");break;case d.cats.param:L(b+"macro parameter character "+c["char"]+".");break;case d.cats["super"]:L(b+"superscript character "+c["char"]+".");break;case d.cats.sub:L(b+"subscript character "+c["char"]+".");break;case d.cats.whitespace:L(b+"blank space "+c["char"]+".");break;case d.cats.letter:L(b+"the letter "+c["char"]+".");break;default:L(b+
"the character "+c["char"]+".")}return[]}),showthe:new k("showthe",function(a){$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else{if(c&&c.register)return"integer"==c.type?L(c.value+"."):"dimension"==c.type?(b=Math.round(c.sp.value/65536*1E5)/1E5,b+=Math.round(c.em.value/65536*1E5)/1E5*12,L(b+(Number.isInteger(b)?".0pt.":
"pt."))):"mu dimension"==c.type?(b=Math.round(c.mu.value/65536*1E5)/1E5,L(b+(Number.isInteger(b)?".0mu.":"mu."))):"glue"==c.type?(b=Math.round(c.start.sp.value/65536*1E5)/1E5,b+=Math.round(c.start.em.value/65536*1E5)/1E5*12,a=b+(Number.isInteger(b)?".0pt":"pt"),c.stretch instanceof C&&(c.stretch.sp.value||c.stretch.em.value)?(b=Math.round(c.stretch.sp.value/65536*1E5)/1E5,b+=Math.round(c.stretch.em.value/65536*1E5)/1E5*12,a+=" plus "+b+(Number.isInteger(b)?".0pt":"pt")):c.stretch instanceof t&&c.stretch.number.value&&
(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof C&&(c.shrink.sp.value||c.shrink.em.value)?(b=Math.round(c.shrink.sp.value/65536*1E5)/1E5,b+=Math.round(c.shrink.em.value/65536*1E5)/1E5*12,a+=" minus "+b+(Number.isInteger(b)?".0pt":"pt")):c.shrink instanceof t&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+
Array(c.shrink.magnitude.value).join("l")),L(a+".")):"mu glue"==c.type&&(b=Math.round(c.start.mu.value/65536*1E5)/1E5,a=b+(Number.isInteger(b)?".0mu":"mu"),c.stretch instanceof N&&c.stretch.mu.value?(b=Math.round(c.stretch.mu.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0mu":"mu")):c.stretch instanceof t&&c.stretch.number.value&&(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof
N&&c.shrink.mu.value?(b=Math.round(c.shrink.mu.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0mu":"mu")):c.shrink instanceof t&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.shrink.magnitude.value).join("l")),L(a+".")),[];this.invalid=!0;a.mouth.loadState(b);return[this]}}}),skip:new k("skip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=
a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.skip[b.value]){d.registers.skip[b.value]=new P(new C(0,0),new C(0,0),new C(0,0));for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.skip[b.value]=new P((c?a.scopes[c-1]:d).registers.skip[b.value])}return[a.scopes.last.registers.skip[b.value]]}),skipdef:new k("skipdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();
a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];c=c.name;f=f.value;if(!d.registers.skip[f]){d.registers.skip[f]=new P(new C(0,0),new C(0,0),new C(0,0));b=0;for(var g=a.scopes.length;b<g;b++)a.scopes[b].registers.skip[f]=
new P((b?a.scopes[b-1]:d).registers.skip[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.skip[f],delete d.defs.macros[c],b=0,g=a.scopes.length;b<g;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.skip[f],delete a.scopes[b].defs.macros[c];else a.scopes.last.registers.named[c]=a.scopes.last.registers.skip[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(countDefSym),
[!0]}),sl:new k("sl",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"sl"});return[]}),span:new k("span",function(a){if(!a.scopes.last.isHalignCell||"scope"!=a.contexts.last)return this.invalid=!0,[this];var b=a.scopes[a.scopes.length-2].cellData[a.scopes[a.scopes.length-2].cellData.length-1],c=a.scopes[a.scopes.length-2];if(!b[b.length-1].omit&&!this.postPreamble){for(var f=-1,g,k=0,v=b.length;k<v;k++)f+=
b[k].span;if(c.preamble[f])g=c.preamble[f][1];else if(~c.repeatPreambleAt)b=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),g=b[(f-c.repeatPreambleAt)%b.length][1];else return this.invalid=!0,[this];if(!c.preamble[f+1]&&!~c.repeatPreambleAt)return this.invalid=!0,[this];this.postPreamble=!0;return g.concat(this)}a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.contexts.pop();g=a.scopes.last.tokens;a.scopes.last.isFrac?(b[b.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",
numerator:a.scopes.last.fracNumerator,denominator:g,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new C(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),b[b.length-1].content=b[b.length-1].content.concat(g));$jscomp.initSymbol();f=Symbol();a.mouth.saveState(f);b[b.length-1].omit=!1;for(b[b.length-1].span++;;)if(k=a.mouth.eat(),!k){a.mouth.loadState(f);break}else if("character"==
k.type&&k.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==k.type||"character"==k.type&&k.cat==d.cats.active){if(k.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}v="command"==k.type?a.scopes.last.defs.primitive[k.name]||a.scopes.last.defs.macros[k.name]:a.scopes.last.defs.active[k["char"]];if(!v){a.mouth.loadState(f);break}if(v===d.defs.primitive.the||v.proxy&&v.original===d.defs.primitive.the||v===d.defs.primitive.expandafter||v.proxy&&v.original===d.defs.primitive.expandafter||
v===d.defs.primitive.number||v.proxy&&v.original===d.defs.primitive.number||v===d.defs.primitive.romannumeral||v.proxy&&v.original===d.defs.primitive.romannumeral||v===d.defs.primitive.csname||v.proxy&&v.original===d.defs.primitive.csname||v===d.defs.primitive.string||v.proxy&&v.original===d.defs.primitive.string||v===d.defs.primitive["if"]||v.isLet&&v.original===d.defs.primitive["if"]||v===d.defs.primitive.ifcase||v.isLet&&v.original===d.defs.primitive.ifcase||v===d.defs.primitive.ifcat||v.isLet&&
v.original===d.defs.primitive.ifcat||v===d.defs.primitive.ifdim||v.isLet&&v.original===d.defs.primitive.ifdim||v===d.defs.primitive.ifeof||v.isLet&&v.original===d.defs.primitive.ifeof||v===d.defs.primitive.iffalse||v.isLet&&v.original===d.defs.primitive.iffalse||v===d.defs.primitive.ifodd||v.isLet&&v.original===d.defs.primitive.ifodd||v===d.defs.primitive.ifnum||v.isLet&&v.original===d.defs.primitive.ifnum||v===d.defs.primitive.ifhmode||v.isLet&&v.original===d.defs.primitive.ifhmode||v===d.defs.primitive.ifinner||
v.isLet&&v.original===d.defs.primitive.ifinner||v===d.defs.primitive.ifmmode||v.isLet&&v.original===d.defs.primitive.ifmmode||v===d.defs.primitive.iftrue||v.isLet&&v.original===d.defs.primitive.iftrue||v===d.defs.primitive.ifvmode||v.isLet&&v.original===d.defs.primitive.ifvmode||v===d.defs.primitive.ifvoid||v.isLet&&v.original===d.defs.primitive.ifvoid||v===d.defs.primitive.ifx||v.isLet&&v.original===d.defs.primitive.ifx){if(v=a.mouth.expand(k,a.mouth),1==v.length&&v[0]===k&&k.invalid){a.mouth.loadState(f);
break}}else{if(v===d.defs.primitive.omit||v.proxy&&v.original===d.defs.primitive.omit){b[b.length-1].omit=!0;break}if("primitive"==v.type||v.proxy&&"primitive"==v.original.type){a.mouth.loadState(f);break}v=a.mouth.expand(k,a.mouth);if(1==v.length&&v[0]==-k&&k.invalid){a.mouth.loadState(f);break}}a.mouth.queue.unshift.apply(a.mouth.queue,v)}a.contexts.push("scope");new a.Scope;a.scopes.last.isHalignCell=!0;if(!b[b.length-1].omit){f=-1;k=0;for(v=b.length;k<v;k++)f+=b[k].span;c.preamble[f]?g=c.preamble[f][0]:
~c.repeatPreambleAt&&(b=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),g=b[(f-c.repeatPreambleAt)%b.length][0]);a.mouth.queue.unshift.apply(a.mouth.queue,g)}}),radical:new k("sqrt",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"rad",index:[],token:this});return[]}),root:new k("root",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last||a.scopes.last.root)return this.invalid=
!0,[this];this.ignore=!0;a.scopes.last.root=this;return[this]}),string:new k("string",function(a){var b=a.mouth.eat();if(!b)return this.invalid=!0,[this];if("character"==b.type)return[{type:"character",cat:d.cats.all,"char":b["char"],code:b.code}];if("command"==b.type)return(String.fromCharCode(a.scopes.last.registers.named.escapechar.value)+b.name).split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});this.invalid=!0;a.mouth.revert();return[this]}),textstyle:new k("textstyle",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"textstyle"});return[]}),the:new k("the",function(a){$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register){if("integer"==c.type)return c.value.toString().split("").map(function(a){return{type:"character",
cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});if("dimension"==c.type)return b=Math.round(c.sp.value/65536*1E5)/1E5,b+=Math.round(c.em.value/65536*1E5)/1E5*12,(b+(Number.isInteger(b)?".0pt":"pt")).split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});if("mu dimension"==c.type)return b=Math.round(c.mu.value/65536*1E5)/1E5,(b+(Number.isInteger(b)?".0mu":"mu")).split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});
if("glue"==c.type)return a="",b=Math.round(c.start.sp.value/65536*1E5)/1E5,b+=Math.round(c.start.em.value/65536*1E5)/1E5*12,a=b+(Number.isInteger(b)?".0pt":"pt"),c.stretch instanceof C&&(c.stretch.sp.value||c.stretch.em.value)?(b=Math.round(c.stretch.sp.value/65536*1E5)/1E5,b+=Math.round(c.stretch.em.value/65536*1E5)/1E5*12,a+=" plus "+b+(Number.isInteger(b)?".0pt":"pt")):c.stretch instanceof t&&c.stretch.number.value&&(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?
".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof C&&(c.shrink.sp.value||c.shrink.em.value)?(b=Math.round(c.shrink.sp.value/65536*1E5)/1E5,b+=Math.round(c.shrink.em.value/65536*1E5)/1E5*12,a+=" minus "+b+(Number.isInteger(b)?".0pt":"pt")):c.shrink instanceof t&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.shrink.magnitude.value).join("l")),a.split("").map(function(a){return{type:"character",
cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});if("mu glue"==c.type)return a="",b=Math.round(c.start.mu.value/65536*1E5)/1E5,a=b+(Number.isInteger(b)?".0mu":"mu"),c.stretch instanceof N&&c.stretch.mu.value?(b=Math.round(c.stretch.mu.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0mu":"mu")):c.stretch instanceof t&&c.stretch.number.value&&(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof
N&&c.shrink.mu.value?(b=Math.round(c.shrink.mu.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0mu":"mu")):c.shrink instanceof t&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.shrink.magnitude.value).join("l")),a.split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}})}else return this.invalid=!0,a.mouth.loadState(b),[this]}}),time:new k("time",function(a){a=new Date;
return[new g(60*a.getHours()+a.getMinutes())]}),uccode:new k("uccode",function(a){var b=a.mouth.eat("integer");if(b||0>b.value)return[a.scopes.last.uc[b.value]=a.scopes.last.uc[b.value]||new g(0)];this.invalid=!0;return[this]}),underline:new k("underline",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"under",token:this});return[]}),uppercase:new k("uppercase",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c||c.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];c=[];for(var f=1;;){var g=a.mouth.eat("pre space");if(g)if("character"==g.type&&g.cat==d.cats.open)f++,c.push(g);else if("character"==g.type&&g.cat==d.cats.close)if(f--,0<f)c.push(g);else break;else c.push(g);else return this.invalid=!0,a.mouth.loadState(b),[this]}b=0;for(f=c.length;b<f;b++)"character"==
c[b].type&&a.scopes.last.uc[c[b].code]&&0<a.scopes.last.uc[c[b].code].value&&(c[b].code=a.scopes.last.uc[c[b].code].value,c[b]["char"]=String.fromCharCode(c[b].code));return c}),vbox:new k("vbox",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c,f;;){var g=a.mouth.eat();if(!g)return this.invalid=!0,[this];if("command"==g.type||"character"==g.type&&g.cat==d.cats.active){var k="command"==g.type?a.scopes.last.defs.primitive[g.name]||a.scopes.last.defs.macros[g.name]:a.scopes.last.defs.active[g["char"]];
if(k&&(k===d.defs.primitive.relax||k.proxy&&k.original===d.defs.primitive.relax))break;g=a.mouth.expand(g,a.mouth);a.mouth.queue.unshift.apply(a.mouth.queue,g)}else if("character"!=g.type||"t"!=g["char"]&&"T"!=g["char"])if("character"!=g.type||"s"!=g["char"]&&"S"!=g["char"])if("character"==g.type&&g.cat==d.cats.open){a.mouth.revert();break}else return this.invalid=!0,a.mouth.loadState(b),[this];else{c=a.mouth.eat();g=a.mouth.eat();k=a.mouth.eat();var v=a.mouth.eat(),h=a.mouth.eat();if(!c||"character"!=
c.type||"p"!=c["char"]&&"P"!=c["char"]||c.cat==d.cats.active||!g||"character"!=g.type||"r"!=g["char"]&&"R"!=g["char"]||g.cat==d.cats.active||!k||"character"!=k.type||"e"!=k["char"]&&"E"!=k["char"]||k.cat==d.cats.active||!v||"character"!=v.type||"a"!=v["char"]&&"A"!=v["char"]||v.cat==d.cats.active||!h||"character"!=h.type||"d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active||!(g=a.mouth.eat("dimension")))return this.invalid=!0,a.mouth.loadState(b),[this];c=g;break}else if(f=a.mouth.eat("pre space"),
f&&"character"==f.type&&("o"==f["char"]||"O"==g["char"])&&g.cat!=d.cats.active&&(g=a.mouth.eat("dimension"))){f=g;break}else return this.invalid=!0,a.mouth.loadState(b),[this]}g=a.mouth.preview();if(!g||"character"!=g.type||g.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];f||c||(c=new C(0,0));a.tokens.push({type:"box wrapper",value:"vertical",to:f,spread:c,token:this});return[]}),vcenter:new k("vcenter",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"family modifier",value:"vcenter",token:this});return[]}),vfil:new k("vfil",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:new P(new C(0),new t(1,1),new C(0))});return[]}),vfill:new k("vfill",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:new P(new C(0),new t(1,2),new C(0))});return[]}),
vrule:new k("vrule",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=b=!1,f=!1;;){var g=a.mouth.eat();if(!g){a.mouth.revert();break}if("h"!=g["char"]&&"H"!=g["char"]||g.cat==d.cats.active)if("d"!=g["char"]&&"D"!=g["char"]||g.cat==d.cats.active)if("w"!=g["char"]&&"W"!=g["char"]||g.cat==d.cats.active)a.mouth.revert();else if(g=a.mouth.eat("pre space"),!g||"i"!=g["char"]&&"I"!=
g["char"]||g.cat==d.cats.active)a.mouth.revert(g?2:1);else if(g=a.mouth.eat("pre space"),!g||"d"!=g["char"]&&"D"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?3:2);else if(g=a.mouth.eat("pre space"),!g||"t"!=g["char"]&&"T"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?4:3);else if(g=a.mouth.eat("pre space"),!g||"h"!=g["char"]&&"H"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?5:4);else if(g=a.mouth.eat("dimension")){f=g;continue}else a.mouth.revert(5);else if(g=a.mouth.eat("pre space"),
!g||"e"!=g["char"]&&"E"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?2:1);else if(g=a.mouth.eat("pre space"),!g||"p"!=g["char"]&&"P"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?3:2);else if(g=a.mouth.eat("pre space"),!g||"t"!=g["char"]&&"T"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?4:3);else if(g=a.mouth.eat("pre space"),!g||"h"!=g["char"]&&"H"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?5:4);else if(g=a.mouth.eat("dimension")){c=g;continue}else a.mouth.revert(5);else if(g=
a.mouth.eat("pre space"),!g||"e"!=g["char"]&&"E"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?2:1);else if(g=a.mouth.eat("pre space"),!g||"i"!=g["char"]&&"I"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?3:2);else if(g=a.mouth.eat("pre space"),!g||"g"!=g["char"]&&"G"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?4:3);else if(g=a.mouth.eat("pre space"),!g||"h"!=g["char"]&&"H"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?5:4);else if(g=a.mouth.eat("pre space"),!g||"t"!=g["char"]&&
"T"!=g["char"]||g.cat==d.cats.active)a.mouth.revert(g?6:5);else if(g=a.mouth.eat("dimension")){b=g;continue}else a.mouth.revert(6);break}f=f||new C(0,65536/30);a.tokens.push({type:"rule",ruleType:"v",height:b,depth:c,width:f});return[]}),vskip:new k("vskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:b});return[]}),xdef:new k("xdef",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];for(var g=[],t=0,
v=!1;;){var h=a.mouth.eat();if(h)if(h.cat==d.cats.open){a.mouth.revert();break}else if(h.cat==d.cats.param){var n=a.mouth.eat("pre space");if(n)if(n.cat==d.cats.open)v=!0,a.mouth.revert(),g.push({type:"character",cat:d.cats.open,"char":n["char"],code:n.code});else if(48<n.code&&58>n.code&&n.cat==d.cats.all&&+n["char"]==t+1)g.push(h),t++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}else g.push(h);else return this.invalid=!0,a.mouth.loadState(b),
[this]}t=0;n=[];for(var C=!1,G=!1;;)if(h=a.mouth.eat())if("character"!=h.type||h.cat!=d.cats.param||G)if("character"==h.type&&h.cat==d.cats.open)t++,n.push(h),C=!1;else if("character"==h.type&&h.cat==d.cats.close){t--;if(0==t)break;n.push(h);C=!1}else if(C)n.push(h),C=!1;else if("command"==h.type||"character"==h.type&&h.cat==d.cats.active)if(h.name in a.scopes.last.registers.named)n.push(h);else{var p="command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h["char"]];
if(!p)return this.invalid=!0,a.mouth.loadState(b),[this];if(p===d.defs.primitive.the||p.proxy&&p.original===d.defs.primitive.the||p===d.defs.primitive.expandafter||p.proxy&&p.original===d.defs.primitive.expandafter||p===d.defs.primitive.number||p.proxy&&p.original===d.defs.primitive.number||p===d.defs.primitive.romannumeral||p.proxy&&p.original===d.defs.primitive.romannumeral||p===d.defs.primitive.csname||p.proxy&&p.original===d.defs.primitive.csname||p===d.defs.primitive.string||p.proxy&&p.original===
d.defs.primitive.string||p===d.defs.primitive["if"]||p.isLet&&p.original===d.defs.primitive["if"]||p===d.defs.primitive.ifcase||p.isLet&&p.original===d.defs.primitive.ifcase||p===d.defs.primitive.ifcat||p.isLet&&p.original===d.defs.primitive.ifcat||p===d.defs.primitive.ifdim||p.isLet&&p.original===d.defs.primitive.ifdim||p===d.defs.primitive.ifeof||p.isLet&&p.original===d.defs.primitive.ifeof||p===d.defs.primitive.iffalse||p.isLet&&p.original===d.defs.primitive.iffalse||p===d.defs.primitive.ifodd||
p.isLet&&p.original===d.defs.primitive.ifodd||p===d.defs.primitive.ifnum||p.isLet&&p.original===d.defs.primitive.ifnum||p===d.defs.primitive.ifhmode||p.isLet&&p.original===d.defs.primitive.ifhmode||p===d.defs.primitive.ifinner||p.isLet&&p.original===d.defs.primitive.ifinner||p===d.defs.primitive.ifmmode||p.isLet&&p.original===d.defs.primitive.ifmmode||p===d.defs.primitive.iftrue||p.isLet&&p.original===d.defs.primitive.iftrue||p===d.defs.primitive.ifvmode||p.isLet&&p.original===d.defs.primitive.ifvmode||
p===d.defs.primitive.ifvoid||p.isLet&&p.original===d.defs.primitive.ifvoid||p===d.defs.primitive.ifx||p.isLet&&p.original===d.defs.primitive.ifx){p=a.mouth.expand(h,a.mouth);if(1==p.length&&p[0]===h&&h.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,p)}else p===d.defs.primitive.noexpand||p.proxy&&p.original===d.defs.primitive.noexpand?C=!0:p instanceof k||p.proxy&&p.original instanceof k?n.push(h):a.mouth.queue.unshift.apply(a.mouth.queue,a.mouth.expand(h,
a.mouth))}else n.push(h);else{if((p=a.mouth.eat("pre space"))&&(p.cat==d.cats.param||p.cat==d.cats.all&&p["char"]<=g.length&&1<=p["char"]))a.mouth.revert(),p.cat==d.cats.param&&(G=!0);else return this.invalid=!0,a.mouth.loadState(b),[this];n.push(h);C=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];n.shift();v&&n.push(g[g.length-1]);p=new V(n,g);if(0>a.scopes.last.registers.named.globaldefs.value)a.scopes.last.defs["macro"==f?"macros":"active"][c]=p,delete a.scopes.last.registers.named[c];
else if("macro"==f)for(d.defs.macros[c]=p,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.macros[c]=p,delete a.scopes.last.registers.named[c];else for(d.defs.active[c]=p,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.ative[c]=p,delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),year:new k("year",function(a){return[new g((new Date).getFullYear())]}),"@debug":new k("@debug",function(a){debugger}),"@exec@JavaScript":new k("@exec@JavaScript",
function(a){})},macros:{},active:{}},registers:{count:{},dimen:{},skip:{},muskip:{},named:{pretolerance:new g(100),tolerance:new g(200),hbadness:new g(1E3),vbadness:new g(1E3),linepenalty:new g(10),hypenpenalty:new g(50),exhyphenpenalty:new g(50),binoppenalty:new g(700),relpenalty:new g(500),clubpenalty:new g(150),widowpenalty:new g(150),displaywidowpenalty:new g(50),brokenpenalty:new g(100),predisplaypenalty:new g(1E4),postdisplaypenalty:new g(0),floatingpenalty:new g(0),interlinepenalty:new g(0),
outputpenalty:new g(-10001),doublehyphendemerits:new g(1E4),finalhyphendemerits:new g(5E3),adjdemerits:new g(1E4),looseness:new g(0),pausing:new g(0),holdinginserts:new g(0),tracingonline:new g(0),tracingmacros:new g(0),tracingstats:new g(0),tracingparagraphs:new g(0),tracingpages:new g(0),tracingoutput:new g(0),tracinglostchars:new g(0),tracingcommands:new g(0),tracingrestores:new g(0),language:new g(0),uchyph:new g(1),lefthyphenmin:new g(2),righthyphenmin:new g(3),globaldefs:new g(0),defaulthyphenchar:new g(45),
defaultskewchar:new g(-1),escapechar:new g(92),endlinechar:new g(13),newlinechar:new g(10),maxdeadcycles:new g(100),hangafter:new g(1),fam:new g(0),mag:new g(1E3),delimiterfactor:new g(901),showboxbreadth:new g(-1),showboxdepth:new g(-1),errorcontextlines:new g(-1),hfuzz:new C(6553.6,0),vfuzz:new C(6553.6,0),overfullrule:new C(0,0),emergencystetch:new C(0,0),hsize:new C(22609920,0),vsize:new C(36044800,0),maxdepth:new C(327680,0),splitmaxdepth:new C(1074397184,-65536),boxmaxdepth:new C(1074397184,
-65536),lineskiplimit:new C(0,0),delimitershortfall:new C(327680,0),nulldelimiterspace:new C(0,6553.6),scriptspace:new C(32768,0),mathsurround:new C(0,0),predisplaystyle:new C(0,0),displaywidth:new C(0,0),displayindent:new C(0,0),parindent:new C(983040,0),hangindent:new C(0,0),hoffset:new C(0,0),voffset:new C(0,0),baselineskip:new P(new C(786432,0)),lineskip:new P(new C(65536,0)),parskip:new P(new C(0,0),new C(65536,0)),abovedisplayskip:new P(new C(655360,0),new C(131072,0),new C(327680,0)),abovedisplayshortskip:new P(new C(0,
0),new C(196608,0)),belowdisplayskip:new P(new C(0,0),new C(196608,0)),belowdisplayshortskip:new P(new C(393216,0),new C(196608,0),new C(196608,0)),leftskip:new P(new C(0,0)),rightskip:new P(new C(0,0)),topskip:new P(new C(655360,0)),splittopskip:new P(new C(655360,0)),tabskip:new P(new C(0,0)),spaceskip:new P(new C(0,0)),xspaceskip:new P(new C(0,0)),parfillskip:new P(new C(0,0),new t(65536,1)),thinmuskip:new W(new N(196608)),medmuskip:new W(new N(262144),new N(131072),new N(262144)),thickmuskip:new W(new N(327680),
new N(327680))}},cats:function(){for(var a={92:new g(0,0,15),123:new g(1,0,15),125:new g(2,0,15),36:new g(3,0,15),38:new g(4,0,15),10:new g(5,0,15),35:new g(6,0,15),94:new g(7,0,15),95:new g(8,0,15),0:new g(9,0,15),9:new g(10,0,15),32:new g(10,0,15),126:new g(13,0,15),37:new g(14,0,15),127:new g(15,0,15),escape:0,open:1,close:2,math:3,alignment:4,eol:5,param:6,"super":7,sub:8,ignored:9,whitespace:10,letter:11,all:12,active:13,comment:14,invalid:15},b=0;52>b;b++)a["abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charCodeAt(b)]=
new g(11);return a}(),mathcodes:function(){for(var a={ord:0,op:1,bin:2,rel:3,open:4,close:5,punct:6,variable:7,active:8},b=0,c=0;b<c;b++)a["".charCodeAt(b)]=new g(1,0,8);b=0;for(c=34;b<c;b++)a["+-*\u00b1\u2213\u2216\u00d7\u2217\u22c6\u22c4\u2218\u2219\u00f7\u2229\u222a\u228e\u2293\u2294\u25c3\u25b9\u2240\u25ef\u25b3\u25bd\u2228\u2227\u2295\u2296\u2297\u2298\u2299\u2020\u2021\u2a3f".charCodeAt(b)]=new g(2,0,8);b=0;for(c=63;b<c;b++)a['<>=:"\u2264\u227a\u2aaf\u226a\u2282\u2286\u228f\u2291\u2208\u22a2\u2323\u2322\u2265\u227b\u2ab0\u226b\u2283\u2287\u2290\u2292\u220b\u22a3\u2261\u223c\u2243\u224d\u2248\u2245\u22c8\u221d\u22a8\u2250\u22a5\u226e\u2270\u2280\u2282\u0338\u2288\u2291\u0338\u226f\u2271\u2281\u2283\u0338\u2289\u2292\u0338\u2260\u2261\u0338\u2241\u2243\u0338\u2246\u224d\u0338'.charCodeAt(b)]=
new g(3,0,8);b=0;for(c=4;b<c;b++)a["([{`".charCodeAt(b)]=new g(4,0,8);b=0;for(c=5;b<c;b++)a["}])!?".charCodeAt(b)]=new g(5,0,8);b=0;for(c=2;b<c;b++)a[",;".charCodeAt(b)]=new g(6,0,8);b=0;for(c=82;b<c;b++)a["abcdefgh\u0127ijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\u03b1\u03b2\u03b3\u03b4\u03f5\u03b5\u03b6\u03b7\u03b8\u03d1\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03c0\u03d6\u03c1\u03f1\u03c3\u03c2\u03c4\u03c5\u03d5\u03c6\u03c7\u03c8\u03c9".charCodeAt(b)]=new g(7,0,8);return a}(),delims:[40,41,46,60,
62,47,91,92,93,123,124,125,8214,8593,8595,8597,8657,8659,8661,8741,8968,8969,8970,8971,9130,9136,9137,9168,10216,10217,10222,10223],parameters:"pretolerance tolerance hbadness vbadness linepenalty hypenpenalty exhyphenpenalty binoppenalty relpenalty clubpenalty widowpenalty displaywidowpenalty brokenpenalty predisplaypenalty postdisplaypenalty floatingpenalty interlinepenalty outputpenalty doublehyphendemerits finalhyphendemerits adjdemerits looseness pausing holdinginserts tracingonline tracingmacros tracingstats tracingparagraphs tracingpages tracingoutput tracinglostchars tracingcommands tracingrestores language uchyph lefthyphenmin righthyphenmin globaldefs defaulthyphenchar defaultskewchar escapechar endlinechar newlinechar maxdeadcycles hangafter fam mag delimiterfactor showboxbreadth showboxdepth errorcontextlines hfuzz vfuzz overfullrule emergencystetch hsize vsize maxdepth splitmaxdepth boxmaxdepth lineskiplimit delimitershortfall nulldelimiterfall scriptspace mathsurround predisplaystyle displaywidth displayindent parindent hangindent hoffset voffset baselineskip lineskip parskip abovedisplayskip abovedisplayshortskip belowdisplayskip belowdisplayshortskip leftskip rightskip topskip splittopskip tabskip spaceskip xspaceskip parfillskip thinmuskip medmuskip thickmuskip".split(" "),
lc:{65:new g(97),66:new g(98),67:new g(99),68:new g(100),69:new g(101),70:new g(102),71:new g(103),72:new g(104),73:new g(105),74:new g(106),75:new g(107),76:new g(108),77:new g(109),78:new g(110),79:new g(111),80:new g(112),81:new g(113),82:new g(114),83:new g(115),84:new g(116),85:new g(117),86:new g(118),87:new g(119),88:new g(120),89:new g(121),90:new g(122),97:new g(97),98:new g(98),99:new g(99),100:new g(100),101:new g(101),102:new g(102),103:new g(103),104:new g(104),105:new g(105),106:new g(106),
107:new g(107),108:new g(108),109:new g(109),110:new g(110),111:new g(111),112:new g(112),113:new g(113),114:new g(114),115:new g(115),116:new g(116),117:new g(117),118:new g(118),119:new g(119),120:new g(120),121:new g(121),122:new g(122),913:new g(945),914:new g(946),915:new g(947),916:new g(948),917:new g(949),918:new g(950),919:new g(951),920:new g(952),921:new g(953),922:new g(954),923:new g(955),924:new g(956),925:new g(957),926:new g(958),927:new g(959),928:new g(960),929:new g(961),931:new g(963),
932:new g(964),933:new g(965),934:new g(966),935:new g(967),936:new g(968),937:new g(969),945:new g(945),946:new g(946),947:new g(947),948:new g(948),949:new g(949),950:new g(950),951:new g(951),952:new g(952),953:new g(953),954:new g(954),955:new g(955),956:new g(956),957:new g(957),958:new g(958),959:new g(959),960:new g(960),961:new g(961),963:new g(963),964:new g(964),965:new g(965),966:new g(966),967:new g(967),968:new g(968),969:new g(969)},uc:{65:new g(65),66:new g(66),67:new g(67),68:new g(68),
69:new g(69),70:new g(70),71:new g(71),72:new g(72),73:new g(73),74:new g(74),75:new g(75),76:new g(76),77:new g(77),78:new g(78),79:new g(79),80:new g(80),81:new g(81),82:new g(82),83:new g(83),84:new g(84),85:new g(85),86:new g(86),87:new g(87),88:new g(88),89:new g(89),90:new g(90),97:new g(65),98:new g(66),99:new g(67),100:new g(68),101:new g(69),102:new g(70),103:new g(71),104:new g(72),105:new g(73),106:new g(74),107:new g(75),108:new g(76),109:new g(77),110:new g(78),111:new g(79),112:new g(80),
113:new g(81),114:new g(82),115:new g(83),116:new g(84),117:new g(85),118:new g(86),119:new g(87),120:new g(88),121:new g(89),122:new g(90),913:new g(913),914:new g(914),915:new g(915),916:new g(916),917:new g(917),918:new g(918),919:new g(919),920:new g(920),921:new g(921),922:new g(922),923:new g(923),924:new g(924),925:new g(925),926:new g(926),927:new g(927),928:new g(928),929:new g(929),931:new g(931),932:new g(932),933:new g(933),934:new g(934),935:new g(935),936:new g(936),937:new g(937),945:new g(913),
946:new g(914),947:new g(915),948:new g(916),949:new g(917),950:new g(918),951:new g(919),952:new g(920),953:new g(921),954:new g(922),955:new g(923),956:new g(924),957:new g(925),958:new g(926),959:new g(927),960:new g(928),961:new g(929),963:new g(931),964:new g(932),965:new g(933),966:new g(934),967:new g(935),968:new g(936),969:new g(937)}};d.defs.primitive.crcr["function"]=d.defs.primitive.cr["function"];fontTeX.format('        \\def\\makeatletter{\\catcode `\\@=11\\relax}\n        \\def\\makeatother{\\catcode `\\@=12\\relax}\n        \\makeatletter\n        \\count10=23\n        \\count11=9\n        \\count12=9\n        \\count13=9\n        \\countdef\\insc@unt=20\n        \\countdef\\allocationnumber=21\n        \\countdef\\m@ne=22 \\m@ne=-1\n        \\countdef\\count@=255\n        \\dimendef\\dimen@=0\n        \\dimendef\\dimen@i=1\n        \\dimendef\\dimen@ii=2\n        \\skipdef\\skip@=0\n        \\def\\newcount{\\alloc@0\\count\\countdef}\n        \\def\\newdimen{\\alloc@1\\dimen\\dimendef}\n        \\def\\newskip{\\alloc@2\\skip\\skipdef}\n        \\def\\newmuskip{\\alloc@3\\muskip\\muskipdef}\n        \\def\\alloc@#1#2#3#4{\n          \\advance\\count1#1by1\n          \\allocationnumber=\\count1#1\n          #3#4=\\allocationnumber\n        }\n        \\newdimen\\maxdimen \\maxdimen=137438953471.99998pt\n        \\newskip\\hideskip \\hideskip=-1000pt plus 1fil\n        \\newskip\\centering \\centering=0pt plus 1000pt minus 1000pt\n        \\def\\newif#1{\n            {\\lccode`9=`i \\lccode`8=`f \\lowercase{\\gdef\\@remove@if##198##2{##2}}}\n            \\expandafter\\expandafter\\expandafter\n            \\def\\expandafter\\expandafter\\expandafter\n            \\@if@name\\expandafter\\expandafter\\expandafter{\\expandafter\\@remove@if\\string#1}\n            \\expandafter\\def\\expandafter\\@if@name@bool\\expandafter##\\expandafter1\\expandafter{\\@if@name##1}\n            \\expandafter\\def\\csname\\@if@name@bool{true}\\endcsname{\n                \\let#1=\\iftrue\n            }\n            \\expandafter\\def\\csname\\@if@name@bool{false}\\endcsname{\n                \\let#1=\\iffalse\n            }\n            \\let#1=\\iffalse\n            \\let\\@if@name=\\undefined\n            \\let\\@if@name@bool=\\undefined\n            \\let\\@remove@if=\\undefined\n        }\n        \\newcount\\active \\active=13\n        \\newskip\\smallskipamount \\smallskipamount=3pt plus 1pt minus 1pt\n        \\newskip\\medskipamount \\medskipamount=6pt plus 2pt minus 2pt\n        \\newskip\\bigskipamount \\bigskipamount=12pt plus 4pt minus 4pt\n        \\newskip\\normalbaselineskip \\normalbaselineskip=12pt\n        \\newskip\\normallineskip \\normallineskip=1pt\n        \\newdimen\\normallineskiplimit \\normallineskiplimit=0pt\n        \\newdimen\\jot \\jot=3pt\n        \\newcount\\interdisplaylinepenalty \\interdisplaylinepenalty=100\n        \\newcount\\interfootnotelinepenalty \\interfootnotelinepenalty=100\n        \\chardef\\\\="000A\n        \\chardef\\{=`\\{\n        \\chardef\\}=`\\}\n        \\chardef\\$=`\\$\n        \\chardef\\#=`\\#\n        \\chardef\\%=`\\%\n        \\chardef\\&=`\\&\n        \\chardef\\_=`\\_\n        \\chardef\\|="2016\n        \\chardef\\AA="00C5\n        \\chardef\\aa="00E5\n        \\chardef\\AE="00C8\n        \\chardef\\ae="00E6\n        \\chardef\\Arrowvert="2225\n        \\chardef\\arrowvert="23D0\n        \\chardef\\backslash=`\\\\\n        \\chardef\\bracevert="23AA\n        \\chardef\\dag="2020\n        \\chardef\\ddag="2021\n        \\chardef\\downarrow="2193\n        \\chardef\\Downarrow="21D3\n        \\chardef\\equiv="2261\n        \\chardef\\infty="221E\n        \\chardef\\L="0141\n        \\chardef\\l="0142\n        \\chardef\\langle="27E8\n        \\chardef\\lbrace=`\\{\n        \\chardef\\lceil="2308\n        \\chardef\\lfloor="230A\n        \\chardef\\lgroup="27EE\n        \\chardef\\lmoustache="23B0\n        \\chardef\\O="00D8\n        \\chardef\\o="00F8\n        \\chardef\\OE="0152\n        \\chardef\\oe="0153\n        \\chardef\\P="00B6\n        \\chardef\\rangle="27E9\n        \\chardef\\rbrace=`\\}\n        \\chardef\\rceil="2309\n        \\chardef\\rfloor="230B\n        \\chardef\\rgroup="27EF\n        \\chardef\\rmoustache="23B1\n        \\chardef\\S="00A7\n        \\chardef\\ss="00DF\n        \\chardef\\Vert="2016\n        \\chardef\\vert=`\\|\n        \\chardef\\Uparrow="21D1\n        \\chardef\\uparrow="2191\n        \\chardef\\updownarrow="2195\n        \\chardef\\Updownarrow="21D5\n        \\mathchardef\\alpha="703B1\n        \\mathchardef\\angle="02220\n        \\mathchardef\\beta="703B2\n        \\mathchardef\\chi="703C7\n        \\mathchardef\\clubsuit="02663\n        \\mathchardef\\colon="6003A\n        \\mathchardef\\coprod="12210\n        \\mathchardef\\delta="703B4\n        \\mathchardef\\diamondsuit="02662\n        \\mathchardef\\epsilon="703F5\n        \\mathchardef\\eta="703B7\n        \\mathchardef\\gamma="703B3\n        \\mathchardef\\hbar="70127\n        \\mathchardef\\heartsuit="02661\n        \\mathchardef\\imath="70131\n        \\mathchardef\\intop="1222B \\def\\int{\\intop\\nolimits}\n        \\mathchardef\\iota="703B9\n        \\mathchardef\\jmath="70237\n        \\mathchardef\\kappa="703BA\n        \\mathchardef\\lambda="703BB\n        \\mathchardef\\leftarrow="32190 \\let\\gets=\\leftarrow\n        \\mathchardef\\Leftarrow="321D0\n        \\mathchardef\\leftrightarrow="32194\n        \\mathchardef\\Leftrightarrow="321D4\n        \\mathchardef\\ldotp="6002E\n        \\mathchardef\\mu="703BC\n        \\mathchardef\\nu="703BD\n        \\mathchardef\\omega="703C9\n        \\mathchardef\\phi="703D5\n        \\mathchardef\\pi="703C0\n        \\mathchardef\\prod="1220F\n        \\mathchardef\\psi="703C8\n        \\mathchardef\\rho="703C1\n        \\mathchardef\\rightarrow="32192 \\let\\to=\\rightarrow\n        \\mathchardef\\Rightarrow="321D2\n        \\mathchardef\\sigma="703C3\n        \\mathchardef\\sum="12211\n        \\mathchardef\\tau="703C4\n        \\mathchardef\\theta="703B8\n        \\mathchardef\\times="200D7\n        \\mathchardef\\upsilon="703C5\n        \\mathchardef\\varepsilon="703B5\n        \\mathchardef\\varphi="703C6\n        \\mathchardef\\varpi="703D6\n        \\mathchardef\\varrho="703F1\n        \\mathchardef\\varsigma="703C2\n        \\mathchardef\\vartheta="703D1\n        \\mathchardef\\xi="703BE\n        \\mathchardef\\zeta="703B6\n        \\mathchardef\\Delta="00394\n        \\mathchardef\\Gamma="00393\n        \\mathchardef\\Im="02111\n        \\mathchardef\\Lambda="0039B\n        \\mathchardef\\Omega="003A9\n        \\mathchardef\\Phi="003A6\n        \\mathchardef\\Pi="003A0\n        \\mathchardef\\Psi="003A8\n        \\mathchardef\\Re="0211C\n        \\mathchardef\\Sigma="003A3\n        \\mathchardef\\spadesuit="02660\n        \\mathchardef\\Theta="00398\n        \\mathchardef\\Upsilon="003A5\n        \\mathchardef\\Xi="0039E\n        \\def\\~{\\accent"02DC }\n        \\def\\,{\\mskip\\thinmuskip}\n        \\def\\>{\\mskip\\medmuskip}\n        \\def\\;{\\mskip\\thickmuskip}\n        \\def\\!{\\mskip-\\thinmuskip}\n        \\def\\"{\\accent"A8 }\n        \\def\\={\\accent"AF }\n        \\def\\^{\\accent"5E }\n        \\def\\.{\\accent"02D9 }\n        \\def\\acute{\\accent"B4 }\n        \\def\\arccos{\\mathop{\\rm arccos}\\nolimits}\n        \\def\\arcsin{\\mathop{\\rm arcsin}\\nolimits}\n        \\def\\arctan{\\mathop{\\rm arctan}\\nolimits}\n        \\def\\arg{\\mathop{\\rm arg}\\nolimits}\n        \\def\\bar{\\accent"AF }\n        \\def\\bmod{            \\nonscript\\mskip-\\medmuskip\\mkern5mu\\mathbin{\\rm mod}\\mkern5mu\\nonscript\\mskip-\\medmuskip}\n        \\def\\breve{\\accent"02D8 }\n        \\def\\cdot{\\mathbin{\\vcenter.}}}\n        \\def\\cdotp{\\mathpunct{\\vcenter.}}}\n        \\def\\cdots{\\mathinner{\\cdotp\\cdotp\\cdotp}}\n        \\def\\check{\\accent"02C7 }\n        \\def\\cong{\\mathrel{\\tilde=}}\n        \\def\\cos{\\mathop{\\rm cos}\\nolimits}\n        \\def\\cosh{\\mathop{\\rm cosh}\\nolimits}\n        \\def\\cot{\\mathop{\\rm cot}\\nolimits}\n        \\def\\coth{\\mathop{\\rm coth}\\nolimits}\n        \\def\\csc{\\mathop{\\rm csc}\\nolimits}\n        \\def\\ddot{\\accent"A8 }\n        \\def\\deg{\\mathop{\\rm deg}\\nolimits}\n        \\def\\det{\\mathop{\\rm det}}\n        \\def\\dim{\\mathop{\\rm dim}\\nolimits}\n        \\def\\dot{\\accent"02D9 }\n        \\def\\empty{}\n        \\def\\exp{\\mathop{\\rm exp}\\nolimits}\n        \\def\\gcd{\\mathop{\\rm gcd}}\n        \\def\\grave{\\accent"60 }\n        \\def\\H{\\accent"02DD }\n        \\def\\hat{\\accent"5E }\n        \\def\\hom{\\mathop{\\rm hom}\\nolimits}\n        \\def\\inf{\\mathop{\\rm inf}}\n        \\def\\iterate{\\body \\let\\next=\\iterate\\else\\let\\next=\\relax\\fi\\next}\n        \\def\\joinrel{\\mathrel{\\mkern-3mu}}\n        \\def\\ker{\\mathop{\\rm ker}\\nolimits}\n        \\def\\lbrack{[}\n        \\def\\ldots{\\mathinner{\\ldotp\\ldotp\\ldotp}}\n        \\def\\lg{\\mathop{\\rm lg}\\nolimits}\n        \\def\\lim{\\mathop{\\rm lim}}\n        \\def\\liminf{\\mathop{\\rm lim\\,inf}}\n        \\def\\limsup{\\mathop{\\rm lim\\,sup}}\n        \\def\\ln{\\mathop{\\rm ln}\\nolimits}\n        \\def\\log{\\mathop{\\rm log}\\nolimits}\n        \\def\\loop#1\\repeat{\\def\\body{#1}\\iterate}\n        \\def\\lq{`}\n        \\def\\max{\\mathop{\\rm max}}\n        \\def\\min{\\mathop{\\rm min}}\n        \\def\\not{\\@ifnextchar={\\char"2260\\@gobble}{\\hbox to 0pt{/}}}\n        \\def\\null{\\hbox{}}\n        \\def\\pmod#1{\\mkern18mu({\\rm mod}\\,\\,#1)}\n        \\def\\Pr{\\mathop{\\rm Pr}}\n        \\def\\rbrack{]}\n        \\def\\rq{\'}\n        \\def\\sec{\\mathop{\\rm sec}\\nolimits}\n        \\def\\sin{\\mathop{\\rm sin}\\nolimits}\n        \\def\\sinh{\\mathop{\\rm sinh}\\nolimits}\n        \\def\\skew#1#2#3{            {\\muskip0 #1mu\\divide\\muskip0by2 \\mkern\\muskip0%\n            #2{\\mkern-\\muskip0{#3}\\mkern\\muskip0}\\mkern-\\muskip0}{}}\n        \\def\\strut{\\vrule height.708333333emdepth.291666666emwidth0pt\\relax}\n        \\def\\sup{\\mathop{\\rm sup}}\n        \\def\\surd{{\\mathchar"1221A}}\n        \\def\\t{\\accent"0311 }\n        \\def\\tan{\\mathop{\\rm tan}\\nolimits}\n        \\def\\tanh{\\mathop{\\rm tanh}\\nolimits}\n        \\def\\TeX{T\\kern-.1667em{\\lower.5exE}\\kern-.125emX}\n        \\def\\tilde{\\accent"02DC }\n        \\def\\u{\\accent"02D8 }\n        \\def\\v{\\accent"02C7 }\n        \\let\\bgroup={\n        \\let\\displaymath=\\[\n        \\let\\enddisplaymath=\\]\n        \\let\\egroup=}\n        \\let\\endline=\\cr\n        \\let\\math=\\(\n        \\let\\endmath=\\)\n        \\let\\sb=^\n        \\let\\sp=_\n        \\let\\repeat=\\fi\n        \\def\\obeyspaces{\\catcode`\\ =13\\relax}\n        \\catcode`\\ =12\\def\\space{ }\\obeyspaces\\let =\\space\n        \\catcode`\\ =10\n        \\def\\thinspace{\\kern.1667em}\n        \\def\\negthinspace{\\kern-.1667em}\n        \\def\\enspace{\\kern.5em}\n        \\def\\enskip{\\hskip.5em\\relax}\n        \\def\\quad{\\hskip1em\\relax}\n        \\def\\qquad{\\hskip2em\\relax}\n        \\def\\smallskip{\\vskip\\smallskipamount}\n        \\def\\medskip{\\vskip\\medskipamount}\n        \\def\\bigskip{\\vskip\\bigskipamount}\n        \\def~{\\char"00A0\\relax}\n        \\mathcode`\\\u22c5=8 \\catcode`\\\u22c5=\\active\n        \\def\u22c5{\\mathchoice{\\mathbin{\\vcenter.}}{\\mathbin{\\vcenter.}}{{\\vcenter.}}{{\\vcenter.}}}\n        \\catcode`\\\u22c5=12\n        \\newcount\\mscount\n        \\def\\multispan#1{\\omit \\mscount#1\\relax\\loop\\ifnum\\mscount>1\\sp@n\\repeat}\n        \\def\\sp@n{\\span\\omit\\advance\\mscount-1}\n        \\def\\two@digits#1{\\ifnum#1<10 0\\fi\\the#1}\n        \\def\\dospecials{            \\do\\ \\do\\\\\\do\\{\\do\\}\\do\\$\\do\\&\\do\\#\\do\\^\\do\\^^K\\do\\_\\do\\^^A\\do\\%\\do\\~}\n        \\def\\choose{\\atopwithdelims()}\n        \\def\\brack{\\atopwithdelims[]}\n        \\def\\brace{\\atopwithdelims\\{\\}}\n        \\def\\mathpalette#1#2{            \\mathchoice{#1\\displaystyle{#2}}{#1\\textstyle{#2}}{#1\\scriptstyle{#2}}{#1\\scriptscriptstyle{#2}}}\n        \\def\\frac#1#2{{{#1}\\over{#2}}}\n        \\def\\mathrm#1{{\\rm#1}}\n        \\def\\textrm#1{{\\rm#1}}\n        \\def\\mathbf#1{{\\bf#1}}\n        \\def\\textbf#1{{\\bf#1}}\n        \\def\\mathit#1{{\\it#1}}\n        \\def\\textit#1{{\\it#1}}\n        \\def\\mathsl#1{{\\sl#1}}\n        \\def\\textsl#1{{\\sl#1}}\n        \\def\\@gobble#1{}\n        \\def\\@ifnextchar#1#2#3{            \\let\\@ifnextchar@charone=#1\n            \\def\\@ifnextchar@true{#2}\n            \\def\\@ifnextchar@false{#3}\n            \\futurelet\\@ifnextchar@chartwo\\@ifnextchar@check}\n        \\def\\@ifnextchar@check{            \\ifx\\@ifnextchar@charone\\@ifnextchar@chartwo\\@ifnextchar@true\\else\\@ifnextchar@false\\fi        }\n        \\def\\newcommand#1{\\@ifnextchar[{\\@newcommand#1}{\\@newcommand#1[0]}}\n        \\def\\@newcommand#1[#2]{            \\count0=#2            \\ifnum\\count0<0                \\Error{NotEnoughParameters}            \\else                \\ifnum\\count0>9                    \\Error{TooManyParameters}                \\else                    \\@ifnextchar[{\\ifnum\\count0<1                        \\Error{ParameterNumberMustBe>0}                    \\else                        \\@newcommand@optarg#1[#2]                    \\fi}{\\@newcommand@nooptarg#1[#2]}                \\fi            \\fi        }\n        \\def\\@paramnums#1{            \\ifcase#1            \\or####1            \\or####1####2            \\or####1####2####3            \\or####1####2####3####4            \\or####1####2####3####4####5            \\or####1####2####3####4####5####6            \\or####1####2####3####4####5####6####7            \\or####1####2####3####4####5####6####7####8            \\or####1####2####3####4####5####6####7####8####9\\fi}\n        \\def\\@paramnums@bracket#1{            \\ifcase#1            \\or[####1]            \\or[####1]####2            \\or[####1]####2####3            \\or[####1]####2####3####4            \\or[####1]####2####3####4####5            \\or[####1]####2####3####4####5####6            \\or[####1]####2####3####4####5####6####7            \\or[####1]####2####3####4####5####6####7####8            \\or[####1]####2####3####4####5####6####7####8####9\\fi}\n        \\def\\@newcommand@nooptarg#1[#2]#{            \\edef\\@newcommand@make{\\def\\noexpand#1\\@paramnums#2}\n            \\@newcommand@make}\n        \\def\\@newcommand@optarg#1[#2][#3]#{            \\def#1{                \\@ifnextchar[{\\csname\\string#1\\endcsname}{\\csname\\string#1\\endcsname[#3]}}            \\edef\\@newcommand@make{                \\noexpand\\expandafter\\def                \\noexpand\\csname\\noexpand\\string\\noexpand#1\\endcsname\\@paramnums@bracket#2}\n            \\@newcommand@make}\n        \\newcommand\\sqrt[1][]{\\root #1\\of }}\n        \\makeatother    ',
"display");fontTeX.fontDimen={widthOf:function(a,b,c){this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].width))return this.cache[b][c][a].width;this.context.font=(c||"")+" 500px "+b;this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].width=this.context.measureText(a).width/500},visibleWidthOf:function(a,
b,c){function d(f,g,k){if(7==k)return f;this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-f),75+150*h*(.5-g));h=this.context.getImageData(0,0,150,150).data;for(var m=!1,n=0,v=0;150>v;v++){for(var u=0;150>u;u++){var t=h[4*v+600*u+3];t>m&&(m=t,n=u)}if(m)break}return!1===m&&0==k?-1:250<t?f+(v/150-.5)/Math.pow(2,k):d.call(this,f+(v/150-.5)/Math.pow(2,k),g+(n/150-.5)/Math.pow(2,k),k+1)}function g(d,f,k){if(7==k)return d;
this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-d),75+150*h*(.5-f));h=this.context.getImageData(0,0,150,150).data;for(var m=!1,n=0,v=149;0<=v;v--){for(var u=0;150>u;u++){var t=h[4*v+600*u+3];t>m&&(m=t,n=u)}if(m)break}return 250<t?d+(v/150-.5)/Math.pow(2,k):g.call(this,d+(v/150-.5)/Math.pow(2,k),f+(n/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];
if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].vWidth))return this.cache[b][c][a].vWidth;this.context.textBaseline="middle";this.context.textAlign="center";var k=d.call(this,.5,.5,0);if(-1==k)return this.cache[b]=this.cache[b]||{},this.cache[b][c]=this.cache[b][c]||{},this.cache[b][c][a]=this.cache[b][c][a]||{},this.cache[b][c][a].vWidth=0;var v=g.call(this,.5,.5,0);this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||
{};return this.cache[b][c][a].vWidth=1.5*(v-k)+.021},heightOf:function(a,b,c){function d(f,g,k){if(7==k)return g;this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-f),75+150*h*(1-g));h=this.context.getImageData(0,0,150,150).data;for(var m=!1,v=0,t=0;150>t;t++){for(var p=0;150>p;p++){var A=h[600*t+4*p+3];A>m&&(m=A,v=p)}if(m)break}return!1===m&&0==k?1:250<A?g+(t/150-.5)/Math.pow(2,k):d.call(this,f+(v/150-.5)/Math.pow(2,
k),g+(t/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].height))return this.cache[b][c][a].height;this.context.textBaseline="alphabetic";this.context.textAlign="center";this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].height=1.5*(1-d.call(this,.5,.5,0))},depthOf:function(a,
b,c){function d(f,g,k){if(7==k)return g;this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-f),75+150*h*(.5-g));h=this.context.getImageData(0,0,150,150).data;for(var m=!1,v=0,t=149;0<=t;t--){for(var p=0;150>p;p++){var A=h[600*t+4*p+3];A>m&&(m=A,v=p)}if(m)break}return!1===m&&0==k?.5:250<A?g+(t/150-.5)/Math.pow(2,k):d.call(this,f+(v/150-.5)/Math.pow(2,k),g+(t/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();c={nm:"",
rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].depth))return Math.max(0,this.cache[b][c][a].depth);this.context.textBaseline="alphabetic";this.context.textAlign="center";this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return Math.max(0,this.cache[b][c][a].depth=1.5*(d.call(this,.5,.5,0)-.5))},trueDepthOf:function(a,b,c){this.depthOf(a,b,c);return this.cache[b][{nm:"",
rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"]][a].depth},italCorrOf:function(a,b){function c(d,g,k){if(7==k)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,k);this.context.font="italic "+100*f+"px "+b;this.context.fillText(a,75+150*f*-d,75+150*f*(.5-g));f=this.context.getImageData(0,0,150,150).data;for(var h=!1,m=0,t=149;0<=t;t--){for(var A=0;150>A;A++){var p=f[4*t+600*A+3];p>h&&(h=p,m=A)}if(h)break}return!1===h&&0==k?0:250<p?d+(t/150-.5)/Math.pow(2,k):c.call(this,d+(t/150-.5)/
Math.pow(2,k),g+(m/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();if(this.cache[b]&&this.cache[b].italic&&this.cache[b].italic[a]&&!isNaN(this.cache[b].italic[a].italCorr))return this.cache[b].italic[a].italCorr;this.context.textBaseline="middle";this.context.textAlign="left";this.cache[b]=this.cache[b]||{};this.cache[b].italic=this.cache[b].italic||{};this.cache[b].italic[a]=this.cache[b].italic[a]||{};return this.cache[b].italic[a].italCorr=Math.max(0,1.5*c.call(this,.5,.5,0)-fontTeX.fontDimen.widthOf(a,
b,"it"))},scriptOffsetOf:function(a,b,c){function d(f,g,k){if(7==k)return f;this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-f),75+150*h*(.5-g));for(var m=this.context.getImageData(0,0,150,150).data,n=!1,t=0,u=149;0<=u;u--){for(var v=0;v<Math.max(150,Math.min(0,v<75+150*h*(.5-g)));v++){var A=m[4*u+600*v+3];A>n&&(n=A,t=v)}if(n)break}return!1===n&&0==k?0:250<A?f+(u/150-.5)/Math.pow(2,k):d.call(this,f+(u/150-.5)/
Math.pow(2,k),g+(t/150-.5)/Math.pow(2,k),k+1)}function g(d,f,k){if(7==k)return d;this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-d),75+150*h*(.5-f));for(var m=this.context.getImageData(0,0,150,150).data,n=!1,t=0,v=149;0<=v;v--){for(var A=75;A<Math.max(150,A<75+150*h*(1-d));A++){var C=m[4*v+600*A+3];C>n&&(n=C,t=A)}if(n)break}return!1===n&&0==k?1:250<C?d+(v/150-.5)/Math.pow(2,k):g.call(this,d+(v/150-.5)/Math.pow(2,
k),f+(t/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].scriptOffset))return this.cache[b][c][a].scriptOffset;this.context.textBaseline="middle";this.context.textAlign="left";var k=d.call(this,.5,.5,0),t=g.call(this,.5,.5,0);this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].scriptOffset=
1.5*Math.max(k-t,0)},leftOffsetOf:function(a,b,c){function d(f,g,k){if(7==k)return f;this.context.clearRect(0,0,150,150);var h=Math.pow(2,k);this.context.font=(c||"")+" "+100*h+"px "+b;this.context.fillText(a,75+150*h*(.5-f),75+150*h*(.5-g));h=this.context.getImageData(0,0,150,150).data;for(var m=!1,t=0,v=0;150>v;v++){for(var p=0;150>p;p++){var A=h[4*v+600*p+3];A>m&&(m=A,t=p)}if(m)break}return!1===m&&0==k?-1:250<A?f+(v/150-.5)/Math.pow(2,k):d.call(this,f+(v/150-.5)/Math.pow(2,k),g+(t/150-.5)/Math.pow(2,
k),k+1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].leftOffset))return this.cache[b][c][a].leftOffset;this.context.textBaseline="middle";this.context.textAlign="start";this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].leftOffset=-1.5*(d.call(this,.5,.5,0)-.5)},baselineHeightOf:function(a){function b(c,
d,g){this.context.textBaseline="bottom";if(7==g)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,g);this.context.font=100*f+"px "+a;this.context.fillText("A",75+150*f*(.5-c),75+150*f*(1-d));f=this.context.getImageData(0,0,150,150).data;for(var h=!1,k=0,m=0;150>m;m++){for(var t=0;150>t;t++){var p=f[600*m+4*t+3];p>h&&(h=p,k=t)}if(h)break}return!1===h&&0==g?1:250<p?d+(m/150-.5)/Math.pow(2,g):b.call(this,c+(k/150-.5)/Math.pow(2,g),d+(m/150-.5)/Math.pow(2,g),g+1)}function c(b,d,g){this.context.textBaseline=
"alphabetic";if(7==g)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,g);this.context.font=100*f+"px "+a;this.context.fillText("A",75+150*f*(.5-b),75+150*f*(1-d));f=this.context.getImageData(0,0,150,150).data;for(var h=!1,k=0,m=0;150>m;m++){for(var t=0;150>t;t++){var p=f[600*m+4*t+3];p>h&&(h=p,k=t)}if(h)break}return!1===h&&0==g?1:250<p?d+(m/150-.5)/Math.pow(2,g):c.call(this,b+(k/150-.5)/Math.pow(2,g),d+(m/150-.5)/Math.pow(2,g),g+1)}this.isInit||this.init();if(this.cache[a]&&!isNaN(this.cache[a].baseline))return this.cache[a].baseline;
this.context.textAlign="center";this.cache[a]=this.cache[a]||{};return this.cache[a].baseline=1.5*(c.call(this,.5,.5,0)-b.call(this,.5,.5,0))},init:function(){this.canvas=document.createElement("canvas");this.canvas.style.position="fixed";this.canvas.style.top="100vh";this.canvas.style.left="100vw";this.canvas.style.pointerEvents="none";this.canvas.style.opacity=0;this.canvas.width=150;this.canvas.height=150;this.context=this.canvas.getContext("2d");document.body.appendChild(this.canvas);this.isInit=
!0},isInit:!1,cache:{}};fontTeX._debug={data:d}}}();