var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(C,n,ia){C!=Array.prototype&&C!=Object.prototype&&(C[n]=ia.value)};$jscomp.getGlobal=function(C){return"undefined"!=typeof window&&window===C?C:"undefined"!=typeof global&&null!=global?global:C};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var C=0;return function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+C++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var C=$jscomp.global.Symbol.iterator;C||(C=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[C]&&$jscomp.defineProperty(Array.prototype,C,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(C){var n=0;return $jscomp.iteratorPrototype(function(){return n<C.length?{done:!1,value:C[n++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(C){$jscomp.initSymbolIterator();C={next:C};C[$jscomp.global.Symbol.iterator]=function(){return this};return C};
!function(){function C(){console.log.apply(console,arguments)}function n(a,b){this.name=a;this.type="primitive";this["function"]=b}function ia(a,b){this.type="macro";a instanceof n||a instanceof ia?(a.proxy&&(a=a.original),this.proxy=!0,this.isLet=!!b,this.original=a):(this.proxy=!1,this.replacement=a||[],this.parameters=b||[])}function h(a,b,d,c){this.type="integer";this.register=!0;this.message=c||"";a instanceof h?(this.value=a.value,this.parent=a,this.min=a.min,this.max=a.max):(this.min=null===
b||void 0===b?-9007199254740991:b,this.max=null===d||void 0===b?9007199254740991:d,a=Math.round(a),isFinite(a)||(a=9007199254740991*Math.sign(a)),9007199254740991<a?a=-9007199254740991+a%9007199254740991:-9007199254740991>a&&(a=9007199254740991+a%9007199254740991),this.value=isNaN(a)?0:Math.round(a))}function t(a,b,d){this.type="dimension";this.message=d||"";this.register=!0;a instanceof t?(this.sp=new h(a.sp),this.em=new h(a.em),this.message=b||"",this.parent=a):a instanceof F?(this.sp=new h(0),
this.em=new h(a.mu/18),this.message=b||""):(this.sp=new h(a),this.em=new h(b))}function F(a,b){this.type="mu dimension";this.message=b||"";this.register=!0;a instanceof F?(this.mu=new h(a.mu),this.parent=a):this.mu=a instanceof t?new h(a.em/18+a.sp/65536/12*18):new h(a)}function X(a,b,d,c){this.type="glue";this.message=c||"";this.register=!0;a instanceof X?(this.start=new t(a.start),this.stretch=new t(a.stretch),this.shrink=new t(a.shrink),this.parent=a):(this.start=new t(a),this.stretch=b instanceof
z?b:new t(b),this.shrink=d instanceof z?d:new t(d))}function va(a,b,d,c){this.type="mu glue";this.message=c||"";this.register=!0;a instanceof va?(this.start=new F(a.start),this.stretch=new F(a.stretch),this.shrink=new F(a.shrink),this.parent=a):(this.start=new F(a),this.stretch=b instanceof z?b:new F(b),this.shrink=d instanceof z?d:new F(d))}function z(a,b,d){this.type="infinite dimension";this.message=d||"";this.register=!0;this.number=new h(a);this.magnitude=new h(b)}function ca(a,e,d,c){function f(a){for(;;){var c=
e.eat();if(!c)break;else if("command"==c.type||"character"==c.type&&c.cat===b.cats.active)if(c="command"==c.type?d.last.defs.primitive[c.name]||d.last.defs.macros[c.name]:d.last.defs.active[c["char"]])if(c===b.defs.primitive["if"]||c.isLet&&c.original===b.defs.primitive["if"]||c===b.defs.primitive.ifcase||c.isLet&&c.original===b.defs.primitive.ifcase||c===b.defs.primitive.ifcat||c.isLet&&c.original===b.defs.primitive.ifcat||c===b.defs.primitive.ifdim||c.isLet&&c.original===b.defs.primitive.ifdim||
c===b.defs.primitive.ifeof||c.isLet&&c.original===b.defs.primitive.ifeof||c===b.defs.primitive.iffalse||c.isLet&&c.original===b.defs.primitive.iffalse||c===b.defs.primitive.ifodd||c.isLet&&c.original===b.defs.primitive.ifodd||c===b.defs.primitive.ifnum||c.isLet&&c.original===b.defs.primitive.ifnum||c===b.defs.primitive.ifhmode||c.isLet&&c.original===b.defs.primitive.ifhmode||c===b.defs.primitive.ifinner||c.isLet&&c.original===b.defs.primitive.ifinner||c===b.defs.primitive.ifmmode||c.isLet&&c.original===
b.defs.primitive.ifmmode||c===b.defs.primitive.iftrue||c.isLet&&c.original===b.defs.primitive.iftrue||c===b.defs.primitive.ifvmode||c.isLet&&c.original===b.defs.primitive.ifvmode||c===b.defs.primitive.ifvoid||c.isLet&&c.original===b.defs.primitive.ifvoid||c===b.defs.primitive.ifx||c.isLet&&c.original===b.defs.primitive.ifx)f("fi"),e.eat();else{if("else"==a&&(c===b.defs.primitive["else"]||c.isLet&&c.original===b.defs.primitive["else"]))break;if(c===b.defs.primitive.fi||c.isLet&&c.original===b.defs.primitive.fi){e.revert();
break}}}}function v(){for(var a=[];;){var f=e.eat();if(f)if("command"==f.type||"character"==f.type&&f.cat===b.cats.active){var c="command"==f.type?d.last.defs.primitive[f.name]||d.last.defs.macros[f.name]:d.last.defs.active[f["char"]];if(c){if(c===b.defs.primitive["if"]||c.isLet&&c.original===b.defs.primitive["if"]||c===b.defs.primitive.ifcase||c.isLet&&c.original===b.defs.primitive.ifcase||c===b.defs.primitive.ifcat||c.isLet&&c.original===b.defs.primitive.ifcat||c===b.defs.primitive.ifdim||c.isLet&&
c.original===b.defs.primitive.ifdim||c===b.defs.primitive.ifeof||c.isLet&&c.original===b.defs.primitive.ifeof||c===b.defs.primitive.iffalse||c.isLet&&c.original===b.defs.primitive.iffalse||c===b.defs.primitive.ifodd||c.isLet&&c.original===b.defs.primitive.ifodd||c===b.defs.primitive.ifnum||c.isLet&&c.original===b.defs.primitive.ifnum||c===b.defs.primitive.ifhmode||c.isLet&&c.original===b.defs.primitive.ifhmode||c===b.defs.primitive.ifinner||c.isLet&&c.original===b.defs.primitive.ifinner||c===b.defs.primitive.ifmmode||
c.isLet&&c.original===b.defs.primitive.ifmmode||c===b.defs.primitive.iftrue||c.isLet&&c.original===b.defs.primitive.iftrue||c===b.defs.primitive.ifvmode||c.isLet&&c.original===b.defs.primitive.ifvmode||c===b.defs.primitive.ifvoid||c.isLet&&c.original===b.defs.primitive.ifvoid||c===b.defs.primitive.ifx||c.isLet&&c.original===b.defs.primitive.ifx)if(c=v()){a.push(f);a.push.apply(a,c);continue}else return null;a.push(f);if(c===b.defs.primitive.fi||c.isLet&&c.original===b.defs.primitive.fi)return a}else a.push(f)}else a.push(f);
else return null}}var h=[];if(a)for(;;)if(a=e.eat())if("command"==a.type||"character"==a.type&&a.cat==b.cats.active){var k="command"==a.type?d.last.defs.primitive[a.name]||d.last.defs.macros[a.name]:d.last.defs.active[a["char"]];if(k)if(k===b.defs.primitive["if"]||k.isLet&&k.original===b.defs.primitive["if"]||k===b.defs.primitive.ifcase||k.isLet&&k.original===b.defs.primitive.ifcase||k===b.defs.primitive.ifcat||k.isLet&&k.original===b.defs.primitive.ifcat||k===b.defs.primitive.ifdim||k.isLet&&k.original===
b.defs.primitive.ifdim||k===b.defs.primitive.ifeof||k.isLet&&k.original===b.defs.primitive.ifeof||k===b.defs.primitive.iffalse||k.isLet&&k.original===b.defs.primitive.iffalse||k===b.defs.primitive.ifodd||k.isLet&&k.original===b.defs.primitive.ifodd||k===b.defs.primitive.ifnum||k.isLet&&k.original===b.defs.primitive.ifnum||k===b.defs.primitive.ifhmode||k.isLet&&k.original===b.defs.primitive.ifhmode||k===b.defs.primitive.ifinner||k.isLet&&k.original===b.defs.primitive.ifinner||k===b.defs.primitive.ifmmode||
k.isLet&&k.original===b.defs.primitive.ifmmode||k===b.defs.primitive.iftrue||k.isLet&&k.original===b.defs.primitive.iftrue||k===b.defs.primitive.ifvmode||k.isLet&&k.original===b.defs.primitive.ifvmode||k===b.defs.primitive.ifvoid||k.isLet&&k.original===b.defs.primitive.ifvoid||k===b.defs.primitive.ifx||k.isLet&&k.original===b.defs.primitive.ifx)if(k=v())h.push(a),h.push.apply(h,k);else return this.invalid=!0,e.loadState(c),[this];else if(k===b.defs.primitive["else"]||k.proxy&&k.original===b.defs.primitive["else"])f("fi");
else if(k===b.defs.primitive.fi||k.proxy&&k.original===b.defs.primitive.fi)break;else h.push(a);else h.push(a)}else h.push(a);else return this.invalid=!0,e.loadState(c),[this];else for(f("else");;)if(a=e.eat())if("command"==a.type||"character"==a.type&&a.cat==b.cats.active)if(k="command"==a.type?d.last.defs.primitive[a.name]||d.last.defs.macros[a.name]:d.last.defs.active[a["char"]])if(k===b.defs.primitive["if"]||k.isLet&&k.original===b.defs.primitive["if"]||k===b.defs.primitive.ifcase||k.isLet&&k.original===
b.defs.primitive.ifcase||k===b.defs.primitive.ifcat||k.isLet&&k.original===b.defs.primitive.ifcat||k===b.defs.primitive.ifdim||k.isLet&&k.original===b.defs.primitive.ifdim||k===b.defs.primitive.ifeof||k.isLet&&k.original===b.defs.primitive.ifeof||k===b.defs.primitive.iffalse||k.isLet&&k.original===b.defs.primitive.iffalse||k===b.defs.primitive.ifodd||k.isLet&&k.original===b.defs.primitive.ifodd||k===b.defs.primitive.ifnum||k.isLet&&k.original===b.defs.primitive.ifnum||k===b.defs.primitive.ifhmode||
k.isLet&&k.original===b.defs.primitive.ifhmode||k===b.defs.primitive.ifinner||k.isLet&&k.original===b.defs.primitive.ifinner||k===b.defs.primitive.ifmmode||k.isLet&&k.original===b.defs.primitive.ifmmode||k===b.defs.primitive.iftrue||k.isLet&&k.original===b.defs.primitive.iftrue||k===b.defs.primitive.ifvmode||k.isLet&&k.original===b.defs.primitive.ifvmode||k===b.defs.primitive.ifvoid||k.isLet&&k.original===b.defs.primitive.ifvoid||k===b.defs.primitive.ifx||k.isLet&&k.original===b.defs.primitive.ifx)if(k=
v())h.push(a),h.push.apply(h,k);else return this.invalid=!0,e.loadState(c),[this];else if(k&&(k===b.defs.primitive.fi||k.proxy&&k.original===b.defs.primitive.fi))break;else h.push(a);else h.push(a);else h.push(a);else return this.invalid=!0,e.loadState(c),[this];return h}window.fontTeX=window.fontTeX||{};if(!(fontTeX.version&&["0","5"].map(function(a){return String.fromCharCode(48+ +a)}).join("")<fontTeX.version.split(".").map(function(a){return String.fromCharCode(48+ +a)}).join(""))){fontTeX.version=
"0.5";fontTeX.config=function(a,b){var d=Object.keys(V);if("string"==typeof a&&d.includes(a.toLowerCase())){1<arguments.length&&(b=V[a.toLowerCase()][1](b),"number"!=typeof b||isFinite(b)||(b=0),V[a.toLowerCase()][0]=b);var e=V[a.toLowerCase()][0]}else{if("string"==typeof a)return null;e={};for(var f=0,v=d.length;f<v;f++){var h=d[f];a&&h in a&&(a[h]=V[h][1](a[h]),"number"!=typeof a[h]||isFinite(a[h])||(a[h]=0),V[h][0]=a[h]);e[h]=V[h][0]}}if(!!da.interval!=!!V["autoupdate.enabled"][0]||da.rate!=V["autoupdate.rate"][0])clearInterval(da.interval),
da.rate=Math.max(V["autoupdate.rate"][0],0)||da.rate,V["autoupdate.enabled"][0]&&Math.max(V["autoupdate.rate"][0],0)?(da.interval=setInterval(da.listener,da.rate),da.listener()):da.interval=0;else for(d=da.data,f=0,v=d.length;f<v;f++)d[f].texInstance.renderIn(d[f].elem);return e};var V={"autoupdate.enabled":[!0,Boolean],"autoupdate.rate":[500,Number],parsehtml:[!0,Boolean],"radical.build":[!0,Boolean],"radical.w":[.5,Number],"radical.t":[.15,Number],"radical.h":[1.25,Number],"radical.verticalthreshold":[2.75,
Number],"operator.growamount":[1.75,Number],"operator.growchars":["\u2140\u220f\u2210\u2211\u222b\u222e\u22c0\u22c1\u22c2\u22c3\u2a00\u2a01\u2a02\u2a03\u2a04\u2a05\u2a06\u2a09\u2aff",String]},da={interval:0,data:[],rate:V["autoupdate.rate"][0],listener:function(){for(var a=da.data,b=0,d=a.length,c=0;b<d;b++)if(a[b].styles.fontSize!=a[b].oldFontSize||a[b].styles.fontFamily!=a[b].oldFontFamily||a[b].styles.color!=a[b].oldColor)a[b].texInstance.renderIn(a[b].elem),a[b].oldFontSize=a[b].styles.fontSize,
a[b].oldFontFamily=a[b].styles.fontFamily,a[b].oldColor=a[b].styles.color,c++;return c}};da.interval=setInterval(da.listener,V["autoupdate.rate"][0]);fontTeX.updateTeX=da.listener;fontTeX.render=function(a){function e(d){var e=a[d]||"",f=b.cats[e.charCodeAt(0)];if(!f||0!=f.value&&3!=f.value&&13!=f.value)return[{},0];f=f.value;if(f==b.cats.escape){if(a.charCodeAt(d+1)in b.cats&&b.cats[a.charCodeAt(d+1)].value==b.cats.letter){f="";for(d+=1;a[d]&&a.charCodeAt(d)in b.cats&&b.cats[a.charCodeAt(d)].value==
b.cats.letter;d++)f+=a[d];if(b.defs.macros[f])d=b.defs.macros[f];else return[{},0]}else if(a[d+1]&&(b.defs.primitive[a[d+1]]||b.defs.macros[a[d+1]]))f=a[d+1],d=b.defs.primitive[a[d+1]]||b.defs.macros[a[d+1]];else return[{},0];var c=!1;d.isLet&&(d=d.original,c=!0);return d===b.defs.primitive["["]?[{type:"command",name:"[",cat:-1},f.length+1]:d===b.defs.primitive["("]?[{type:"command",name:"(",cat:-1},f.length+1]:c&&d.replacement&&1==d.replacement.length&&d.replacement[0].cat==b.cats.math?[{"char":e,
cat:b.cats.math},f.length+1]:[{},0]}if(f==b.cats.math)return[{"char":e,cat:b.cats.math},1];if(f==b.cats.active&&b.defs.active[e])return b.defs.active[e].isLet&&b.defs.active[e].original===b.defs.primitive["["]?[{type:"command",name:"[",cat:-1},1]:b.defs.active[e].isLet&&b.defs.active[e].original===b.defs.primitive["("]?[{type:"command",name:"(",cat:-1},1]:b.defs.active[e].isLet&&b.defs.active[e].original.replacement&&1==b.defs.active[e].original.replacement.length&&b.defs.active[e].original.replacement[0].cat==
b.cats.math?[{"char":e,cat:b.cats.math},1]:[{},0]}for(var d=[],c=a;a;)if(a.charCodeAt(0)in b.cats){var f=e(0),v=null,h=0;3==f[0].cat?(h+=f[1],f=e(f[1]),3==f[0].cat?(v="display",h+=f[1]):v="inline"):"command"==f[0].type&&"["==f[0].name?(v="display",h+=f[1]):"command"==f[0].type&&"("==f[0].name&&(v="inline",h+=f[1]);if("display"==v){v=fontTeX._tokenize(a.substring(h),"display");if(!v[2]){d.push(a);a="";break}a=v[1];d.push([v[0],"display"])}else if("inline"==v){v=fontTeX._tokenize(a.substring(h),"inline");
if(!v[2]){d.push(a);a="";break}a=v[1];d.push([v[0],"text"])}else"string"==typeof d[d.length-1]?d[d.length-1]+=a[0]:d.push(a[0]),a=a.substring(1)}else"string"==typeof d[d.length-1]?d[d.length-1]+=a[0]:d.push(a[0]),a=a.substring(1);return new fontTeX.ParsedFontTeX(c,d)};fontTeX.renderSelf=function(a){if("string"==typeof a)return this.renderSelf(document.querySelectorAll(a));if(a instanceof HTMLElement)return this.renderSelf([a]);if(!isNaN(a.length))for(var b=0,d=a.length;b<d;b++){var c=a[b].getAttribute("data-fontTeX-input");
null===c&&(c=a[b].innerHTML);fontTeX.render(c)["in"](a[b]);a[b].setAttribute("data-fontTeX-input",c)}};fontTeX.ParsedFontTeX=function(a,b){this.TeXstring=a;this.parsedTokens=b};fontTeX.ParsedFontTeX.prototype={"in":function(a){var b=this.parsedTokens;if("string"==typeof a)return this["in"](document.querySelectorAll(a));if(a instanceof HTMLElement)return this["in"]([a]);if(!isNaN(a.length))for(var d=0,c=a.length;d<c;d++){a[d].innerHTML="";if(a[d].hasAttribute("data-fontTeX-container-id")){var f=da.data,
v=+a[d].getAttribute("data-fontTeX-container-id"),h=da.data[v].styles;f[v]={elem:a[d],styles:f[v].styles,texInstance:this,oldFontFamily:h.fontFamily,oldFontSize:h.fontSize,oldColor:h.color}}else f=da.data,v=f.length,h=getComputedStyle(a[d]),a[d].setAttribute("data-fontTeX-container-id",v),f[v]={elem:a[d],styles:h,texInstance:this,oldFontFamily:h.fontFamily,oldFontSize:h.fontSize,oldColor:h.oldColor};if(V.parsehtml[0]){var k="",m=[];f=0;for(v=b.length;f<v;f++)if("string"==typeof b[f])k+=b[f];else{var n=
(Math.random()*Math.random()+"").replace(".",""),H=(Math.random()*Math.random()+"").replace(".","");m.push([n,H,fontTeX._genHTML(a[d],b[f][0],b[f][1],h)]);k+="<span data-fontTeX-ID-1"+n+" data-fontTeX-ID-2"+H+"></span>"}h=document.createElement("div");h.innerHTML=k;f=0;for(v=m.length;f<v;f++)if(k=h.querySelector("[data-fontTeX-ID-1"+m[f][0]+"][data-fontTeX-ID-2"+m[f][1]+"]"))k.parentNode.insertBefore(m[f][2],k),k.parentNode.removeChild(k);f=0;for(v=h.childNodes.length;f<v;f++)a[d].appendChild(h.firstChild)}else{m=
document.createDocumentFragment();f=0;for(v=b.length;f<v;f++)"string"==typeof b[f]?m.appendChild(document.createTextNode(b[f])):m.appendChild(fontTeX._genHTML(a[d],b[f][0],b[f][1],h));a[d].appendChild(m)}a[d].setAttribute("data-fontTeX-input",this.TeXstring)}},renderIn:function(a){this["in"].apply(this,arguments)},again:function(){this.parsedTokens=fontTeX.render(this.TeXstring).parsedTokens;return this},rerender:function(){return this.again.apply(this,arguments)},TeXstring:"",parsedTokens:null};
fontTeX._tokenize=function(a,e){function d(a,g){function k(a,d){d||(d=this);if(a&&("command"==a.type||"character"==a.type&&a.cat==b.cats.active)){if(a.invalid){var g=("command"==a.type?a.escapeChar+a.name:a["char"]).split("");g=g.map(function(d){return{type:"character",cat:b.cats.all,"char":d,code:d.charCodeAt(0),invalid:!0,recognized:a.recognized}});return[{type:"character",cat:1,"char":"{",code:123,invalid:!0}].concat(g).concat({type:"character",cat:2,"char":"}",code:125,invalid:!0})}if(a.ignore)return[{type:"ignored command",
token:a}];if("command"==a.type){if(a.name in q.last.defs.macros){if(q.last.defs.macros[a.name].proxy&&"primitive"==q.last.defs.macros[a.name].original.type)return g=q.last.defs.macros[a.name].original["function"].call(a,{mouth:d,tokens:q.last.tokens,toggles:C,catOf:f,mathCodeOf:v,scopes:q,openGroups:w,contexts:G,Scope:c,style:e}),a.recognized=!0,Array.isArray(g)?g:[];a.recognized=!0;g=q.last.defs.macros[a.name];g.proxy&&(g=g.original);$jscomp.initSymbol();var k=Symbol();d.saveState(k);for(var J=[],
E=0,h=g.parameters.length;E<h;E++){var m=g.parameters[E];if(m.cat==b.cats.param)if(g.parameters[E+1]&&g.parameters[E+1].cat!=b.cats.param){m=g.parameters[E+1];J.push([]);for(db=0;;){var P=d.eat("argument");if(!P)return a.invalid=!0,d.loadState(k),[a];if(P[0].type==m.type&&P[0].cat==m.cat&&P[0].code==m.code&&P[0].name==m.name){d.revert();break}J[J.length-1]=J[J.length-1].concat(P);db++}1==db&&J[J.length-1][0].cat==b.cats.open&&J[J.length-1][J[J.length-1].length-1].cat==b.cats.close&&(J[J.length-1].shift(),
J[J.length-1].pop())}else{P=d.eat("argument");if(!P)return a.invalid=!0,d.loadState(k),[a];2<P.length&&(P.shift(),P.pop());J.push(P)}else if(P=d.eat(),!m||!P||m.type!=P.type||m.cat!=P.cat||m.code!=P.code||m.name!=P.name)return a.invalid=!0,d.loadState(k),[a]}P=[];E=0;for(h=g.replacement.length;E<h;E++)if(g.replacement[E].cat==b.cats.param)g.replacement[E+1].cat==b.cats.param?(P.push(g.replacement[E+1]),E++):(k=g.replacement[E+1]["char"]-1,k>J.length?P=P.concat({type:"character",cat:b.cats.all,"char":g.replacement[E]["char"],
code:macros.replacement[E].code,invalid:!0}):(P=P.concat(J[k]),E++));else{k={};for(var l in g.replacement[E])k[l]=g.replacement[E][l];P.push(k)}return P}if(a.name in q.last.defs.primitive)return g=q.last.defs.primitive[a.name]["function"].call(a,{mouth:d,tokens:q.last.tokens,toggles:C,catOf:f,scopes:q,openGroups:w,contexts:G,Scope:c,style:e}),a.recognized=!0,Array.isArray(g)?g:[];if(a.name in q.last.registers.named)return[q.last.registers.named[a.name]];a.invalid=!0;return[a]}if("character"==a.type){if(a["char"]in
q.last.defs.active){if(q.last.defs.active[a["char"]].proxy&&"primitive"==q.last.defs.active[a["char"]].original.type)return g=(q.last.defs.active[a["char"]].proxy?q.last.defs.active[a["char"]].original:q.last.defs.active[a["char"]])["function"].call(a,{mouth:d,tokens:q.last.tokens,toggles:C,catOf:f,scopes:q,openGroups:w,contexts:G,Scope:c,style:e}),a.recognized=!0,Array.isArray(g)?g:[];a.recognized=!0;$jscomp.initSymbol();g=q.last.defs.active[a["char"]];k=Symbol();d.saveState(k);g.proxy&&(g=g.original);
J=[];E=0;for(h=g.parameters.length;E<h;E++)if(m=g.parameters[E],m.cat==b.cats.param)if(g.parameters[E+1]&&g.parameters[E+1].cat!=b.cats.param){m=g.parameters[E+1];var db=0;for(J.push([]);;){P=d.eat("argument");if(!P)return a.invalid=!0,d.loadState(k),[a];if(P[0].type==m.type&&P[0].cat==m.cat&&P.code==m.code&&P.name==P.name){d.revert();break}J[J.length-1].push(P);db++}1==db&&J[J.length-1][0].cat==b.cats.open&&J[J.length-1][J[J.length-1].length-1].cat==b.cats.close&&(J[J.length-1].shift(),J[J.length-
1].pop())}else{P=d.eat("argument");if(!P)return a.invalid=!0,d.loadState(k),[a];2<P.length&&(P.shift(),P.pop());J.push([P])}else if(P=d.eat(),!m||!P||m.type!=P.type||m.cat!=P.cat||m.code!=P.code||m.name!=P.name)return a.invalid=!0,d.loadState(k),[a];P=[];E=0;for(h=g.replacement.length;E<h;E++)if(g.replacement[E].cat==b.cats.param)g.replacement[E+1].cat==b.cats.param?P.push(g.replacement[E+1]):P=P.concat(J[g.replacement[E+1]["char"]-1]),E++;else{k={};for(l in g.replacement[E])k[l]=g.replacement[E][l];
P.push(k)}return P}a.invalid=!0;return[a]}}else return[a]}this.queue=(g||Ma).slice();this.string="string"==typeof a?a:Na;this.history=[];this.savedStates={};this.eat=function(a){switch(a){default:if(this.queue.length){if(this.queue[0].cat==b.cats.whitespace&&"pre space"!=a)return this.queue.shift(),this.eat(a);this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});return this.queue.shift()}if(0==this.string.length)return null;if(f(this.string[0])==b.cats.escape){if(!this.string[1]||
"\n"==this.string[1])return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),this.string=this.string.substring(2),{type:"command",escapeChar:this.string[0],name:"",nameType:"command"};this.string[1]==this.string[2]&&f(this.string[1])==b.cats["super"]&&Na[4]&&"0123456789abcdef".includes(Na[3])&&"0123456789abcdef".includes(Na[4])?this.string=this.string[0]+String.fromCharCode(this.string[3]+this.string[4],16)+this.string.substring(5):this.string[1]==this.string[2]&&
f(this.string[1])==b.cats["super"]&&128>Na[3].charCodeAt(0)&&(this.string=this.string[0]+String.fromCharCode((this.string[3].charCodeAt(0)+64)%128)+this.string.substring(4));if(f(this.string[1])==b.cats.letter){for(var e="",c=1;;c++)if(f(this.string[c])==b.cats.letter)e+=this.string[c];else if(this.string[c]==this.string[c+1]&&f(this.string[c])==b.cats["super"]&&"0123456789abcdef".includes(this.string[c+2])&&"0123456789abcdef".includes(this.string[c+3]))this.string=this.string.substring(0,c)+String.fromCharCode(this.string.substring(c+
2,c+4),16)+this.string.substring(0,c+4),c--;else if(this.string[c]==this.string[c+1]&&f(this.string[c])==b.cats["super"]&&128>this.string.charCodeAt(c+2))this.string=this.string.substring(0,c)+String.fromCharCode((this.string.charCodeAt(c+2)+64)%128)+this.string.substring(c+3),c--;else break;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});var g={type:"command",escapeChar:this.string[0],name:e,nameType:"command"};this.string=this.string.substring(1+e.length)}else this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()}),g={type:"command",escapeChar:this.string[0],name:this.string[1],nameType:"symbol"},this.string=this.string.substring(2);return g}if(f(this.string[0])==b.cats["super"]&&this.string[0]==this.string[1]&&f(this.string[0])==b.cats["super"]&&"0123456789abcdef".includes(this.string[2])&&"0123456789abcdef".includes(this.string[3]))return this.string=String.fromCharCode(parseInt(this.string.substring(2,4),16))+this.string.substring(4),this.eat(a);if(f(this.string[0])==
b.cats["super"]&&this.string[0]==this.string[1]&&f(this.string[0])==b.cats["super"]&&128>this.string.charCodeAt(2))return this.string=String.fromCharCode((this.string.charCodeAt(2)+64)%128)+this.string.substring(3),this.eat(a);if([1,2,3,4,6,7,8,11,12,13].includes(f(this.string[0])))return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),e=this.string[0],this.string=this.string.substring(1),{type:"character","char":e,code:e.charCodeAt(0),cat:f(e)};if(f(this.string[0])==
b.cats.eol){e=this.string.indexOf("\n");for(this.string=this.string.substring(~e?e+1:this.string.length);f(this.string[0])==b.cats.whitespace;)this.string=this.string.substring(1);"pre space"==a&&this.queue.unshift({type:"character","char":" ",code:32,cat:b.cats.whitespace});return this.eat(a)}if(f(this.string[0])==b.cats.comment)return e=this.string.indexOf("\n"),this.string=this.string.substring(~e?e+1:this.string.length),this.eat(a);if(f(this.string[0])==b.cats.whitespace&&"pre space"!=a||f(this.string[0])==
b.cats.ignored)return this.string=this.string.substring(1),this.eat();if(f(this.string[0])==b.cats.whitespace&&"pre space"==a)return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),e=this.string[0],this.string=this.string.substring(1),{type:"character","char":e,code:e.charCodeAt(0),cat:b.cats.whitespace};if(f(this.string[0])==b.cats.invalid)return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),e=this.string[0],
this.string=this.string.substring(1),{type:"character","char":e,code:e.charCodeAt(0),cat:b.cats.all,invalid:!0};break;case "argument":e=new d(this.string,this.queue);for(var J=0,E=[];;){if(g=e.eat())g.cat==b.cats.open?J++:g.cat==b.cats.close&&J--;else break;E.push(g);if(0==J)break}if(0<J||0==E.length)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();this.string=e.string;return E;case "integer":e=new d(this.string,this.queue);J=1;
a="start";var v=0,m=!1;for(E="pre space";;){g=e.eat(E);if(!g)break;if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==b.cats.active))if((c="command"==g.type?q.last.defs.primitive[g.name]||q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||c===b.defs.primitive.count||c.proxy&&c.original===b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===
b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||c===b.defs.primitive.mathcode||c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||c===b.defs.primitive.skip||c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||
c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=k(g,e);if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else if("start"!=a||g.cat!=b.cats.whitespace)if("start"==a&&g.cat==b.cats.all&&"-"==g["char"])J*=-1;else if("start"!=
a||g.cat!=b.cats.all||"+"!=g["char"])if("start"==a&&g.register){"integer"==g.type?v=g.value:"dimension"==g.type?v=g.sp.value+12*g.em.value:"mu dimension"==g.type?v=12*g.mu.value/18:"glue"==g.type?v=g.start.sp.value+12*g.start.em.value:"mu glue"==g.type&&(v=12*g.start.mu.value/18);m=!0;break}else if("start"==a)E="unsigned int",e.revert();else{e.revert();break}}if(!m)return null;v*=J;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();this.string=
e.string;return new h(v);case "dimension":e=new d(this.string,this.queue);J=1;a="start";var l=m=!1;v=" ";var p=0,H=0,u=!1;for(E="pre space";!l;){g=e.eat(E);if(!g)break;if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==b.cats.active))if((c="command"==g.type?q.last.defs.primitive[g.name]||q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||c===b.defs.primitive.count||
c.proxy&&c.original===b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||c===b.defs.primitive.mathcode||c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||c===b.defs.primitive.skip||
c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=k(g,e);if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else if("start"!=a||g.cat!=b.cats.whitespace)if("start"==
a&&g.cat==b.cats.all&&"-"==g["char"])J*=-1;else if("start"!=a||g.cat!=b.cats.all||"+"!=g["char"])if("start"==a&&!m&&g.register){if("integer"==g.type?(v=g.value,"decimal"==g.message&&(v/=65536),v=" "+v,E="pre space",a="unit start"):"dimension"==g.type?(p=g.sp.value,H=g.em.value,l=!0):"mu dimension"==g.type?(H=g.mu.value/18,l=!0):"glue"==g.type?(p=g.start.sp.value,H=g.start.em.value,l=!0):"mu glue"==g.type&&(H=g.start.mu.value/18,l=!0),m=!0,l)break}else if(m&&"unit start"==a&&g.cat==b.cats.whitespace)a=
"unit start";else if(m&&g.register){v=parseFloat((v+" ").replace(" .",".").replace(". ","")||"0");"integer"==g.type?p=v*g.value:"dimension"==g.type?(p=v*g.sp.value,H=v*g.em.value):"mu dimension"==g.type?H=v*g.mu.value/18:"glue"==g.type?(p=v*g.start.sp.value,H=v*g.start.em.value):"mu glue"==g.type&&(H=v*g.start.mu.value);l=!0;break}else if(!m||u||"t"!=g["char"]&&"T"!=g["char"])if(!m||u||"e"!=g["char"]&&"E"!=g["char"])if(!m||"p"!=g["char"]&&"P"!=g["char"])if(!m||"i"!=g["char"]&&"I"!=g["char"])if(!m||
"b"!=g["char"]&&"B"!=g["char"])if(!m||"c"!=g["char"]&&"C"!=g["char"])if(!m||"m"!=g["char"]&&"M"!=g["char"])if(!m||"d"!=g["char"]&&"D"!=g["char"])if(!m||"s"!=g["char"]&&"S"!=g["char"])if("start"!=a||m){e.revert();break}else E="factor",e.revert();else if(g=e.eat("pre space"),!g||"p"!=g["char"]&&"P"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=parseFloat((v+" ").replace(" .",".").replace(". ","")||"0"),l=!0;else if(g=e.eat("pre space"),!g||"d"!=g["char"]&&"D"!=g["char"]||g.cat==b.cats.active){e.revert(2);
break}else p=81133568*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0")/1157,l=!0;else if(g=e.eat("pre space"),!g||"m"!=g["char"]&&"M"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=4718592*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0")/2.54/10,l=!0;else if(g=e.eat("pre space"),!g||"m"!=g["char"]&&"M"!=g["char"]||g.cat==b.cats.active)if(!g||"c"!=g["char"]&&"C"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=81133568*parseFloat((v+" ").replace(" .",".").replace(". ",
"")||"0")/1157*12,l=!0;else p=4718592*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0")/2.54,l=!0;else if(g=e.eat("pre space"),!g||"p"!=g["char"]&&"P"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=65536*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0"),l=!0;else if(g=e.eat("pre space"),!g||"n"!=g["char"]&&"N"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=4718592*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0"),l=!0;else if(g=e.eat("pre space"),
!g||"t"!=g["char"]&&"T"!=g["char"]||g.cat==b.cats.active)if(!g||"c"!=g["char"]&&"C"!=g["char"]||g.cat==b.cats.active)if(!g||"x"!=g["char"]&&"X"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=786432*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0")/16,l=!0;else p=786432*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0"),l=!0;else p=65536*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0"),l=!0;else{g=e.eat("pre space");if(!g||"m"!=g["char"]&&"M"!=g["char"]||g.cat==
b.cats.active)if(!g||"x"!=g["char"]&&"X"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else H=233*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0")/480*65536;else H=65536*parseFloat((v+" ").replace(" .",".").replace(". ","")||"0");l=!0}else{a=e.eat("pre space");if(!a||"r"!=a["char"]&&"R"!=a["char"]||a.cat==b.cats.active)e.revert(2);else if(g=e.eat("pre space"),!g||"u"!=g["char"]&&"U"!=a["char"]||g.cat==b.cats.active)e.revert(3);else if(a=e.eat("pre space"),!a||"e"!=a["char"]&&"E"!=
a["char"]||a.cat==b.cats.active)e.revert(4);else{u=!0;a="unit start";continue}break}}if(!m||!l)return null;p*=J;H*=J;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();this.string=e.string;return u?new t(1E3*p/q.last.registers.named.mag.value,1E3*H/q.last.registers.named.mag.value):new t(p,H);case "mu dimension":e=new d(this.string,this.queue);J=1;a="start";l=m=!1;v=" ";p=0;for(E="pre space";!l;){g=e.eat(E);if(!g)break;if("start"==a&&("command"==
g.type||"character"==g.type&&g.cat==b.cats.active))if((c="command"==g.type?q.last.defs.primitive[g.name]||q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||c===b.defs.primitive.count||c.proxy&&c.original===b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||
c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||c===b.defs.primitive.mathcode||c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||c===b.defs.primitive.skip||c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===
b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=k(g,e);if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else if("start"!=a||g.cat!=b.cats.whitespace)if("start"==a&&g.cat==b.cats.all&&"-"==g["char"])J*=-1;else if("start"!=a||g.cat!=b.cats.all||"+"!=g["char"])if("start"==a&&!m&&g.register){if("integer"==g.type?
(v=g.value,"decimal"==g.message&&(v/=65536),v=" "+v,E="pre space",a="unit start"):"dimension"==g.type?(p=g.em.value/65536*18,l=!0):"mu dimension"==g.type?(p=g.mu.value/65536,l=!0):"glue"==g.type?(p=g.start.em.value/65536*18,l=!0):"mu glue"==g.type&&(p=g.start.mu.value/65536,l=!0),m=!0,l)break}else if(m&&"unit start"==a&&g.cat==b.cats.whitespace)a="unit start";else if(m&&g.register&&"mu glue"==g.type){v=parseFloat((v+" ").replace(" .",".").replace(". ","")||"0");p=v*g.start.mu.value/65536;l=!0;break}else if(!m||
"m"!=g["char"]&&"M"!=g["char"])if("start"!=a||m){e.revert();break}else E="factor",e.revert();else{g=e.eat("pre space");if(!g||"u"!=g["char"]&&"U"!=g["char"]||g.cat==b.cats.active){e.revert(2);break}else p=parseFloat((v+" ").replace(" .",".").replace(". ","")||"0");l=!0}}if(!m||!l)return null;p*=J;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();this.string=e.string;return new F(65536*p);case "glue":e=new d(this.string,this.queue);m=v=J=1;a=
"start";var n=!1;l=!1;E="pre space";for(var r;;){g=e.eat(E);if(!g&&("post start"!=a&&"stretch signs"!=a||"dimension"!=E)&&("post stretch"!=a&&"shrink signs"!=a||"dimension"!=E)){p&&e.loadState(p);break}if(g||"dimension"!=E)if("start"!=a&&"signs"!=a&&"post start"!=a&&"stretch signs"!=a&&"post stretch"!=a&&"shrink signs"!=a||"command"!=g.type&&("character"!=g.type||g.cat!=b.cats.active)){if("start"!=a&&"signs"!=a&&"post start"!=a&&"post stretch"!=a&&"stretch signs"!=a&&"shrink signs"!=a||g.cat!=b.cats.whitespace)if("start"!=
a&&"signs"!=a||g.cat!=b.cats.all||"-"!=g["char"])if("start"!=a&&"signs"!=a||g.cat!=b.cats.all||"+"!=g["char"])if("start"!=a&&"signs"!=a||!g.register||"glue"!=g.type)if("start"!=a&&"signs"!=a||!g.register||"dimension"!=g.type)if("start"==a||"signs"==a)E="dimension",e.revert();else if("post start"!=a||!H||l||n||"p"!=g["char"])if("post start"==a&&l&&g.cat==b.cats.all&&"-"==g["char"])v*=-1,a="stretch signs";else if("post start"==a&&l&&g.cat==b.cats.all&&"+"==g["char"])a="stretch signs";else if(("post start"==
a||"stretch signs"==a)&&l&&g.register&&"dimension"==g.type)u=new t(g.sp.value*v,g.em.value*m),a="post stretch",E="pre space",$jscomp.initSymbol(),e.saveState(p=Symbol());else if(("post start"==a||"stretch signs"==a)&&l&&g.register&&"integer"==g.type){E="pre space";if((a=e.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=b.cats.active&&(c=e.eat("pre space"))&&("i"==c["char"]||"I"==c["char"])&&c.cat!=b.cats.active&&(c=e.eat("pre space"))&&("l"==c["char"]||"L"==c["char"])&&c.cat!=b.cats.active){c=e.eat("pre space");
!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?(c&&e.revert(),u=new z(g.value*v,1)):(c=e.eat("pre space"),!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?(c&&e.revert(),u=new z(g.value*v,2)):u=new z(g.value*v,3));a="post stretch";$jscomp.initSymbol();e.saveState(p=Symbol());continue}e.loadState(p);break}else if("post start"!=a&&"stretch signs"!=a||!l)if(("post start"!=a||l)&&"post stretch"!=a||n||"m"!=g["char"])if("post stretch"==a&&n&&g.cat==b.cats.all&&"-"==g["char"])m*=-1,a=
"shrink signs";else if("post stretch"==a&&n&&g.cat==b.cats.all&&"+"==g["char"])a="shrink signs";else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&n&&g.register&&"dimension"==g.type){r=new t(g.sp.value*m,g.em.value*m);break}else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&n&&g.register&&"integer"==g.type){if((a=e.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=b.cats.active&&(c=e.eat("pre space"))&&("i"==c["char"]||"I"==c["char"])&&c.cat!=b.cats.active&&(c=e.eat("pre space"))&&
("l"==c["char"]||"L"==c["char"])&&c.cat!=b.cats.active){c=e.eat("pre space");!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?(c&&e.revert(),r=new z(g.value*m,1)):(c=e.eat("pre space"),!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?(c&&e.revert(),r=new z(g.value*m,2)):r=new z(g.value*m,3));break}e.loadState(p);break}else if("post stretch"!=a&&"shrink signs"!=a&&"post start"!=a||!n){p?e.loadState(p):e.revert();break}else E="dimension",e.revert();else{if(!(!(c=e.eat("pre space"))||
"i"!=c["char"]&&"I"!=c["char"]||c.cat==b.cats.active||!(g=e.eat("pre space"))||"n"!=g["char"]&&"N"!=g["char"]||g.cat==b.cats.active||!(g=e.eat("pre space"))||"u"!=g["char"]&&"U"!=g["char"]||g.cat==b.cats.active||!(g=e.eat("pre space"))||"s"!=g["char"]&&"S"!=g["char"])&&g.cat!=b.cats.active){n=!0;continue}e.loadState(p);break}else E="dimension",e.revert();else{if((c=e.eat("pre space"))&&("l"==c["char"]||"L"==c["char"])&&c.cat!=b.cats.active&&(g=e.eat("pre space"))&&("u"==g["char"]||"U"==g["char"])&&
g.cat!=b.cats.active&&(g=e.eat("pre space"))&&("s"==g["char"]||"S"==g["char"])&&g.cat!=b.cats.active){l=!0;continue}e.loadState(p);break}else H=new t(g.sp.value*J,g.em.value*J),a="post start",E="pre space",$jscomp.initSymbol(),e.saveState(p=Symbol());else{H=new t(g.start.sp.value*J,g.start.em.value*J);u=new t(g.stretch.sp.value*J,g.stretch.em.value*J);r=new t(g.shrink.sp.value*J,g.shrink.em.value*J);break}else a="signs";else J*=-1,a="signs"}else if((c="command"==g.type?q.last.defs.primitive[g.name]||
q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||c===b.defs.primitive.count||c.proxy&&c.original===b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||c===b.defs.primitive.mathcode||
c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||c===b.defs.primitive.skip||c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=k(g,e);
if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else E="factor"}if(!H)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();this.string=e.string;return new X(H,u,r);case "mu glue":e=new d(this.string,this.queue);m=v=J=1;a="start";l=n=!1;for(E="pre space";;){g=e.eat(E);if(!g&&("post start"!=a&&"stretch signs"!=
a||"mu dimension"!=E)&&("post stretch"!=a&&"shrink signs"!=a||"mu dimension"!=E)){p&&e.loadState(p);break}if(g||"mu dimension"!=E)if("start"!=a&&"signs"!=a&&"post start"!=a&&"stretch signs"!=a&&"post stretch"!=a&&"shrink signs"!=a||"command"!=g.type&&("character"!=g.type||g.cat!=b.cats.active)){if("start"!=a&&"signs"!=a&&"post start"!=a&&"post stretch"!=a&&"stretch signs"!=a&&"shrink signs"!=a||g.cat!=b.cats.whitespace)if("start"!=a&&"signs"!=a||g.cat!=b.cats.all||"-"!=g["char"])if("start"!=a&&"signs"!=
a||g.cat!=b.cats.all||"+"!=g["char"])if("start"!=a&&"signs"!=a||!g.register||"mu glue"!=g.type)if("start"!=a&&"signs"!=a||!g.register||"mu dimension"!=g.type)if("start"==a||"signs"==a)E="mu dimension",e.revert();else if("post start"!=a||!H||l||n||"p"!=g["char"])if("post start"==a&&l&&g.cat==b.cats.all&&"-"==g["char"])v*=-1,a="stretch signs";else if("post start"==a&&l&&g.cat==b.cats.all&&"+"==g["char"])a="stretch signs";else if(("post start"==a||"stretch signs"==a)&&l&&g.register&&"mu dimension"==
g.type)u=new F(g.mu.value*v),a="post stretch",E="pre space",$jscomp.initSymbol(),e.saveState(p=Symbol());else if(("post start"==a||"stretch signs"==a)&&l&&g.register&&"integer"==g.type){E="pre space";if((a=e.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=b.cats.active&&(c=e.eat("pre space"))&&("i"==c["char"]||"I"==c["char"])&&c.cat!=b.cats.active&&(c=e.eat("pre space"))&&("l"==c["char"]||"L"==c["char"])&&c.cat!=b.cats.active){c=e.eat("pre space");!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?
(e.revert(),u=new z(g.value*v,1)):(c=e.eat("pre space"),!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?(e.revert(),u=new z(g.value*v,2)):u=new z(g.value*v,3));a="post stretch";$jscomp.initSymbol();e.saveState(p=Symbol());continue}e.loadState(p);break}else if("post start"!=a&&"stretch signs"!=a||!l)if(("post start"!=a||l)&&"post stretch"!=a||n||"m"!=g["char"])if("post stretch"==a&&n&&g.cat==b.cats.all&&"-"==g["char"])m*=-1,a="shrink signs";else if("post stretch"==a&&n&&g.cat==b.cats.all&&
"+"==g["char"])a="shrink signs";else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&n&&g.register&&"mu dimension"==g.type){r=new F(g.mu.value*m);break}else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&n&&g.register&&"integer"==g.type){if((a=e.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=b.cats.active&&(c=e.eat("pre space"))&&("i"==c["char"]||"I"==c["char"])&&c.cat!=b.cats.active&&(c=e.eat("pre space"))&&("l"==c["char"]||"L"==c["char"])&&c.cat!=b.cats.active){c=e.eat("pre space");
!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?r=new z(g.value*m,1):(c=e.eat("pre space"),r=!c||"l"!=c["char"]&&"L"!=c["char"]||c.cat==b.cats.active?new z(g.value*m,2):new z(g.value*m,3));break}e.loadState(p);break}else if("post stretch"!=a&&"shrink signs"!=a&&"post start"!=a||!n){p?e.loadState(p):e.revert();break}else E="mu dimension",e.revert();else{if(!(!(c=e.eat("pre space"))||"i"!=c["char"]&&"I"!=c["char"]||c.cat==b.cats.active||!(g=e.eat("pre space"))||"n"!=g["char"]&&"N"!=g["char"]||
g.cat==b.cats.active||!(g=e.eat("pre space"))||"u"!=g["char"]&&"U"!=g["char"]||g.cat==b.cats.active||!(g=e.eat("pre space"))||"s"!=g["char"]&&"S"!=g["char"])&&g.cat!=b.cats.active){n=!0;continue}e.loadState(p);break}else E="mu dimension",e.revert();else{if((c=e.eat("pre space"))&&("l"==c["char"]||"L"==c["char"])&&c.cat!=b.cats.active&&(g=e.eat("pre space"))&&("u"==g["char"]||"U"==g["char"])&&g.cat!=b.cats.active&&(g=e.eat("pre space"))&&("s"==g["char"]||"S"==g["char"])&&g.cat!=b.cats.active){l=!0;
continue}e.loadState(p);break}else H=new F(g.mu.value*J),a="post start",E="pre space",$jscomp.initSymbol(),e.saveState(p=Symbol());else{H=new F(g.start.mu.value*J);u=new F(g.stretch.mu.value*J);r=new F(g.shrink.mu.value*J);break}else a="signs";else J*=-1,a="signs"}else if((c="command"==g.type?q.last.defs.primitive[g.name]||q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||
c===b.defs.primitive.count||c.proxy&&c.original===b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||c===b.defs.primitive.mathcode||c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||
c===b.defs.primitive.skip||c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=k(g,e);if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else E="factor"}if(!H)return null;
this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();this.string=e.string;return new va(H,u,r);case "unsigned int":e=new d(this.string,this.queue);a="start";v=0;for(m=!1;;){g=e.eat("pre space");if(!g)break;if("grave"==a){if("command"==g.type&&1==g.name.length)v=g.name.charCodeAt(0);else if("character"==g.type)v=g["char"].charCodeAt(0);else return null;m=!0;break}else if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==b.cats.active))if((c=
"command"==g.type?q.last.defs.primitive[g.name]||q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||c===b.defs.primitive.count||c.proxy&&c.original===b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||
c===b.defs.primitive.mathcode||c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||c===b.defs.primitive.skip||c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=
k(g,e);if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else if("start"!=a||g.cat!=b.cats.whitespace)if("start"==a&&g.register&&"integer"==g.type){v=g.value;m=!0;break}else if(("decimal"==a||"start"==a)&&g.cat==b.cats.all&&47<g.code&&58>g.code)v=10*v+ +g["char"],a="decimal",m=!0;else if("start"==a&&g.cat==b.cats.all&&"'"==g["char"])a="octal";else if("start"==a&&
g.cat==b.cats.all&&'"'==g["char"])a="hexadecimal";else if("start"==a&&g.cat==b.cats.all&&"`"==g["char"])a="grave";else if("octal"==a&&g.cat==b.cats.all&&47<g.code&&56>g.code)v=8*v+ +g["char"],m=!0;else if("hexadecimal"==a&&(g.cat==b.cats.all&&47<g.code&&58>g.code||(g.cat==b.cats.all||g.cat==b.cats.letter)&&64<g.code&&71>g.code))v=16*v+parseInt(g["char"],16),m=!0;else{e.revert();break}}if(!m)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});e.finalize();
this.string=e.string;return new h(v);case "factor":e=new d(this.string,this.queue);a="start";E="pre space";m=!1;for(v="";;){g=e.eat(E);if(!g)break;if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==b.cats.active))if((c="command"==g.type?q.last.defs.primitive[g.name]||q.last.defs.macros[g.name]||q.last.registers.named[g.name]:q.last.defs.active[g["char"]])&&(c.register||c===b.defs.primitive.catcode||c.proxy&&c.original===b.defs.primitive.catcode||c===b.defs.primitive.count||c.proxy&&c.original===
b.defs.primitive.count||c===b.defs.primitive.day||c.proxy&&c.original===b.defs.primitive.day||c===b.defs.primitive.dimen||c.proxy&&c.original===b.defs.primitive.dimen||c===b.defs.primitive.lccode||c.proxy&&c.original===b.defs.primitive.lccode||c===b.defs.primitive.mathcode||c.proxy&&c.original===b.defs.primitive.mathcode||c===b.defs.primitive.month||c.proxy&&c.original===b.defs.primitive.month||c===b.defs.primitive.muskip||c.proxy&&c.original===b.defs.primitive.muskip||c===b.defs.primitive.skip||
c.proxy&&c.original===b.defs.primitive.skip||c===b.defs.primitive.time||c.proxy&&c.original===b.defs.primitive.time||c===b.defs.primitive.uccode||c.proxy&&c.original===b.defs.primitive.uccode||c===b.defs.primitive.year||c.proxy&&c.original===b.defs.primitive.year)){c=k(g,e);if(1==c.length&&c[0]===g&&g.invalid){e.revert();break}e.queue.unshift.apply(e.queue,c)}else{c&&(c===b.defs.primitive.relax||c.proxy&&c.original===b.defs.primitive.relax)||e.revert();break}else if("start"!=a||g.cat!=b.cats.whitespace)if("start"==
a&&g.register&&"integer"==g.type){v=g.value.toString();m=!0;break}else if(("pre decimal"==a||"start"==a)&&g.cat==b.cats.all&&47<g.code&&58>g.code)v+=g["char"],a="pre decimal",m=!0;else if("pre decimal"!=a&&"start"!=a||g.cat!=b.cats.all||"."!=g["char"]&&","!=g["char"])if("post decimal"==a&&g.cat==b.cats.all&&47<g.code&&58>g.code)v+=g["char"];else if("start"==a)E="unsigned int",e.revert();else{e.revert();break}else v+=".",a="post decimal",m=!0}if(!m)return null;this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()});e.finalize();this.string=e.string;return new h(65536*v,null,null,"decimal")}};this.preview=function(a){(a=this.eat(a))&&this.revert();return a};this.revert=function(a){for(a="number"==typeof a?a:1;0<a&&0!=this.history.length;a--){this.string=this.history[this.history.length-1].string;for(var b=0,d=this.history[this.history.length-1].queue.length;b<d;b++)this.queue[b]=this.history[this.history.length-1].queue[b];this.queue.length=this.history[this.history.length-
1].queue.length;this.history=this.history[this.history.length-1].history}return this};this.finalize=function(){for(var b=0,d=this.queue.length;b<d;b++)(g||Ma)[b]=this.queue[b];(g||Ma).length=this.queue.length;"string"!=typeof a&&(Na=this.string)};this.saveState=function(a){this.savedStates[a]={queue:this.queue.slice(),string:this.string,history:this.history.slice()};return this};this.loadState=function(a){this.string=this.savedStates[a].string;this.history=this.savedStates[a].history;for(var b=0,
d=this.savedStates[a].queue.length;b<d;b++)this.queue[b]=this.savedStates[a].queue[b];this.queue.length=this.savedStates[a].queue.length;return this};this.expand=k}function c(){var a=this.parentScope=q.last||b;this.defs={primitive:{},macros:{},active:{}};this.registers={count:{},dimen:{},skip:{},muskip:{},named:{}};this.cats={};this.mathcodes={};this.lc={};this.uc={};this.font={};for(var d in a.defs.primitive)this.defs.primitive[d]=a.defs.primitive[d];for(d in a.defs.macros)this.defs.macros[d]=a.defs.macros[d];
for(d in a.defs.active)this.defs.active[d]=a.defs.active[d];for(d in a.lc)this.lc[d]=new h(a.lc[d]);for(d in a.uc)this.uc[d]=new h(a.uc[d]);for(d in a.font)this.font[d]=a.font[d];for(d in a.cats)!isNaN(d)&&(this.cats[d]=new h(a.cats[d]));for(d in a.mathcodes)!isNaN(d)&&(this.mathcodes[d]=new h(a.mathcodes[d]));for(d in a.registers.count)this.registers.count[d]=new h(a.registers.count[d]);for(d in a.registers.dimen)this.registers.dimen[d]=new t(a.registers.dimen[d]);for(d in a.registers.skip)this.registers.skip[d]=
new X(a.registers.skip[d]);for(d in a.registers.muskip)this.registers.muskip[d]=new va(a.registers.muskip[d]);for(d in a.registers.named){var e=a.registers.named[d],c="integer"==e.type?"count":"dimension"==e.type?"dimen":"glue"==e.type?"skip":"muskip";if(Object.values(a.registers[c]).includes(e))for(var g in a.registers[c])a.registers.named[d]===a.registers[c][g]&&(this.registers.named[d]=this.registers[c][g]);else this.registers.named[d]=new ("integer"==e.type?h:"dimension"==e.type?t:"glue"==e.type?
X:va)(e)}this.tokens=[];this.split=!1;q.push(this)}function f(a){if(!a)return null;a=a.charCodeAt(0);return a in q.last.cats?q.last.cats[a].value:b.cats.all}function v(a){if(!a)return null;a=a.charCodeAt(0);return a in q.last.mathcodes?q.last.mathcodes[a].value:b.mathcodes.ord}function n(a){for(var b=0,d=a.length;b<d;b++)if(a[b]&&a[b].ignore&&"command"==a[b].type)a[b].invalid?(d=(a[b].escapeChar+a[b].name).split("").map(function(d){return{type:"atom",atomType:a[b].recognized?0:7,nucleus:{type:"symbol",
"char":d,code:d.charCodeAt(0),invalid:!0},superscript:null,subscript:null}}),a.splice(b,1,{type:"atom",atomType:0,nucleus:d,superscript:null,subscript:null})):a.splice(b,1),d=a.length,b--;else if(a[b]&&a[b].ignore&&!a[b].invalid)a.splice(b,1),d=a.length,b--;else if(a[b]&&"fraction"==a[b].type)n(a[b].numerator),n(a[b].denominator);else if(a[b]&&"table"==a[b].type){n(a[b].noAligns);for(var e=0,c=a[b].cellData.length;e<c;e++)for(var g=0,f=a[b].cellData[e].length;g<f;g++)n(a[b].cellData[e][g].content)}else a[b]&&
"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&n(a[b].nucleus),Array.isArray(a[b].superscript)&&n(a[b].superscript),Array.isArray(a[b].subscript)&&n(a[b].subscript)):a[b]&&"mathchoice"==a[b].type?n(a[b].groups):a[b]&&"box"==a[b].type?n([a[b].content]):a[b]&&"family modifier"==a[b].type&&"rad"==a[b].value&&n(a[b].index)}function k(a){for(var b=0,d=a.length;b<d;b++)if(a[b]&&"family modifier"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)"phantom"==a[b].value?(a.splice(b,1),a[b].phantom=!0):(a.splice(b,
2,{type:"atom",atomType:a[b].value,nucleus:[a[b+1]],superscript:a[b+1].superscript,subscript:a[b+1].subscript,invalid:a[b+1].invalid,index:a[b].index,phantom:a[b+1].phantom}),a[b].nucleus[0].superscript=null,a[b].nucleus[0].subscript=null,b--),d=a.length;else{var e=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});
a[b]={type:"atom",atomType:0,nucleus:e,superscript:null,subscript:null}}else if(a[b]&&"fraction"==a[b].type)k(a[b].numerator),k(a[b].denominator);else if(a[b]&&"table"==a[b].type){k(a[b].noAligns);e=0;for(var c=a[b].cellData.length;e<c;e++)for(var g=0,f=a[b].cellData[e].length;g<f;g++)k(a[b].cellData[e][g].content)}else a[b]&&"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&k(a[b].nucleus),Array.isArray(a[b].superscript)&&k(a[b].superscript),Array.isArray(a[b].subscript)&&k(a[b].subscript),Array.isArray(a[b].index)&&
k(a[b].index)):a[b]&&"mathchoice"==a[b].type?k(a[b].groups):a[b]&&"box"==a[b].type&&k([a[b].content])}function m(a){for(var b=0,d=a.length;b<d;b++)if(a[b]&&"accent modifier"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"atom",atomType:"acc",nucleus:[a[b+1]],superscript:a[b+1].superscript,subscript:a[b+1].subscript,accChar:a[b]["char"],accCode:a[b].code,invalid:a[b+1].invalid,phantom:a[b+1].phantom}),a[b].nucleus[0].superscript=null,a[b].nucleus[0].subscript=null,d=a.length,b--;else{var e=
("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:e,superscript:null,subscript:null}}else if(a[b]&&"fraction"==a[b].type)m(a[b].numerator),m(a[b].denominator);else if(a[b]&&"table"==a[b].type){m(a[b].noAligns);e=0;for(var c=a[b].cellData.length;e<c;e++)for(var g=0,f=a[b].cellData[e].length;g<
f;g++)m(a[b].cellData[e][g].content)}else a[b]&&"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&m(a[b].nucleus),Array.isArray(a[b].superscript)&&m(a[b].superscript),Array.isArray(a[b].subscript)&&m(a[b].subscript),Array.isArray(a[b].index)&&m(a[b].index)):a[b]&&"mathchoice"==a[b].type?m(a[b].groups):a[b]&&"box"==a[b].type&&m([a[b].content])}function qa(a){for(var b=0,d=a.length;b<d;b++)if(a[b]&&"limit modifier"==a[b].type)if(a[b-1]&&"atom"==a[b-1].type&&1==a[b-1].atomType)a[b-1].limits=a[b].value,
a.splice(b,1),d=a.length,b--;else{var e=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:e,superscript:null,subscript:null}}else if(a[b]&&"fraction"==a[b].type)qa(a[b].numerator),qa(a[b].denominator);else if(a[b]&&"table"==a[b].type){qa(a[b].noAligns);e=0;for(var c=a[b].cellData.length;e<
c;e++)for(var g=0,f=a[b].cellData[e].length;g<f;g++)qa(a[b].cellData[e][g].content)}else a[b]&&"atom"==a[b].type?(1==a[b].atomType&&(a[b].limits="display"),Array.isArray(a[b].nucleus)&&qa(a[b].nucleus),Array.isArray(a[b].superscript)&&qa(a[b].superscript),Array.isArray(a[b].subscript)&&qa(a[b].subscript),Array.isArray(a[b].index)&&qa(a[b].index)):a[b]&&"mathchoice"==a[b].type?qa(a[b].groups):a[b]&&"box"==a[b].type&&qa([a[b].content])}function H(a){for(var b=0,d=a.length;b<d;b++)if(a[b]&&"box wrapper"==
a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"box",boxType:a[b].value,to:a[b].to,spread:a[b].spread,content:a[b+1],superscript:null,subscript:null}),d=a.length,b--;else{var e=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:e,superscript:null,subscript:null}}else if(a[b]&&
"fraction"==a[b].type)H(a[b].numerator),H(a[b].denominator);else if(a[b]&&"table"==a[b].type){H(a[b].noAligns);e=0;for(var c=a[b].cellData.length;e<c;e++)for(var g=0,f=a[b].cellData[e].length;g<f;g++)H(a[b].cellData[e][g].content)}else a[b]&&"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&H(a[b].nucleus),Array.isArray(a[b].superscript)&&H(a[b].superscript),Array.isArray(a[b].subscript)&&H(a[b].subscript),Array.isArray(a[b].index)&&H(a[b].index)):a[b]&&"mathchoice"==a[b].type?H(a[b].groups):a[b]&&
"box"==a[b].type&&H([a[b].content])}function l(a){for(var b=0,d=a.length;b<d;b++)if(a[b]&&"atom"==a[b].type){if(Array.isArray(a[b].nucleus)&&l(a[b].nucleus),Array.isArray(a[b].superscript)&&l(a[b].superscript),Array.isArray(a[b].subscript)&&l(a[b].subscript),Array.isArray(a[b].index)&&l(a[b].index),Array.isArray(a[b].nucleus)&&1==a[b].nucleus.length&&!a[b].nucleus[0].delimited)[0,2,3,4,5,6,"inner"].includes(a[b].nucleus[0].atomType)&&!["over","under","rad"].includes(a[b].atomType)?a[b].nucleus[0].superscript||
a[b].nucleus[0].subscript?a[b].superscript||a[b].subscript||(a[b].phantom=a[b].phantom||a[b].nucleus[0].phantom,a[b].superscript=a[b].nucleus[0].superscript,a[b].subscript=a[b].nucleus[0].subscript,a[b].nucleus=a[b].nucleus[0].nucleus,b--):(a[b].phantom=a[b].phantom||a[b].nucleus[0].phantom,a[b].nucleus=a[b].nucleus[0].nucleus,b--):7==a[b].nucleus[0].atomType&&0==a[b].atomType?a[b].nucleus[0].superscript||a[b].nucleus[0].subscript?a[b].superscript||a[b].subscript||(a[b].phantom=a[b].phantom||a[b].nucleus[0].phantom,
a[b].superscript=a[b].nucleus[0].superscript,a[b].subscript=a[b].nucleus[0].subscript,a[b].nucleus=a[b].nucleus[0].nucleus,a[b].atomType=7,b--):(a[b].phantom=a[b].phantom||a[b].nucleus[0].phantom,a[b].nucleus=a[b].nucleus[0].nucleus,a[b].atomType=7,b--):7==a[b].nucleus[0].atomType||!["over","under","rad","acc"].includes(a[b].atomType)||a[b].nucleus[0].superscript||a[b].nucleus[0].subscript||(a[b].phantom=a[b].phantom||a[b].nucleus[0].phantom,a[b].nucleus=a[b].nucleus[0].nucleus)}else if(a[b]&&"fraction"==
a[b].type)a[b].numerator&&Array.isArray(a[b].numerator)&&1==a[b].numerator.length&&!a[b].numerator.subscript&&!a[b].numerator.superscript&&Array.isArray(a[b].numerator[0].nucleus)&&(a[b].numerator=a[b].numerator[0].nucleus),a[b].denominator&&Array.isArray(a[b].denominator.nucleus)&&1==a[b].denominator.length&&!a[b].denominator.subscript&&!a[b].denominator.superscript&&Array.isArray(a[b].denominator[0].nucleus)&&(a[b].denominator=a[b].denominator[0].nucleus),l(a[b].numerator),l(a[b].denominator);else if(a[b]&&
"table"==a[b].type){l(a[b].noAligns);for(var e=0,c=a[b].cellData.length;e<c;e++)for(var g=0,f=a[b].cellData[e].length;g<f;g++)l(a[b].cellData[e][g].content)}else a[b]&&"mathchoice"==a[b].type?l(a[b].groups):a[b]&&"box"==a[b].type&&l(a[b].content.nucleus)}if("display"!==e&&"inline"!==e)throw new TypeError('No "display" or "inline" style specified for fontTeX._tokenize.');var Ma=[],Na=a,q=[];Object.defineProperty(q,"last",{get:function(){return this[this.length-1]}});new c;var C={global:!1},G=[];Object.defineProperty(G,
"last",{get:function(){return this[this.length-1]}});for(var D=new d,w=[];;){var u=D.eat();if(null===u)return[[],a,!1];if("command"==u.type||"character"==u.type&&u.cat==b.cats.active){"mathchoice"==G.last&&G.last.failed();var p=D.expand(u,D);D.queue.unshift.apply(D.queue,p)}else{if("character"==u.type&&u.cat==b.cats.param)"mathchoice"==G.last&&G.last.failed(),D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],code:u.code,invalid:!0});else if("character"==u.type&&u.cat==b.cats.math)if("mathchoice"==
G.last&&G.last.failed(),"display"==e){for(var r=new d(D.string,D.queue),O=!1;;){p=r.eat();if(!p)break;if("command"==p.type||"character"==p.type&&p.cat==b.cats.active)p=r.expand(p,r),r.queue.unshift.apply(r.queue,p);else{"character"==p.type&&p.cat==b.cats.math&&(O=!0,r.finalize(),D.string=r.string);break}}if(O)break;else D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],code:u.code,invalid:!0})}else break;else if("character"==u.type&&u.cat==b.cats["super"]){"mathchoice"==G.last&&G.last.failed();
r=null;for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){r=q.last.tokens[p];break}r||(q.last.tokens.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null}),r=q.last.tokens[q.last.tokens.length-1]);r.superscript?q.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code,invalid:!0},superscript:null,subscript:null}):"superscript"==G.last?(r.superscript=[{type:"atom",atomType:0,nucleus:{type:"symbol",
"char":u["char"],code:u.code,invalid:!0},superscript:null,subscript:null}],G.pop()):"subscript"==G.last?(r.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code,invalid:!0},superscript:null,subscript:null}],G.pop()):(u={type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code},superscript:null,subscript:null,ignore:!0},q.last.tokens.push(u),G.push({toString:function(){return"superscript"},token:u}))}else if("character"==u.type&&u.cat==b.cats.sub){"mathchoice"==
G.last&&G.last.failed();r=null;for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){r=q.last.tokens[p];break}r||(q.last.tokens.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null}),r=q.last.tokens[q.last.tokens.length-1]);r.subscript?q.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code,invalid:!0},superscript:null,subscript:null}):"superscript"==G.last?(r.subscript=[{type:"atom",atomType:0,
nucleus:{type:"symbol","char":u["char"],code:u.code,invalid:!0},superscript:null,subscript:null}],G.pop()):"subscript"==G.last?(r.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code,invalid:!0},superscript:null,subscript:null}],G.pop()):(u={type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code},superscript:null,subscript:null,ignore:!0},q.last.tokens.push(u),G.push({toString:function(){return"subscript"},token:u}))}else if("character"==u.type&&
u.cat==b.cats.open)r={type:"atom",atomType:0,nucleus:{type:"symbol","char":u["char"],code:u.code},superscript:null,subscript:null,ignore:!0},w.push(r),G.push("scope"),new c,q.last.tokens.push(r);else if("character"==u.type&&u.cat==b.cats.close)if(q[0]===q.last||!w.length||q.last.delimited||q.last.semisimple||q.last.isHalign||q.last.isHalignCell||"scope"!=G.last)D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],code:u.code,invalid:!0});else if(w.pop(),G.pop(),r=q.last.isFrac?[{type:"atom",
atomType:"inner",nucleus:[{type:"fraction",numerator:q.last.fracNumerator,denominator:q.last.tokens,barWidth:q.last.barWidth,delims:[q.last.fracLeftDelim,q.last.fracRightDelim],nullDelimiterSpace:new t(q.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}]:q.last.tokens,q.last.root&&(q.last.root.invalid=!0),q[q.length-2]&&q[q.length-2].noAligned)q[q.length-3].noAligns.push({type:"atom",atomType:0,nucleus:r,superscript:null,subscript:null}),q.pop();else if("superscript"==G.last){q.pop();
for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){q.last.tokens[p].superscript=r;break}G.pop()}else if("subscript"==G.last){q.pop();for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){q.last.tokens[p].subscript=r;break}G.pop()}else q.last.isFrac?(q.pop(),q.last.tokens.push(r[0])):(q.pop(),q.last.tokens.push({type:"atom",atomType:0,nucleus:r,superscript:null,subscript:null})),"mathchoice"==G.last&&4==++G.last.current&&
G.last.succeeded();else if("character"==u.type&&u.cat==b.cats.alignment){"mathchoice"==G.last&&G.last.failed();r=!1;for(p=q.length-1;0<=p;p--)if(q[p].isHalignCell){r=q[p];break}if(!r){D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],code:u.code,invalid:!0});continue}O=r.parentScope;var ba=O.cellData[O.cellData.length-1];ba[ba.length-1].omit&&(u.postPreamble=!0);if(u.postPreamble&&!q.last.isHalignCell||"scope"!=G.last){D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],
code:u.code,invalid:!0});continue}if(!u.postPreamble){var V=-1;p=0;for(var fa=ba.length;p<fa;p++)V+=ba[p].span;if(O.preamble[V])r=O.preamble[V][1];else if(~O.repeatPreambleAt)p=O.preamble.slice(O.repeatPreambleAt,O.preamble.length),r=p[(V-O.repeatPreambleAt)%p.length][1];else{D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],code:u.code,invalid:!0});continue}if(!O.preamble[++V]&&!~O.repeatPreambleAt){D.queue.unshift({type:"character",cat:b.cats.all,"char":u["char"],code:u.code,invalid:!0});
continue}O=[];p=0;for(fa=r.length;p<fa;p++){ba={};for(var Ea in r[p])ba[Ea]=r[p][Ea];O.push(ba)}D.queue.unshift.apply(D.queue,O.concat(u));u.postPreamble=!0;continue}q.last.root&&(q.last.root.invalid=!0);G.pop();r=q.last.tokens;q.last.isFrac?(ba[ba.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:q.last.fracNumerator,denominator:r,barWidth:q.last.barWidth,delims:[q.last.fracLeftDelim,q.last.fracRightDelim],nullDelimiterSpace:new t(q.last.registers.named.nulldelimiterspace)}],
superscript:null,subscript:null}),q.pop()):(q.pop(),ba[ba.length-1].content=ba[ba.length-1].content.concat(r));$jscomp.initSymbol();fa=Symbol();D.saveState(fa);for(ba.push({type:"cell",content:[],omit:!1,span:1});;)if(u=D.eat(),!u){D.loadState(fa);break}else if("character"==u.type&&u.cat!=b.cats.active){D.loadState(fa);break}else if("command"==u.type||"character"==u.type&&u.cat==b.cats.active){if(u.name in q.last.registers.named){D.loadState(fa);break}p="command"==u.type?q.last.defs.primitive[u.name]||
q.last.defs.macros[u.name]:q.last.defs.active[u["char"]];if(!p){D.loadState(fa);break}if(p===b.defs.primitive.the||p.proxy&&p.original===b.defs.primitive.the||p===b.defs.primitive.expandafter||p.proxy&&p.original===b.defs.primitive.expandafter||p===b.defs.primitive.number||p.proxy&&p.original===b.defs.primitive.number||p===b.defs.primitive.romannumeral||p.proxy&&p.original===b.defs.primitive.romannumeral||p===b.defs.primitive.csname||p.proxy&&p.original===b.defs.primitive.csname||p===b.defs.primitive.string||
p.proxy&&p.original===b.defs.primitive.string||p===b.defs.primitive["if"]||p.isLet&&p.original===b.defs.primitive["if"]||p===b.defs.primitive.ifcase||p.isLet&&p.original===b.defs.primitive.ifcase||p===b.defs.primitive.ifcat||p.isLet&&p.original===b.defs.primitive.ifcat||p===b.defs.primitive.ifdim||p.isLet&&p.original===b.defs.primitive.ifdim||p===b.defs.primitive.ifeof||p.isLet&&p.original===b.defs.primitive.ifeof||p===b.defs.primitive.iffalse||p.isLet&&p.original===b.defs.primitive.iffalse||p===
b.defs.primitive.ifodd||p.isLet&&p.original===b.defs.primitive.ifodd||p===b.defs.primitive.ifnum||p.isLet&&p.original===b.defs.primitive.ifnum||p===b.defs.primitive.ifhmode||p.isLet&&p.original===b.defs.primitive.ifhmode||p===b.defs.primitive.ifinner||p.isLet&&p.original===b.defs.primitive.ifinner||p===b.defs.primitive.ifmmode||p.isLet&&p.original===b.defs.primitive.ifmmode||p===b.defs.primitive.iftrue||p.isLet&&p.original===b.defs.primitive.iftrue||p===b.defs.primitive.ifvmode||p.isLet&&p.original===
b.defs.primitive.ifvmode||p===b.defs.primitive.ifvoid||p.isLet&&p.original===b.defs.primitive.ifvoid||p===b.defs.primitive.ifx||p.isLet&&p.original===b.defs.primitive.ifx){if(p=D.expand(u,D),1==p.length&&p[0]===u&&u.invalid){D.loadState(fa);break}}else{if(p===b.defs.primitive.omit||p.proxy&&p.original===b.defs.primitive.omit){ba[ba.length-1].omit=!0;break}if("primitive"==p.type||p.proxy&&"primitive"==p.original.type){D.loadState(fa);break}p=D.expand(u,D);if(1==p.length&&p[0]==-u&&u.invalid){D.loadState(fa);
break}}D.queue.unshift.apply(D.queue,p)}G.push("scope");new c;q.last.isHalignCell=!0;if(!ba[ba.length-1].omit){V=-1;p=0;for(fa=ba.length;p<fa;p++)V+=ba[p].span;O.preamble[V]?r=O.preamble[V][0]:~O.repeatPreambleAt&&(p=O.preamble.slice(O.repeatPreambleAt,O.preamble.length),r=p[(V-O.repeatPreambleAt)%p.length][0]);O=[];p=0;for(fa=r.length;p<fa;p++){u={};for(Ea in r[p])u[Ea]=r[p][Ea];O.push(u)}D.queue.unshift.apply(D.queue,O)}}else if("character"==u.type){"mathchoice"==G.last&&G.last.failed();r={type:"symbol",
"char":u["char"],code:u.code,invalid:u.invalid};O=u.forcedMathCode+1?u.forcedMathCode:v(r["char"]);u.invalid&&u.recognized&&(O=0);if(O==b.mathcodes.active)if(q.last.defs.active[u["char"]]){D.queue.unshift.apply(D.queue,(q.last.defs.active[u["char"]].replacement||q.last.defs.active[u["char"]].original.replacement).slice());continue}else u.invalid=r.invalid=!0,O=0;if("superscript"==G.last){for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){q.last.tokens[p].superscript=
[{type:"atom",atomType:O,nucleus:r,superscript:null,subscript:null}];break}G.pop()}else if("subscript"==G.last){for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){q.last.tokens[p].subscript=[{type:"atom",atomType:O,nucleus:r,superscript:null,subscript:null}];break}G.pop()}else q.last.tokens.push({type:"atom",atomType:O,nucleus:r,superscript:null,subscript:null})}else if(u.register)if("mathchoice"==G.last&&G.last.failed(),$jscomp.initSymbol(),p=Symbol(),
D.saveState(p),(r=D.eat())&&"character"==r.type&&"="==r["char"]&&r.cat==b.cats.all||r&&D.revert(),"integer"==u.type){var ra=D.eat("integer");if(ra){if(ra.value<u.min||ra.value>u.max){D.loadState(p);continue}p=u;if(C.global&&0<=q.last.registers.named.globaldefs.value||0<q.last.registers.named.globaldefs.value)for(;u.parent;)u=u.parent,u.value=ra.value;p.value=ra.value;C.global=!1}else D.loadState(p)}else if("dimension"==u.type)if(r=D.eat("dimension")){u.sp.value=r.sp.value;u.em.value=r.em.value;if(C.global&&
0<=q.last.registers.named.globaldefs.value||0<q.last.registers.named.globaldefs.value)for(;u.parent;)u=u.parent,u.sp.value=r.sp.value,u.em.value=r.em.value;C.global=!1}else D.loadState(p);else if("mu dimension"==u.type)if(r=D.eat("mu dimension")){u.mu.value=r.mu.value;if(C.global&&0<=q.last.registers.named.globaldefs.value||0<q.last.registers.named.globaldefs.value)for(;u.parent;)u=u.parent,u.mu.value=ra.mu.value;C.global=!1}else D.loadState(p);else if("glue"==u.type)if(r=D.eat("glue")){u.start.sp.value=
r.start.sp.value;u.start.em.value=r.start.em.value;u.stretch="infinite dimension"==r.stretch.type?new z(r.stretch.number.value,r.stretch.magnitude.value):new t(r.stretch.sp.value,r.stretch.em.value);u.shrink="infinite dimension"==r.shrink.type?new z(r.shrink.number.value,r.shrink.magnitude.value):new t(r.shrink.sp.value,r.shrink.em.value);if(C.global&&0<=q.last.registers.named.globaldefs.value||0<q.last.registers.named.globaldefs.value)for(;u.parent;)u=u.parent,u.start.sp.value=r.start.sp.value,u.start.em.value=
r.start.em.value,u.stretch="infinite dimension"==r.stretch.type?new z(r.stretch.number.value,r.stretch.magnitude.value):new t(r.stretch.sp.value,r.stretch.em.value),u.shrink="infinite dimension"==r.shrink.type?new z(r.shrink.number.value,r.shrink.magnitude.value):new t(r.shrink.sp.value,r.shrink.em.value);C.global=!1}else D.loadState(p);else{if("mu glue"==u.type)if(r=D.eat("mu glue")){u.start.mu.value=r.start.mu.value;u.stretch="infinite dimension"==r.stretch.type?new z(r.stretch.number.value,r.stretch.magnitude.value):
new F(r.stretch.mu.value);u.shrink="infinite dimension"==r.shrink.type?new z(r.shrink.number.value,r.shrink.magnitude.value):new F(r.shrink.mu.value);if(C.global&&0<=q.last.registers.named.globaldefs.value||0<q.last.registers.named.globaldefs.value)for(;u.parent;)u=u.parent,u.start.mu.value=r.start.mu.value,u.stretch="infinite dimension"==r.stretch.type?new z(r.stretch.number.value,r.stretch.magnitude.value):new F(r.stretch.mu.value),u.shrink="infinite dimension"==r.shrink.type?new z(r.shrink.number.value,
r.shrink.magnitude.value):new F(r.shrink.mu.value);C.global=!1}else D.loadState(p)}else if("ignored command"==u.type){q.last.tokens.push(u.token);continue}for(var g in C)C[g]&&(C[g].invalid=!0,C[g]=!1)}}if("superscript"==G.last||"subscript"==G.last)G.last.token.invalid=!0,G.last.token.ignore=!1;for(;q.last!=q[0];)if(G.pop(),r=q.last.tokens,q.last.root&&(q.last.root.invalid=!0),"superscript"==G.last){q.pop();for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){q.last.tokens[p].superscript=
r;break}G.pop()}else if("subscript"==G.last){q.pop();for(p=q.last.tokens.length-1;0<=p;p--)if("atom"==q.last.tokens[p].type&&!q.last.tokens[p].ignore){q.last.tokens[p].subscript=r;break}G.pop()}else q.last.isFrac?(q[q.length-2].tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:q.last.fracNumerator,denominator:r,barWidth:q.last.barWidth,delims:[q.last.fracLeftDelim,q.last.fracRightDelim],nullDelimiterSpace:new t(q.last.registers.named.nulldelimiterspace)}],superscript:null,
subscript:null}),q.pop()):(q.pop(),q.last.tokens.push({type:"atom",atomType:0,nucleus:r,superscript:null,subscript:null}));q[0].isFrac&&(r=q[0].tokens,q[0].tokens=[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:q[0].fracNumerator,denominator:r,barWidth:q[0].barWidth,delims:[q[0].fracLeftDelim,q[0].fracRightDelim],nullDelimiterSpace:new t(q[0].registers.named.nulldelimiterspace)}],superscript:null,subscript:null}]);p=0;for(fa=w.length;p<fa;p++)w[p].invalid=!0;n(q[0].tokens);k(q[0].tokens);
m(q[0].tokens);qa(q[0].tokens);H(q[0].tokens);l(q[0].tokens);D.finalize();return 2<arguments.length&&arguments[2]?q[0]:[q[0].tokens,Na,!0]};fontTeX.format=function(a){a=fontTeX._tokenize(a+"$","inline",!0);b.defs.macros={};b.defs.active={};b.registers.count={};b.registers.dimen={};b.registers.skip={};b.registers.muskip={};b.registers.named={};for(var e in a.defs.macros)b.defs.macros[e]=a.defs.macros[e];for(e in a.defs.active)b.defs.active[e]=a.defs.active[e];var d=[];for(e in a.registers.count)b.registers.count[e]=
new h(a.registers.count[e].value);for(e in a.registers.dimen)b.registers.dimen[e]=new t(a.registers.dimen[e].sp.value,a.registers.dimen[e].em.value);for(e in a.registers.skip)b.registers.skip[e]=new X,b.registers.skip[e].start.sp.value=a.registers.skip[e].start.sp.value,b.registers.skip[e].start.em.value=a.registers.skip[e].start.em.value,b.registers.skip[e].stretch="infinite dimension"==a.registers.skip[e].stretch.type?new z(a.registers.skip[e].stretch.number.value,a.registers.skip[e].stretch.magnitude.value):
new t(a.registers.skip[e].stretch.sp.value,a.registers.skip[e].stretch.em.value),b.registers.skip[e].shrink="infinite dimension"==a.registers.skip[e].shrink.type?new z(a.registers.skip[e].shrink.number.value,a.registers.skip[e].shrink.magnitude.value):new t(a.registers.skip[e].shrink.sp.value,a.registers.skip[e].shrink.em.value);for(e in a.registers.muskip)b.registers.muskip[e]=new va,b.registers.muskip[e].start.mu.value=a.registers.muskip[e].start.mu.value,b.registers.muskip[e].stretch="infinite dimension"==
a.registers.muskip[e].stretch.type?new z(a.registers.muskip[e].stretch.number.value,a.registers.muskip[e].stretch.magnitude.value):new F(a.registers.muskip[e].stretch.mu.value),b.registers.muskip[e].shrink="infinite dimension"==a.registers.muskip[e].shrink.type?new z(a.registers.muskip[e].shrink.number.value,a.registers.muskip[e].shrink.magnitude.value):new F(a.registers.muskip[e].shrink.mu.value);for(e in a.registers.named)d.includes(a.registers.named[e])?b.registers.named[e]=a.registers.named[e]:
"integer"==a.registers.named[e].type?b.registers.named[e]=new h(a.registers.named[e].value):"dimension"==a.registers.named[e].type?b.registers.named[e]=new t(a.registers.named[e].sp.value,a.registers.named[e].em.value):"mu dimension"==a.registers.named[e].type?b.registers.named[e]=new F(a.registers.named[e].mu.value):"glue"==a.registers.named[e].type?(b.registers.named[e]=new X,b.registers.named[e].start.sp.value=a.registers.named[e].start.sp.value,b.registers.named[e].start.em.value=a.registers.named[e].start.em.value,
b.registers.named[e].stretch="infinite dimension"==a.registers.named[e].stretch.type?new z(a.registers.named[e].stretch.number.value,a.registers.named[e].stretch.magnitude.value):new t(a.registers.named[e].stretch.sp.value,a.registers.named[e].stretch.em.value),b.registers.named[e].shrink="infinite dimension"==a.registers.named[e].shrink.type?new z(a.registers.named[e].shrink.number.value,a.registers.named[e].shrink.magnitude.value):new t(a.registers.named[e].shrink.sp.value,a.registers.named[e].shrink.em.value)):
"mu glue"==a.registers.named[e].type&&(b.registers.named[e]=new va,b.registers.named[e].start.mu.value=a.registers.named[e].start.mu.value,b.registers.named[e].stretch="infinite dimension"==a.registers.named[e].stretch.type?new z(a.registers.named[e].stretch.number.value,a.registers.named[e].stretch.magnitude.value):new F(a.registers.named[e].stretch.mu.value),b.registers.named[e].shrink="infinite dimension"==a.registers.named[e].shrink.type?new z(a.registers.named[e].shrink.number.value,a.registers.named[e].shrink.magnitude.value):
new F(a.registers.named[e].shrink.mu.value));for(e in a.cats)b.cats[e].value=a.cats[e].value;for(e in a.mathcodes)b.mathcodes[e].value=a.mathcodes[e].value;for(e in a.uc)b.uc[e].value=a.uc[e].value;for(e in a.lc)b.lc[e].value=a.lc[e].value};fontTeX._genHTML=function(a,e,d,c){function f(a){for(var b=0,d=a.children.length;b<d;b++)f(a.children[b]);a.style.flexWrap&&(a.style.flexWrap="nowrap");return a}function v(e,h,l,n,B){function q(d,r,B){var g=e[r],w=e[r+1]||{};switch(d){default:if("glue"!=g.type&&
"kern"!=g.type&&"vglue"!=g.type&&"vkern"!=g.type)return q(2,r,B);g.italicCorrection&&(g.italicCorrection=qa||"");if("glue"==g.type&&g.isNonScript)return"script"!=h&&"scriptscript"!=h||"glue"!=w.type&&"vglue"!=w.type&&"kern"!=w.type&&"vkern"!=w.type||(e.splice(r+1,1),B--),[r,B];"glue"==g.type&&"mu glue"==g.glue.type?g.glue=new X(new t(0,g.glue.start.mu.value/18),"infinite dimension"==g.glue.stretch.type?g.glue.stretch:new t(0,~~(g.glue.stretch.mu.value/18)),"infinite dimension"==g.glue.shrink.type?
g.glue.shrink:new t(0,~~(g.glue.shrink.mu.value/18))):"kern"==g.type&&"mu dimension"==g.dimen.type?g.dimen=new t(0,~~(g.dimen.mu.value/18)):"vglue"==g.type&&(g.type="vkern",g.dimen=g.glue.start,delete g.glue);u.push(g);break;case 2:return"font modifier"==g.type?(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"].includes(g.value)?h=g.value.substring(0,g.value.length-5):n=g.value,e.splice(r,1),r--,B--,[r,B]):q(3,r,B);case 3:if("mathchoice"==g.type){var H=g.groups[{display:0,text:1,script:2,
scriptscript:3}[h]];e.splice.bind(e,r,1).apply(e,"symbol"==H.nucleus.type?[H]:H.nucleus);B+="symbol"==H.nucleus.type?0:H.nucleus.length-1;r--;return[r,B]}return q(4,r,B);case 4:if("atom"==g.type&&2==g.atomType){if(!p[0]||[1,2,3,4,6].includes(p[p.length-1].atomType))g.atomType=0;return q(10,r,B)}return q(5,r,B);case 5:if("atom"!=g.type||!p.length||3!=g.atomType&&5!=g.atomType&&6!=g.atomType)return q(6,r,B);p[0]&&2==p[p.length-1].atomType&&(p[p.length-1].atomType=0);return q(10,r,B);case 6:return"atom"==
g.type&&[4,"inner","over","under","vcenter","rad","acc"].includes(g.atomType)?q(10,r,B):q(7,r,B);case 7:return"atom"==g.type&&1==g.atomType?("display"==g.limits&&(g.limits="display"==h),q(10,r,B)):q(8,r,B);case 8:if("fraction"==g.type){var z=function(a,b,d){switch(b){default:u.splice(u.length-(d?1:0),0,{type:"kern",dimen:g.nullDelimiterSpace});break;case "|":case "/":case "\\":case "\u2016":case "\u23aa":case "\u23d0":case "\u27e8":case "\u27e9":var e=Math.max(kb,fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,
m));a.style.height=e+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign="middle";a.height=100;a.width=fontTeX.fontDimen.widthOf(b,m)/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m))*100;e=a.getContext("2d");e.textAlign="center";e.font=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m))+"px "+m;e.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,m)/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m)));g.div.insertBefore(a,
d?g.div.firstElementChild:null);break;case "(":case ")":e=Math.max(kb,fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.style.height=e+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign="middle";if(2>=e)a.height=100,a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m)),e=a.getContext("2d"),e.textAlign="center",e.font=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,
m))+"px "+m,e.translate(0,100),e.fillText(b,a.width/2,100*-fontTeX.fontDimen.depthOf(b,m)/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m)));else{var c=fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m);a.height=50*e;a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));e=a.getContext("2d");e.textAlign="center";e.font=100/c+"px "+m;e.fillText(b,a.width/2,50-100*fontTeX.fontDimen.depthOf(b,
m)/c);var f=e.getImageData(0,0,a.width,50);e.clearRect(0,0,a.width,a.height);e.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,m)/c);e.clearRect(0,50,a.width,a.height);e.putImageData(f,0,a.height-50);var k=e.createImageData(a.width,a.height-100);b=e.getImageData(0,49,a.width,1).data;c=f.data.slice(0,4*a.width);for(var h=0,v=k.height/2;h<v;h++)for(var l=0,p=a.width;l<p;l++)k.data[h*a.width*4+4*l]=b[4*l],k.data[h*a.width*4+4*l+1]=b[4*l+1],k.data[h*a.width*4+4*l+2]=b[4*l+2],k.data[h*a.width*
4+4*l+3]=b[4*l+3],k.data[~~(h+k.height/2)*a.width*4+4*l]=c[4*l],k.data[~~(h+k.height/2)*a.width*4+4*l+1]=c[4*l+1],k.data[~~(h+k.height/2)*a.width*4+4*l+2]=c[4*l+2],k.data[~~(h+k.height/2)*a.width*4+4*l+3]=c[4*l+3];e.putImageData(k,0,50)}g.div.insertBefore(a,d?g.div.firstElementChild:null);break;case "[":case "]":case "\u27ee":case "\u27ef":case "\u2191":case "\u2193":case "\u2195":case "\u21d1":case "\u21d3":case "\u21d5":case "\u2308":case "\u2309":case "\u230a":case "\u230b":case "\u23b0":case "\u23b1":e=
Math.max(kb,fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.style.height=e+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign="middle";c=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.height=100*Math.max(e,1);a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));e=a.getContext("2d");e.textAlign="center";e.font=c+"px "+m;e.fillText(b,a.width/2,50-
fontTeX.fontDimen.depthOf(b,m)*c);f=e.getImageData(0,0,a.width,50);e.clearRect(0,0,a.width,a.height);e.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,m)*c);e.clearRect(0,50,a.width,a.height);e.putImageData(f,0,a.height-50);if(100<a.height){k=e.createImageData(a.width,a.height-100);b=e.getImageData(0,49,a.width,1).data;c=f.data.slice(0,4*a.width);h=0;for(v=k.height/2;h<v;h++)for(l=0,p=a.width;l<p;l++)k.data[h*a.width*4+4*l]=b[4*l],k.data[h*a.width*4+4*l+1]=b[4*l+1],k.data[h*a.width*4+4*l+2]=
b[4*l+2],k.data[h*a.width*4+4*l+3]=b[4*l+3],k.data[~~(h+k.height/2)*a.width*4+4*l]=c[4*l],k.data[~~(h+k.height/2)*a.width*4+4*l+1]=c[4*l+1],k.data[~~(h+k.height/2)*a.width*4+4*l+2]=c[4*l+2],k.data[~~(h+k.height/2)*a.width*4+4*l+3]=c[4*l+3];e.putImageData(k,0,50)}g.div.insertBefore(a,d?g.div.firstElementChild:null);break;case "{":case "}":e=Math.max(kb,fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.style.height=e+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign=
"middle";c=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.height=100*Math.max(e,1);a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));e=a.getContext("2d");e.textAlign="center";e.font=c+"px "+m;e.fillText(b,a.width/2,33-fontTeX.fontDimen.depthOf(b,m)*c);f=e.getImageData(0,0,a.width,33);e.clearRect(0,0,a.width,a.height);e.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,m)*c);h=e.getImageData(0,
0,a.width,33);e.clearRect(0,0,a.width,a.height);e.fillText(b,a.width/2,a.height/2+50-fontTeX.fontDimen.depthOf(b,m)*c);e.clearRect(0,0,a.width,Math.floor(a.height/2)-17);e.clearRect(0,Math.ceil(a.height/2)+17,a.width,a.height);e.putImageData(h,0,0);e.putImageData(f,0,a.height-33);if(100<a.height){k=e.createImageData(a.width,Math.ceil(a.height/2)-50);b=h.data.slice(128*a.width,132*a.width);c=e.getImageData(0,Math.ceil(a.height/2)-16,a.width,1).data;h=0;for(v=k.height/2;h<v;h++)for(l=0,p=a.width;l<
p;l++)k.data[h*a.width*4+4*l]=b[4*l],k.data[h*a.width*4+4*l+1]=b[4*l+1],k.data[h*a.width*4+4*l+2]=b[4*l+2],k.data[h*a.width*4+4*l+3]=b[4*l+3],k.data[~~(h+k.height/2)*a.width*4+4*l]=c[4*l],k.data[~~(h+k.height/2)*a.width*4+4*l+1]=c[4*l+1],k.data[~~(h+k.height/2)*a.width*4+4*l+2]=c[4*l+2],k.data[~~(h+k.height/2)*a.width*4+4*l+3]=c[4*l+3];var q=e.createImageData(a.width,Math.ceil(a.height/2)-50);b=e.getImageData(0,Math.floor(a.height/2)+16,a.width,1).data;c=f.data.slice(0,4*a.width);h=0;for(v=k.height/
2;h<v;h++)for(l=0,p=a.width;l<p;l++)q.data[h*a.width*4+4*l]=b[4*l],q.data[h*a.width*4+4*l+1]=b[4*l+1],q.data[h*a.width*4+4*l+2]=b[4*l+2],q.data[h*a.width*4+4*l+3]=b[4*l+3],q.data[~~(h+k.height/2)*a.width*4+4*l]=c[4*l],q.data[~~(h+k.height/2)*a.width*4+4*l+1]=c[4*l+1],q.data[~~(h+k.height/2)*a.width*4+4*l+2]=c[4*l+2],q.data[~~(h+k.height/2)*a.width*4+4*l+3]=c[4*l+3];e.putImageData(k,0,33);e.putImageData(q,0,a.height/2+17)}g.div.insertBefore(a,d?g.div.firstElementChild:null)}},C={type:"atom",atomType:"inner",
nucleus:null,superscript:null,subscript:null,style:h,div:document.createElement("div")};u.push(C);p.push(C);g.style=h;g.div=C.div;g.div.style.display="inline-block";g.div.style.whiteSpace="nowrap";var G=fontTeX.fontDimen.heightOf("x",m)/2+fontTeX.fontDimen.baselineHeightOf(m),F=document.createElement("div"),O=document.createElement("div");F.style.display=O.style.display="inline-block";F.style.verticalAlign="text-bottom";F.style.position="relative";O.style.verticalAlign="text-bottom";O.style.position=
"relative";v(g.numerator,"display"==h?"text":"text"==h?"script":"scriptscript",l,n,F);v(g.denominator,"display"==h?"text":"text"==h?"script":"scriptscript",!0,n,O);var Ma="from font"==g.barWidth?new t(0,65536*fontTeX.fontDimen.visibleWidthOf("|",m)):new t(g.barWidth);Ma.em.value+=Ma.sp.value/65536/6*8/k*65536;Ma.sp.value=0;var Na=Ma.em.value/65536+"em",ra=Ma.em.value*("text"==h||"script"==h?.707106781:1)/65536+"em",ca=Ma.em.value*("script"==h||"scriptscript"==h?.707106781:1)/65536;a.appendChild(O);
a.appendChild(F);var ba=F.offsetWidth,fa=F.offsetHeight/k,wb=ba*("text"==h||"script"==h?.707106781:1),Ea=O.offsetHeight/k,da=O.offsetWidth,ia=Ea*("text"==h||"script"==h?.707106781:1),va=da*("text"==h||"script"==h?.707106781:1);a.removeChild(O);a.removeChild(F);"text"==h||"script"==h?(F.style.fontSize=O.style.fontSize=".707106781em",F.style.paddingTop="calc("+G/.707106781+"em + "+Na+" / 2)",F.style.top="calc("+-G/.707106781+"em - "+Na+" / 2)",O.style.top="calc("+(Ea-G/.707106781)+"em + "+Na+"/ 2 - "+
Ea+"em)",g.div.style.paddingBottom="calc("+(ia-G)+"em + "+ra+" / 2)"):(F.style.fontSize=O.style.fontSize="",F.style.paddingTop="calc("+G+"em + "+ra+" / 2)",F.style.top="calc("+-G+"em - "+ra+" / 2)",O.style.top="calc("+(Ea-G)+"em + "+ra+"/ 2 - "+Ea+"em)",g.div.style.paddingBottom="calc("+(Ea-G)+"em + "+ra+" / 2)");O.style.height=0;var wa=ba>da?O:F,Qa=ba>da?F:O,Ka=document.createElement("div"),Ta=document.createElement("div"),ha=document.createElement("div");Ka.style.display="inline-block";Ka.style.position=
"relative";Ka.style.verticalAlign="text-bottom";Ka.style.top=-G+"em";Ka.style.width=".05em";Ka.style.height=0;Ta.style.borderTop=ra+" solid currentColor";Ta.style.padding="0 .05em";Ta.style.position="relative";Ta.style.top="calc("+ra+" / -2)";Ta.style.display="inline-block";Ta.style.height=0;ha.style.display="inline-block";ha.style.visibility="hidden";Ka.style.webkitUserSelect=Ka.style.mozUserSelect=Ka.style.msUserSelect=Ka.style.userSelect="none";ha.style.width=Math.max(wb,va)/k+"em";Ta.appendChild(ha);
Ka.appendChild(Ta);g.div.appendChild(Ka);var ea=document.createElement("div"),Xa=document.createElement("div"),Ya=document.createElement("div"),Za=wa.firstElementChild,ob=document.createElement("div"),pb=document.createElement("div");Za&&(Za.style.width="100%",Za.insertBefore(ob,Za.firstElementChild),Za.appendChild(pb),Xa.appendChild(Za));ea.style.position="relative";ea.style.display="inline-block";Ya.style.display="inline-block";Ya.style.width=0;Ya.style.height=(ba>da?Ea:fa)+"em";Ya.innerHTML="\u00a0";
Ya.style.width=Math.max(ba,da)/k+"em";Xa.style.position="absolute";ob.style.flexGrow=pb.style.flexGrow=ob.style.flexShrink=pb.style.flexShrink=1;wa.style.width=Xa.style.left=Xa.style.right=Xa.style.top=0;ea.appendChild(Xa);ea.appendChild(Ya);wa.appendChild(ea);g.div.appendChild(wa);g.div.appendChild(Qa);var Aa=document.createElement("div");Aa.style.display="inline-block";Aa.style.width=".05em";g.div.appendChild(Aa);var eb=document.createElement("canvas"),fb=document.createElement("canvas"),kb="display"==
h?2.416666666:"text"==h?1.416666666:0;eb.style.display=fb.style.display="inline-block";">"==g.delims[0]&&(g.delims[0]="\u27e9");">"==g.delims[1]&&(g.delims[1]="\u27e9");"<"==g.delims[0]&&(g.delims[0]="\u27e8");"<"==g.delims[1]&&(g.delims[1]="\u27e8");z(eb,g.delims[0],!0);z(fb,g.delims[1],!1);var N={display:{display:1,text:1,script:.707106781,scriptscript:.5},text:{display:1,text:1,script:.707106781,scriptscript:.5},script:{display:1.414213562,text:1.414213562,script:1,scriptscript:.707106781},scriptscript:{display:2,
text:2,script:1.414213562,scriptscript:1}}[D.displayedStyle][h];g.div.renderedDepth=(ia-fontTeX.fontDimen.heightOf("x",m)/2+ca/2+(-O.baseline-O.baselineOffset+O.renderedDepth)*("text"==h||"script"==h?.707106781:1))*N;g.div.renderedHeight=(fontTeX.fontDimen.heightOf("x",m)/2+ca/2+(F.baseline+F.baselineOffset+F.renderedHeight)*("text"==h||"script"==h?.707106781:1))*N;g.div.baseline=O.baseline*N*("text"==h||"script"==h?.707106781:1);g.div.baselineOffset=(ia-fontTeX.fontDimen.heightOf("x",m)/2+ca/2-O.baseline*
("text"==h||"script"==h?.707106781:1))*N;qa=" "}else return q(9,r,B);break;case 9:if("table"==g.type){C={type:"atom",atomType:"inner",nucleus:null,superscript:null,subscript:null,style:h,div:document.createElement("div")};u.push(C);p.push(C);g.style=h;g.div=C.div;g.div.style.display="inline-block";g.div.style.whiteSpace="nowrap";var $a=document.createElement("table");$a.style.borderCollapse="collapse";$a.style.verticalAlign="middle";$a.style.display="inline-table";var Wa=0;for(B=g.cellData.length;Wa<
B;Wa++){if(g.noAligns[Wa]){var ab=document.createElement("td");ab.setAttribute("colspan",g.tabSkips.length-1);ab.style.padding=0;v([g.noAligns[Wa]],h,!1,n,ab);$a.appendChild(ab);ab.firstElementChild.style.width="100%";ab.firstElementChild.style.justifyContent=""}for(var qb=document.createElement("tr"),Ra=0,xb=g.cellData[Wa].length;Ra<xb;Ra++){var Ua=document.createElement("td");Ua.setAttribute("colspan",g.cellData[Wa][Ra].span);Ua.style.padding=0;Ua.style.paddingLeft=g.tabSkips[Ra].start.em.value/
65536+g.tabSkips[Ra].start.sp.value/65536/12+"em";Ra==g.tabSkips.length-2&&(Ua.style.paddingRight=g.tabSkips[Ra+1].start.em.value/65536+g.tabSkips[Ra+1].start.sp.value/65536/12+"em");v(g.cellData[Wa][Ra].content,h,!1,n,Ua);qb.appendChild(Ua);Ua.firstElementChild.style.width="100%";Ua.firstElementChild.style.justifyContent=""}$a.appendChild(qb)}g.div.appendChild($a);a.appendChild(g.div);g.div.renderedHeight=g.div.offsetHeight/k/2+fontTeX.fontDimen.heightOf("x",m)/2;g.div.renderedDepth=g.div.offsetHeight/
k/2-fontTeX.fontDimen.heightOf("x",m)/2;a.removeChild(g.div)}else return q(10,r,B);break;case 10:var Ba=!1;"box"==g.type&&(Ba=g,g=g.content);if("atom"==g.type){N={display:{display:1,text:1,script:.707106781,scriptscript:.5},text:{display:1,text:1,script:.707106781,scriptscript:.5},script:{display:1.414213562,text:1.414213562,script:1,scriptscript:.707106781},scriptscript:{display:2,text:2,script:1.414213562,scriptscript:1}}[D.displayedStyle][h];if(["over","under","rad"].includes(g.atomType)&&(g.subscript||
g.superscript)||"rad"==g.atomType&&1!=N)g.nucleus=[{type:"atom",atomType:g.atomType,nucleus:g.nucleus,superscript:null,subscript:null,index:g.index,invalid:g.invalid,phantom:g.phantom}],g.atomType=0;u.push(g);p.push(g);g.style=h;g.div=document.createElement("div");g.div.style.display="inline-block";g.div.style.whiteSpace="nowrap";g.div.renderedHeight=0;g.div.renderedDepth=-.5;g.div.baselineOffset=0;if(g.invalid){if(g.nucleus&&"symbol"==g.nucleus.type)g.nucleus.invalid=!0;else if(g.nucleus)for(r=0,
B=g.nucleus.length;r<B;r++)g.nucleus[r].invalid=!0;g.superscript&&(g.superscript[0].invalid=!0);g.subscript&&(g.subscript[0].invalid=!0)}![0,1,2,3,4,5,6,"inner"].includes(g.atomType)||!g.nucleus||1!=g.nucleus.length||1!=g.nucleus[0].atomType||g.nucleus[0].delimited||g.nucleus[0].limits||g.superscript||g.subscript||g.nucleus[0].nucleus&&("symbol"==g.nucleus[0].nucleus.type&&V["operator.growchars"][0].includes(g.nucleus[0].nucleus["char"])||1==g.nucleus[0].nucleus.length&&7==g.nucleus[0].nucleus[0].atomType&&
V["operator.growchars"][0].includes(g.nucleus[0].nucleus[0].nucleus[0]["char"]))||(g.superscript=g.nucleus[0].superscript,g.subscript=g.nucleus[0].subscript,g.nucleus=g.nucleus[0].nucleus);var gb=0;if(g.nucleus&&"symbol"==g.nucleus.type){if(10==g.nucleus.code)g.isLineBreak=!0,g.div.style.width="100%";else{g.div.innerHTML='<div style="white-space:pre;display:inline-block;'+(g.nucleus.invalid?"color:red;":"")+{nm:7==g.atomType?'font-style:italic"><div style="display:inline-block;margin:0 '+fontTeX.fontDimen.italCorrOf(g.nucleus["char"],
m)+"em 0 "+fontTeX.fontDimen.leftOffsetOf(g.nucleus["char"],m,"it")+"em":"",rm:"",bf:"font-weight:bold;",it:"font-style:italic;",sl:"font-style:oblique;"}[n]+'">'+(45==g.nucleus.code?"\u2212":g.nucleus["char"])+"</div>"+(7==g.atomType?"</div>":"");var rb="nm"==n?7==g.atomType?"it":"nm":n;g.div.renderedHeight=fontTeX.fontDimen.heightOf(g.nucleus["char"],m,rb)*N;g.div.renderedDepth=fontTeX.fontDimen.trueDepthOf(g.nucleus["char"],m,rb)*N;g.div.baseline=fontTeX.fontDimen.baselineHeightOf(m)*N;gb=fontTeX.fontDimen.scriptOffsetOf(g.nucleus["char"],
m,"nm"==n&&7==g.atomType?"it":n)}qa=g.nucleus["char"]}else Array.isArray(g.nucleus)&&(qa=v(g.nucleus,h,l||"over"==g.atomType||"rad"==g.atomType,n,g.div)||qa,g.div.renderedHeight*=N,g.div.renderedDepth*=N,g.div.baseline*=N,g.div.baselineOffset*=N,!g.div.firstElementChild.empty||g.superscript||g.subscript||g.delimited||["rad","acc","over","under"].includes(g.atomType)||(g.div.empty=!0));g.phantom&&(g.div.firstElementChild.style.opacity=0);g.div.style.fontSize=N+"em";if("display"==h&&g.atomType==b.mathcodes.op&&
g.nucleus&&("symbol"==g.nucleus.type||1==g.nucleus.length&&g.nucleus[0].nucleus&&"symbol"==g.nucleus[0].nucleus.type&&7==g.nucleus[0].atomType)){var Va=1;V["operator.growchars"][0].includes(g.nucleus["char"]||g.nucleus[0].nucleus["char"])&&(Va=V["operator.growamount"][0],g.div.renderedHeight*=Va,g.div.renderedDepth*=Va,g.div.firstElementChild.style.fontSize=Va+"em",gb*=Va);G=fontTeX.fontDimen.heightOf("x",m)/2;var Ca=(g.div.renderedHeight-G-g.div.renderedDepth-G)/2;g.div.firstElementChild.style.top=
Ca/Va+"em";g.div.renderedHeight-=Ca;g.div.renderedDepth+=Ca;g.div.firstElementChild.style.position="relative";g.div.firstElementChild.style.marginTop=-Ca/Va+"em";g.div.firstElementChild.style.marginBottom=Ca/Va+"em"}if(g.delimited){var sb=function(a,b,e){switch(b){default:u.splice(u.length-(e?1:0),0,{type:"kern",dimen:g.nullDelimiterSpace});break;case "|":case "/":case "\\":case "\u2016":case "\u23aa":case "\u23d0":case "\u27e8":case "\u27e9":var d=fontTeX.fontDimen.heightOf("x",m)/2,c=2*Math.max(g.div.renderedHeight-
d,g.div.renderedDepth+d,(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m))/2);a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign="middle";g.div.renderedHeight=Math.max(c/2+d,g.div.renderedHeight);g.div.renderedDepth=Math.max(c/2-d,g.div.renderedDepth);a.height=100;a.width=fontTeX.fontDimen.widthOf(b,m)/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m))*100;var f=a.getContext("2d");f.textAlign="center";f.font=100/(fontTeX.fontDimen.heightOf(b,
m)+fontTeX.fontDimen.depthOf(b,m))+"px "+m;f.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,m)/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m)));g.div.insertBefore(a,e?g.div.firstElementChild:null);break;case "(":case ")":d=fontTeX.fontDimen.heightOf("x",m)/2;c=2*Math.max(g.div.renderedHeight-d,g.div.renderedDepth+d,(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m))/2);a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign=
"middle";g.div.renderedHeight=Math.max(c/2+d,g.div.renderedHeight);g.div.renderedDepth=Math.max(c/2-d,g.div.renderedDepth);if(2>=c)a.height=100,a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m)),f=a.getContext("2d"),f.textAlign="center",f.font=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m))+"px "+m,f.translate(0,100),f.fillText(b,a.width/2,100*-fontTeX.fontDimen.depthOf(b,m)/(fontTeX.fontDimen.heightOf(b,
m)+fontTeX.fontDimen.depthOf(b,m)));else{var k=fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m);a.height=50*c;a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));f=a.getContext("2d");f.textAlign="center";f.font=100/k+"px "+m;f.fillText(b,a.width/2,50-100*fontTeX.fontDimen.depthOf(b,m)/k);d=f.getImageData(0,0,a.width,50);f.clearRect(0,0,a.width,a.height);f.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,
m)/k);f.clearRect(0,50,a.width,a.height);f.putImageData(d,0,a.height-50);var h=f.createImageData(a.width,a.height-100);b=f.getImageData(0,49,a.width,1).data;k=d.data.slice(0,4*a.width);c=0;for(var v=h.height/2;c<v;c++)for(var l=0,p=a.width;l<p;l++)h.data[c*a.width*4+4*l]=b[4*l],h.data[c*a.width*4+4*l+1]=b[4*l+1],h.data[c*a.width*4+4*l+2]=b[4*l+2],h.data[c*a.width*4+4*l+3]=b[4*l+3],h.data[~~(c+h.height/2)*a.width*4+4*l]=k[4*l],h.data[~~(c+h.height/2)*a.width*4+4*l+1]=k[4*l+1],h.data[~~(c+h.height/
2)*a.width*4+4*l+2]=k[4*l+2],h.data[~~(c+h.height/2)*a.width*4+4*l+3]=k[4*l+3];f.putImageData(h,0,50)}g.div.insertBefore(a,e?g.div.firstElementChild:null);break;case "[":case "]":case "\u27ee":case "\u27ef":case "\u2191":case "\u2193":case "\u2195":case "\u21d1":case "\u21d3":case "\u21d5":case "\u2308":case "\u2309":case "\u230a":case "\u230b":case "\u23b0":case "\u23b1":d=fontTeX.fontDimen.heightOf("x",m)/2;c=2*Math.max(g.div.renderedHeight-d,g.div.renderedDepth+d,(fontTeX.fontDimen.heightOf(b,
m)+fontTeX.fontDimen.depthOf(b,m))/2);a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign="middle";k=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.height=100*Math.max(c,1);a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));f=a.getContext("2d");f.textAlign="center";f.font=k+"px "+m;f.fillText(b,a.width/2,50-fontTeX.fontDimen.depthOf(b,m)*k);g.div.renderedHeight=
Math.max(c/2+d,g.div.renderedHeight);g.div.renderedDepth=Math.max(c/2-d,g.div.renderedDepth);d=f.getImageData(0,0,a.width,50);f.clearRect(0,0,a.width,a.height);f.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,m)*k);f.clearRect(0,50,a.width,a.height);f.putImageData(d,0,a.height-50);if(100<a.height){h=f.createImageData(a.width,a.height-100);b=f.getImageData(0,49,a.width,1).data;k=d.data.slice(0,4*a.width);c=0;for(v=h.height/2;c<v;c++)for(l=0,p=a.width;l<p;l++)h.data[c*a.width*4+4*l]=b[4*l],h.data[c*
a.width*4+4*l+1]=b[4*l+1],h.data[c*a.width*4+4*l+2]=b[4*l+2],h.data[c*a.width*4+4*l+3]=b[4*l+3],h.data[~~(c+h.height/2)*a.width*4+4*l]=k[4*l],h.data[~~(c+h.height/2)*a.width*4+4*l+1]=k[4*l+1],h.data[~~(c+h.height/2)*a.width*4+4*l+2]=k[4*l+2],h.data[~~(c+h.height/2)*a.width*4+4*l+3]=k[4*l+3];f.putImageData(h,0,50)}g.div.insertBefore(a,e?g.div.firstElementChild:null);break;case "{":case "}":d=fontTeX.fontDimen.heightOf("x",m)/2;c=2*Math.max(g.div.renderedHeight-d,g.div.renderedDepth+d,(fontTeX.fontDimen.heightOf(b,
m)+fontTeX.fontDimen.depthOf(b,m))/2);a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,m)+"em";a.style.verticalAlign="middle";k=100/(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));a.height=100*Math.max(c,1);a.width=fontTeX.fontDimen.widthOf(b,m)/fontTeX.fontDimen.heightOf(b,m)*100*(fontTeX.fontDimen.heightOf(b,m)+fontTeX.fontDimen.depthOf(b,m));f=a.getContext("2d");f.textAlign="center";f.font=k+"px "+m;g.div.renderedHeight=Math.max(c/2+d,g.div.renderedHeight);g.div.renderedDepth=
Math.max(c/2-d,g.div.renderedDepth);f.fillText(b,a.width/2,33-fontTeX.fontDimen.depthOf(b,m)*k);d=f.getImageData(0,0,a.width,33);f.clearRect(0,0,a.width,a.height);f.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,m)*k);c=f.getImageData(0,0,a.width,33);f.clearRect(0,0,a.width,a.height);f.fillText(b,a.width/2,a.height/2+50-fontTeX.fontDimen.depthOf(b,m)*k);f.clearRect(0,0,a.width,Math.floor(a.height/2)-17);f.clearRect(0,Math.ceil(a.height/2)+17,a.width,a.height);f.putImageData(c,0,0);f.putImageData(d,
0,a.height-33);if(100<a.height){h=f.createImageData(a.width,Math.ceil(a.height/2)-50);b=c.data.slice(128*a.width,132*a.width);k=f.getImageData(0,Math.ceil(a.height/2)-16,a.width,1).data;c=0;for(v=h.height/2;c<v;c++)for(l=0,p=a.width;l<p;l++)h.data[c*a.width*4+4*l]=b[4*l],h.data[c*a.width*4+4*l+1]=b[4*l+1],h.data[c*a.width*4+4*l+2]=b[4*l+2],h.data[c*a.width*4+4*l+3]=b[4*l+3],h.data[~~(c+h.height/2)*a.width*4+4*l]=k[4*l],h.data[~~(c+h.height/2)*a.width*4+4*l+1]=k[4*l+1],h.data[~~(c+h.height/2)*a.width*
4+4*l+2]=k[4*l+2],h.data[~~(c+h.height/2)*a.width*4+4*l+3]=k[4*l+3];var q=f.createImageData(a.width,Math.ceil(a.height/2)-50);b=f.getImageData(0,Math.floor(a.height/2)+16,a.width,1).data;k=d.data.slice(0,4*a.width);c=0;for(v=h.height/2;c<v;c++)for(l=0,p=a.width;l<p;l++)q.data[c*a.width*4+4*l]=b[4*l],q.data[c*a.width*4+4*l+1]=b[4*l+1],q.data[c*a.width*4+4*l+2]=b[4*l+2],q.data[c*a.width*4+4*l+3]=b[4*l+3],q.data[~~(c+h.height/2)*a.width*4+4*l]=k[4*l],q.data[~~(c+h.height/2)*a.width*4+4*l+1]=k[4*l+1],
q.data[~~(c+h.height/2)*a.width*4+4*l+2]=k[4*l+2],q.data[~~(c+h.height/2)*a.width*4+4*l+3]=k[4*l+3];f.putImageData(h,0,33);f.putImageData(q,0,a.height/2+17)}g.div.insertBefore(a,e?g.div.firstElementChild:null)}};eb=document.createElement("canvas");fb=document.createElement("canvas");eb.style.display=fb.style.display="inline-block";">"==g.delims[0]&&(g.delims[0]="\u27e9");">"==g.delims[1]&&(g.delims[1]="\u27e9");"<"==g.delims[0]&&(g.delims[0]="\u27e8");"<"==g.delims[1]&&(g.delims[1]="\u27e8");sb(eb,
g.delims[0],!0);sb(fb,g.delims[1],!1)}if((g.superscript||g.subscript)&&(1!=g.atomType||!g.limits))if(g.subscript&&!g.superscript){var y=document.createElement("div"),Q=document.createElement("div");y.style.display="inline-block";y.style.verticalAlign="text-bottom";y.style.position="relative";Q.style.verticalAlign="text-top";Q.innerText="\u00a0";Q.style.display="inline-block";Q.style.width=0;v(g.subscript,"display"==h||"text"==h?"script":"scriptscript",!0,n,y);y.style.fontSize="50px";a.appendChild(y);
var U=y.offsetHeight/50;a.removeChild(y);"scriptscript"==h?(y.style.fontSize="",y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)+Math.max(Math.max(g.div.renderedDepth,0)/N+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",m))-U+"em",Q.style.paddingBottom=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)+Math.max(Math.max(g.div.renderedDepth,0)/N+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",m))-U+"em",g.div.renderedDepth=Math.max(g.div.renderedDepth,
(y.renderedDepth+Math.max(Math.max(g.div.renderedDepth,0)/N+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",m)))*N)):(y.style.fontSize=".707106781em",y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)/.707106781+Math.max(Math.max(g.div.renderedDepth,0)/N/.707106781+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",m))-U+"em",Q.style.paddingBottom=.707106781*Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)+.707106781*Math.max(Math.max(g.div.renderedDepth,
0)/N/.707106781+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",m))+"em",g.div.renderedDepth=Math.max(g.div.renderedDepth,(.707106781*y.renderedDepth+.707106781*Math.max(Math.max(g.div.renderedDepth,0)/N/.707106781+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",m)))*N));y.style.height=0;g.div.appendChild(y);g.div.insertBefore(Q,y)}else if(g.superscript&&!g.subscript){var x=document.createElement("div");v(g.superscript,"display"==h||"text"==h?"script":"scriptscript",l,n,x);x.style.display="inline-block";
x.style.verticalAlign="text-bottom";x.style.position="relative";"scriptscript"==h?(x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)-Math.max(g.div.renderedHeight/N+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+"em",x.style.paddingTop=-Math.max(x.baseline,x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(m)+Math.max(g.div.renderedHeight/N+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",
m))+"em",g.div.renderedHeight=Math.max(g.div.renderedHeight,(x.renderedHeight+Math.max(g.div.renderedHeight/N+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m)))*N)):(x.style.fontSize=".707106781em",x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)/.707106781-Math.max(g.div.renderedHeight/N/.707106781+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+"em",x.style.paddingTop=-Math.max(x.baseline,
x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(m)/.707106781+Math.max(g.div.renderedHeight/N/.707106781+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+"em",g.div.renderedHeight=Math.max(g.div.renderedHeight,.707106781*(x.renderedHeight+Math.max(g.div.renderedHeight/N/.707106781+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m)))*N));g.div.appendChild(x)}else{if(g.subscript&&g.superscript){y=document.createElement("div");
Q=document.createElement("div");y.style.display="inline-block";Q.style.verticalAlign="text-top";Q.innerText="\u00a0";Q.style.display="inline-block";Q.style.width=0;v(g.subscript,"display"==h||"text"==h?"script":"scriptscript",!0,n,y);y.style.fontSize="50px";a.appendChild(y);var yb=y.offsetHeight,tb=y.offsetWidth;a.removeChild(y);x=document.createElement("div");x.style.display="inline-block";v(g.superscript,"display"==h||"text"==h?"script":"scriptscript",l,n,x);x.style.fontSize="50px";a.appendChild(x);
var zb=x.offsetHeight,ub=x.offsetWidth;a.removeChild(x);x.style.marginLeft=gb+"em";wa=ub+gb>tb?y:x;Qa=ub+gb>tb?x:y;U=zb/50;var sa=yb/50;y.style.verticalAlign=x.style.verticalAlign="text-bottom";x.style.position=y.style.position="relative";"scriptscript"==h?(y.style.fontSize=x.style.fontSize="",x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)-Math.max(g.div.renderedHeight/N+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+
"em",x.style.paddingTop=-Math.max(x.baseline,x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(m)+Math.max(g.div.renderedHeight/N+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+"em",g.div.renderedHeight=Math.max(g.div.renderedHeight,(x.renderedHeight+Math.max(g.div.renderedHeight/N+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m)))*N),y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)+
Math.max(Math.max(g.div.renderedDepth,0)/N+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",m))-sa+"em",Q.style.paddingBottom=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)+Math.max(Math.max(g.div.renderedDepth,0)/N+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",m))-U+"em",g.div.renderedDepth=Math.max(g.div.renderedDepth,(y.renderedDepth+Math.max(Math.max(g.div.renderedDepth,0)/N+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",m)))*N)):(y.style.fontSize=
x.style.fontSize=".707106781em",x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)/.707106781-Math.max(g.div.renderedHeight/N/.707106781+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+"em",x.style.paddingTop=-Math.max(x.baseline,x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(m)/.707106781+Math.max(g.div.renderedHeight/N/.707106781+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m))+
"em",g.div.renderedHeight=Math.max(g.div.renderedHeight,.707106781*(x.renderedHeight+Math.max(g.div.renderedHeight/N/.707106781+(l?.1:.2)-x.renderedHeight,x.renderedDepth+(l?.9:1)*fontTeX.fontDimen.heightOf("x",m)))*N),y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(m)/.707106781+Math.max(Math.max(g.div.renderedDepth,0)/N/.707106781+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",m))-sa+"em",Q.style.paddingBottom=.707106781*Math.max(y.baseline,y.renderedDepth)-
fontTeX.fontDimen.baselineHeightOf(m)+.707106781*Math.max(Math.max(g.div.renderedDepth,0)/N/.707106781+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",m))+"em",g.div.renderedDepth=Math.max(g.div.renderedDepth,(.707106781*y.renderedDepth+.707106781*Math.max(Math.max(g.div.renderedDepth,0)/N/.707106781+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",m)))*N));y.style.height=0;wa.style.width=0;g.div.appendChild(Q);g.div.appendChild(wa);g.div.appendChild(Qa)}}else if((g.superscript||g.subscript)&&
1==g.atomType&&g.limits){var ta=g.div.firstElementChild;a.appendChild(g.div);var La=g.div.offsetWidth;a.removeChild(g.div);if(g.subscript&&!g.superscript){g.div.renderedDepth=Math.max(g.div.renderedDepth,0);y=document.createElement("div");Q=document.createElement("div");y.style.display="inline-block";y.style.verticalAlign="text-bottom";y.style.position="relative";Q.innerText="\u00a0";Q.style.verticalAlign="text-top";Q.style.display="inline-block";Q.style.width=0;v(g.subscript,"display"==h||"text"==
h?"script":"scriptscript",!0,n,y);y.style.fontSize="scriptscript"==h?g.div.style.fontSize:"calc("+g.div.style.fontSize+" * .707106781)";a.appendChild(y);var W=y.offsetWidth+1;y.style.fontSize="50px";U=y.offsetHeight/50;a.removeChild(y);"scriptscript"==h?(y.style.fontSize="",y.style.top=-y.baseline-y.baselineOffset-g.div.renderedDepth+"em",Q.style.paddingBottom=U-g.div.baseline+g.div.baselineOffset+g.div.renderedDepth+"em"):(y.style.fontSize=".707106781em",y.style.top=(-g.div.baseline-g.div.baselineOffset+
g.div.renderedDepth)/.707106781+"em",Q.style.paddingBottom=.707106781*U-g.div.baseline-g.div.baselineOffset+g.div.renderedDepth+"em");y.style.height=0;W<La?(wa=y.firstElementChild,Qa=ta,g.div.insertBefore(y,ta),y.style.width=0):(wa=ta,Qa=y.firstElementChild,g.div.appendChild(y));ea=document.createElement("div");ea.style.display="inline-block";ea.style.position="relative";var ja=document.createElement("div");ja.style.display="inline-block";ja.style.width=0;ja.style.visibility="hidden";ja.style.webkitUserSelect=
ja.style.mozUserSelect=ja.style.msUserSelect=ja.style.userSelect="none";ja.appendChild(f(wa.cloneNode(!0)));ea.appendChild(ja);ha=document.createElement("div");ha.style.position="absolute";ha.style.left=ha.style.right=0;ha.style.textAlign="center";ha.style.display="inline-block";ha.appendChild(wa);ea.appendChild(ha);ea.style.width=Math.max(W,La)/k/("scriptscript"!=h&&Qa==ta?.707106781:1)+"em";if(W<La)y.appendChild(ea);else{var ka=document.createElement("div");ka.style.display="inline-block";ka.style.width=
0;ka.appendChild(ea);g.div.insertBefore(ka,y)}g.div.insertBefore(Q,g.div.firstElementChild);g.div.renderedDepth+=(U*("scriptscript"==h?1:.707106781)-y.baseline-y.baselineOffset+y.renderedDepth)*N}else if(g.superscript&&!g.subscript)x=document.createElement("div"),x.style.display="inline-block",x.style.verticalAlign="text-bottom",v(g.superscript,"display"==h||"text"==h?"script":"scriptscript",l,n,x),x.style.fontSize="scriptscript"==h?g.div.style.fontSize:"calc("+g.div.style.fontSize+" * .707106781)",
a.appendChild(x),W=x.offsetWidth+1,x.style.fontSize="50px",U=x.offsetHeight/50,a.removeChild(x),"scriptscript"==h?(x.style.fontSize="",x.style.marginBottom=g.div.baseline+g.div.baselineOffset+g.div.renderedHeight+"em"):(x.style.fontSize=".707106781em",x.style.marginBottom=(g.div.baseline+g.div.baselineOffset+g.div.renderedHeight)/.707106781+"em"),W<La?(wa=x.firstElementChild,Qa=ta,g.div.insertBefore(x,ta),x.style.width=0):(wa=ta,Qa=x.firstElementChild,g.div.appendChild(x)),ea=document.createElement("div"),
ea.style.display="inline-block",ea.style.position="relative",ja=document.createElement("div"),ja.style.display="inline-block",ja.style.width=0,ja.style.visibility="hidden",ja.style.webkitUserSelect=ja.style.mozUserSelect=ja.style.msUserSelect=ja.style.userSelect="none",ja.appendChild(f(wa.cloneNode(!0))),ea.appendChild(ja),ha=document.createElement("div"),ha.style.position="absolute",ha.style.left=ha.style.right=0,ha.style.textAlign="center",ha.style.display="inline-block",ha.appendChild(wa),ea.appendChild(ha),
ea.style.width=Math.max(W,La)/k/("scriptscript"!=h&&Qa==ta?.707106781:1)+"em",W<La?x.appendChild(ea):(ka=document.createElement("div"),ka.style.display="inline-block",ka.style.width=0,ka.appendChild(ea),g.div.insertBefore(ka,x)),g.div.renderedHeight+=(x.baseline+x.baselineOffset+x.renderedHeight)*("scriptscript"==h?1:.707106781)*N;else if(g.superscript&&g.subscript){g.div.renderedDepth=Math.max(g.div.renderedDepth,0);y=document.createElement("div");y.style.display="inline-block";y.style.verticalAlign=
"text-bottom";y.style.position="relative";v(g.subscript,"display"==h||"text"==h?"script":"scriptscript",!0,n,y);y.style.fontSize="scriptscript"==h?g.div.style.fontSize:"calc("+g.div.style.fontSize+" * .707106781)";a.appendChild(y);var bb=y.offsetWidth+1;y.style.fontSize="50px";var vb=y.offsetHeight/50;a.removeChild(y);x=document.createElement("div");x.style.display="inline-block";x.style.verticalAlign="text-bottom";x.style.position="relative";v(g.superscript,"display"==h||"text"==h?"script":"scriptscript",
l,n,x);x.style.fontSize="scriptscript"==h?g.div.style.fontSize:"calc("+g.div.style.fontSize+" * .707106781)";a.appendChild(x);var cb=x.offsetWidth+1;x.style.fontSize="50px";a.removeChild(x);Q=document.createElement("div");Q.innerText="\u00a0";Q.style.verticalAlign="text-top";Q.style.display="inline-block";Q.style.width=0;"scriptscript"==h?(y.style.fontSize=x.style.fontSize="",y.style.top=-y.baseline-y.baselineOffset-g.div.renderedDepth+"em",Q.style.paddingBottom=U-g.div.baseline+g.div.baselineOffset+
g.div.renderedDepth+"em",x.style.marginBottom=g.div.baseline+g.div.baselineOffset+g.div.renderedHeight+"em"):(y.style.fontSize=x.style.fontSize=".707106781em",y.style.top=(-g.div.baseline-g.div.baselineOffset+g.div.renderedDepth)/.707106781+"em",Q.style.paddingBottom=.707106781*vb-g.div.baseline+g.div.baselineOffset+g.div.renderedDepth+"em",x.style.marginBottom=(g.div.baseline+g.div.baselineOffset+g.div.renderedHeight)/.707106781+"em");y.style.height=0;if(bb<=cb&&La<=cb){g.div.insertBefore(y,ta);
g.div.appendChild(x);y.style.width=0;var Fa=document.createElement("div"),Ga=document.createElement("div");Fa.style.display=Ga.style.display="inline-block";Fa.style.position=Ga.style.position="relative";var la=document.createElement("div"),ma=document.createElement("div");la.style.display=ma.style.display="inline-block";la.style.width=ma.style.width=0;la.style.visibility=ma.style.visibility="hidden";la.style.webkitUserSelect=la.style.mozUserSelect=la.style.msUserSelect=la.style.userSelect=ma.style.webkitUserSelect=
ma.style.mozUserSelect=ma.style.msUserSelect=ma.style.userSelect="none";la.appendChild(f(y.firstElementChild.cloneNode(!0)));ma.appendChild(f(ta.cloneNode(!0)));Fa.appendChild(la);Ga.appendChild(ma);var xa=document.createElement("div"),ya=document.createElement("div");xa.style.position=ya.style.position="absolute";xa.style.left=xa.style.right=0;ya.style.left=ya.style.right=0;xa.style.textAlign=ya.style.textAlign="center";xa.style.display=ya.style.display="inline-block";xa.appendChild(y.firstElementChild);
ya.appendChild(ta);Fa.appendChild(xa);Ga.appendChild(ya);Fa.style.width=cb/k/("scriptscript"!=h?.707106781:1)+"em";Ga.style.width=cb/k+"em";y.appendChild(Fa);ka=document.createElement("div");ka.style.display="inline-block";ka.style.width=0;ka.appendChild(Ga);g.div.insertBefore(ka,x)}else if(bb<=La&&cb<=La){g.div.insertBefore(y,ta);g.div.insertBefore(x,ta);y.style.width=x.style.width=0;Fa=document.createElement("div");var Ha=document.createElement("div");Fa.style.display=Ha.style.display="inline-block";
Fa.style.position=Ha.style.position="relative";la=document.createElement("div");var na=document.createElement("div");la.style.display=na.style.display="inline-block";la.style.width=na.style.width=0;la.style.visibility=na.style.visibility="hidden";la.style.webkitUserSelect=la.style.mozUserSelect=la.style.msUserSelect=la.style.userSelect=na.style.webkitUserSelect=na.style.mozUserSelect=na.style.msUserSelect=na.style.userSelect="none";la.appendChild(f(y.firstElementChild.cloneNode(!0)));na.appendChild(f(x.firstElementChild.cloneNode(!0)));
Fa.appendChild(la);Ha.appendChild(na);xa=document.createElement("div");var za=document.createElement("div");xa.style.position=za.style.position="absolute";xa.style.left=xa.style.right=0;za.style.left=za.style.right=0;xa.style.textAlign=za.style.textAlign="center";xa.style.display=za.style.display="inline-block";xa.appendChild(y.firstElementChild);za.appendChild(x.firstElementChild);Fa.appendChild(xa);Ha.appendChild(za);Fa.style.width=La/k/("scriptscript"!=h?.707106781:1)+"em";Ha.style.width=La/k/
("scriptscript"!=h?.707106781:1)+"em";y.appendChild(Fa);x.appendChild(Ha)}else La<=bb&&cb<=bb&&(g.div.insertBefore(x,ta),g.div.appendChild(y),x.style.width=0,Ha=document.createElement("div"),Ga=document.createElement("div"),Ha.style.display=Ga.style.display="inline-block",Ha.style.position=Ga.style.position="relative",na=document.createElement("div"),ma=document.createElement("div"),na.style.display=ma.style.display="inline-block",na.style.width=ma.style.width=0,na.style.visibility=ma.style.visibility=
"hidden",na.style.webkitUserSelect=na.style.mozUserSelect=na.style.msUserSelect=na.style.userSelect=ma.style.webkitUserSelect=ma.style.mozUserSelect=ma.style.msUserSelect=ma.style.userSelect="none",na.appendChild(f(x.firstElementChild.cloneNode(!0))),ma.appendChild(f(ta.cloneNode(!0))),Ha.appendChild(na),Ga.appendChild(ma),za=document.createElement("div"),ya=document.createElement("div"),za.style.position=ya.style.position="absolute",za.style.left=za.style.right=0,ya.style.left=ya.style.right=0,za.style.textAlign=
ya.style.textAlign="center",za.style.display=ya.style.display="inline-block",za.appendChild(x.firstElementChild),ya.appendChild(ta),Ha.appendChild(za),Ga.appendChild(ya),Ha.style.width=bb/k/("scriptscript"!=h?.707106781:1)+"em",Ga.style.width=bb/k+"em",x.appendChild(Ha),ka=document.createElement("div"),ka.style.display="inline-block",ka.style.width=0,ka.appendChild(Ga),g.div.insertBefore(ka,y));g.div.insertBefore(Q,g.div.firstElementChild);g.div.renderedDepth+=(vb*("scriptscript"==h?1:.707106781)-
y.baseline-y.baselineOffset+y.renderedDepth)*N;g.div.renderedHeight+=(x.baseline+x.baselineOffset+x.renderedHeight)*("scriptscript"==h?1:.707106781)*N}}if(Ba&&"horizontal"==Ba.boxType){if(Ba.to)W=new t(Ba.to),W.em.value+=W.sp.value/65536/6*8/k*65536,W.sp.value=0;else if(Ba.spread){W=new t(Ba.spread);W.em.value+=W.sp.value/65536/6*8/k*65536;W.sp.value=0;var hb=g.div.style.fontSize;g.div.style.fontSize="50px";a.appendChild(g.div);var Ab=g.div.offsetWidth/50;a.removeChild(g.div);g.div.style.fontSize=
hb;W.em.value+=65536*Ab}0>W.em.value?(u.splice(u.length-1,0,{type:"kern",dimen:W}),g.div.firstElementChild.style.width=0):g.div.firstElementChild.style.width=W.em.value/65536+"em";g.div.firstElementChild.style.flexWrap=""}else if(Ba&&"vertical"==Ba.boxType){if(Ba.to)U=new t(Ba.to),U.em.value+=U.sp.value/65536/6*8/k*65536,U.sp.value=0;else if(Ba.spread){U=new t(Ba.spread);U.em.value+=U.sp.value/65536/6*8/k*65536;U.sp.value=0;hb=g.div.style.fontSize;g.div.style.fontSize="50px";a.appendChild(g.div);
var Bb=g.div.offsetHeight/50;a.removeChild(g.div);g.div.style.fontSize=hb;U.em.value+=65536*Bb}0>U.em.value?(g.div.firstElementChild.style.height=0,g.div.firstElementChild.style.verticalAlign="text-bottom",g.div.firstElementChild.style.position="relative",g.div.firstElementChild.style.top=-U.em.value/65536+"em",g.div.renderedHeight=0,g.div.renderedDepth=0):(g.div.firstElementChild.style.height=U.em.value/65536+"em",g.div.firstElementChild.style.verticalAlign="text-bottom",g.div.renderedDepth=Math.min(fontTeX.fontDimen.baselineHeightOf(m),
U.em.value/65536),g.div.renderedHeight=Math.max(U.em.value/65536-fontTeX.fontDimen.baselineHeightOf(m),0));g.div.firstElementChild.style.flexWrap=""}Ba&&(g.div.firstElementChild.style.justifyContent="initial");switch(g.atomType){case "over":g.div.renderedHeight=Math.max(g.div.renderedHeight||0,fontTeX.fontDimen.heightOf("x",m)/2);var Oa=document.createElement("div"),Y=document.createElement("div"),oa=document.createElement("div");Q=document.createElement("div");var Sa=f(g.div.cloneNode(!0));Y.style.display=
"inline-block";Y.style.width=Y.style.height=0;Y.style.position="relative";Y.style.top=-fontTeX.fontDimen.baselineHeightOf(m)-g.div.renderedHeight/N-fontTeX.fontDimen.visibleWidthOf("|",m)-.12+"em";Y.style.verticalAlign="text-bottom";Y.style.pointerEvents="none";oa.style.display="inline-block";oa.style.webkitUserSelect=oa.style.mozUserSelect=oa.style.msUserSelect=oa.style.userSelect="none";oa.style.position="relative";Oa.style.position="absolute";Oa.style.left=Oa.style.right=0;Oa.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",
m)+"em solid currentColor";oa.appendChild(Oa);Sa.style.visibility="hidden";Sa.style.fontSize="";oa.appendChild(Sa);Y.appendChild(oa);g.div.insertBefore(Y,g.div.firstElementChild);Q.style.height=g.div.renderedHeight/N+fontTeX.fontDimen.visibleWidthOf("|",m)+.16+"em";Q.style.display="inline-block";Q.style.width=0;g.div.insertBefore(Q,Y);g.div.renderedHeight+=fontTeX.fontDimen.visibleWidthOf("|",m)+.16;break;case "under":g.div.renderedDepth=Math.max(g.div.renderedDepth||0,0);var ib=document.createElement("div");
Y=document.createElement("div");oa=document.createElement("div");Q=document.createElement("div");Sa=f(g.div.cloneNode(!0));Y.style.display="inline-block";Y.style.width=Y.style.height=0;Y.style.position="relative";Y.style.top=-fontTeX.fontDimen.baselineHeightOf(m)+g.div.renderedDepth/N+.12+"em";Y.style.verticalAlign="text-bottom";Y.style.pointerEvents="none";oa.style.display="inline-block";oa.style.webkitUserSelect=oa.style.mozUserSelect=oa.style.msUserSelect=oa.style.userSelect="none";oa.style.position=
"relative";ib.style.position="absolute";ib.style.left=ib.style.right=0;ib.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",m)+"em solid currentColor";oa.appendChild(ib);Sa.style.visibility="hidden";Sa.style.fontSize="";Sa.style.height=0;oa.appendChild(Sa);Y.appendChild(oa);g.div.insertBefore(Y,g.div.firstElementChild);Q.style.verticalAlign="text-top";Q.innerText="\u00a0";Q.style.paddingBottom=fontTeX.fontDimen.visibleWidthOf("|",m)+.16-fontTeX.fontDimen.baselineHeightOf(m)+g.div.renderedDepth/
N+"em";Q.style.display="inline-block";Q.style.width=0;g.div.insertBefore(Q,Y);g.div.renderedDepth+=fontTeX.fontDimen.visibleWidthOf("|",m)+.16;break;case "acc":var Da=document.createElement("div"),lb=document.createElement("div");Da.style.display="inline-block";Da.style.position="relative";"it"==n?Da.style.fontStyle="italic":"sl"==n?Da.style.fontStyle="oblique":"bf"==n&&(Da.style.fontWeight="bold");Da.style.top=Math.min(fontTeX.fontDimen.heightOf("x",m),g.div.renderedHeight)-g.div.renderedHeight+
"em";Da.style.width=0;Da.style.lineHeight=1.1;Da.style.height="1.1em";Da.style.verticalAlign="text-bottom";Da.innerText=g.accChar;Ca=(Ca=!g.nucleus||"symbol"!=g.nucleus.type||"it"!=n&&"sl"!=n?0:fontTeX.fontDimen.italCorrOf(g.accChar,m))||(g.nucleus&&1==g.nucleus.length&&g.nucleus[0].nucleus&&"symbol"==g.nucleus[0].nucleus.type&&7==g.nucleus[0].atomType&&"nm"==n?fontTeX.fontDimen.italCorrOf(g.accChar,m):0);hb=g.div.style.fontSize;g.div.style.fontSize="50px";a.appendChild(g.div);Da.style.left=(g.div.offsetWidth/
50-fontTeX.fontDimen.widthOf(g.accChar,m,n))/2+Ca+"em";a.removeChild(g.div);g.div.style.fontSize=hb;g.div.insertBefore(Da,g.div.firstElementChild);lb.style.display="inline-block";lb.style.width=0;lb.style.height=g.div.renderedHeight-Math.min(fontTeX.fontDimen.heightOf("x",m),g.div.renderedHeight)+fontTeX.fontDimen.heightOf(g.accChar,m,n)+"em";g.div.insertBefore(lb,Da);g.div.renderedHeight=g.div.renderedHeight-Math.min(fontTeX.fontDimen.heightOf("x",m),g.div.renderedHeight)+fontTeX.fontDimen.heightOf(g.accChar,
m,n);break;case "vcenter":G=fontTeX.fontDimen.heightOf("x",m)/2;Ca=g.div.renderedHeight-G-(g.div.renderedDepth+G);g.div.style.position="relative";g.div.style.top=Ca/2+"em";g.div.style.marginTop=-Ca/2+"em";g.div.style.marginBottom=Ca/2+"em";g.div.renderedHeight-=Ca/2;g.div.renderedDepth+=Ca/2;break;case "rad":g.div.renderedHeight=Math.max(g.div.renderedHeight||0,fontTeX.fontDimen.heightOf("x",m)/2);g.div.renderedDepth=Math.max(g.div.renderedDepth||0,0);a.appendChild(g.div);W=g.div.offsetWidth/k;a.removeChild(g.div);
Oa=document.createElement("div");Y=document.createElement("div");Aa=document.createElement("div");Q=document.createElement("div");Sa=f(g.div.cloneNode(!0));Y.style.display="inline-block";Y.style.width=Y.style.height=0;Y.style.position="relative";Y.style.top=-fontTeX.fontDimen.baselineHeightOf(m)-g.div.renderedHeight/N-fontTeX.fontDimen.visibleWidthOf("|",m)-.12+"em";Y.style.verticalAlign="text-bottom";Y.style.pointerEvents="none";Aa.style.display="inline-block";Aa.style.webkitUserSelect=Aa.style.mozUserSelect=
Aa.style.msUserSelect=Aa.style.userSelect="none";Aa.style.position="relative";Oa.style.position="absolute";Aa.style.width=W+"em";Oa.style.left=Oa.style.right=0;Oa.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",m)+"em solid currentColor";Aa.appendChild(Oa);Aa.appendChild(document.createTextNode("\u00a0"));Y.appendChild(Aa);g.div.insertBefore(Y,g.div.firstElementChild);Q.style.height=g.div.renderedHeight/N+fontTeX.fontDimen.visibleWidthOf("|",m)+.16+"em";Q.style.display="inline-block";Q.style.width=
0;g.div.insertBefore(Q,Y);g.div.renderedHeight+=(fontTeX.fontDimen.visibleWidthOf("|",m)+.16)*N;var S=document.createElement("canvas"),mb=0,nb=0;if(V["radical.build"][0]){ra=fontTeX.fontDimen.visibleWidthOf("|",m);S.height=(g.div.renderedDepth+g.div.renderedHeight)*k;S.style.height=g.div.renderedDepth+g.div.renderedHeight+"em";S.style.position="relative";S.style.top=g.div.renderedDepth+"em";S.style.marginLeft=".1em";S.style.marginTop=-g.div.renderedDepth+"em";var K=ra,R=g.div.renderedHeight+g.div.renderedDepth-
.04-K/2,M=Math.max(V["radical.w"][0]),T=Math.max(0,Math.min(M,V["radical.t"][0])),L=Math.max(0,V["radical.h"][0]),A=R/Math.max(0,V["radical.verticalthreshold"][0]),Ia=Math.sqrt(A),I=Math.sqrt(3);if(g.div.renderedHeight+g.div.renderedDepth<Math.max(0,V["radical.verticalthreshold"][0])){L=Math.min(g.div.renderedHeight+g.div.renderedDepth,L/Math.max(V["radical.verticalthreshold"][0],0));var aa=K*A*I/(6*A*A+2);S.width=(-K*(T*(A-1)-A*M-R*Ia+M)/(2*R)+aa+M)*k;S.style.width=(-K*T*(A-1)+K*A*M-M*(K-2*R)+R*
(K+2*aa))/(2*R)+"em";var Z=S.getContext("2d");Z.fillStyle=c.color;var jb=[Math.max(-K*(T*(A-1)-A*M-R*Ia+M)/(2*R),0)+aa+M,R-K/2],Pa=[Math.min(-K*(-T*(A-1)+A*M+R*Ia-M)/(2*R)+aa+M,jb[0]),R+K/2],ua=[-(4*T*T*A*I*(A-1)*(A-1)-T*(A-1)*(4*A*A*M*I+3*K*I*Math.pow(A,1.5)-4*A*(R*(L-1)-aa*I)+4*R*L)-R*(4*A*A*M*(L-1)+K*Math.pow(A,1.5)*(3*L+2)-4*A*(L*M-aa*(L-1))-3*K*L*Ia-4*L*aa))/(4*(I*T*A*(A-1)+R*(A*(L-1)-L))),-(L*R+A*T*I)/(A*(M-T))*(-(4*T*T*A*I*(A-1)*(A-1)-T*(A-1)*(4*A*A*M*I+3*K*I*Math.pow(A,1.5)-4*A*(R*(L-1)-aa*
I)+4*R*L)-R*(4*A*A*M*(L-1)+K*Math.pow(A,1.5)*(3*L+2)-4*A*(L*M-aa*(L-1))-3*K*L*Ia-4*L*aa))/(4*(I*T*A*(A-1)+R*(A*(L-1)-L)))-A*(M-T)-T-3*K*Ia/4-aa)],Cb=[Math.max(-T*(A-1)+A*M+K/2*Ia+aa,-ua[1]*(Pa[0]-ua[0])/(Pa[1]-ua[1])+ua[0]+jb[0]-(Pa[0]-ua[0])/(Pa[1]-ua[1])*(jb[1]-ua[1]+(Pa[1]-ua[1])/(Pa[0]-ua[0])*ua[0])),0];Z.beginPath();Z.moveTo(jb[0]*k,S.height-jb[1]*k);Z.lineTo((-K*(T*(A-1)-A*M-R*Ia+M)/(2*R)+aa+M)*k,S.height-(R+K/2)*k);Z.lineTo(Pa[0]*k,S.height-Pa[1]*k);Z.lineTo(ua[0]*k,S.height-ua[1]*k);Z.lineTo((8*
T*T*A*I*(A-1)-T*(8*A*A*M*I+6*K*Math.pow(A,1.5)*I+A*(K+8*aa*I)+8*R*L)+K*A*M-6*K*R*L*Ia-8*R*L*aa)/(8*(T*A*I*(A-1)-A*A*M*I-R*L))*k,S.height-(nb=A*I*(8*T*T*A*I*(A-1)-T*(8*A*A*M*I+6*K*Math.pow(A,1.5)*I+A*(K+8*aa*I)+8*R*L)+K*A*M-6*K*R*L*Ia-8*R*L*aa)/(8*(T*A*I*(A-1)-A*A*M*I-R*L))+L*R+K/8)*k);Z.lineTo(0,S.height-(L*R+K/8)*k);Z.lineTo(2*aa*k,S.height-(L*R-K/8)*k);Z.lineTo((8*T*T*A*I*(A-1)-T*(8*A*A*I*(M-2*aa)-6*K*Math.pow(A,1.5)*I-A*(K-8*aa*I)+8*R*L)-16*aa*A*A*M*I-K*A*M+6*K*R*L*Ia-8*R*L*aa)/(8*(T*A*I*(A-1)-
A*A*M*I-R*L))*k,S.height-(A*I*((8*T*T*A*I*(A-1)-T*(8*A*A*I*(M-2*aa)-6*K*Math.pow(A,1.5)*I-A*(K-8*aa*I)+8*R*L)-16*aa*A*A*M*I-K*A*M+6*K*R*L*Ia-8*R*L*aa)/(8*(T*A*I*(A-1)-A*A*M*I-R*L))-2*aa)+L*R-K/8)*k);Z.lineTo((-T*(A-1)+A*M-.75*K*Ia+aa)*k,S.height);Z.lineTo(Cb[0]*k,S.height);Z.closePath();Z.fill();mb=(Pa[0]-ua[0])/(Pa[1]-ua[1])*(nb-ua[1])+ua[0]}else L=Math.max(0,Math.min(R,V["radical.h"][0])),S.width=(8*M+K*(4+I))/8*k,S.style.width=(8*M+K*(4+I))/8+"em",Z=S.getContext("2d"),Z.fillStyle=c.color,Z.beginPath(),
Z.moveTo((M+K*(I+4)/8)*k,.04*k),Z.lineTo((M+K*(I-4)/8)*k,.04*k),Z.lineTo((M+K*(I-4)/8)*k,S.height-5*K*(L+T*I)/(4*(M-T))*k),Z.lineTo((T*(4*M*I+K*(3*I+2)+4*L)-K*(2*M-3*L-1.5*M-L/2*I))/(4*(M*I+L))*k,S.height-(nb=(T*(4*M*I+K*(3*I+2)+4*L)-K*(2*M-3*L))/(4*(M*I+L))*I+L+K/2)*k),Z.lineTo(0,S.height-(K/8+L)*k),Z.lineTo(K*I/4*k,S.height-(-K/8+L)*k),Z.lineTo((T*(4*M*I-K*(3*I+2)+4*L)+K*(2*M-3*L+1.5*M+L/2*I))/(4*(M*I+L))*k,S.height-((T*(4*M*I-K*(3*I+2)+4*L)+K*(2*M-3*L))/(4*(M*I+L))*I+L-K/2)*k),Z.lineTo((M-K*(6-
I)/8)*k,S.height),Z.lineTo((M+K*(I+4)/8)*k,S.height),Z.closePath(),Z.fill(),mb=M+K*(I-4)/8}else S.height=(fontTeX.fontDimen.heightOf("\u221a",m)+fontTeX.fontDimen.depthOf("\u221a",m))*k,S.width=fontTeX.fontDimen.widthOf("\u221a",m)*k,Z=S.getContext("2d"),S.style.height=g.div.renderedHeight+g.div.renderedDepth+"em",S.style.width=fontTeX.fontDimen.widthOf("\u221a",m)+"em",S.style.position="relative",S.style.top=g.div.renderedDepth+"em",S.style.marginTop=-g.div.renderedDepth+"em",Z.textAlign="center",
Z.font=k+"px "+m,Z.fillText("\u221a",S.width/2,S.height*(1-fontTeX.fontDimen.depthOf("\u221a",m)));g.div.insertBefore(S,Q);if(g.index.length){var Ja=document.createElement("div");Ja.style.display="inline-block";Ja.style.position="relative";v(g.index,"scriptscript",!1,n,Ja);Ja.style.fontSize="50px";a.appendChild(Ja);Ja.style.marginLeft=Math.max(-Ja.offsetWidth/50,-(mb+.05)/("script"==h?.707106781:"scriptscript"==h?1:.5))+"em";a.removeChild(Ja);Ja.style.fontSize=("script"==h?.707106781:"scriptscript"==
h?1:.5)+"em";Ja.style.top=-Math.max(nb-g.div.renderedDepth,fontTeX.fontDimen.heightOf("x",m)/2)/("script"==h?.707106781:"scriptscript"==h?1:.5)-Ja.renderedDepth-.1+"em";Ja.style.left=(.05+mb)/("script"==h?.707106781:"scriptscript"==h?1:.5)+"em";g.div.insertBefore(Ja,S)}}}else return q(11,r,B);break;case 11:if("rule"==g.type){var pa=document.createElement("div");U=W="100%";sa="";pa.style.background="currentColor";g.height&&(U=new t(g.height),U.em.value+=U.sp.value/65536/6*8/k*65536,U=U.em.value/65536);
g.depth&&(sa=new t(g.depth),sa.em.value+=sa.sp.value/65536/6*8/k*65536,sa=sa.em.value/65536);g.width&&(W=new t(g.width),W.em.value+=W.sp.value/65536/6*8/k*65536,W=W.em.value/65536);"v"==g.ruleType?("100%"==U?(pa.style.alignSelf="stretch",pa.renderedDepth=pa.renderedHeight=0):(pa.style.height=Math.max(U+sa,0)+"em",pa.style.marginBottom=pa.style.top=sa+"em",pa.style.marginTop=-sa+"em",pa.style.position="relative",pa.renderedHeight=Math.max(U,0),pa.renderedDepth=Math.max(sa,0)),0>W?u.push({type:"kern",
dimen:new t(0,65536*W)}):pa.style.width=W+"em"):"h"==g.ruleType&&(pa.style.width="100%"==W?"100%":W+"em",pa.style.height=Math.max(U+sa,0)+"em",pa.style.marginBottom=pa.style.top=sa+"em",pa.style.marginTop=-sa+"em",pa.style.position="relative",u.push({type:"atom",atomType:0,nucleus:{},superscript:null,subscript:null,style:h,isLineBreak:!0,div:document.createElement("div")}),u[u.length-1].div.style.width="100%",p.push(u[u.length-1]));C={type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null,
style:h,div:pa,isLineBreak:"h"==g.ruleType,growHeight:"v"==g.ruleType};u.push(C);p.push(C);"h"==g.ruleType&&(u.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null,isLineBreak:!0,div:document.createElement("div")}),u[u.length-1].div.style.width="100%",p.push(u[u.length-1]))}}}function H(a,b,d){var e=u[b],c=p.indexOf(e);switch(a){case 1:e.italicCorrection&&(e.dimen=new t(0,65536*fontTeX.fontDimen.italCorrOf(e.italicCorrection,m)));"glue"==e.type&&"dimension"==e.glue.stretch.type&&
0==e.glue.stretch.sp.value&&0==e.glue.stretch.em.value&&"dimension"==e.glue.shrink.type&&0==e.glue.shrink.sp.value&&0==e.glue.shrink.em.value&&(e.type="kern",e.dimen=e.glue.start);if("vkern"==e.type&&(e.dimen.sp.value||e.dimen.em.value))r+=e.dimen.em.value,r+=e.dimen.sp.value/65536/6*8/k*65536,w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+
"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r);else if("kern"==e.type&&(e.dimen.sp.value||e.dimen.em.value)){if(!w.last.lastElementChild||w.last.lastElementChild.style.marginRight)c=document.createElement("div"),c.style.display="inline-block",w.last.appendChild(c);w.last.lastElementChild.style.marginRight=e.dimen.sp.value?e.dimen.em.value?"calc("+e.dimen.sp.value/65536+"pt + "+e.dimen.em.value/65536+"em)":e.dimen.sp.value/65536+"pt":e.dimen.em.value/
65536+"em"}else if("glue"==e.type){c=document.createElement("div");c.style.width=e.glue.start.sp.value?e.glue.start.em.value?"calc("+e.glue.start.sp.value/65536+"pt + "+e.glue.start.em.value/65536+"em)":e.glue.start.sp.value/65536+"pt":e.glue.start.em.value/65536+"em";if("infinite dimension"==e.glue.stretch.type)c.style.flexGrow=Math.pow(1290,e.glue.stretch.magnitude.value);else if(e.glue.stretch.sp.value||e.glue.stretch.em.value)c.style.flexGrow=1,c.style.maxWidth="calc("+(e.glue.start.sp.value?
e.glue.start.em.value?"("+e.glue.start.sp.value/65536+"pt + "+e.glue.start.em.value/65536+"em)":e.glue.start.sp.value/65536+"pt":e.glue.start.em.value/65536+"em")+" + "+(e.glue.stretch.sp.value?e.glue.stretch.em.value?"("+e.glue.stretch.sp.value/65536+"pt + "+e.glue.stretch.em.value/65536+"em)":e.glue.stretch.sp.value/65536+"pt":e.glue.stretch.em.value/65536+"em")+")";if("infinite dimension"==e.glue.shrink.type)c.style.flexShrink=Math.pow(1290,e.glue.shrink.magnitude.value);else if(e.glue.shrink.sp.value||
e.glue.shrink.em.value)c.style.flexShrink=1,c.style.minWidth="calc("+(e.glue.start.sp.value?e.glue.start.em.value?"("+e.glue.start.sp.value/65536+"pt + "+e.glue.start.em.value/65536+"em)":e.glue.start.sp.value/65536+"pt":e.glue.start.em.value/65536+"em")+" - "+(e.glue.shrink.sp.value?e.glue.shrink.em.value?"("+e.glue.shrink.sp.value/65536+"pt + "+e.glue.shrink.em.value/65536+"em)":e.glue.shrink.sp.value/65536+"pt":e.glue.shrink.em.value/65536+"em")+")";w.push(c);w.push(document.createElement("div"));
w.last.style.display="inline-flex";w.last.style.flexWrap="nowrap";w.last.style.alignItems="baseline";r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r)}return H(2,b,d);case 2:if("atom"==e.type){if(0!=c&&2==e.atomType){if("display"==h||"text"==h)w.push(document.createElement("div")),w.last.style.flexShrink=1,w.last.style.flexGrow=1,w.last.style.maxWidth=".3333333em",w.last.style.width=
".2222222em";w.push(document.createElement("div"));w.last.style.display="inline-flex";w.last.style.flexWrap="nowrap";w.last.style.alignItems="baseline";r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r)}0!=c&&3==e.atomType&&("display"!=h&&"text"!=h||3==p[c-1].atomType||4==p[c-1].atomType||(w.push(document.createElement("div")),6==p[c-1].atomType?w.last.style.width=".1666667em":(w.last.style.flexGrow=
1,w.last.style.maxWidth=".5555555em",w.last.style.minWidth=".2777778em")),w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r));if(0!=c){b=p[c-1].atomType;d=e.atomType;b={0:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},1:{0:1,1:1,3:0,4:0,5:0,6:0,7:1,
inner:-1},2:{0:-2,1:-2,4:-2,7:-2,inner:-2},3:{0:-3,1:-3,3:0,4:-3,5:0,6:0,7:-3,inner:-3},4:{0:0,1:0,3:0,4:0,5:0,6:0,7:0,inner:0},5:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},6:{0:0,1:0,3:0,4:0,5:0,6:0,7:0,inner:0},7:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},inner:{0:-1,1:1,2:0,3:0,4:-1,5:0,6:-1,7:-1,inner:-1}}["string"==typeof b&&"inner"!=b?0:b]["string"==typeof d&&"inner"!=d?0:d];d=document.createElement("div");0>b&&(b="script"==e.style||"scriptscript"==e.style?0:-b);switch(b){case 1:d.style.minWidth=
".1666667em";d.style.maxWidth=".1666667em";break;case 2:d.style.width=".2222222em";d.style.maxWidth=".3333333em";d.style.flexGrow="1";d.style.flexShrink="1";break;case 3:d.style.minWidth=".2777778em",d.style.maxWidth=".5555555em",d.style.flexGrow="1"}b&&w.last.appendChild(d)}w.last.renderedHeight=Math.max(w.last.renderedHeight||0,e.div.renderedHeight);w.last.renderedDepth=Math.max(w.last.renderedDepth||0,e.div.renderedDepth);w.last.baseline+w.last.baselineOffset>e.div.baseline+e.div.baselineOffset?
(w.last.baseline=w.last.baseline||0,w.last.baselineOffset=w.last.baselineOffset||0):(w.last.baseline=e.div.baseline,w.last.baselineOffset=e.div.baselineOffset);e.isLineBreak?(w.push(e.div),w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r)):e.growHeight?
(w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",w.last.style.alignSelf="stretch",r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r),w.last.appendChild(e.div),w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems="baseline",
r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r)):w.last.appendChild(e.div);6==e.atomType&&("display"!=h&&"text"!=h||!p[c+1]||3==p[c+1].atomType||(w.push(document.createElement("div")),w.last.style.minWidth=".1666667em",w.last.style.maxWidth=".1666667em"),w.push(document.createElement("div")),w.last.style.display="inline-flex",w.last.style.flexWrap="nowrap",w.last.style.alignItems=
"baseline",r&&(w.last.style.position="relative",w.last.style.marginTop=r/65536+"em",w.last.style.marginBottom=-r/65536+"em",w.last.style.top=-r/65536+"em",w.last.verticalRaise=r))}else return H(3,b,d)}}if(e.length){var qa=null,D=document.createElement("div");D.style.display="inline-flex";D.style.flexWrap="wrap";D.style.alignItems="baseline";D.displayedStyle=h;D.crampedStyle=l;D.style.justifyContent="display"==d?"center":"initial";var w=[document.createElement("div")];Object.defineProperty(w,"last",
{get:function(){return this[this.length-1]}});w[0].style.display="inline-flex";w[0].style.flexWrap="nowrap";w[0].style.alignItems="baseline";for(var u=[],p=[],r=0,z=0,C=e.length;z<C;z++){var F=q(1,z,C);F&&(z=F[0],C=F[1])}p.length&&2==p[p.length-1].atomType&&(p[p.length-1].atomType=0);u.length||(D.empty=!0);z=0;for(C=u.length;z<C;z++)if(F=H(1,z,C))z=F[0],C=F[1];z=0;for(C=w.length;z<C;z++)D.appendChild(w[z]),D.renderedHeight=Math.max(D.renderedHeight||0,(w[z].renderedHeight||0)+(w[z].verticalRaise||
0)/65536),D.renderedDepth=Math.max(D.renderedDepth||0,(w[z].renderedDepth||0)-(w[z].verticalRaise||0)/65536),D.baselineOffset+D.baseline>w[z].baselineOffset+w[z].baseline?(D.baseline=D.baseline||0,D.baselineOffset=D.baselineOffset||0):(D.baseline=w[z].baseline,D.baselineOffset=w[z].baselineOffset);B.appendChild(D);B.renderedHeight=Math.max(B.renderedHeight||0,D.renderedHeight);B.renderedDepth=Math.max(B.renderedDepth||0,D.renderedDepth);B.baselineOffset+B.baseline>D.baselineOffset+D.baseline?(B.baseline=
B.baseline||0,B.baselineOffset=B.baselineOffset||0):(B.baseline=D.baseline,B.baselineOffset=D.baselineOffset);return qa}z=document.createElement("div");z.style.display="inline-flex";z.displayedStyle=h;z.crampedStyle=l;z.renderedDepth=0;z.renderedHeight=0;B.renderedHeight=B.renderedHeight||0;B.renderedDepth=B.renderedDepth||0;B.baseline=fontTeX.fontDimen.baselineHeightOf(m);B.baselineOffset=0;B.appendChild(z);z.empty=!0}var h=document.createElement("div");"display"==d?h.style.textAlign="center":h.style.display=
"inline-block";var k=parseFloat(c.fontSize),m=c.fontFamily;v(e,d,!1,"nm",h);h.firstElementChild.empty&&1==h.children.length&&(h=document.createTextNode(""));return h};var b={defs:{primitive:{"(":new n("(",function(a){this.invalid=!0;return[this]}),")":new n(")",function(a){if("inline"==a.style)return[{type:"character","char":"$",code:36,cat:b.cats.math}];this.invalid=!0;return[this]}),"/":new n("/",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,
[this];a.tokens.push({type:"kern",dimen:new t(0),italicCorrection:!0});return[]}),"[":new n("[",function(a){this.invalid=!0;return[this]}),"]":new n("]",function(a){if("display"==a.style)return[{type:"character","char":"$",code:36,cat:b.cats.math},{type:"character","char":"$",code:36,cat:b.cats.math}];this.invalid=!0;return[this]}),above:new n("above",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=
!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth=b;a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),abovewithdelims:new n("abovewithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat("dimension");if(!d)return this.invalid=
!0,[this];for(;;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==b.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&b.delims.includes(c.code)&&(c.cat==b.cats.all||c.cat==b.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=c["char"];break}else a.scopes.last.fracLeftDelim=c["char"];else return this.invalid=!0,a.mouth.loadState(e),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=
!0;a.scopes.last.barWidth=d;a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),accent:new n("accent",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var d=a.mouth.eat("integer");if(!d||0>d.value)return this.invalid=!0,a.mouth.loadState(b),[this];a.tokens.push({type:"accent modifier",
"char":String.fromCharCode(d.value),code:d.value,token:this});return[]}),advance:new n("advance",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&d.register){var c=a.mouth.eat();if(!c||"character"!=c.type||"b"!=
c["char"]&&"B"!=c["char"]||c.cat==b.cats.active)if(c)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(e),[this];else c=a.mouth.eat(),(!c||"character"!=c.type||"y"!=c["char"]&&"Y"!=c["char"]||c.cat==b.cats.active)&&a.mouth.revert(2);if("integer"==d.type)if(c=a.mouth.eat("integer")){d.value+=c.value;e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.value=e.value;a.toggles.global=!1}else return this.invalid=
!0,a.mouth.loadState(e),[this];else if("dimension"==d.type)if(c=a.mouth.eat("dimension")){d.sp.value+=c.sp.value;d.em.value+=c.em.value;e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.sp.value=e.sp.value,d.em.value=e.em.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("mu dimension"==d.type)if(c=a.mouth.eat("mu dimension")){d.mu.value+=c.mu.value;e=d;if(a.toggles.global&&
0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.mu.value=e.mu.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("glue"==d.type)if(c=a.mouth.eat("glue")){d.start.sp.value+=c.start.sp.value;d.start.em.value+=c.start.em.value;if("infinite dimension"==c.stretch.type)if("infinite dimension"==d.stretch.type&&d.stretch.magnitude.value==c.stretch.magnitude.value)d.stretch.value+=c.stretch.value;
else{if("infinite dimension"!=d.stretch.type||d.stretch.magnitude.value<c.stretch.magnitude.value)d.stretch=new z(c.stretch.number.value,c.stretch.magnitude.value)}else"infinite dimension"!=d.stretch.type&&(d.stretch.sp.value+=c.stretch.sp.value,d.stretch.em.value+=c.stretch.em.value);if("infinite dimension"==c.shrink.type)if("infinite dimension"==d.shrink.type&&d.shrink.magnitude.value==c.shrink.magnitude.value)d.shrink.value+=c.shrink.value;else{if("infinite dimension"!=d.shrink.type||d.shrink.magnitude.value<
c.shrink.magnitude.value)d.shrink=new z(c.shrink.number.value,c.shrink.magnitude.value)}else"infinite dimension"!=d.shrink.type&&(d.shrink.sp.value+=c.shrink.sp.value,d.shrink.em.value+=c.shrink.em.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.start.sp.value+=c.start.sp.value,d.start.em.value+=c.start.em.value,d.stretch="infinite dimension"==e.stretch.type?new z(e.stretch.number.value,
e.stretch.magnitude.value):new t(e.stretch.sp.value,e.stretch.em.value),d.shrink="infinite dimension"==e.shrink.type?new z(e.shrink.number.value,e.shrink.magnitude.value):new t(e.shrink.sp.value,e.shrink.em.value);a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("mu glue"==d.type)if(c=a.mouth.eat("mu glue")){d.start.mu.value+=c.start.mu.value;if("infinite dimension"==c.stretch.type)if("infinite dimension"==d.stretch.type&&d.stretch.magnitude.value==c.stretch.magnitude.value)d.stretch.value+=
c.stretch.value;else{if("infinite dimension"!=d.stretch.type||d.stretch.magnitude.value<c.stretch.magnitude.value)d.stretch=new z(c.stretch.number.value,c.stretch.magnitude.value)}else"infinite dimension"!=d.stretch.type&&(d.stretch.mu.value+=c.stretch.mu.value);if("infinite dimension"==c.shrink.type)if("infinite dimension"==d.shrink.type&&d.shrink.magnitude.value==c.shrink.magnitude.value)d.shrink.value+=c.shrink.value;else{if("infinite dimension"!=d.shrink.type||d.shrink.magnitude.value<c.shrink.magnitude.value)d.shrink=
new z(c.shrink.number.value,c.shrink.magnitude.value)}else"infinite dimension"!=d.shrink.type&&(d.shrink.mu.value+=c.shrink.mu.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.start.mu.value=e.start.mu.value,d.stretch="infinite dimension"==e.stretch.type?new z(e.stretch.number.value,e.stretch.magnitude.value):new F(e.stretch.mu.value),"infinite dimension"==e.shrink.type?d.shrink=new z(e.shrink.number.value,
e.shrink.magnitude.value):d.stretch=new F(e.shrink.mu.value);a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];break}else return this.invalid=!0,a.mouth.loadState(e),[this]}return[]}),atop:new n("atop",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracLeftDelim=a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth=new t(0);a.scopes.last.root&&(a.scopes.last.root.invalid=!0,
a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),atopwithdelims:new n("atopwithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&"character"==
d.type&&b.delims.includes(d.code)&&(d.cat==b.cats.all||d.cat==b.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=d["char"];break}else a.scopes.last.fracLeftDelim=d["char"];else return this.invalid=!0,a.mouth.loadState(e),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth=new t(0);a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),
begingroup:new n("begingroup",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);new a.Scope;a.scopes.last.semisimple=!0;a.openGroups.push(this);a.contexts.push("scope");this.ignore=!0;a.scopes.last.tokens.push(this);return[]}),bf:new n("bf",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"bf"});
return[]}),catcode:new n("catcode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var e=a.mouth.eat("integer");if(e){if(0>e.value)return a.mouth.revert(),this.invalid=!0,[this];if(!(e.value in b.cats)){b.cats[e.value]=new h(b.cats.all,0,15);for(var d=0,c=a.scopes.length;d<c;d++)a.scopes[d].cats[e.value]=new h((0==d?b:a.scopes[d-1]).cats[e.value])}return[a.scopes.last.cats[e.value]]}this.invalid=!0;return[this]}),"char":new n("char",function(a){var e=
a.mouth.eat("integer");if(!e||0>e.value)return this.invalid=!0,[this];a.mouth.queue.unshift({type:"character",cat:b.cats.all,"char":String.fromCharCode(e.value),code:e.value});return[]}),chardef:new n("chardef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(d&&"command"==d.type){if(d.name in b.defs.primitive||d.name in b.parameters)return this.invalid=!0,a.mouth.loadState(e),
[!0];var c=a.mouth.eat();c&&"character"==c.type&&"="==c["char"]&&c.cat==b.cats.all||c&&a.mouth.revert();c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(e),[!0];e=new ia([{type:"character",cat:b.cats.all,"char":String.fromCharCode(c.value),code:c.value}],[]);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){b.defs.macros[d.name]=e;delete b.registers.named[d.name];c=0;for(var f=a.scopes.length;c<
f;c++)a.scopes[c].defs.macros[d.name]=e,delete a.scopes[c].registers.named[d.name]}else a.scopes.last.defs.macros[d.name]=e,delete a.scopes.last.registers.named[d.name];a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(e),[!0]}),count:new n("count",function(a){var e=a.mouth.eat("integer");if(!e||0>e.value)return this.invalid=!0,[this];if(!b.registers.count[e.value]){b.registers.count[e.value]=new h(0);for(var d=0,c=a.scopes.length;d<c;d++)a.scopes[d].registers.count[e.value]=new h((d?
a.scopes[d-1]:b).registers.count[e.value])}return[a.scopes.last.registers.count[e.value]]}),countdef:new n("countdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if("command"==d.type){if(d.name in b.defs.primitive||d.name in b.parameters)return this.invalid=!0,a.mouth.loadState(e),[!0];var c=a.mouth.eat();c&&"character"==c.type&&"="==c["char"]&&c.cat==b.cats.all||
c&&a.mouth.revert();c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(e),[!0];d=d.name;c=c.value;if(!b.registers.count[c]){b.registers.count[c]=new h(0);e=0;for(var f=a.scopes.length;e<f;e++)a.scopes[e].registers.count[c]=new h((e?a.scopes[e-1]:b).registers.count[c])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(b.registers.named[d]=b.registers.count[c],delete b.defs.macros[d],e=0,f=a.scopes.length;e<
f;e++)a.scopes[e].registers.named[d]=a.scopes[e].registers.count[c],delete a.scopes[e].defs.macros[d];else a.scopes.last.registers.named[d]=a.scopes.last.registers.count[c],delete a.scopes.last.defs.macros[d]}else return this.invalid=!0,a.mouth.loadState(e),[!0]}),cr:new n("cr",function(a){if("scope"!=a.contexts.last)return this.invalid=!0,[this];for(var e=!1,d=a.scopes.length-1;0<=d;d--)if(a.scopes[d].isHalign||a.scopes[d].isHalignCell){e=a.scopes[d];break}if(!e)return this.invalid=!0,[this];var c=
e.isHalign?e:e.parentScope,f=e.isHalign?null:c.cellData[c.cellData.length-1];f&&f[f.length-1].omit&&(this.postPreamble=!0);if(this.postPreamble&&!a.scopes.last.isHalign&&!a.scopes.last.isHalignCell)return this.invalid=!0,[this];if(e.isHalignCell){if(!this.postPreamble){e=-1;d=0;for(a=f.length;d<a;d++)e+=f[d].span;if(c.preamble[e])e=c.preamble[e][1];else if(~c.repeatPreambleAt)a=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),e=a[(e-c.repeatPreambleAt)%a.length][1];else return this.invalid=
!0,[this];f=[];d=0;for(a=e.length;d<a;d++){c={};for(var h in e[d])c[h]=e[d][h];f.push(c)}this.postPreamble=!0;return f.concat(this)}a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.contexts.pop();e=a.scopes.last.tokens;a.scopes.last.isFrac?(f[f.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:e,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new t(a.scopes.last.registers.named.nulldelimiterspace)}],
superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),f=a.scopes.last.cellData[a.scopes.last.cellData.length-1],f[f.length-1].content=f[f.length-1].content.concat(e))}$jscomp.initSymbol();e=Symbol();d=!1;for(a.mouth.saveState(e);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}else if("character"==c.type&&c.cat!=b.cats.active){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}else if("command"==c.type||"character"==c.type&&c.cat==b.cats.active){if(c.name in
a.scopes.last.registers.named){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}f="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!f){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}if(f===b.defs.primitive.the||f.proxy&&f.original===b.defs.primitive.the||f===b.defs.primitive.expandafter||f.proxy&&f.original===b.defs.primitive.expandafter||f===b.defs.primitive.number||f.proxy&&f.original===b.defs.primitive.number||
f===b.defs.primitive.romannumeral||f.proxy&&f.original===b.defs.primitive.romannumeral||f===b.defs.primitive.csname||f.proxy&&f.original===b.defs.primitive.csname||f===b.defs.primitive.string||f.proxy&&f.original===b.defs.primitive.string||f===b.defs.primitive["if"]||f.isLet&&f.original===b.defs.primitive["if"]||f===b.defs.primitive.ifcase||f.isLet&&f.original===b.defs.primitive.ifcase||f===b.defs.primitive.ifcat||f.isLet&&f.original===b.defs.primitive.ifcat||f===b.defs.primitive.ifdim||f.isLet&&
f.original===b.defs.primitive.ifdim||f===b.defs.primitive.ifeof||f.isLet&&f.original===b.defs.primitive.ifeof||f===b.defs.primitive.iffalse||f.isLet&&f.original===b.defs.primitive.iffalse||f===b.defs.primitive.ifodd||f.isLet&&f.original===b.defs.primitive.ifodd||f===b.defs.primitive.ifnum||f.isLet&&f.original===b.defs.primitive.ifnum||f===b.defs.primitive.ifhmode||f.isLet&&f.original===b.defs.primitive.ifhmode||f===b.defs.primitive.ifinner||f.isLet&&f.original===b.defs.primitive.ifinner||f===b.defs.primitive.ifmmode||
f.isLet&&f.original===b.defs.primitive.ifmmode||f===b.defs.primitive.iftrue||f.isLet&&f.original===b.defs.primitive.iftrue||f===b.defs.primitive.ifvmode||f.isLet&&f.original===b.defs.primitive.ifvmode||f===b.defs.primitive.ifvoid||f.isLet&&f.original===b.defs.primitive.ifvoid||f===b.defs.primitive.ifx||f.isLet&&f.original===b.defs.primitive.ifx){if(f=a.mouth.expand(c,a.mouth),1==f.length&&f[0]===c&&c.invalid){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}}else{if(f===b.defs.primitive.noalign||
f.proxy&&f.original===b.defs.primitive.noalign){a.mouth.preview().cat!=b.cats.open?(a.mouth.loadState(e),a.scopes.last.noAligns.push(null)):d=!0;break}if("primitive"==f.type||f.proxy&&"primitive"==f.original.type){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}f=a.mouth.expand(c,a.mouth);if(1==f.length&&f[0]==-c&&c.invalid){a.mouth.loadState(e);a.scopes.last.noAligns.push(null);break}}a.mouth.queue.unshift.apply(a.mouth.queue,f)}$jscomp.initSymbol();e=Symbol();for(a.mouth.saveState(e);;)if(c=
a.mouth.eat(),!c){a.mouth.loadState(e);break}else if("character"==c.type&&c.cat!=b.cats.active){a.mouth.loadState(e);break}else if("command"==c.type||"character"==c.type&&c.cat==b.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(e);break}f="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!f){a.mouth.loadState(e);break}if(f===b.defs.primitive.the||f.proxy&&f.original===b.defs.primitive.the||f===
b.defs.primitive.expandafter||f.proxy&&f.original===b.defs.primitive.expandafter||f===b.defs.primitive.number||f.proxy&&f.original===b.defs.primitive.number||f===b.defs.primitive.romannumeral||f.proxy&&f.original===b.defs.primitive.romannumeral||f===b.defs.primitive.csname||f.proxy&&f.original===b.defs.primitive.csname||f===b.defs.primitive.string||f.proxy&&f.original===b.defs.primitive.string||f===b.defs.primitive["if"]||f.isLet&&f.original===b.defs.primitive["if"]||f===b.defs.primitive.ifcase||
f.isLet&&f.original===b.defs.primitive.ifcase||f===b.defs.primitive.ifcat||f.isLet&&f.original===b.defs.primitive.ifcat||f===b.defs.primitive.ifdim||f.isLet&&f.original===b.defs.primitive.ifdim||f===b.defs.primitive.ifeof||f.isLet&&f.original===b.defs.primitive.ifeof||f===b.defs.primitive.iffalse||f.isLet&&f.original===b.defs.primitive.iffalse||f===b.defs.primitive.ifodd||f.isLet&&f.original===b.defs.primitive.ifodd||f===b.defs.primitive.ifnum||f.isLet&&f.original===b.defs.primitive.ifnum||f===b.defs.primitive.ifhmode||
f.isLet&&f.original===b.defs.primitive.ifhmode||f===b.defs.primitive.ifinner||f.isLet&&f.original===b.defs.primitive.ifinner||f===b.defs.primitive.ifmmode||f.isLet&&f.original===b.defs.primitive.ifmmode||f===b.defs.primitive.iftrue||f.isLet&&f.original===b.defs.primitive.iftrue||f===b.defs.primitive.ifvmode||f.isLet&&f.original===b.defs.primitive.ifvmode||f===b.defs.primitive.ifvoid||f.isLet&&f.original===b.defs.primitive.ifvoid||f===b.defs.primitive.ifx||f.isLet&&f.original===b.defs.primitive.ifx){if(f=
a.mouth.expand(c,a.mouth),1==f.length&&f[0]===c&&c.invalid){a.mouth.loadState(e);break}}else{if(f===b.defs.primitive.crcr||f.proxy&&f.original===b.defs.primitive.crcr)break;if("primitive"==f.type||f.proxy&&"primitive"==f.original.type){a.mouth.loadState(e);break}f=a.mouth.expand(c,a.mouth);if(1==f.length&&f[0]==-c&&c.invalid){a.mouth.loadState(e);break}}a.mouth.queue.unshift.apply(a.mouth.queue,f)}$jscomp.initSymbol();e=Symbol();for(a.mouth.saveState(e);;)if(c=a.mouth.eat()){if("character"==c.type&&
c.cat==b.cats.close){c=a.scopes.last;if(~c.repeatPreambleAt)for(h=Math.max.apply(Math,c.cellData.map(function(a){for(var b=0,e=0,d=a.length;e<d;e++)b+=a[e].span;return b})),d=c.tabSkips.slice(c.repeatPreambleAt+1,c.tabSkips.length),f=0;c.tabSkips.length<h+1;)c.tabSkips.push(d[f]),f=(f+1)%d.length;a.scopes.pop();a.scopes.last.tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"table",cellData:c.cellData,tabSkips:c.tabSkips,noAligns:c.noAligns}],superscript:null,subscript:null});return[]}if("character"==
c.type&&c.cat!=b.cats.active){a.mouth.loadState(e);break}else if("command"==c.type||"character"==c.type&&c.cat==b.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(e);break}f="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!f){a.mouth.loadState(e);break}if(f===b.defs.primitive.the||f.proxy&&f.original===b.defs.primitive.the||f===b.defs.primitive.expandafter||f.proxy&&f.original===b.defs.primitive.expandafter||
f===b.defs.primitive.number||f.proxy&&f.original===b.defs.primitive.number||f===b.defs.primitive.romannumeral||f.proxy&&f.original===b.defs.primitive.romannumeral||f===b.defs.primitive.csname||f.proxy&&f.original===b.defs.primitive.csname||f===b.defs.primitive.string||f.proxy&&f.original===b.defs.primitive.string||f===b.defs.primitive["if"]||f.isLet&&f.original===b.defs.primitive["if"]||f===b.defs.primitive.ifcase||f.isLet&&f.original===b.defs.primitive.ifcase||f===b.defs.primitive.ifcat||f.isLet&&
f.original===b.defs.primitive.ifcat||f===b.defs.primitive.ifdim||f.isLet&&f.original===b.defs.primitive.ifdim||f===b.defs.primitive.ifeof||f.isLet&&f.original===b.defs.primitive.ifeof||f===b.defs.primitive.iffalse||f.isLet&&f.original===b.defs.primitive.iffalse||f===b.defs.primitive.ifodd||f.isLet&&f.original===b.defs.primitive.ifodd||f===b.defs.primitive.ifnum||f.isLet&&f.original===b.defs.primitive.ifnum||f===b.defs.primitive.ifhmode||f.isLet&&f.original===b.defs.primitive.ifhmode||f===b.defs.primitive.ifinner||
f.isLet&&f.original===b.defs.primitive.ifinner||f===b.defs.primitive.ifmmode||f.isLet&&f.original===b.defs.primitive.ifmmode||f===b.defs.primitive.iftrue||f.isLet&&f.original===b.defs.primitive.iftrue||f===b.defs.primitive.ifvmode||f.isLet&&f.original===b.defs.primitive.ifvmode||f===b.defs.primitive.ifvoid||f.isLet&&f.original===b.defs.primitive.ifvoid||f===b.defs.primitive.ifx||f.isLet&&f.original===b.defs.primitive.ifx){if(f=a.mouth.expand(c,a.mouth),1==f.length&&f[0]===c&&c.invalid){a.mouth.loadState(e);
break}}else{if("primitive"==f.type||f.proxy&&"primitive"==f.original.type){a.mouth.loadState(e);break}f=a.mouth.expand(c,a.mouth);if(1==f.length&&f[0]==-c&&c.invalid){a.mouth.loadState(e);break}}a.mouth.queue.unshift.apply(a.mouth.queue,f)}}else{a.mouth.loadState(e);break}$jscomp.initSymbol();e=Symbol();a.mouth.saveState(e);for(a.scopes.last.cellData.push([{type:"cell",content:[],omit:!1,span:1}]);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(e);break}else if("character"==c.type&&c.cat!=b.cats.active){a.mouth.loadState(e);
break}else if("command"==c.type||"character"==c.type&&c.cat==b.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(e);break}f="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!f){a.mouth.loadState(e);break}if(f===b.defs.primitive.the||f.proxy&&f.original===b.defs.primitive.the||f===b.defs.primitive.expandafter||f.proxy&&f.original===b.defs.primitive.expandafter||f===b.defs.primitive.number||f.proxy&&
f.original===b.defs.primitive.number||f===b.defs.primitive.romannumeral||f.proxy&&f.original===b.defs.primitive.romannumeral||f===b.defs.primitive.csname||f.proxy&&f.original===b.defs.primitive.csname||f===b.defs.primitive.string||f.proxy&&f.original===b.defs.primitive.string||f===b.defs.primitive["if"]||f.isLet&&f.original===b.defs.primitive["if"]||f===b.defs.primitive.ifcase||f.isLet&&f.original===b.defs.primitive.ifcase||f===b.defs.primitive.ifcat||f.isLet&&f.original===b.defs.primitive.ifcat||
f===b.defs.primitive.ifdim||f.isLet&&f.original===b.defs.primitive.ifdim||f===b.defs.primitive.ifeof||f.isLet&&f.original===b.defs.primitive.ifeof||f===b.defs.primitive.iffalse||f.isLet&&f.original===b.defs.primitive.iffalse||f===b.defs.primitive.ifodd||f.isLet&&f.original===b.defs.primitive.ifodd||f===b.defs.primitive.ifnum||f.isLet&&f.original===b.defs.primitive.ifnum||f===b.defs.primitive.ifhmode||f.isLet&&f.original===b.defs.primitive.ifhmode||f===b.defs.primitive.ifinner||f.isLet&&f.original===
b.defs.primitive.ifinner||f===b.defs.primitive.ifmmode||f.isLet&&f.original===b.defs.primitive.ifmmode||f===b.defs.primitive.iftrue||f.isLet&&f.original===b.defs.primitive.iftrue||f===b.defs.primitive.ifvmode||f.isLet&&f.original===b.defs.primitive.ifvmode||f===b.defs.primitive.ifvoid||f.isLet&&f.original===b.defs.primitive.ifvoid||f===b.defs.primitive.ifx||f.isLet&&f.original===b.defs.primitive.ifx){if(f=a.mouth.expand(c,a.mouth),1==f.length&&f[0]===c&&c.invalid){a.mouth.loadState(e);break}}else{if(f===
b.defs.primitive.omit||f.proxy&&f.original===b.defs.primitive.omit){a.scopes.last.cellData[a.scopes.last.cellData.length-1][0].omit=!0;break}if("primitive"==f.type||f.proxy&&"primitive"==f.original.type){a.mouth.loadState(e);break}f=a.mouth.expand(c,a.mouth);if(1==f.length&&f[0]==-c&&c.invalid){a.mouth.loadState(e);break}}a.mouth.queue.unshift.apply(a.mouth.queue,f)}c=a.scopes.last;a.contexts.push("scope");new a.Scope;a.scopes.last.isHalignCell=!0;a.scopes.last.noAligned=d;if(c.cellData[c.cellData.length-
1][0].omit)return[];e=c.preamble[0][0];f=[];d=0;for(a=e.length;d<a;d++){c={};for(h in e[d])c[h]=e[d][h];f.push(c)}return f}),crcr:new n("crcr",null),csname:new n("csname",function(a){$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);for(var d=[];;){var c=a.mouth.eat("pre space");if(c){if(0!=d.length||c.cat!=b.cats.whitespace)if("command"==c.type||"character"==c.type&&c.cat==b.cats.active){if(c.name in a.scopes.last.registers.named)return this.invalid=!0,a.mouth.loadState(e),[this];var f="command"==
c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!f)return this.invalid=!0,a.mouth.loadState(e),[this];f.proxy&&(f=f.original);if(f===b.defs.primitive.endcsname)break;else if(f===b.defs.primitive.the||f===b.defs.primitive.expandafter||f===b.defs.primitive.number||f===b.defs.primitive.romannumeral||f===b.defs.primitive.csname||f===b.defs.primitive.string||f===b.defs.primitive["if"]||f===b.defs.primitive.ifcase||f===b.defs.primitive.ifcat||
f===b.defs.primitive.ifdim||f===b.defs.primitive.ifeof||f===b.defs.primitive.iffalse||f===b.defs.primitive.ifodd||f===b.defs.primitive.ifnum||f===b.defs.primitive.ifhmode||f===b.defs.primitive.ifinner||f===b.defs.primitive.ifmmode||f===b.defs.primitive.iftrue||f===b.defs.primitive.ifvmode||f===b.defs.primitive.ifvoid||f===b.defs.primitive.ifx){f=a.mouth.expand(c,a.mouth);if(1==f.length&&f[0]===c&&f[0].invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,
f);continue}else if(f instanceof n)return this.invalid=!0,a.mouth.loadState(e),[this];f=a.mouth.expand(c,a.mouth);if(1==f.length&&f[0]===c&&f[0].invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,f)}else d.push(c)}else return this.invalid=!0,a.mouth.loadState(e),[this]}return[{type:"command",nameType:"command",escapeChar:String.fromCharCode(a.scopes.last.registers.named.escapechar.value),name:d.map(function(a){return a["char"]}).join("")}]}),day:new n("day",
function(a){return[new h((new Date).getDate())]}),def:new n("def",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];if("character"==d.type)if(a.catOf(d["char"])==b.cats.active){var c="active";d=d["char"]}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("command"==d.type&&(c="macro",d=d.name,d in a.scopes.last.defs.primitive||
d in b.parameters))return this.invalid=!0,a.mouth.loadState(e),[this];for(var f=[],h=0,n=!1;;){var k=a.mouth.eat();if(k)if(k.cat==b.cats.open){a.mouth.revert();break}else if(k.cat==b.cats.param){var m=a.mouth.eat("pre space");if(m)if(m.cat==b.cats.open)n=!0,a.mouth.revert(),f.push({type:"character",cat:b.cats.open,"char":m["char"],code:m.code});else if(48<m.code&&58>m.code&&m.cat==b.cats.all&&+m["char"]==h+1)f.push(k),h++;else return this.invalid=!0,a.mouth.loadState(e),[this];else return this.invalid=
!0,a.mouth.loadState(e),[this]}else f.push(k);else return this.invalid=!0,a.mouth.loadState(e),[this]}h=0;m=[];for(var t=!1;;){if(k=a.mouth.eat("pre space"))if("character"!=k.type||k.cat!=b.cats.param||t)if("character"==k.type&&k.cat==b.cats.open)h++;else if("character"==k.type&&k.cat==b.cats.close){if(h--,0==h)break}else t&&(t=!1);else{var H=a.mouth.eat("pre space");if(H&&(H.cat==b.cats.param||H.cat==b.cats.all&&H["char"]<=f.length&&1<=H["char"]))a.mouth.revert(),H.cat==b.cats.param&&(t=!0);else return this.invalid=
!0,a.mouth.loadState(e),[this]}else return this.invalid=!0,a.mouth.loadState(e),[this];m.push(k)}m.shift();n&&m.push(f[f.length-1]);e=new ia(m,f);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==c)for(b.defs.macros[d]=e,delete b.registers.named[d],c=0,f=a.scopes.length;c<f;c++)a.scopes[c].defs.macros[d]=e,delete a.scopes[c].registers[d];else for(b.defs.active[d]=e,delete b.registers.named[d],c=0,f=a.scopes.length;c<
f;c++)a.scopes[c].defs.ative[d]=e,delete a.scopes[c].registers[d];else a.scopes.last.defs["macro"==c?"macros":"active"][d]=e,delete a.scopes.last.registers.named[d];a.toggles.global=!1;return[]}),dimen:new n("dimen",function(a){var e=a.mouth.eat("integer");if(!e||0>e.value)return this.invalid=!0,[this];if(!b.registers.dimen[e.value]){b.registers.dimen[e.value]=new t(0,0);for(var d=0,c=a.scopes.length;d<c;d++)a.scopes[d].registers.dimen[e.value]=new t((d?a.scopes[d-1]:b).registers.dimen[e.value])}return[a.scopes.last.registers.dimen[e.value]]}),
dimendef:new n("dimendef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if("command"==d.type){if(d.name in b.defs.primitive||d.name in b.parameters)return this.invalid=!0,a.mouth.loadState(e),[!0];var c=a.mouth.eat();c&&"character"==c.type&&"="==c["char"]&&c.cat==b.cats.all||c&&a.mouth.revert();c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(e),
[!0];d=d.name;c=c.value;if(!b.registers.dimen[c]){b.registers.dimen[c]=new t(0,0);e=0;for(var f=a.scopes.length;e<f;e++)a.scopes[e].registers.dimen[c]=new t((e?a.scopes[e-1]:b).registers.dimen[c])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(b.registers.named[d]=b.registers.dimen[c],delete b.defs.macros[d],e=0,f=a.scopes.length;e<f;e++)a.scopes[e].registers.named[d]=a.scopes[e].registers.dimen[c],delete a.scopes[e].defs.macros[d];
else a.scopes.last.registers.named[d]=a.scopes.last.registers.dimen[c],delete a.scopes.last.defs.macros[d]}else return this.invalid=!0,a.mouth.loadState(countDefSym),[!0]}),displaylimits:new n("displaylimits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:"display",token:this});return[]}),displaystyle:new n("displaystyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"font modifier",value:"displaystyle"});return[]}),divide:new n("divide",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&d.register)if(d&&d.register){var c=a.mouth.eat();if(!c||
"character"!=c.type||"b"!=c["char"]&&"B"!=c["char"]||c.cat==b.cats.active)if(c)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(e),[this];else c=a.mouth.eat(),(!c||"character"!=c.type||"y"!=c["char"]&&"Y"!=c["char"]||c.cat==b.cats.active)&&a.mouth.revert(2);if(c=a.mouth.eat("integer"))if("integer"==d.type){d.value=~~(d.value/c.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,
d.value=e.value;a.toggles.global=!1}else if("dimension"==d.type){d.sp.value=~~(d.sp.value/c.value);d.em.value=~~(d.em.value/c.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.sp.value=e.sp.value,d.em.value=e.em.value;a.toggles.global=!1}else if("mu dimension"==d.type){d.mu.value=~~(d.mu.value/c.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=
d.parent,d.mu.value=e.mu.value;a.toggles.global=!1}else if("glue"==d.type){d.start.sp.value=~~(d.start.sp.value/c.value);d.start.em.value=~~(d.start.em.value/c.value);"infinite dimension"==d.stretch.type?d.stretch.number.value=~~(d.stretch.number.value/c.value):(d.stretch.sp.value=~~(d.stretch.sp.value/c.value),d.stretch.em.value=~~(d.stretch.em.value/c.value));"infinite dimension"==d.shrink.type?d.shrink.number.value=~~(d.shrink.number.value/c.value):(d.shrink.sp.value=~~(d.shrink.sp.value/c.value),
d.shrink.em.value=~~(d.shrink.em.value/c.value));e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.start.sp.value=e.start.sp.value,d.start.em.value=e.start.em.value,d.stretch="infinite dimension"==e.stretch.type?new z(e.stretch.number.value,e.stretch.magnitude.value):new t(e.stretch.sp.value,e.stretch.em.value),d.shrink="infinite dimension"==e.shrink.type?new z(e.shrink.number.value,e.shrink.magnitude.value):
new t(e.shrink.sp.value,e.shrink.em.value);a.toggles.global=!1}else{if("mu glue"==d.type){d.start.mu.value=~~(d.start.mu.value/c.value);"infinite dimension"==d.stretch.type?d.stretch.number.value=~~(d.stretch.number.value/c.value):d.stretch.mu.value=~~(d.stretch.mu.value/c.value);"infinite dimension"==d.shrink.type?d.shrink.number.value=~~(d.shrink.number.value/c.value):d.shrink.mu.value=~~(d.shrink.mu.value/c.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=
d.parent,d.start.mu.value=e.start.mu.value,d.stretch="infinite dimension"==e.stretch.type?new z(e.stretch.number.value,e.stretch.magnitude.value):new F(e.stretch.mu.value),d.shrink="infinite dimension"==e.shrink.type?new z(e.shrink.number.value,e.shrink.magnitude.value):new F(e.shrink.mu.value);a.toggles.global=!1}}else return this.invalid=!0,a.mouth.loadState(e),[this];break}else return this.invalid=!0,a.mouth.loadState(e),[this];else return this.invalid=!0,a.mouth.loadState(e),[this]}return[]}),
edef:new n("edef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];if("character"==d.type)if(a.catOf(d["char"])==b.cats.active){var c="active";d=d["char"]}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("command"==d.type&&(c="macro",d=d.name,d in a.scopes.last.defs.primitive||d in b.parameters))return this.invalid=
!0,a.mouth.loadState(e),[this];for(var f=[],h=0,B=!1;;){var k=a.mouth.eat();if(k)if(k.cat==b.cats.open){a.mouth.revert();break}else if(k.cat==b.cats.param){var m=a.mouth.eat("pre space");if(m)if(m.cat==b.cats.open)B=!0,a.mouth.revert(),f.push({type:"character",cat:b.cats.open,"char":m["char"],code:m.code});else if(48<m.code&&58>m.code&&m.cat==b.cats.all&&+m["char"]==h+1)f.push(k),h++;else return this.invalid=!0,a.mouth.loadState(e),[this];else return this.invalid=!0,a.mouth.loadState(e),[this]}else f.push(k);
else return this.invalid=!0,a.mouth.loadState(e),[this]}h=0;m=[];for(var t=!1,H=!1;;)if(k=a.mouth.eat())if("character"!=k.type||k.cat!=b.cats.param||H)if("character"==k.type&&k.cat==b.cats.open)h++,m.push(k),t=!1;else if("character"==k.type&&k.cat==b.cats.close){h--;if(0==h)break;m.push(k);t=!1}else if(t)m.push(k),t=!1;else if("command"==k.type||"character"==k.type&&k.cat==b.cats.active)if(k.name in a.scopes.last.registers.named)m.push(k);else{var l="command"==k.type?a.scopes.last.defs.primitive[k.name]||
a.scopes.last.defs.macros[k.name]:a.scopes.last.defs.active[k["char"]];if(!l)return this.invalid=!0,a.mouth.loadState(e),[this];if(l===b.defs.primitive.the||l.proxy&&l.original===b.defs.primitive.the||l===b.defs.primitive.expandafter||l.proxy&&l.original===b.defs.primitive.expandafter||l===b.defs.primitive.number||l.proxy&&l.original===b.defs.primitive.number||l===b.defs.primitive.romannumeral||l.proxy&&l.original===b.defs.primitive.romannumeral||l===b.defs.primitive.csname||l.proxy&&l.original===
b.defs.primitive.csname||l===b.defs.primitive.string||l.proxy&&l.original===b.defs.primitive.string||l===b.defs.primitive["if"]||l.isLet&&l.original===b.defs.primitive["if"]||l===b.defs.primitive.ifcase||l.isLet&&l.original===b.defs.primitive.ifcase||l===b.defs.primitive.ifcat||l.isLet&&l.original===b.defs.primitive.ifcat||l===b.defs.primitive.ifdim||l.isLet&&l.original===b.defs.primitive.ifdim||l===b.defs.primitive.ifeof||l.isLet&&l.original===b.defs.primitive.ifeof||l===b.defs.primitive.iffalse||
l.isLet&&l.original===b.defs.primitive.iffalse||l===b.defs.primitive.ifodd||l.isLet&&l.original===b.defs.primitive.ifodd||l===b.defs.primitive.ifnum||l.isLet&&l.original===b.defs.primitive.ifnum||l===b.defs.primitive.ifhmode||l.isLet&&l.original===b.defs.primitive.ifhmode||l===b.defs.primitive.ifinner||l.isLet&&l.original===b.defs.primitive.ifinner||l===b.defs.primitive.ifmmode||l.isLet&&l.original===b.defs.primitive.ifmmode||l===b.defs.primitive.iftrue||l.isLet&&l.original===b.defs.primitive.iftrue||
l===b.defs.primitive.ifvmode||l.isLet&&l.original===b.defs.primitive.ifvmode||l===b.defs.primitive.ifvoid||l.isLet&&l.original===b.defs.primitive.ifvoid||l===b.defs.primitive.ifx||l.isLet&&l.original===b.defs.primitive.ifx){l=a.mouth.expand(k,a.mouth);if(1==l.length&&l[0]===k&&k.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,l)}else l===b.defs.primitive.noexpand||l.proxy&&l.original===b.defs.primitive.noexpand?t=!0:l instanceof n||l.proxy&&l.original instanceof
n?m.push(k):a.mouth.queue.unshift.apply(a.mouth.queue,a.mouth.expand(k,a.mouth))}else m.push(k);else{if((l=a.mouth.eat("pre space"))&&(l.cat==b.cats.param||l.cat==b.cats.all&&l["char"]<=f.length&&1<=l["char"]))a.mouth.revert(),l.cat==b.cats.param&&(H=!0);else return this.invalid=!0,a.mouth.loadState(e),[this];m.push(k);t=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];m.shift();B&&m.push(f[f.length-1]);l=new ia(m,f);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value)if("macro"==c)for(b.defs.macros[d]=l,delete b.registers.named[d],e=0,c=a.scopes.length;e<c;e++)a.scopes[e].defs.macros[d]=l,delete a.scopes[e].registers.named[d];else for(b.defs.active[d]=l,delete b.registers.named[d],e=0,c=a.scopes.length;e<c;e++)a.scopes[e].defs.ative[d]=l,delete a.scopes[e].registers.named[d];else a.scopes.last.defs["macro"==c?"macros":"active"][d]=l,delete a.scopes.last.registers.named[d];a.toggles.global=!1;return[]}),"else":new n("else",
function(a){this.invalid=!0;return[this]}),endcsname:new n("endcsname",function(a){this.invalid=!0;return[this]}),endgroup:new n("endgroup",function(a){if(!a.openGroups.length||a.scopes.last.delimited||a.scopes.last.isHalign||a.scopes.last.isHalignCell||!a.scopes.last.semisimple||"scope"!=a.contexts.last)return this.invalid=!0,[this];a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.openGroups.pop();a.contexts.pop();var b=a.scopes.last.tokens;a.scopes.last.isFrac?(a.scopes[a.scopes.length-2].tokens.push({type:"atom",
atomType:0,nucleus:[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:b,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new t(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),a.scopes.last.tokens.push({type:"atom",atomType:0,nucleus:b,superscript:null,subscript:null}))}),Error:new n("Error",
function(a){$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(d&&"character"==d.type&&d.cat==b.cats.open){for(var c=0,f=[];;)if(d=a.mouth.eat("pre space"))if("character"==d.type&&d.cat==b.cats.open)c++,f.push(d["char"]);else if("character"==d.type&&d.cat==b.cats.close){if(!c)break;c--;f.push(d["char"])}else"command"==d.type?(f.push(d.escapeChar),f.push.apply(f,d.name.split(""))):f.push(d["char"]);else return this.invalid=!0,a.mouth.loadState(e),[this];return f.map(function(a){return{type:"character",
"char":a,code:a.charCodeAt(0),cat:12,invalid:!0,recognized:!0}})}this.invalid=!0;return[this]}),expandafter:new n("expandafter",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];var c=a.mouth.eat(),f=a.mouth.expand(c,a.mouth);return 1==f.length&&f[0]===c&&c.invalid?(this.invalid=!0,a.mouth.loadState(b),[this]):[d].concat(f)}),ExpandedError:new n("ExpandedError",function(a){$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);
var d=a.mouth.eat();if(d&&"character"==d.type&&d.cat==b.cats.open){for(var c=0,f=[],h=!1;;)if(d=a.mouth.eat("pre space")){if("character"==d.type&&d.cat==b.cats.open)c++,f.push(d["char"]);else if("character"==d.type&&d.cat==b.cats.close){if(!c)break;c--;f.push(d["char"])}else if("command"==d.type||"character"==d.type&&d.cat==b.cats.active){var B="command"==d.type?a.scopes.last.defs.primitive[d.name]||a.scopes.last.defs.macros[d.name]:a.scopes.last.defs.active[d["char"]];if(!B)return this.invalid=!0,
a.mouth.loadState(e),[this];B.proxy&&(B=B.original);if(B===b.defs.primitive.noexpand){h=!0;continue}else if(!h&&(B===b.defs.primitive.the||B===b.defs.primitive.expandafter||B===b.defs.primitive.number||B===b.defs.primitive.romannumeral||B===b.defs.primitive.csname||B===b.defs.primitive.string||B===b.defs.primitive["if"]||B===b.defs.primitive.ifcase||B===b.defs.primitive.ifcat||B===b.defs.primitive.ifdim||B===b.defs.primitive.ifeof||B===b.defs.primitive.iffalse||B===b.defs.primitive.ifodd||B===b.defs.primitive.ifnum||
B===b.defs.primitive.ifhmode||B===b.defs.primitive.ifinner||B===b.defs.primitive.ifmmode||B===b.defs.primitive.iftrue||B===b.defs.primitive.ifvmode||B===b.defs.primitive.ifvoid||B===b.defs.primitive.ifx)){h=a.mouth.expand(d,a.mouth);if(1==h.length&&h[0]===d&&h[0].invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h);h=!1;continue}else if(B instanceof n){f.push(String.fromCharCode(a.scopes.last.registers.named.escapechar.value));f.push.apply(f,B.name.split(""));
h=!1;continue}if(h)f.push(String.fromCharCode(a.scopes.last.registers.named.escapechar.value)),f.push.apply(f,d.name.split(""));else{h=a.mouth.expand(d,a.mouth);if(1==h.length&&h[0]===d&&h[0].invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h)}}else f.push(d["char"]);h=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];return f.map(function(a){return{type:"character","char":a,code:a.charCodeAt(0),cat:12,invalid:!0,recognized:!0}})}this.invalid=
!0;return[this]}),fi:new n("fi",function(a){this.invalid=!0;return[this]}),futurelet:new n("futurelet",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];if("character"==d.type)if(a.catOf(d["char"])==b.cats.active){var c="active";d=d["char"]}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("command"==d.type&&(c="macro",
d=d.name,d in a.scopes.last.defs.primitive||d in b.parameters))return this.invalid=!0,a.mouth.loadState(e),[this];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==b.cats.all||f&&a.mouth.revert();f=a.mouth.eat();if(!f)return this.invalid=!0,a.mouth.loadState(e),[this];var h=a.mouth.eat();if(h)if("command"==h.type||"character"==h.type&&h.cat==b.cats.active)if(e="command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h.name])e=
new ia(e,"primitive"==e.type||e.isLet);else{if("command"==h.type&&"macro"==c){var n=a.scopes.last.registers.named[h.name];if(n){if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){b.registers.named[d]=n;delete b.defs.macros[d];var k=0;for(c=a.scopes.length;k<c;k++)a.scopes[k].registers.named[d]=n,delete a.scopes[k].defs.macros[d]}else a.scopes.last.registers.named[d]=n,delete a.scopes.last.defs.macros[d];a.toggles.global=!1;return[]}}}else e=
new ia(new ia([h]),!0);else return this.invalid=!0,a.mouth.loadState(e),[this];if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==c)for(e?b.defs.macros[d]=e:delete b.defs.macros[d],delete b.registers.named[d],k=0,c=a.scopes.length;k<c;k++)e?a.scopes[k].defs.macros[d]=e:delete a.scopes[k].defs.macros[d],delete a.scopes[k].registers.named[d];else for(e?b.defs.active[d]=e:delete a.scopes[k].defs.macros[d],delete b.registers.named[d],
k=0,c=a.scopes.length;k<c;k++)e?a.scopes[k].defs.ative[d]=e:delete a.scopes[k].defs.macros[d],delete a.scopes[k].registers.named[d];else e?a.scopes.last.defs["macro"==c?"macros":"active"][d]=e:delete a.scopes.last.defs["macro"==c?"macros":"active"][d],delete a.scopes.last.registers.named[d];a.toggles.global=!1;return[f,h]}),gdef:new n("gdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);
var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];if("character"==d.type)if(a.catOf(d["char"])==b.cats.active){var c="active";d=d["char"]}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("command"==d.type&&(c="macro",d=d.name,d in a.scopes.last.defs.primitive||d in b.parameters))return this.invalid=!0,a.mouth.loadState(e),[this];for(var f=[],h=0,n=!1;;){var k=a.mouth.eat();if(k)if(k.cat==b.cats.open){a.mouth.revert();break}else if(k.cat==b.cats.param){var m=a.mouth.eat("pre space");
if(m)if(m.cat==b.cats.open)n=!0,a.mouth.revert(),f.push({type:"character",cat:b.cats.open,"char":m["char"],code:m.code});else if(48<m.code&&58>m.code&&m.cat==b.cats.all&&+m["char"]==h+1)f.push(k),h++;else return this.invalid=!0,a.mouth.loadState(e),[this];else return this.invalid=!0,a.mouth.loadState(e),[this]}else f.push(k);else return this.invalid=!0,a.mouth.loadState(e),[this]}h=0;m=[];for(var t=!1;;){k=a.mouth.eat();if(!k)return this.invalid=!0,a.mouth.loadState(e),[this];if("character"==k.type&&
k.cat==b.cats.param&&!t){var H=a.mouth.eat("pre space");if(H&&(H.cat==b.cats.param||H.cat==b.cats.all&&H["char"]<=f.length&&1<=H["char"]))a.mouth.revert(),H.cat==b.cats.param&&(t=!0);else return this.invalid=!0,a.mouth.loadState(e),[this]}else if("character"==k.type&&k.cat==b.cats.open)h++;else if("character"==k.type&&k.cat==b.cats.close&&(h--,0==h))break;m.push(k)}m.shift();n&&m.push(f[f.length-1]);e=new ia(m,f);if(0>a.scopes.last.registers.named.globaldefs.value)a.scopes.last.defs["macro"==c?"macros":
"active"][d]=e,delete a.scopes.last.registers.named[d];else if("macro"==c)for(b.defs.macros[d]=e,delete b.registers.named[d],c=0,f=a.scopes.length;c<f;c++)a.scopes[c].defs.macros[d]=e,delete a.scopes[c].registers.named[d];else for(b.defs.active[d]=e,delete b.registers.named[d],c=0,f=a.scopes.length;c<f;c++)a.scopes[c].defs.ative[d]=e,delete a.scopes[c].registers.named[d];a.toggles.global=!1;return[]}),global:new n("global",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.toggles.global=this;this.ignore=!0;return[this]}),halign:new n("halign",function(a){$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d||d.cat!=b.cats.open)return this.invalid=!0,a.mouth.loadState(e),[this];for(var c=[[[]]],f=-1,h=[new X(a.scopes.last.registers.named.tabskip)],n=!1;;){d=a.mouth.eat("pre space");if(!d)return this.invalid=!0,a.mouth.loadState(e),[this];if("command"==d.type||"character"==d.type&&d.cat==b.cats.active){var k="command"==d.type?
a.scopes.last.defs.primitive[d.name]||a.scopes.last.defs.macros[d.name]||a.scopes.last.registers.named[d.name]:a.scopes.last.defs.active[d["char"]];k=k&&k.isLet?k.original:k;if(!k){(c[c.length-1][1]||c[c.length-1][0]).push(d);continue}else if(k===b.defs.primitive.cr)if(c[c.length-1][1]){h.push(new X(a.scopes.last.registers.named.tabskip));k=n||h[0];d=a.scopes.last.registers.named.tabskip;d.start.sp.value=k.start.sp.value;d.start.em.value=k.start.em.value;d.stretch="infinite dimension"==k.stretch.type?
new z(k.stretch.number.value,k.stretch.magnitude.value):new t(k.stretch.sp.value,k.stretch.em.value);d.shrink="infinite dimension"==k.shrink.type?new z(k.shrink.number.value,k.shrink.magnitude.value):new t(k.shrink.sp.value,k.shrink.em.value);break}else return this.invalid=!0,a.mouth.loadState(e),[this];else if(k===a.scopes.last.registers.named.tabskip){$jscomp.initSymbol();var m=Symbol();a.mouth.saveState(m);(k=a.mouth.eat())&&"character"==k.type&&"="==k["char"]&&k.cat==b.cats.all||k&&a.mouth.revert();
k=a.mouth.eat("glue");if(!k){a.mouth.loadState(m);(c[c.length-1][1]||c[c.length-1][0]).push(d);continue}d=a.scopes.last.registers.named.tabskip;d.start.sp.value=k.start.sp.value;d.start.em.value=k.start.em.value;d.stretch="infinite dimension"==k.stretch.type?new z(k.stretch.number.value,k.stretch.magnitude.value):new t(k.stretch.sp.value,k.stretch.em.value);d.shrink="infinite dimension"==k.shrink.type?new z(k.shrink.number.value,k.shrink.magnitude.value):new t(k.shrink.sp.value,k.shrink.em.value);
if(0<a.scopes.last.registers.named.globaldefs.value)for(n=new X(d);d.parent;)d=d.parent,d.start.sp.value=k.start.sp.value,d.start.em.value=k.start.em.value,d.stretch="infinite dimension"==k.stretch.type?new z(k.stretch.number.value,k.stretch.magnitude.value):new t(k.stretch.sp.value,k.stretch.em.value),"infinite dimension"==k.shrink.type?h.shrink=new z(k.shrink.number.value,k.shrink.magnitude.value):d.shrink=new t(k.shrink.sp.value,k.shrink.em.value);continue}else if(k===b.defs.primitive.span){d=
a.mouth.eat();if(!d)return this.invalid=!0,a.mouth.loadState(e),[this];k=a.mouth.expand(d,a.mouth);if(1==k.length&&k[0]===d&&d.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,k);continue}else if(k.replacement&&k.replacement[0]&&k.replacement[0].cat==b.cats.param){if(c[c.length-1][1])return this.invalid=!0,a.mouth.loadState(e),[this];c[c.length-1][1]=[];continue}else if(k.replacement&&k.replacement[0]&&k.replacement[0].cat==b.cats.alignment){if(~f||
c[c.length-1][0].length||c[c.length-1][1])if(c[c.length-1][1])c.push([[]]),h.push(new X(a.scopes.last.registers.named.tabskip));else return this.invalid=!0,a.mouth.loadState(e),[this];else f=c.length-1;continue}}else if(d.cat==b.cats.param){if(c[c.length-1][1])return this.invalid=!0,a.mouth.loadState(e),[this];c[c.length-1][1]=[];continue}else if(d.cat==b.cats.alignment){if(~f||c[c.length-1][0].length||c[c.length-1][1])if(c[c.length-1][1])c.push([[]]),h.push(new X(a.scopes.last.registers.named.tabskip));
else return this.invalid=!0,a.mouth.loadState(e),[this];else f=c.length-1;continue}else if(d.cat==b.cats.whitespace&&!c[c.length-1][0].length&&!c[c.length-1][1])continue;(c[c.length-1][1]||c[c.length-1][0]).push(d)}e={type:"atom",atomType:0,nucleus:("command"==this.type?this.escapeChar+this.name:this["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0)},superscript:null,subscript:null}}),superscript:null,subscript:null,ignore:!0};a.openGroups.push(e);
a.contexts.push("scope");new a.Scope;a.scopes.last.tokens.push(e);a.scopes.last.isHalign=!0;a.scopes.last.cellData=[];a.scopes.last.preamble=c;a.scopes.last.repeatPreambleAt=f;a.scopes.last.tabSkips=h;a.scopes.last.noAligns=[];a.mouth.revert();return[]}),hbox:new n("hbox",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);for(var d,c;;){var f=a.mouth.eat();if(!f)return this.invalid=!0,[this];
if("command"==f.type||"character"==f.type&&f.cat==b.cats.active){var h="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(h&&(h===b.defs.primitive.relax||h.proxy&&h.original===b.defs.primitive.relax))break;f=a.mouth.expand(f,a.mouth);a.mouth.queue.unshift.apply(a.mouth.queue,f)}else if("character"!=f.type||"t"!=f["char"]&&"T"!=f["char"])if("character"!=f.type||"s"!=f["char"]&&"S"!=f["char"])if("character"==f.type&&f.cat==
b.cats.open){a.mouth.revert();break}else return this.invalid=!0,a.mouth.loadState(e),[this];else{d=a.mouth.eat();f=a.mouth.eat();h=a.mouth.eat();var n=a.mouth.eat(),k=a.mouth.eat();if(!d||"character"!=d.type||"p"!=d["char"]&&"P"!=d["char"]||d.cat==b.cats.active||!f||"character"!=f.type||"r"!=f["char"]&&"R"!=f["char"]||f.cat==b.cats.active||!h||"character"!=h.type||"e"!=h["char"]&&"E"!=h["char"]||h.cat==b.cats.active||!n||"character"!=n.type||"a"!=n["char"]&&"A"!=n["char"]||n.cat==b.cats.active||!k||
"character"!=k.type||"d"!=k["char"]&&"D"!=k["char"]||k.cat==b.cats.active||!(f=a.mouth.eat("dimension")))return this.invalid=!0,a.mouth.loadState(e),[this];d=f;break}else if(c=a.mouth.eat("pre space"),c&&"character"==c.type&&("o"==c["char"]||"O"==f["char"])&&f.cat!=b.cats.active&&(f=a.mouth.eat("dimension"))){c=f;break}else return this.invalid=!0,a.mouth.loadState(e),[this]}f=a.mouth.preview();if(!f||"character"!=f.type||f.cat!=b.cats.open)return this.invalid=!0,a.mouth.loadState(e),[this];c||d||
(d=new t(0,0));a.tokens.push({type:"box wrapper",value:"horizontal",to:c,spread:d,token:this});return[]}),hfil:new n("hfil",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:new X(new t(0),new z(1,1),new t(0))});return[]}),hfill:new n("hfill",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:new X(new t(0),new z(1,2),new t(0))});
return[]}),hrule:new n("hrule",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);for(var d=e=!1,c=!1;;){var f=a.mouth.eat();if(!f){a.mouth.revert();break}if("h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)if("d"!=f["char"]&&"D"!=f["char"]||f.cat==b.cats.active)if("w"!=f["char"]&&"W"!=f["char"]||f.cat==b.cats.active)a.mouth.revert();else if(f=a.mouth.eat("pre space"),!f||"i"!=f["char"]&&
"I"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?2:1);else if(f=a.mouth.eat("pre space"),!f||"d"!=f["char"]&&"D"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?3:2);else if(f=a.mouth.eat("pre space"),!f||"t"!=f["char"]&&"T"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?4:3);else if(f=a.mouth.eat("pre space"),!f||"h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?5:4);else if(f=a.mouth.eat("dimension")){c=f;continue}else a.mouth.revert(5);else if(f=a.mouth.eat("pre space"),
!f||"e"!=f["char"]&&"E"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?2:1);else if(f=a.mouth.eat("pre space"),!f||"p"!=f["char"]&&"P"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?3:2);else if(f=a.mouth.eat("pre space"),!f||"t"!=f["char"]&&"T"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?4:3);else if(f=a.mouth.eat("pre space"),!f||"h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?5:4);else if(f=a.mouth.eat("dimension")){d=f;continue}else a.mouth.revert(5);else if(f=
a.mouth.eat("pre space"),!f||"e"!=f["char"]&&"E"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?2:1);else if(f=a.mouth.eat("pre space"),!f||"i"!=f["char"]&&"I"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?3:2);else if(f=a.mouth.eat("pre space"),!f||"g"!=f["char"]&&"G"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?4:3);else if(f=a.mouth.eat("pre space"),!f||"h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?5:4);else if(f=a.mouth.eat("pre space"),!f||"t"!=f["char"]&&
"T"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?6:5);else if(f=a.mouth.eat("dimension")){e=f;continue}else a.mouth.revert(6);break}e=e||new t(0,65536/30);d=d||new t(0,0);a.tokens.push({type:"rule",ruleType:"h",height:e,depth:d,width:c});return[]}),hskip:new n("hskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:b});return[]}),"if":new n("if",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);for(var d=[],c=!1;2>d.length;){var f=a.mouth.eat("pre space");if(f){if("character"!=f.type||f.cat!=b.cats.whitespace||0!=d.length)if("character"==f.type&&d.cat!=b.cats.active)d.push(f),c=!1;else if(c)d.push(f),c=!1;else if("command"==f.type||"character"==f.type&&f.cat==b.cats.active)if(f.name in a.scopes.last.registers.named)d.push(f);else{var h=
"command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(!h)return this.invalid=!0,a.mouth.loadState(e),[this];if(h===b.defs.primitive.the||h.proxy&&h.original===b.defs.primitive.the||h===b.defs.primitive.expandafter||h.proxy&&h.original===b.defs.primitive.expandafter||h===b.defs.primitive.number||h.proxy&&h.original===b.defs.primitive.number||h===b.defs.primitive.romannumeral||h.proxy&&h.original===b.defs.primitive.romannumeral||
h===b.defs.primitive.csname||h.proxy&&h.original===b.defs.primitive.csname||h===b.defs.primitive.string||h.proxy&&h.original===b.defs.primitive.string||h===b.defs.primitive["if"]||h.isLet&&h.original===b.defs.primitive["if"]||h===b.defs.primitive.ifcase||h.isLet&&h.original===b.defs.primitive.ifcase||h===b.defs.primitive.ifcat||h.isLet&&h.original===b.defs.primitive.ifcat||h===b.defs.primitive.ifdim||h.isLet&&h.original===b.defs.primitive.ifdim||h===b.defs.primitive.ifeof||h.isLet&&h.original===b.defs.primitive.ifeof||
h===b.defs.primitive.iffalse||h.isLet&&h.original===b.defs.primitive.iffalse||h===b.defs.primitive.ifodd||h.isLet&&h.original===b.defs.primitive.ifodd||h===b.defs.primitive.ifnum||h.isLet&&h.original===b.defs.primitive.ifnum||h===b.defs.primitive.ifhmode||h.isLet&&h.original===b.defs.primitive.ifhmode||h===b.defs.primitive.ifinner||h.isLet&&h.original===b.defs.primitive.ifinner||h===b.defs.primitive.ifmmode||h.isLet&&h.original===b.defs.primitive.ifmmode||h===b.defs.primitive.iftrue||h.isLet&&h.original===
b.defs.primitive.iftrue||h===b.defs.primitive.ifvmode||h.isLet&&h.original===b.defs.primitive.ifvmode||h===b.defs.primitive.ifvoid||h.isLet&&h.original===b.defs.primitive.ifvoid||h===b.defs.primitive.ifx||h.isLet&&h.original===b.defs.primitive.ifx){h=a.mouth.expand(f,a.mouth);if(1==h.length&&h[0]===f&&f.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h)}else if(h===b.defs.primitive.noexpand||h.proxy&&h.original===b.defs.primitive.noexpand)c=!0;
else if(h instanceof n||h.proxy&&h.original instanceof n)d.push(f);else{h=a.mouth.expand(f,a.mouth);if(1==h.length&&h[0]==-f&&f.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h)}}else d.push(f)}else return this.invalid=!0,a.mouth.loadState(e),[this]}return ca.call(this,"command"==d[0].type&&"command"==d[1].type||"character"==d[0].type&&d[0]["char"]==d[1]["char"],a.mouth,a.scopes,e)}),ifcase:new n("ifcase",function(a){function e(d){for(;;){var c=
a.mouth.eat();if(!c)break;else if("command"==c.type||"character"==c.type&&c.cat===b.cats.active)if(c="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]])if(c===b.defs.primitive["if"]||c.isLet&&c.original===b.defs.primitive["if"]||c===b.defs.primitive.ifcase||c.isLet&&c.original===b.defs.primitive.ifcase||c===b.defs.primitive.ifcat||c.isLet&&c.original===b.defs.primitive.ifcat||c===b.defs.primitive.ifdim||c.isLet&&c.original===
b.defs.primitive.ifdim||c===b.defs.primitive.ifeof||c.isLet&&c.original===b.defs.primitive.ifeof||c===b.defs.primitive.iffalse||c.isLet&&c.original===b.defs.primitive.iffalse||c===b.defs.primitive.ifodd||c.isLet&&c.original===b.defs.primitive.ifodd||c===b.defs.primitive.ifnum||c.isLet&&c.original===b.defs.primitive.ifnum||c===b.defs.primitive.ifhmode||c.isLet&&c.original===b.defs.primitive.ifhmode||c===b.defs.primitive.ifinner||c.isLet&&c.original===b.defs.primitive.ifinner||c===b.defs.primitive.ifmmode||
c.isLet&&c.original===b.defs.primitive.ifmmode||c===b.defs.primitive.iftrue||c.isLet&&c.original===b.defs.primitive.iftrue||c===b.defs.primitive.ifvmode||c.isLet&&c.original===b.defs.primitive.ifvmode||c===b.defs.primitive.ifvoid||c.isLet&&c.original===b.defs.primitive.ifvoid||c===b.defs.primitive.ifx||c.isLet&&c.original===b.defs.primitive.ifx)e("fi"),a.mouth.eat();else{if("or"==d&&(c===b.defs.primitive.or||c.isLet&&c.original===b.defs.primitive.or))break;if(("or"==d||"else"==d)&&(c===b.defs.primitive["else"]||
c.isLet&&c.original===b.defs.primitive["else"])){f=!0;break}if(c===b.defs.primitive.fi||c.isLet&&c.original===b.defs.primitive.fi){a.mouth.revert();break}}}}if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var d=Symbol();a.mouth.saveState(d);var c=a.mouth.eat("integer");if(!c)return this.invalid=!0,[this];d=[];var f=!1;c=c.value;if(0>c)e("else");else for(;0<c&&!f;c--)e("or");for(;;)if(c=a.mouth.eat())if("command"==c.type||"character"==
c.type&&c.cat==b.cats.active){var h="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(h&&(h===b.defs.primitive.fi||h.isLet&&h.original===b.defs.primitive.fi))return d;!f&&h&&(h===b.defs.primitive.or||h.isLet&&h.original===b.defs.primitive.or||h===b.defs.primitive["else"]||h.isLet&&h.original===b.defs.primitive["else"])?e("fi"):(c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c))}else d.push(c);else return this.invalid=
!0,a.mouth.loadState(stateSymbol),[this]}),ifcat:new n("ifcat",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);for(var d=[],c=!1;2>d.length;){var f=a.mouth.eat("pre space");if(f){if("character"!=f.type||f.cat!=b.cats.whitespace||0!=d.length)if("character"==f.type&&d.cat!=b.cats.active)d.push(f),c=!1;else if(c)d.push(f),c=!1;else if("command"==f.type||"character"==f.type&&f.cat==b.cats.active)if(f.name in
a.scopes.last.registers.named)d.push(f);else{var h="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(!h)return this.invalid=!0,a.mouth.loadState(e),[this];if(h===b.defs.primitive.the||h.proxy&&h.original===b.defs.primitive.the||h===b.defs.primitive.expandafter||h.proxy&&h.original===b.defs.primitive.expandafter||h===b.defs.primitive.number||h.proxy&&h.original===b.defs.primitive.number||h===b.defs.primitive.romannumeral||
h.proxy&&h.original===b.defs.primitive.romannumeral||h===b.defs.primitive.csname||h.proxy&&h.original===b.defs.primitive.csname||h===b.defs.primitive.string||h.proxy&&h.original===b.defs.primitive.string||h===b.defs.primitive["if"]||h.isLet&&h.original===b.defs.primitive["if"]||h===b.defs.primitive.ifcase||h.isLet&&h.original===b.defs.primitive.ifcase||h===b.defs.primitive.ifcat||h.isLet&&h.original===b.defs.primitive.ifcat||h===b.defs.primitive.ifdim||h.isLet&&h.original===b.defs.primitive.ifdim||
h===b.defs.primitive.ifeof||h.isLet&&h.original===b.defs.primitive.ifeof||h===b.defs.primitive.iffalse||h.isLet&&h.original===b.defs.primitive.iffalse||h===b.defs.primitive.ifodd||h.isLet&&h.original===b.defs.primitive.ifodd||h===b.defs.primitive.ifnum||h.isLet&&h.original===b.defs.primitive.ifnum||h===b.defs.primitive.ifhmode||h.isLet&&h.original===b.defs.primitive.ifhmode||h===b.defs.primitive.ifinner||h.isLet&&h.original===b.defs.primitive.ifinner||h===b.defs.primitive.ifmmode||h.isLet&&h.original===
b.defs.primitive.ifmmode||h===b.defs.primitive.iftrue||h.isLet&&h.original===b.defs.primitive.iftrue||h===b.defs.primitive.ifvmode||h.isLet&&h.original===b.defs.primitive.ifvmode||h===b.defs.primitive.ifvoid||h.isLet&&h.original===b.defs.primitive.ifvoid||h===b.defs.primitive.ifx||h.isLet&&h.original===b.defs.primitive.ifx){h=a.mouth.expand(f,a.mouth);if(1==h.length&&h[0]===f&&f.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h)}else if(h===b.defs.primitive.noexpand||
h.proxy&&h.original===b.defs.primitive.noexpand)c=!0;else if(h instanceof n||h.proxy&&h.original instanceof n)d.push(f);else{h=a.mouth.expand(f,a.mouth);if(1==h.length&&h[0]==-f&&f.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h)}}else d.push(f)}else return this.invalid=!0,a.mouth.loadState(e),[this]}return ca.call(this,"command"==d[0].type&&"command"==d[1].type||"character"==d[0].type&&d[0].cat==d[1].cat,a.mouth,a.scopes,e)}),ifdim:new n("ifdim",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat("dimension");if(!d)return this.invalid=!0,[this];d=d.sp.value+12*d.em.value;var c=a.mouth.eat();if(!c||c.cat==b.cats.active&&("<"==c["char"]||"="==c["char"]||">"==c["char"]))return this.invalid=!0,a.mouth.loadState(e),[this];var f=a.mouth.eat("dimension");if(!f)return this.invalid=!0,a.mouth.loadState(e),[this];f=f.sp.value+
12*f.em.value;return ca.call(this,"<"==c["char"]?d<f:"="==c["char"]?d==f:d>f,a.mouth,a.scopes,e)}),ifeof:new n("ifeof",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return ca.call(this,!0,a.mouth,a.scopes,b)}),iffalse:new n("iffalse",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
return ca.call(this,!1,a.mouth,a.scopes,b)}),ifodd:new n("ifodd",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var d=a.mouth.eat("integer");return d?ca.call(this,1==d.value%2,a.mouth,a.scopes,b):(this.invalid=!0,[this])}),ifnum:new n("ifnum",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();
a.mouth.saveState(e);var d=a.mouth.eat("integer");if(!d)return this.invalid=!0,[this];var c=a.mouth.eat();if(!c||c.cat==b.cats.active&&("<"==c["char"]||"="==c["char"]||">"==c["char"]))return this.invalid=!0,a.mouth.loadState(e),[this];var f=a.mouth.eat("integer");return f?ca.call(this,"<"==c["char"]?d.value<f.value:"="==c["char"]?d.value==f.value:d.value>f.value,a.mouth,a.scopes,e):(this.invalid=!0,a.mouth.loadState(e),[this])}),ifhmode:new n("ifhmode",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return ca.call(this,!1,a.mouth,a.scopes,b)}),ifinner:new n("ifinner",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return ca.call(this,"inline"==a.style,a.mouth,a.scopes,b)}),ifmmode:new n("ifmmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return ca.call(this,!0,a.mouth,a.scopes,b)}),iftrue:new n("iftrue",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return ca.call(this,!0,a.mouth,a.scopes,b)}),ifvmode:new n("ifvmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();
a.mouth.saveState(b);return ca.call(this,!1,a.mouth,a.scopes,b)}),ifvoid:new n("ifvoid",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return ca.call(this,!0,a.mouth,a.scopes,b)}),ifx:new n("ifx",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d)return this.invalid=
!0,[this];var c=a.mouth.eat("pre space");if(!c)return this.invalid=!0,a.mouth.loadState(e),[this];(d="command"==d.type?a.scopes.last.defs.primitive[d.name]||a.scopes.last.defs.macros[d.name]:"character"==d.type&&d.cat==b.cats.active?a.scopes.last.defs.active[d["char"]]:d)&&d.proxy&&(d=d.original);(c="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:"character"==c.type&&c.cat==b.cats.active?a.scopes.last.defs.active[c["char"]]:c)&&c.proxy&&(c=c.original);if(!d&&
!c)return ca.call(this,!0,a.mouth,a.scopes,e);if(!d||!c||d.type!=c.type)return ca.call(this,!1,a.mouth,a.scopes,e);if("character"==d.type)return ca.call(this,d["char"]==c["char"]&&d.cat==c.cat,a.mouth,a.scopes,e);if("primitive"==d.type)return ca.call(this,d===c,a.mouth,a.scopes,e);if(d.parameters.length!=c.parameters.length||d.replacement.length!=c.replacement.length)return ca.call(this,!1,a.mouth,a.scopes,e);for(var f=0,h=d.parameters.length;f<h;f++)if("character"!=d.parameters[f].type||d.parameters[f]["char"]!=
c.parameters[f]["char"]||d.parameters[f].cat!=c.parameters[f].cat)if("command"!=d.parameters[f].type||d.parameters[f].name!=c.parameters[f].name)return ca.call(this,!1,a.mouth,a.scopes,e);f=0;for(h=d.replacement.length;f<h;f++)if("character"!=d.replacement[f].type||d.replacement[f]["char"]!=c.replacement[f]["char"]||d.replacement[f].cat!=c.replacement[f].cat)if("command"!=d.replacement[f].type||d.replacement[f].name!=c.replacement[f].name)return ca.call(this,!1,a.mouth,a.scopes,e);return ca.call(this,
!0,a.mouth,a.scopes,e)}),it:new n("it",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"it"});return[]}),kern:new n("kern",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:b});return[]}),lccode:new n("lccode",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");if(b||0>b.value)return[a.scopes.last.lc[b.value]=a.scopes.last.lc[b.value]||new h(0)];this.invalid=!0;return[this]}),left:new n("left",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,
a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&"character"==d.type&&b.delims.includes(d.code)&&(d.cat==b.cats.all||d.cat==b.cats.letter)){new a.Scope;a.scopes.last.delimited=!0;a.scopes.last.leftDelimiter=d["char"];a.scopes.last.nullDelimiterSpace=new t(a.scopes.last.registers.named.nulldelimiterspace);a.openGroups.push(this);a.contexts.push("scope");a.scopes.last.tokens.push(this);a.scopes.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol","char":d["char"],code:d.code},
subscript:null,superscript:null});this.ignore=!0;break}else return this.invalid=!0,a.mouth.loadState(e),[this]}}),let:new n("let",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];if("character"==d.type)if(a.catOf(d["char"])==b.cats.active){var c="active";d=d["char"]}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("command"==
d.type&&(c="macro",d=d.name,d in a.scopes.last.defs.primitive||d in b.parameters))return this.invalid=!0,a.mouth.loadState(e),[this];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==b.cats.all||f&&a.mouth.revert();if(f=a.mouth.eat())if("command"==f.type||"character"==f.type&&f.cat==b.cats.active)if(e="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f.name])e=new ia(e,"primitive"==e.type||e.isLet);else{if("command"==
f.type&&"macro"==c&&(f=a.scopes.last.registers.named[f.name])){if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){b.registers.named[d]=f;delete b.defs.macros[d];c=0;for(var h=a.scopes.length;c<h;c++)a.scopes[c].registers.named[d]=f,delete a.scopes[c].defs.macros[d]}else a.scopes.last.registers.named[d]=f,delete a.scopes.last.defs.macros[d];a.toggles.global=!1;return[]}}else e=new ia(new ia([f]),!0);else return this.invalid=!0,
a.mouth.loadState(e),[this];if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==c)for(e?b.defs.macros[d]=e:delete b.defs.macros[d],delete b.registers.named[d],c=0,h=a.scopes.length;c<h;c++)e?a.scopes[c].defs.macros[d]=e:delete a.scopes[c].defs.macros[d],delete a.scopes[c].registers.named[d];else for(e?b.defs.active[d]=e:delete b.defs.active[d],delete b.registers.named[d],c=0,h=a.scopes.length;c<h;c++)e?a.scopes[c].defs.active[d]=
e:delete a.scopes[c].defs.active[d],delete a.scopes[c].registers[d];else e?a.scopes.last.defs["macro"==c?"macros":"active"][d]=e:delete a.scopes.last.defs["macro"==c?"macros":"active"][d],delete a.scopes.last.registers.named[d];a.toggles.global=!1;return[]}),limits:new n("limits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:!0,token:this});return[]}),lower:new n("lower",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];b.sp.value*=-1;b.em.value*=-1;a.tokens.push({type:"vkern",dimen:b});return[]}),lowercase:new n("lowercase",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat("pre space");if(!d||d.cat!=b.cats.open)return this.invalid=!0,a.mouth.loadState(e),
[this];d=[];for(var c=1;;){var f=a.mouth.eat("pre space");if(f)if("character"==f.type&&f.cat==b.cats.open)c++,d.push(f);else if("character"==f.type&&f.cat==b.cats.close)if(c--,0<c)d.push(f);else break;else d.push(f);else return this.invalid=!0,a.mouth.loadState(e),[this]}e=0;for(c=d.length;e<c;e++)"character"==d[e].type&&a.scopes.last.lc[d[e].code]&&0<a.scopes.last.lc[d[e].code].value&&(d[e].code=a.scopes.last.lc[d[e].code].value,d[e]["char"]=String.fromCharCode(d[e].code));return d}),mathbin:new n("mathbin",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:2,token:this});return[]}),mathchar:new n("mathchar",function(a){var e=a.mouth.eat("integer");if(!e||0>e.value)return this.invalid=!0,[this];if(65536>e.value)var d=0;else if(524288>e.value){var c=e.value%65536;d=(e.value-c)/65536;e.value=c}else d=0;a.mouth.queue.unshift({type:"character",cat:b.cats.all,"char":String.fromCharCode(e.value),code:e.value,
forcedMathCode:d});return[]}),mathchardef:new n("mathchardef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(d&&"command"==d.type){if(d.name in b.defs.primitive||d.name in b.parameters)return this.invalid=!0,a.mouth.loadState(e),[!0];var c=a.mouth.eat();c&&"character"==c.type&&"="==c["char"]&&c.cat==b.cats.all||c&&a.mouth.revert();c=a.mouth.eat("integer");if(!c||
0>c.value)return this.invalid=!0,a.mouth.loadState(e),[!0];if(65536>c.value)e=0;else if(524288>c.value){var f=c.value%65536;e=(c.value-f)/65536;c.value=f}else e=0;c=new ia([{type:"character",cat:b.cats.all,"char":String.fromCharCode(c.value),code:c.value,forcedMathCode:e}],[]);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(b.defs.macros[d.name]=c,delete b.registers.named[d.name],e=0,f=a.scopes.length;e<f;e++)a.scopes[e].defs.macros[d.name]=
c,delete a.scopes[e].registers.named[d.name];else a.scopes.last.defs.macros[d.name]=c,delete a.scopes.last.registers.named[d.name];a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(e),[!0]}),mathchoice:new n("mathchoice",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b={type:"command",nameType:"command",escapeChar:this.escapeChar,name:"mathchoice",recognized:!0};a.contexts.push({toString:function(){return"mathchoice"},
token:b,current:0,failed:function(){this.token.invalid=!0;a.contexts.pop()},succeeded:function(){a.contexts.pop();this.token.type="mathchoice";this.token.groups=a.scopes.last.tokens.splice(a.scopes.last.tokens.length-4,4);this.token.ignore=!1}});a.tokens.push(b);b.ignore=!0}),mathclose:new n("mathclose",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:5,token:this});return[]}),mathcode:new n("mathcode",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var e=a.mouth.eat("integer");if(e){if(0>e.value)return a.mouth.revert(),this.invalid=!0,[this];if(!(e.value in b.mathcodes)){b.mathcodes[e.value]=new h(b.mathcodes.ord,0,8);for(var d=0,c=a.scopes.length;d<c;d++)a.scopes[d].mathcodes[e.value]=new h((0==d?b:a.scopes[d-1]).mathcodes[e.value])}return[a.scopes.last.mathcodes[e.value]]}this.invalid=!0;return[this]}),mathinner:new n("mathinner",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"inner",token:this});return[]}),mathop:new n("mathop",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:1,token:this});return[]}),mathopen:new n("mathopen",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",
value:4,token:this});return[]}),mathord:new n("mathord",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:0,token:this});return[]}),mathpunct:new n("mathpunct",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:6,token:this});return[]}),mathrel:new n("mathrel",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:3,token:this});return[]}),message:new n("message",function(a){$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(d&&"character"==d.type&&d.cat==b.cats.open){for(var c=0,f=[];;)if(d=a.mouth.eat("pre space"))if("character"==d.type&&d.cat==b.cats.open)c++,f.push(d["char"]);else if("character"==d.type&&d.cat==b.cats.close){if(!c)break;c--;f.push(d["char"])}else"command"==
d.type?(f.push(d.escapeChar),f.push.apply(f,d.name.split(""))):f.push(d["char"]);else return this.invalid=!0,a.mouth.loadState(e),[this];C(f.join(""))}else return this.invalid=!0,[this]}),mkern:new n("mkern",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("mu dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:b});return[]}),month:new n("month",function(a){return[new h((new Date).getMonth()+1)]}),
mskip:new n("mskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("mu glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:b});return[]}),multiply:new n("multiply",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&
d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&d.register)if(d&&d.register){var c=a.mouth.eat();if(!c||"character"!=c.type||"b"!=c["char"]&&"B"!=c["char"]||c.cat==b.cats.active)if(c)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(e),[this];else c=a.mouth.eat(),(!c||"character"!=c.type||"y"!=c["char"]&&"Y"!=c["char"]||c.cat==b.cats.active)&&a.mouth.revert(2);if(c=a.mouth.eat("integer"))if("integer"==d.type){d.value*=c.value;
e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.value=e.value;a.toggles.global=!1}else if("dimension"==d.type){d.sp.value*=c.value;d.em.value*=c.value;e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.sp.value=e.sp.value,d.em.value=e.em.value;a.toggles.global=!1}else if("mu dimension"==d.type){d.mu.value*=
c.value;e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.mu.value=e.mu.value;a.toggles.global=!1}else if("glue"==d.type){d.start.sp.value*=c.value;d.start.em.value*=c.value;"infinite dimension"==d.stretch.type?d.stretch.number.value*=c.value:(d.stretch.sp.value*=c.value,d.stretch.em.value*=c.value);"infinite dimension"==d.shrink.type?d.shrink.number.value*=c.value:(d.shrink.sp.value*=c.value,d.shrink.em.value*=
c.value);e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.start.sp.value=e.start.sp.value,d.start.em.value=e.start.em.value,d.stretch="infinite dimension"==e.stretch.type?new z(e.stretch.number.value,e.stretch.magnitude.value):new t(e.stretch.sp.value,e.stretch.em.value),d.shrink="infinite dimension"==e.shrink.type?new z(e.shrink.number.value,e.shrink.magnitude.value):new t(e.shrink.sp.value,e.shrink.em.value);
a.toggles.global=!1}else{if("mu glue"==d.type){d.start.mu.value*=c.value;"infinite dimension"==d.stretch.type?d.stretch.number.value*=c.value:d.stretch.mu.value*=c.value;"infinite dimension"==d.shrink.type?d.shrink.number.value*=c.value:d.shrink.mu.value*=c.value;e=d;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;d.parent;)d=d.parent,d.start.mu.value=e.start.mu.value,d.stretch="infinite dimension"==e.stretch.type?new z(e.stretch.number.value,
e.stretch.magnitude.value):new F(e.stretch.mu.value),d.shrink="infinite dimension"==e.shrink.type?new z(e.shrink.number.value,e.shrink.magnitude.value):new F(e.shrink.mu.value);a.toggles.global=!1}}else return this.invalid=!0,a.mouth.loadState(e),[this];break}else return this.invalid=!0,a.mouth.loadState(e),[this];else return this.invalid=!0,a.mouth.loadState(e),[this]}return[]}),muskip:new n("muskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];var e=a.mouth.eat("integer");if(!e||0>e.value)return this.invalid=!0,[this];if(!b.registers.muskip[e.value]){b.registers.muskip[e.value]=new va(new F(0,0),new F(0,0),new F(0,0));for(var d=0,c=a.scopes.length;d<c;d++)a.scopes[d].registers.muskip[e.value]=new va((d?a.scopes[d-1]:b).registers.muskip[e.value])}return[a.scopes.last.registers.muskip[e.value]]}),muskipdef:new n("muskipdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];
$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if("command"==d.type){if(d.name in b.defs.primitive||d.name in b.parameters)return this.invalid=!0,a.mouth.loadState(e),[!0];var c=a.mouth.eat();c&&"character"==c.type&&"="==c["char"]&&c.cat==b.cats.all||c&&a.mouth.revert();c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(e),[!0];d=d.name;c=c.value;if(!b.registers.muskip[c]){b.registers.muskip[c]=new va(new F(0),new F(0),new F(0));e=0;for(var f=
a.scopes.length;e<f;e++)a.scopes[e].registers.muskip[c]=new va((e?a.scopes[e-1]:b).registers.muskip[c])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(b.registers.named[d]=b.registers.muskip[c],delete b.defs.macros[d],e=0,f=a.scopes.length;e<f;e++)a.scopes[e].registers.named[d]=a.scopes[e].registers.muskip[c],delete a.scopes[e].defs.macros[d];else a.scopes.last.registers.named[d]=a.scopes.last.registers.muskip[c],delete a.scopes.last.defs.macros[d]}else return this.invalid=
!0,a.mouth.loadState(countDefSym),[!0]}),noalign:new n("noalign",function(a){this.invalid=!0;return[this]}),noexpand:new n("noexpand",function(a){var e=a.mouth.eat();if(!e)return this.invalid=!0,[this];a.mouth.revert();return"command"==e.type||"character"==e.type&&e.cat==b.cats.active?(this.invalid=!0,[this]):[]}),nolimits:new n("nolimits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:!1,token:this});
return[]}),nonscript:new n("nonscript",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",isNonScript:!0});return[]}),normalfont:new n("normalfont",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"nm"});return[]}),number:new n("number",function(a){a=a.mouth.eat("integer");return a?a.value.toString().split("").map(function(a){return{type:"character",
cat:b.cats.all,"char":a,code:a.charCodeAt(0)}}):(this.invalid=!0,[this])}),of:new n("of",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];if(a.scopes.last.root){var b=a.scopes.last.tokens.indexOf(a.scopes.last.root);a.tokens.push({type:"family modifier",value:"rad",index:a.scopes.last.tokens.splice(b,a.scopes.last.tokens.length-b+1).slice(1),token:this});a.scopes.last.root=!1;return[]}this.invalid=!0;return[this]}),omit:new n("omit",function(a){this.invalid=
!0;return[this]}),or:new n("or",function(a){this.invalid=!0;return[this]}),over:new n("over",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracLeftDelim=a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth="from font";a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),overline:new n("overline",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"over",token:this});return[]}),overwithdelims:new n("overwithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),
a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&"character"==d.type&&b.delims.includes(d.code)&&(d.cat==b.cats.all||d.cat==b.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=d["char"];break}else a.scopes.last.fracLeftDelim=d["char"];else return this.invalid=!0,a.mouth.loadState(e),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth="from font";a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=
a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),phantom:new n("phantom",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"phantom",index:[],token:this});return[]}),raise:new n("raise",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"vkern",dimen:b});
return[]}),relax:new n("relax",function(a){return"superscript"==a.contexts.last||"subscript"==a.contexts.last?(this.invalid=!0,[this]):[]}),right:new n("right",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last||!a.openGroups.length||!a.scopes.last.delimited||a.scopes.last.isHalign||a.scopes.last.isHalignCell||a.scopes.last.semisimple)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||
"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&"character"==d.type&&b.delims.includes(d.code)&&(d.cat==b.cats.all||d.cat==b.cats.letter)){if("scope"!=a.contexts.last)return this.invalid=!0,a.mouth.loadState(e),[this];a.openGroups.pop();a.contexts.pop();e=a.scopes.last.tokens;a.scopes.last.root&&(a.scopes.last.root.invalid=!0);if(a.scopes.last.isFrac)a.scopes.last.fracNumerator.shift(),a.scopes.last.fracNumerator.shift(),
a.scopes[a.scopes.length-2].tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:e,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new t(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null,delimited:!0,nullDelimiterSpace:new t(a.scopes.last.registers.named.nulldelimiterspace),delims:[a.scopes.last.leftDelimiter,d["char"]]}),a.scopes.pop();
else{e.shift();e.shift();var c=a.scopes.last.leftDelimiter;a.scopes.pop();a.scopes.last.tokens.push({type:"atom",atomType:"inner",nucleus:e,superscript:null,subscript:null,delimited:!0,nullDelimiterSpace:new t(a.scopes.last.registers.named.nulldelimiterspace),delims:[c,d["char"]]})}break}else return this.invalid=!0,a.mouth.loadState(e),[this]}}),rm:new n("rm",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",
value:"rm"});return[]}),romannumeral:new n("romannumeral",function(a){var e=a.mouth.eat("integer");if(!e)return this.invalid=!0,[this];if(0>=e.value)return this.invalid=!0,a.mouth.revert(),[this];var d="";e=e.value;d=~~(e/1E3);e%=1E3;a=~~(e/100);e%=100;var c=~~(e/10);e%=10;d=Array(d+1).join("m");d=3>a?d+Array(a+1).join("c"):4==a?d+"cd":9>a?d+("d"+Array(a%5+1).join("c")):d+"cm";d=3>c?d+Array(c+1).join("x"):4==c?d+"xl":9>c?d+("l"+Array(c%5+1).join("x")):d+"xc";d=3>e?d+Array(e+1).join("i"):4==e?d+"iv":
9>e?d+("v"+Array(e%5+1).join("i")):d+"ix";return d.split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}})}),scriptscriptstyle:new n("scriptscriptstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"scriptscriptstyle"});return[]}),scriptstyle:new n("scriptstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"font modifier",value:"scriptstyle"});return[]}),show:new n("show",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var e=a.mouth.string,d=a.mouth.eat();if(!d)return this.invalid=!0,[this];e='"'+this.escapeChar+this.name+e.substring(0,e.length-a.mouth.string.length)+'":\n';if("command"==d.type||"character"==d.type&&d.cat==b.cats.active){var c="command"==d.type?a.scopes.last.defs.primitive[d.name]||a.scopes.last.defs.macros[d.name]:
a.scopes.last.defs.active[d["char"]];if(c){if("primitive"==c.type||c.isLet&&"primitive"==c.original.type)return C(e+d.escapeChar+d.name+"="+String.fromCharCode(a.scopes.last.registers.named.escapechar.value)+(c.original||c).name),[];if(c.isLet)e+=(d.escapeChar+d.name||d["char"])+"=",d=c.original.replacement[0];else{c.proxy&&(c=c.original);e+=(d.escapeChar+d.name||d["char"])+"=macro:\n";d=a=0;for(var f=c.parameters.length;d<f;d++)e="character"==c.parameters[d].type&&c.parameters[d].cat!=b.cats.param?
e+c.parameters[d]["char"]:"character"==c.parameters[d].type?e+(c.parameters[d]["char"]+ ++a):e+(c.parameters[d].escapeChar+c.parameters[d].name);e+="->";d=0;for(f=c.replacement.length;d<f;d++)e="character"==c.replacement[d].type?e+c.replacement[d]["char"]:e+(c.replacement[d].escapeChar+c.replacement[d].name);C(e);return[]}}else return C(e+d.escapeChar+d.name+"=undefined."),[]}switch(d.cat){case b.cats.open:C(e+"begin-group character "+d["char"]+".");break;case b.cats.close:C(e+"end-group character "+
d["char"]+".");break;case b.cats.math:C(e+"math shift character "+d["char"]+".");break;case b.cats.alignment:C(e+"alignment tab character "+d["char"]+".");break;case b.cats.param:C(e+"macro parameter character "+d["char"]+".");break;case b.cats["super"]:C(e+"superscript character "+d["char"]+".");break;case b.cats.sub:C(e+"subscript character "+d["char"]+".");break;case b.cats.whitespace:C(e+"blank space "+d["char"]+".");break;case b.cats.letter:C(e+"the letter "+d["char"]+".");break;default:C(e+
"the character "+d["char"]+".")}return[]}),showthe:new n("showthe",function(a){$jscomp.initSymbol();var e=Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else{if(d&&d.register)return"integer"==d.type?C(d.value+"."):"dimension"==d.type?(e=Math.round(d.sp.value/65536*1E5)/1E5,e+=Math.round(d.em.value/65536*1E5)/1E5*12,C(e+(Number.isInteger(e)?".0pt.":
"pt."))):"mu dimension"==d.type?(e=Math.round(d.mu.value/65536*1E5)/1E5,C(e+(Number.isInteger(e)?".0mu.":"mu."))):"glue"==d.type?(e=Math.round(d.start.sp.value/65536*1E5)/1E5,e+=Math.round(d.start.em.value/65536*1E5)/1E5*12,a=e+(Number.isInteger(e)?".0pt":"pt"),d.stretch instanceof t&&(d.stretch.sp.value||d.stretch.em.value)?(e=Math.round(d.stretch.sp.value/65536*1E5)/1E5,e+=Math.round(d.stretch.em.value/65536*1E5)/1E5*12,a+=" plus "+e+(Number.isInteger(e)?".0pt":"pt")):d.stretch instanceof z&&d.stretch.number.value&&
(e=Math.round(d.stretch.number.value/65536*1E5)/1E5,a+=" plus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.stretch.magnitude.value).join("l")),d.shrink instanceof t&&(d.shrink.sp.value||d.shrink.em.value)?(e=Math.round(d.shrink.sp.value/65536*1E5)/1E5,e+=Math.round(d.shrink.em.value/65536*1E5)/1E5*12,a+=" minus "+e+(Number.isInteger(e)?".0pt":"pt")):d.shrink instanceof z&&d.shrink.number.value&&(e=Math.round(d.shrink.number.value/65536*1E5)/1E5,a+=" minus "+e+(Number.isInteger(e)?".0":"")+"fil"+
Array(d.shrink.magnitude.value).join("l")),C(a+".")):"mu glue"==d.type&&(e=Math.round(d.start.mu.value/65536*1E5)/1E5,a=e+(Number.isInteger(e)?".0mu":"mu"),d.stretch instanceof F&&d.stretch.mu.value?(e=Math.round(d.stretch.mu.value/65536*1E5)/1E5,a+=" plus "+e+(Number.isInteger(e)?".0mu":"mu")):d.stretch instanceof z&&d.stretch.number.value&&(e=Math.round(d.stretch.number.value/65536*1E5)/1E5,a+=" plus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.stretch.magnitude.value).join("l")),d.shrink instanceof
F&&d.shrink.mu.value?(e=Math.round(d.shrink.mu.value/65536*1E5)/1E5,a+=" minus "+e+(Number.isInteger(e)?".0mu":"mu")):d.shrink instanceof z&&d.shrink.number.value&&(e=Math.round(d.shrink.number.value/65536*1E5)/1E5,a+=" minus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.shrink.magnitude.value).join("l")),C(a+".")),[];this.invalid=!0;a.mouth.loadState(e);return[this]}}}),skip:new n("skip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var e=
a.mouth.eat("integer");if(!e||0>e.value)return this.invalid=!0,[this];if(!b.registers.skip[e.value]){b.registers.skip[e.value]=new X(new t(0,0),new t(0,0),new t(0,0));for(var d=0,c=a.scopes.length;d<c;d++)a.scopes[d].registers.skip[e.value]=new X((d?a.scopes[d-1]:b).registers.skip[e.value])}return[a.scopes.last.registers.skip[e.value]]}),skipdef:new n("skipdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();
a.mouth.saveState(e);var d=a.mouth.eat();if("command"==d.type){if(d.name in b.defs.primitive||d.name in b.parameters)return this.invalid=!0,a.mouth.loadState(e),[!0];var c=a.mouth.eat();c&&"character"==c.type&&"="==c["char"]&&c.cat==b.cats.all||c&&a.mouth.revert();c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(e),[!0];d=d.name;c=c.value;if(!b.registers.skip[c]){b.registers.skip[c]=new X(new t(0,0),new t(0,0),new t(0,0));e=0;for(var f=a.scopes.length;e<f;e++)a.scopes[e].registers.skip[c]=
new X((e?a.scopes[e-1]:b).registers.skip[c])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(b.registers.named[d]=b.registers.skip[c],delete b.defs.macros[d],e=0,f=a.scopes.length;e<f;e++)a.scopes[e].registers.named[d]=a.scopes[e].registers.skip[c],delete a.scopes[e].defs.macros[d];else a.scopes.last.registers.named[d]=a.scopes.last.registers.skip[c],delete a.scopes.last.defs.macros[d]}else return this.invalid=!0,a.mouth.loadState(countDefSym),
[!0]}),sl:new n("sl",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"sl"});return[]}),span:new n("span",function(a){"mathchoice"==a.contexts.last&&a.contexts.last.failed();for(var e=!1,d=a.scopes.length-1;0<=d;d--)if(a.scopes[d].isHalignCell){e=a.scopes[d];break}if(!e)return this.invalid=!0,[this];e=e.parentScope;var c=e.cellData[e.cellData.length-1];c[c.length-1].omit&&(this.postPreamble=!0);if(this.postPreamble&&
!a.scopes.last.isHalignCell||"scope"!=a.contexts.last)return this.invalid=!0,[this];if(!this.postPreamble){var f=-1;d=0;for(a=c.length;d<a;d++)f+=c[d].span;if(e.preamble[f])var h=e.preamble[f][1];else if(~e.repeatPreambleAt)h=e.preamble.slice(e.repeatPreambleAt,e.preamble.length),h=h[(f-e.repeatPreambleAt)%h.length][1];else return this.invalid=!0,[this];if(!e.preamble[++f]&&!~e.repeatPreambleAt)return this.invalid=!0,[this];e=[];d=0;for(a=h.length;d<a;d++){f={};for(var n in h[d])f[n]=h[d][n];e.push(f)}this.postPreamble=
!0;return e.concat(this)}a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.contexts.pop();h=a.scopes.last.tokens;a.scopes.last.isFrac?(c[c.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:h,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new t(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),
c[c.length-1].content=c[c.length-1].content.concat(h));$jscomp.initSymbol();d=Symbol();a.mouth.saveState(d);c[c.length-1].omit=!1;for(c[c.length-1].span++;;)if(f=a.mouth.eat(),!f){a.mouth.loadState(d);break}else if("character"==f.type&&f.cat!=b.cats.active){a.mouth.loadState(d);break}else if("command"==f.type||"character"==f.type&&f.cat==b.cats.active){if(f.name in a.scopes.last.registers.named){a.mouth.loadState(d);break}var k="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:
a.scopes.last.defs.active[f["char"]];if(!k){a.mouth.loadState(d);break}if(k===b.defs.primitive.the||k.proxy&&k.original===b.defs.primitive.the||k===b.defs.primitive.expandafter||k.proxy&&k.original===b.defs.primitive.expandafter||k===b.defs.primitive.number||k.proxy&&k.original===b.defs.primitive.number||k===b.defs.primitive.romannumeral||k.proxy&&k.original===b.defs.primitive.romannumeral||k===b.defs.primitive.csname||k.proxy&&k.original===b.defs.primitive.csname||k===b.defs.primitive.string||k.proxy&&
k.original===b.defs.primitive.string||k===b.defs.primitive["if"]||k.isLet&&k.original===b.defs.primitive["if"]||k===b.defs.primitive.ifcase||k.isLet&&k.original===b.defs.primitive.ifcase||k===b.defs.primitive.ifcat||k.isLet&&k.original===b.defs.primitive.ifcat||k===b.defs.primitive.ifdim||k.isLet&&k.original===b.defs.primitive.ifdim||k===b.defs.primitive.ifeof||k.isLet&&k.original===b.defs.primitive.ifeof||k===b.defs.primitive.iffalse||k.isLet&&k.original===b.defs.primitive.iffalse||k===b.defs.primitive.ifodd||
k.isLet&&k.original===b.defs.primitive.ifodd||k===b.defs.primitive.ifnum||k.isLet&&k.original===b.defs.primitive.ifnum||k===b.defs.primitive.ifhmode||k.isLet&&k.original===b.defs.primitive.ifhmode||k===b.defs.primitive.ifinner||k.isLet&&k.original===b.defs.primitive.ifinner||k===b.defs.primitive.ifmmode||k.isLet&&k.original===b.defs.primitive.ifmmode||k===b.defs.primitive.iftrue||k.isLet&&k.original===b.defs.primitive.iftrue||k===b.defs.primitive.ifvmode||k.isLet&&k.original===b.defs.primitive.ifvmode||
k===b.defs.primitive.ifvoid||k.isLet&&k.original===b.defs.primitive.ifvoid||k===b.defs.primitive.ifx||k.isLet&&k.original===b.defs.primitive.ifx){if(k=a.mouth.expand(f,a.mouth),1==k.length&&k[0]===f&&f.invalid){a.mouth.loadState(d);break}}else{if(k===b.defs.primitive.omit||k.proxy&&k.original===b.defs.primitive.omit){c[c.length-1].omit=!0;break}if("primitive"==k.type||k.proxy&&"primitive"==k.original.type){a.mouth.loadState(d);break}k=a.mouth.expand(f,a.mouth);if(1==k.length&&k[0]==-f&&f.invalid){a.mouth.loadState(d);
break}}a.mouth.queue.unshift.apply(a.mouth.queue,k)}a.contexts.push("scope");new a.Scope;a.scopes.last.isHalignCell=!0;if(!c[c.length-1].omit){f=-1;d=0;for(a=c.length;d<a;d++)f+=c[d].span;e.preamble[f]?h=e.preamble[f][0]:~e.repeatPreambleAt&&(h=e.preamble.slice(e.repeatPreambleAt,e.preamble.length),h=h[(f-e.repeatPreambleAt)%h.length][0]);e=[];d=0;for(a=h.length;d<a;d++){f={};for(n in h[d])f[n]=h[d][n];e.push(f)}return e}}),radical:new n("sqrt",function(a){if("superscript"==a.contexts.last||"subscript"==
a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"rad",index:[],token:this});return[]}),root:new n("root",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last||a.scopes.last.root)return this.invalid=!0,[this];this.ignore=!0;a.scopes.last.root=this;return[this]}),string:new n("string",function(a){var e=a.mouth.eat();if(!e)return this.invalid=!0,[this];if("character"==e.type)return[{type:"character",cat:b.cats.all,"char":e["char"],code:e.code}];
if("command"==e.type)return(String.fromCharCode(a.scopes.last.registers.named.escapechar.value)+e.name).split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}});this.invalid=!0;a.mouth.revert();return[this]}),textstyle:new n("textstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"textstyle"});return[]}),the:new n("the",function(a){$jscomp.initSymbol();var e=
Symbol();for(a.mouth.saveState(e);;){var d=a.mouth.eat();if(d&&("command"==d.type||"character"==d.type&&d.cat==b.cats.active))d=a.mouth.expand(d,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,d);else if(d&&d.register){if("integer"==d.type)return d.value.toString().split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}});if("dimension"==d.type)return e=Math.round(d.sp.value/65536*1E5)/1E5,e+=Math.round(d.em.value/65536*1E5)/1E5*12,(e+(Number.isInteger(e)?
".0pt":"pt")).split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}});if("mu dimension"==d.type)return e=Math.round(d.mu.value/65536*1E5)/1E5,(e+(Number.isInteger(e)?".0mu":"mu")).split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}});if("glue"==d.type)return a="",e=Math.round(d.start.sp.value/65536*1E5)/1E5,e+=Math.round(d.start.em.value/65536*1E5)/1E5*12,a=e+(Number.isInteger(e)?".0pt":"pt"),d.stretch instanceof
t&&(d.stretch.sp.value||d.stretch.em.value)?(e=Math.round(d.stretch.sp.value/65536*1E5)/1E5,e+=Math.round(d.stretch.em.value/65536*1E5)/1E5*12,a+=" plus "+e+(Number.isInteger(e)?".0pt":"pt")):d.stretch instanceof z&&d.stretch.number.value&&(e=Math.round(d.stretch.number.value/65536*1E5)/1E5,a+=" plus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.stretch.magnitude.value).join("l")),d.shrink instanceof t&&(d.shrink.sp.value||d.shrink.em.value)?(e=Math.round(d.shrink.sp.value/65536*1E5)/1E5,e+=Math.round(d.shrink.em.value/
65536*1E5)/1E5*12,a+=" minus "+e+(Number.isInteger(e)?".0pt":"pt")):d.shrink instanceof z&&d.shrink.number.value&&(e=Math.round(d.shrink.number.value/65536*1E5)/1E5,a+=" minus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.shrink.magnitude.value).join("l")),a.split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}});if("mu glue"==d.type)return a="",e=Math.round(d.start.mu.value/65536*1E5)/1E5,a=e+(Number.isInteger(e)?".0mu":"mu"),d.stretch instanceof F&&d.stretch.mu.value?
(e=Math.round(d.stretch.mu.value/65536*1E5)/1E5,a+=" plus "+e+(Number.isInteger(e)?".0mu":"mu")):d.stretch instanceof z&&d.stretch.number.value&&(e=Math.round(d.stretch.number.value/65536*1E5)/1E5,a+=" plus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.stretch.magnitude.value).join("l")),d.shrink instanceof F&&d.shrink.mu.value?(e=Math.round(d.shrink.mu.value/65536*1E5)/1E5,a+=" minus "+e+(Number.isInteger(e)?".0mu":"mu")):d.shrink instanceof z&&d.shrink.number.value&&(e=Math.round(d.shrink.number.value/
65536*1E5)/1E5,a+=" minus "+e+(Number.isInteger(e)?".0":"")+"fil"+Array(d.shrink.magnitude.value).join("l")),a.split("").map(function(a){return{type:"character",cat:b.cats.all,"char":a,code:a.charCodeAt(0)}})}else return this.invalid=!0,a.mouth.loadState(e),[this]}}),time:new n("time",function(a){a=new Date;return[new h(60*a.getHours()+a.getMinutes())]}),uccode:new n("uccode",function(a){var b=a.mouth.eat("integer");if(b||0>b.value)return[a.scopes.last.uc[b.value]=a.scopes.last.uc[b.value]||new h(0)];
this.invalid=!0;return[this]}),underline:new n("underline",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"under",token:this});return[]}),uppercase:new n("uppercase",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d||d.cat!=b.cats.open)return this.invalid=!0,
a.mouth.loadState(e),[this];d=[];for(var c=1;;){var f=a.mouth.eat("pre space");if(f)if("character"==f.type&&f.cat==b.cats.open)c++,d.push(f);else if("character"==f.type&&f.cat==b.cats.close)if(c--,0<c)d.push(f);else break;else d.push(f);else return this.invalid=!0,a.mouth.loadState(e),[this]}e=0;for(c=d.length;e<c;e++)"character"==d[e].type&&a.scopes.last.uc[d[e].code]&&0<a.scopes.last.uc[d[e].code].value&&(d[e].code=a.scopes.last.uc[d[e].code].value,d[e]["char"]=String.fromCharCode(d[e].code));return d}),
vbox:new n("vbox",function(a){$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);for(var d,c;;){var f=a.mouth.eat();if(!f)return this.invalid=!0,[this];if("command"==f.type||"character"==f.type&&f.cat==b.cats.active){var h="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(h&&(h===b.defs.primitive.relax||h.proxy&&h.original===b.defs.primitive.relax))break;f=a.mouth.expand(f,a.mouth);a.mouth.queue.unshift.apply(a.mouth.queue,
f)}else if("character"!=f.type||"t"!=f["char"]&&"T"!=f["char"])if("character"!=f.type||"s"!=f["char"]&&"S"!=f["char"])if("character"==f.type&&f.cat==b.cats.open){a.mouth.revert();break}else return this.invalid=!0,a.mouth.loadState(e),[this];else{d=a.mouth.eat();f=a.mouth.eat();h=a.mouth.eat();var n=a.mouth.eat(),k=a.mouth.eat();if(!d||"character"!=d.type||"p"!=d["char"]&&"P"!=d["char"]||d.cat==b.cats.active||!f||"character"!=f.type||"r"!=f["char"]&&"R"!=f["char"]||f.cat==b.cats.active||!h||"character"!=
h.type||"e"!=h["char"]&&"E"!=h["char"]||h.cat==b.cats.active||!n||"character"!=n.type||"a"!=n["char"]&&"A"!=n["char"]||n.cat==b.cats.active||!k||"character"!=k.type||"d"!=k["char"]&&"D"!=k["char"]||k.cat==b.cats.active||!(f=a.mouth.eat("dimension")))return this.invalid=!0,a.mouth.loadState(e),[this];d=f;break}else if(c=a.mouth.eat("pre space"),c&&"character"==c.type&&("o"==c["char"]||"O"==f["char"])&&f.cat!=b.cats.active&&(f=a.mouth.eat("dimension"))){c=f;break}else return this.invalid=!0,a.mouth.loadState(e),
[this]}f=a.mouth.preview();if(!f||"character"!=f.type||f.cat!=b.cats.open)return this.invalid=!0,a.mouth.loadState(e),[this];c||d||(d=new t(0,0));a.tokens.push({type:"box wrapper",value:"vertical",to:c,spread:d,token:this});return[]}),vcenter:new n("vcenter",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"vcenter",token:this});return[]}),vfil:new n("vfil",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:new X(new t(0),new z(1,1),new t(0))});return[]}),vfill:new n("vfill",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:new X(new t(0),new z(1,2),new t(0))});return[]}),vrule:new n("vrule",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=
Symbol();a.mouth.saveState(e);for(var d=e=!1,c=!1;;){var f=a.mouth.eat();if(!f){a.mouth.revert();break}if("h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)if("d"!=f["char"]&&"D"!=f["char"]||f.cat==b.cats.active)if("w"!=f["char"]&&"W"!=f["char"]||f.cat==b.cats.active)a.mouth.revert();else if(f=a.mouth.eat("pre space"),!f||"i"!=f["char"]&&"I"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?2:1);else if(f=a.mouth.eat("pre space"),!f||"d"!=f["char"]&&"D"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?
3:2);else if(f=a.mouth.eat("pre space"),!f||"t"!=f["char"]&&"T"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?4:3);else if(f=a.mouth.eat("pre space"),!f||"h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?5:4);else if(f=a.mouth.eat("dimension")){c=f;continue}else a.mouth.revert(5);else if(f=a.mouth.eat("pre space"),!f||"e"!=f["char"]&&"E"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?2:1);else if(f=a.mouth.eat("pre space"),!f||"p"!=f["char"]&&"P"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?
3:2);else if(f=a.mouth.eat("pre space"),!f||"t"!=f["char"]&&"T"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?4:3);else if(f=a.mouth.eat("pre space"),!f||"h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?5:4);else if(f=a.mouth.eat("dimension")){d=f;continue}else a.mouth.revert(5);else if(f=a.mouth.eat("pre space"),!f||"e"!=f["char"]&&"E"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?2:1);else if(f=a.mouth.eat("pre space"),!f||"i"!=f["char"]&&"I"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?
3:2);else if(f=a.mouth.eat("pre space"),!f||"g"!=f["char"]&&"G"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?4:3);else if(f=a.mouth.eat("pre space"),!f||"h"!=f["char"]&&"H"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?5:4);else if(f=a.mouth.eat("pre space"),!f||"t"!=f["char"]&&"T"!=f["char"]||f.cat==b.cats.active)a.mouth.revert(f?6:5);else if(f=a.mouth.eat("dimension")){e=f;continue}else a.mouth.revert(6);break}c=c||new t(0,65536/30);a.tokens.push({type:"rule",ruleType:"v",height:e,depth:d,
width:c});return[]}),vskip:new n("vskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:b});return[]}),xdef:new n("xdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var e=Symbol();a.mouth.saveState(e);var d=a.mouth.eat();if(!d)return this.invalid=!0,[this];if("character"==
d.type)if(a.catOf(d["char"])==b.cats.active){var c="active";d=d["char"]}else return this.invalid=!0,a.mouth.loadState(e),[this];else if("command"==d.type&&(c="macro",d=d.name,d in a.scopes.last.defs.primitive||d in b.parameters))return this.invalid=!0,a.mouth.loadState(e),[this];for(var f=[],h=0,t=!1;;){var k=a.mouth.eat();if(k)if(k.cat==b.cats.open){a.mouth.revert();break}else if(k.cat==b.cats.param){var m=a.mouth.eat("pre space");if(m)if(m.cat==b.cats.open)t=!0,a.mouth.revert(),f.push({type:"character",
cat:b.cats.open,"char":m["char"],code:m.code});else if(48<m.code&&58>m.code&&m.cat==b.cats.all&&+m["char"]==h+1)f.push(k),h++;else return this.invalid=!0,a.mouth.loadState(e),[this];else return this.invalid=!0,a.mouth.loadState(e),[this]}else f.push(k);else return this.invalid=!0,a.mouth.loadState(e),[this]}h=0;m=[];for(var z=!1,H=!1;;)if(k=a.mouth.eat())if("character"!=k.type||k.cat!=b.cats.param||H)if("character"==k.type&&k.cat==b.cats.open)h++,m.push(k),z=!1;else if("character"==k.type&&k.cat==
b.cats.close){h--;if(0==h)break;m.push(k);z=!1}else if(z)m.push(k),z=!1;else if("command"==k.type||"character"==k.type&&k.cat==b.cats.active)if(k.name in a.scopes.last.registers.named)m.push(k);else{var l="command"==k.type?a.scopes.last.defs.primitive[k.name]||a.scopes.last.defs.macros[k.name]:a.scopes.last.defs.active[k["char"]];if(!l)return this.invalid=!0,a.mouth.loadState(e),[this];if(l===b.defs.primitive.the||l.proxy&&l.original===b.defs.primitive.the||l===b.defs.primitive.expandafter||l.proxy&&
l.original===b.defs.primitive.expandafter||l===b.defs.primitive.number||l.proxy&&l.original===b.defs.primitive.number||l===b.defs.primitive.romannumeral||l.proxy&&l.original===b.defs.primitive.romannumeral||l===b.defs.primitive.csname||l.proxy&&l.original===b.defs.primitive.csname||l===b.defs.primitive.string||l.proxy&&l.original===b.defs.primitive.string||l===b.defs.primitive["if"]||l.isLet&&l.original===b.defs.primitive["if"]||l===b.defs.primitive.ifcase||l.isLet&&l.original===b.defs.primitive.ifcase||
l===b.defs.primitive.ifcat||l.isLet&&l.original===b.defs.primitive.ifcat||l===b.defs.primitive.ifdim||l.isLet&&l.original===b.defs.primitive.ifdim||l===b.defs.primitive.ifeof||l.isLet&&l.original===b.defs.primitive.ifeof||l===b.defs.primitive.iffalse||l.isLet&&l.original===b.defs.primitive.iffalse||l===b.defs.primitive.ifodd||l.isLet&&l.original===b.defs.primitive.ifodd||l===b.defs.primitive.ifnum||l.isLet&&l.original===b.defs.primitive.ifnum||l===b.defs.primitive.ifhmode||l.isLet&&l.original===b.defs.primitive.ifhmode||
l===b.defs.primitive.ifinner||l.isLet&&l.original===b.defs.primitive.ifinner||l===b.defs.primitive.ifmmode||l.isLet&&l.original===b.defs.primitive.ifmmode||l===b.defs.primitive.iftrue||l.isLet&&l.original===b.defs.primitive.iftrue||l===b.defs.primitive.ifvmode||l.isLet&&l.original===b.defs.primitive.ifvmode||l===b.defs.primitive.ifvoid||l.isLet&&l.original===b.defs.primitive.ifvoid||l===b.defs.primitive.ifx||l.isLet&&l.original===b.defs.primitive.ifx){l=a.mouth.expand(k,a.mouth);if(1==l.length&&l[0]===
k&&k.invalid)return this.invalid=!0,a.mouth.loadState(e),[this];a.mouth.queue.unshift.apply(a.mouth.queue,l)}else l===b.defs.primitive.noexpand||l.proxy&&l.original===b.defs.primitive.noexpand?z=!0:l instanceof n||l.proxy&&l.original instanceof n?m.push(k):a.mouth.queue.unshift.apply(a.mouth.queue,a.mouth.expand(k,a.mouth))}else m.push(k);else{if((l=a.mouth.eat("pre space"))&&(l.cat==b.cats.param||l.cat==b.cats.all&&l["char"]<=f.length&&1<=l["char"]))a.mouth.revert(),l.cat==b.cats.param&&(H=!0);else return this.invalid=
!0,a.mouth.loadState(e),[this];m.push(k);z=!1}else return this.invalid=!0,a.mouth.loadState(e),[this];m.shift();t&&m.push(f[f.length-1]);l=new ia(m,f);if(0>a.scopes.last.registers.named.globaldefs.value)a.scopes.last.defs["macro"==c?"macros":"active"][d]=l,delete a.scopes.last.registers.named[d];else if("macro"==c)for(b.defs.macros[d]=l,delete b.registers.named[d],e=0,c=a.scopes.length;e<c;e++)a.scopes[e].defs.macros[d]=l,delete a.scopes.last.registers.named[d];else for(b.defs.active[d]=l,delete b.registers.named[d],
e=0,c=a.scopes.length;e<c;e++)a.scopes[e].defs.ative[d]=l,delete a.scopes.last.registers.named[d];a.toggles.global=!1;return[]}),year:new n("year",function(a){return[new h((new Date).getFullYear())]}),"@debug":new n("@debug",function(a){debugger}),"@exec@JavaScript":new n("@exec@JavaScript",function(a){})},macros:{},active:{}},registers:{count:{},dimen:{},skip:{},muskip:{},named:{pretolerance:new h(100),tolerance:new h(200),hbadness:new h(1E3),vbadness:new h(1E3),linepenalty:new h(10),hypenpenalty:new h(50),
exhyphenpenalty:new h(50),binoppenalty:new h(700),relpenalty:new h(500),clubpenalty:new h(150),widowpenalty:new h(150),displaywidowpenalty:new h(50),brokenpenalty:new h(100),predisplaypenalty:new h(1E4),postdisplaypenalty:new h(0),floatingpenalty:new h(0),interlinepenalty:new h(0),outputpenalty:new h(-10001),doublehyphendemerits:new h(1E4),finalhyphendemerits:new h(5E3),adjdemerits:new h(1E4),looseness:new h(0),pausing:new h(0),holdinginserts:new h(0),tracingonline:new h(0),tracingmacros:new h(0),
tracingstats:new h(0),tracingparagraphs:new h(0),tracingpages:new h(0),tracingoutput:new h(0),tracinglostchars:new h(0),tracingcommands:new h(0),tracingrestores:new h(0),language:new h(0),uchyph:new h(1),lefthyphenmin:new h(2),righthyphenmin:new h(3),globaldefs:new h(0),defaulthyphenchar:new h(45),defaultskewchar:new h(-1),escapechar:new h(92),endlinechar:new h(13),newlinechar:new h(10),maxdeadcycles:new h(100),hangafter:new h(1),fam:new h(0),mag:new h(1E3),delimiterfactor:new h(901),showboxbreadth:new h(-1),
showboxdepth:new h(-1),errorcontextlines:new h(-1),hfuzz:new t(6553.6,0),vfuzz:new t(6553.6,0),overfullrule:new t(0,0),emergencystetch:new t(0,0),hsize:new t(22609920,0),vsize:new t(36044800,0),maxdepth:new t(327680,0),splitmaxdepth:new t(1074397184,-65536),boxmaxdepth:new t(1074397184,-65536),lineskiplimit:new t(0,0),delimitershortfall:new t(327680,0),nulldelimiterspace:new t(0,6553.6),scriptspace:new t(32768,0),mathsurround:new t(0,0),predisplaystyle:new t(0,0),displaywidth:new t(0,0),displayindent:new t(0,
0),parindent:new t(983040,0),hangindent:new t(0,0),hoffset:new t(0,0),voffset:new t(0,0),baselineskip:new X(new t(786432,0)),lineskip:new X(new t(65536,0)),parskip:new X(new t(0,0),new t(65536,0)),abovedisplayskip:new X(new t(655360,0),new t(131072,0),new t(327680,0)),abovedisplayshortskip:new X(new t(0,0),new t(196608,0)),belowdisplayskip:new X(new t(0,0),new t(196608,0)),belowdisplayshortskip:new X(new t(393216,0),new t(196608,0),new t(196608,0)),leftskip:new X(new t(0,0)),rightskip:new X(new t(0,
0)),topskip:new X(new t(655360,0)),splittopskip:new X(new t(655360,0)),tabskip:new X(new t(0,0)),spaceskip:new X(new t(0,0)),xspaceskip:new X(new t(0,0)),parfillskip:new X(new t(0,0),new z(65536,1)),thinmuskip:new va(new F(196608)),medmuskip:new va(new F(262144),new F(131072),new F(262144)),thickmuskip:new va(new F(327680),new F(327680))}},cats:function(){for(var a={92:new h(0,0,15),123:new h(1,0,15),125:new h(2,0,15),36:new h(3,0,15),38:new h(4,0,15),10:new h(5,0,15),35:new h(6,0,15),94:new h(7,
0,15),95:new h(8,0,15),0:new h(9,0,15),9:new h(10,0,15),32:new h(10,0,15),126:new h(13,0,15),37:new h(14,0,15),127:new h(15,0,15),escape:0,open:1,close:2,math:3,alignment:4,eol:5,param:6,"super":7,sub:8,ignored:9,whitespace:10,letter:11,all:12,active:13,comment:14,invalid:15},b=0;52>b;b++)a["abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charCodeAt(b)]=new h(11);return a}(),mathcodes:function(){for(var a={ord:0,op:1,bin:2,rel:3,open:4,close:5,punct:6,variable:7,active:8},b=0,d=0;b<d;b++)a["".charCodeAt(b)]=
new h(1,0,8);b=0;for(d=34;b<d;b++)a["+-*\u00b1\u2213\u2216\u00d7\u2217\u22c6\u22c4\u2218\u2219\u00f7\u2229\u222a\u228e\u2293\u2294\u25c3\u25b9\u2240\u25ef\u25b3\u25bd\u2228\u2227\u2295\u2296\u2297\u2298\u2299\u2020\u2021\u2a3f".charCodeAt(b)]=new h(2,0,8);b=0;for(d=63;b<d;b++)a['<>=:"\u2264\u227a\u2aaf\u226a\u2282\u2286\u228f\u2291\u2208\u22a2\u2323\u2322\u2265\u227b\u2ab0\u226b\u2283\u2287\u2290\u2292\u220b\u22a3\u2261\u223c\u2243\u224d\u2248\u2245\u22c8\u221d\u22a8\u2250\u22a5\u226e\u2270\u2280\u2282\u0338\u2288\u2291\u0338\u226f\u2271\u2281\u2283\u0338\u2289\u2292\u0338\u2260\u2261\u0338\u2241\u2243\u0338\u2246\u224d\u0338'.charCodeAt(b)]=
new h(3,0,8);b=0;for(d=4;b<d;b++)a["([{`".charCodeAt(b)]=new h(4,0,8);b=0;for(d=5;b<d;b++)a["}])!?".charCodeAt(b)]=new h(5,0,8);b=0;for(d=2;b<d;b++)a[",;".charCodeAt(b)]=new h(6,0,8);b=0;for(d=82;b<d;b++)a["abcdefgh\u0127ijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\u03b1\u03b2\u03b3\u03b4\u03f5\u03b5\u03b6\u03b7\u03b8\u03d1\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03c0\u03d6\u03c1\u03f1\u03c3\u03c2\u03c4\u03c5\u03d5\u03c6\u03c7\u03c8\u03c9".charCodeAt(b)]=new h(7,0,8);return a}(),delims:[40,41,46,60,
62,47,91,92,93,123,124,125,8214,8593,8595,8597,8657,8659,8661,8741,8968,8969,8970,8971,9130,9136,9137,9168,10216,10217,10222,10223],parameters:"pretolerance tolerance hbadness vbadness linepenalty hypenpenalty exhyphenpenalty binoppenalty relpenalty clubpenalty widowpenalty displaywidowpenalty brokenpenalty predisplaypenalty postdisplaypenalty floatingpenalty interlinepenalty outputpenalty doublehyphendemerits finalhyphendemerits adjdemerits looseness pausing holdinginserts tracingonline tracingmacros tracingstats tracingparagraphs tracingpages tracingoutput tracinglostchars tracingcommands tracingrestores language uchyph lefthyphenmin righthyphenmin globaldefs defaulthyphenchar defaultskewchar escapechar endlinechar newlinechar maxdeadcycles hangafter fam mag delimiterfactor showboxbreadth showboxdepth errorcontextlines hfuzz vfuzz overfullrule emergencystetch hsize vsize maxdepth splitmaxdepth boxmaxdepth lineskiplimit delimitershortfall nulldelimiterfall scriptspace mathsurround predisplaystyle displaywidth displayindent parindent hangindent hoffset voffset baselineskip lineskip parskip abovedisplayskip abovedisplayshortskip belowdisplayskip belowdisplayshortskip leftskip rightskip topskip splittopskip tabskip spaceskip xspaceskip parfillskip thinmuskip medmuskip thickmuskip".split(" "),
lc:{65:new h(97),66:new h(98),67:new h(99),68:new h(100),69:new h(101),70:new h(102),71:new h(103),72:new h(104),73:new h(105),74:new h(106),75:new h(107),76:new h(108),77:new h(109),78:new h(110),79:new h(111),80:new h(112),81:new h(113),82:new h(114),83:new h(115),84:new h(116),85:new h(117),86:new h(118),87:new h(119),88:new h(120),89:new h(121),90:new h(122),97:new h(97),98:new h(98),99:new h(99),100:new h(100),101:new h(101),102:new h(102),103:new h(103),104:new h(104),105:new h(105),106:new h(106),
107:new h(107),108:new h(108),109:new h(109),110:new h(110),111:new h(111),112:new h(112),113:new h(113),114:new h(114),115:new h(115),116:new h(116),117:new h(117),118:new h(118),119:new h(119),120:new h(120),121:new h(121),122:new h(122),913:new h(945),914:new h(946),915:new h(947),916:new h(948),917:new h(949),918:new h(950),919:new h(951),920:new h(952),921:new h(953),922:new h(954),923:new h(955),924:new h(956),925:new h(957),926:new h(958),927:new h(959),928:new h(960),929:new h(961),931:new h(963),
932:new h(964),933:new h(965),934:new h(966),935:new h(967),936:new h(968),937:new h(969),945:new h(945),946:new h(946),947:new h(947),948:new h(948),949:new h(949),950:new h(950),951:new h(951),952:new h(952),953:new h(953),954:new h(954),955:new h(955),956:new h(956),957:new h(957),958:new h(958),959:new h(959),960:new h(960),961:new h(961),963:new h(963),964:new h(964),965:new h(965),966:new h(966),967:new h(967),968:new h(968),969:new h(969)},uc:{65:new h(65),66:new h(66),67:new h(67),68:new h(68),
69:new h(69),70:new h(70),71:new h(71),72:new h(72),73:new h(73),74:new h(74),75:new h(75),76:new h(76),77:new h(77),78:new h(78),79:new h(79),80:new h(80),81:new h(81),82:new h(82),83:new h(83),84:new h(84),85:new h(85),86:new h(86),87:new h(87),88:new h(88),89:new h(89),90:new h(90),97:new h(65),98:new h(66),99:new h(67),100:new h(68),101:new h(69),102:new h(70),103:new h(71),104:new h(72),105:new h(73),106:new h(74),107:new h(75),108:new h(76),109:new h(77),110:new h(78),111:new h(79),112:new h(80),
113:new h(81),114:new h(82),115:new h(83),116:new h(84),117:new h(85),118:new h(86),119:new h(87),120:new h(88),121:new h(89),122:new h(90),913:new h(913),914:new h(914),915:new h(915),916:new h(916),917:new h(917),918:new h(918),919:new h(919),920:new h(920),921:new h(921),922:new h(922),923:new h(923),924:new h(924),925:new h(925),926:new h(926),927:new h(927),928:new h(928),929:new h(929),931:new h(931),932:new h(932),933:new h(933),934:new h(934),935:new h(935),936:new h(936),937:new h(937),945:new h(913),
946:new h(914),947:new h(915),948:new h(916),949:new h(917),950:new h(918),951:new h(919),952:new h(920),953:new h(921),954:new h(922),955:new h(923),956:new h(924),957:new h(925),958:new h(926),959:new h(927),960:new h(928),961:new h(929),963:new h(931),964:new h(932),965:new h(933),966:new h(934),967:new h(935),968:new h(936),969:new h(937)}};b.defs.primitive.crcr["function"]=b.defs.primitive.cr["function"];fontTeX.format('        \\def\\makeatletter{\\catcode `\\@=11\\relax}\n        \\def\\makeatother{\\catcode `\\@=12\\relax}\n        \\makeatletter\n        \\count10=23\n        \\count11=9\n        \\count12=9\n        \\count13=9\n        \\countdef\\insc@unt=20\n        \\countdef\\allocationnumber=21\n        \\countdef\\m@ne=22 \\m@ne=-1\n        \\countdef\\count@=255\n        \\dimendef\\dimen@=0\n        \\dimendef\\dimen@i=1\n        \\dimendef\\dimen@ii=2\n        \\skipdef\\skip@=0\n        \\def\\newcount{\\alloc@0\\count\\countdef}\n        \\def\\newdimen{\\alloc@1\\dimen\\dimendef}\n        \\def\\newskip{\\alloc@2\\skip\\skipdef}\n        \\def\\newmuskip{\\alloc@3\\muskip\\muskipdef}\n        \\def\\alloc@#1#2#3#4{\n          \\advance\\count1#1by1\n          \\allocationnumber=\\count1#1\n          #3#4=\\allocationnumber\n        }\n        \\newdimen\\maxdimen \\maxdimen=137438953471.99998pt\n        \\newskip\\hideskip \\hideskip=-1000pt plus 1fil\n        \\newskip\\centering \\centering=0pt plus 1000pt minus 1000pt\n        \\def\\newif#1{\n            {\\lccode`9=`i \\lccode`8=`f \\lowercase{\\gdef\\@remove@if##198##2{##2}}}\n            \\expandafter\\expandafter\\expandafter\n            \\def\\expandafter\\expandafter\\expandafter\n            \\@if@name\\expandafter\\expandafter\\expandafter{\\expandafter\\@remove@if\\string#1}\n            \\expandafter\\def\\expandafter\\@if@name@bool\\expandafter##\\expandafter1\\expandafter{\\@if@name##1}\n            \\expandafter\\def\\csname\\@if@name@bool{true}\\endcsname{\n                \\let#1=\\iftrue\n            }\n            \\expandafter\\def\\csname\\@if@name@bool{false}\\endcsname{\n                \\let#1=\\iffalse\n            }\n            \\let#1=\\iffalse\n            \\let\\@if@name=\\undefined\n            \\let\\@if@name@bool=\\undefined\n            \\let\\@remove@if=\\undefined\n        }\n        \\newcount\\active \\active=13\n        \\newskip\\smallskipamount \\smallskipamount=3pt plus 1pt minus 1pt\n        \\newskip\\medskipamount \\medskipamount=6pt plus 2pt minus 2pt\n        \\newskip\\bigskipamount \\bigskipamount=12pt plus 4pt minus 4pt\n        \\newskip\\normalbaselineskip \\normalbaselineskip=12pt\n        \\newskip\\normallineskip \\normallineskip=1pt\n        \\newdimen\\normallineskiplimit \\normallineskiplimit=0pt\n        \\newdimen\\jot \\jot=3pt\n        \\newcount\\interdisplaylinepenalty \\interdisplaylinepenalty=100\n        \\newcount\\interfootnotelinepenalty \\interfootnotelinepenalty=100\n        \\mathchardef\\\\="0000A\n        \\mathchardef\\{=`\\{\n        \\mathchardef\\}=`\\}\n        \\mathchardef\\$=`\\$\n        \\mathchardef\\#=`\\#\n        \\mathchardef\\%=`\\%\n        \\mathchardef\\&=`\\&\n        \\mathchardef\\_=`\\_\n        \\mathchardef\\aa="700E5\n        \\mathchardef\\ae="700E6\n        \\mathchardef\\aleph="02135\n        \\mathchardef\\alpha="703B1\n        \\mathchardef\\amalg="22A3F\n        \\mathchardef\\angle="02220\n        \\mathchardef\\approx="32248\n        \\mathchardef\\arrowvert="023D0\n        \\mathchardef\\ast="2002A\n        \\mathchardef\\asymp="3224D\n        \\mathchardef\\backslash=`\\\\\n        \\mathchardef\\beta="703B2\n        \\mathchardef\\bigcap="122C2\n        \\mathchardef\\bigcirc="225EF\n        \\mathchardef\\bigcup="122C3\n        \\mathchardef\\bigodot="12A00\n        \\mathchardef\\bigoplus="12A01\n        \\mathchardef\\bigotimes="12A02\n        \\mathchardef\\bigtriangleup="225B3\n        \\mathchardef\\bigtriangledown="225BD\n        \\mathchardef\\bigsqcup="12A06\n        \\mathchardef\\biguplus="12A04\n        \\mathchardef\\bigvee="122C1\n        \\mathchardef\\bigwedge="122C0\n        \\mathchardef\\bot="022A5\n        \\mathchardef\\bracevert="023AA\n        \\mathchardef\\bowtie="322C8\n        \\mathchardef\\bullet="22022\n        \\mathchardef\\cap="22229\n        \\mathchardef\\cdot="222C5\n        \\mathchardef\\cdotp="622C5\n        \\mathchardef\\chi="703C7\n        \\mathchardef\\circ="225CB\n        \\mathchardef\\clubsuit="02663\n        \\mathchardef\\colon="6003A\n        \\mathchardef\\cong="32245\n        \\mathchardef\\coprod="12210\n        \\mathchardef\\cup="2222A\n        \\mathchardef\\dag="02020\n        \\mathchardef\\dagger="22020\n        \\mathchardef\\dashv="322A3\n        \\mathchardef\\ddag="02021\n        \\mathchardef\\ddagger="22021\n        \\mathchardef\\delta="703B4\n        \\mathchardef\\diamond="222C4\n        \\mathchardef\\diamondsuit="02662\n        \\mathchardef\\div="200F7\n        \\mathchardef\\doteq="32250\n        \\mathchardef\\downarrow="2193\n        \\mathchardef\\ell="02113\n        \\mathchardef\\emptyset="02205\n        \\mathchardef\\epsilon="703F5\n        \\mathchardef\\equiv="32261\n        \\mathchardef\\eta="703B7\n        \\mathchardef\\exists="02203\n        \\mathchardef\\flat="0266D\n        \\mathchardef\\forall="02200\n        \\mathchardef\\frown="32322\n        \\mathchardef\\gamma="703B3\n        \\mathchardef\\ge="32265 \\let\\geq=\\ge\n        \\mathchardef\\gg="3226B\n        \\mathchardef\\hbar="70127\n        \\mathchardef\\heartsuit="02661\n        \\mathchardef\\hookleftarrow="321AA\n        \\mathchardef\\hookrightarrow="321A9\n        \\mathchardef\\imath="70131\n        \\mathchardef\\in="32208\n        \\mathchardef\\infty="0221E\n        \\mathchardef\\intop="1222B \\def\\int{\\intop\\nolimits}\n        \\mathchardef\\iota="703B9\n        \\mathchardef\\jmath="70237\n        \\mathchardef\\kappa="703BA\n        \\mathchardef\\l="00142\n        \\mathchardef\\lambda="703BB\n        \\mathchardef\\langle="027E8\n        \\mathchardef\\lbrace=`\\{\n        \\mathchardef\\lceil="02308\n        \\mathchardef\\ldotp="6002E\n        \\mathchardef\\le="32264 \\let\\leq=\\le\n        \\mathchardef\\leftarrow="32190 \\let\\gets=\\leftarrow\n        \\mathchardef\\leftharpoondown="321BD\n        \\mathchardef\\leftharpoonup="321BC\n        \\mathchardef\\leftrightarrow="32194\n        \\mathchardef\\lfloor="0230A\n        \\mathchardef\\lgroup="027EE\n        \\mathchardef\\ll="3226A\n        \\mathchardef\\lmoustache="023B0\n        \\mathchardef\\longleftarrow="327F5\n        \\mathchardef\\longleftrightarrow="327F7\n        \\mathchardef\\longmapsto="327FC\n        \\mathchardef\\longrightarrow="327F6\n        \\mathchardef\\mapsto="321A6\n        \\mathchardef\\mid="32223\n        \\mathchardef\\models="322A7\n        \\mathchardef\\mp="22213\n        \\mathchardef\\mu="703BC\n        \\mathchardef\\nabla="02207\n        \\mathchardef\\natural="0266E\n        \\mathchardef\\nearrow="32197\n        \\mathchardef\\neg="000AC \\let\\lnot=\\neg\n        \\mathchardef\\ne="32260 \\let\\neq=\\ne\n        \\mathchardef\\ni="3220B \\let\\owns=\\ni\n        \\mathchardef\\notin="32209\n        \\mathchardef\\nu="703BD\n        \\mathchardef\\nwarrow="32196\n        \\mathchardef\\o="700F8\n        \\mathchardef\\odot="22299\n        \\mathchardef\\oe="70153\n        \\mathchardef\\ointop="1222E \\def\\oint{\\ointop\\nolimits}\n        \\mathchardef\\omega="703C9\n        \\mathchardef\\ominus="22296\n        \\mathchardef\\oplus="22295\n        \\mathchardef\\oslash="22298\n        \\mathchardef\\otimes="22297\n        \\mathchardef\\parallel="32225\n        \\mathchardef\\partial="02202\n        \\mathchardef\\perp="322A5\n        \\mathchardef\\phi="703D5\n        \\mathchardef\\pi="703C0\n        \\mathchardef\\pm="200B1\n        \\mathchardef\\prec="3227A\n        \\mathchardef\\preceq="3227C\n        \\mathchardef\\prime="02032\n        \\mathchardef\\prod="1220F\n        \\mathchardef\\propto="3221D\n        \\mathchardef\\psi="703C8\n        \\mathchardef\\rangle="027E9\n        \\mathchardef\\rbrace=`\\}\n        \\mathchardef\\rceil="02309\n        \\mathchardef\\relbar="3002D\n        \\mathchardef\\rfloor="0230B\n        \\mathchardef\\rgroup="027EF\n        \\mathchardef\\rho="703C1\n        \\mathchardef\\rightarrow="32192 \\let\\to=\\rightarrow\n        \\mathchardef\\rightharpoondown="321C1\n        \\mathchardef\\rightharpoonup="321C0\n        \\mathchardef\\rightleftharpoons="321CC\n        \\mathchardef\\rmoustache="023B1\n        \\mathchardef\\searrow="32198\n        \\mathchardef\\setminus="22216\n        \\mathchardef\\sharp="0266F\n        \\mathchardef\\sim="3223C\n        \\mathchardef\\simeq="32243\n        \\mathchardef\\sigma="703C3\n        \\mathchardef\\smile="32323\n        \\mathchardef\\sqcap="22293\n        \\mathchardef\\sqcup="22294\n        \\mathchardef\\sqsubseteq="32291\n        \\mathchardef\\sqsupseteq="32292\n        \\mathchardef\\ss="000DF\n        \\mathchardef\\star="222C6\n        \\mathchardef\\subset="32282\n        \\mathchardef\\subseteq="32286\n        \\mathchardef\\succ="3227B\n        \\mathchardef\\succeq="3227D\n        \\mathchardef\\sum="12211\n        \\mathchardef\\supset="32283\n        \\mathchardef\\supseteq="32287\n        \\mathchardef\\swarrow="32199\n        \\mathchardef\\tau="703C4\n        \\mathchardef\\theta="703B8\n        \\mathchardef\\times="200D7\n        \\mathchardef\\top="022A4\n        \\mathchardef\\triangle="025B3\n        \\mathchardef\\triangleleft="225C1\n        \\mathchardef\\triangleright="225B7\n        \\mathchardef\\ucup="2228E\n        \\mathchardef\\uparrow="02191\n        \\mathchardef\\updownarrow="02195\n        \\mathchardef\\upsilon="703C5\n        \\mathchardef\\varepsilon="703B5\n        \\mathchardef\\varphi="703C6\n        \\mathchardef\\varpi="703D6\n        \\mathchardef\\varrho="703F1\n        \\mathchardef\\varsigma="703C2\n        \\mathchardef\\vartheta="703D1\n        \\mathchardef\\vdash="322A2\n        \\mathchardef\\vee="22228 \\let\\lor=\\vee\n        \\mathchardef\\vert=`\\|\n        \\mathchardef\\wedge="22227 \\let\\land=\\wedge\n        \\mathchardef\\wp="02118\n        \\mathchardef\\wr="22240\n        \\mathchardef\\xi="703BE\n        \\mathchardef\\zeta="703B6\n        \\mathchardef\\AA="700C5\n        \\mathchardef\\AE="700C6\n        \\mathchardef\\Arrowvert="02225\n        \\mathchardef\\Delta="00394\n        \\mathchardef\\Downarrow="21D3\n        \\mathchardef\\Gamma="00393\n        \\mathchardef\\Im="02111\n        \\mathchardef\\L="00141\n        \\mathchardef\\Lambda="0039B\n        \\mathchardef\\Leftarrow="321D0\n        \\mathchardef\\Leftrightarrow="321D4\n        \\mathchardef\\Longleftarrow="327F8\n        \\mathchardef\\Longleftrightarrow="327FA\n        \\mathchardef\\Longrightarrow="327F9\n        \\mathchardef\\O="700D8\n        \\mathchardef\\OE="70152\n        \\mathchardef\\Omega="003A9\n        \\mathchardef\\Orb="225EF\n        \\mathchardef\\P="000B6\n        \\mathchardef\\Phi="003A6\n        \\mathchardef\\Pi="003A0\n        \\mathchardef\\Psi="003A8\n        \\mathchardef\\Re="0211C\n        \\mathchardef\\Relbar="3003D\n        \\mathchardef\\Rightarrow="321D2\n        \\mathchardef\\S="000A7\n        \\mathchardef\\Sigma="003A3\n        \\mathchardef\\spadesuit="02660\n        \\mathchardef\\Theta="00398\n        \\mathchardef\\Uparrow="021D1\n        \\mathchardef\\Updownarrow="021D5\n        \\mathchardef\\Upsilon="003A5\n        \\mathchardef\\Vert="02016 \\let\\|=\\Vert\n        \\mathchardef\\Xi="0039E\n        \\def\\~{\\accent"02DC }\n        \\def\\,{\\mskip\\thinmuskip}\n        \\def\\>{\\mskip\\medmuskip}\n        \\def\\;{\\mskip\\thickmuskip}\n        \\def\\!{\\mskip-\\thinmuskip}\n        \\def\\"{\\accent"A8 }\n        \\def\\={\\accent"AF }\n        \\def\\^{\\accent"5E }\n        \\def\\.{\\accent"02D9 }\n        \\def\\acute{\\accent"B4 }\n        \\def\\arccos{\\mathop{\\rm arccos}\\nolimits}\n        \\def\\arcsin{\\mathop{\\rm arcsin}\\nolimits}\n        \\def\\arctan{\\mathop{\\rm arctan}\\nolimits}\n        \\def\\arg{\\mathop{\\rm arg}\\nolimits}\n        \\def\\bar{\\accent"AF }\n        \\def\\big#1{{\\n@space\\left#1\\vbox to 1em{}\\right.}}\n        \\def\\bigl{\\mathopen\\big}\n        \\def\\bigm{\\mathrel\\big}\n        \\def\\bigr{\\mathclose\\big}\n        \\def\\bigg#1{{\\n@space\\left#1\\vbox to 1.6em{}\\right.}}\n        \\def\\biggl{\\mathopen\\bigg}\n        \\def\\biggm{\\mathrel\\bigg}\n        \\def\\biggr{\\mathclose\\bigg}\n        \\def\\bmod{            \\nonscript\\mskip-\\medmuskip\\mkern5mu\\mathbin{\\rm mod}\\mkern5mu\\nonscript\\mskip-\\medmuskip}\n        \\def\\brace{\\atopwithdelims\\{\\}}\n        \\def\\brack{\\atopwithdelims[]}\n        \\def\\breve{\\accent"02D8 }\n        \\def\\buildrel#1\\over#2{\\mathrel{\\mathop{\\kern0pt#2}\\limits^{#1}}}\n        \\def\\cases#1{            \\left\\{\\,{\\halign{##\\hfil&\\quad##\\hfil\\cr#1\\crcr}}\\right.}\n        \\def\\cdots{\\mathinner{\\cdotp\\cdotp\\cdotp}}\n        \\def\\check{\\accent"02C7 }\n        \\def\\choose{\\atopwithdelims()}\n        \\def\\cong{\\mathrel{\\tilde=}}\n        \\def\\cos{\\mathop{\\rm cos}\\nolimits}\n        \\def\\cosh{\\mathop{\\rm cosh}\\nolimits}\n        \\def\\cot{\\mathop{\\rm cot}\\nolimits}\n        \\def\\coth{\\mathop{\\rm coth}\\nolimits}\n        \\def\\csc{\\mathop{\\rm csc}\\nolimits}\n        \\def\\ddot{\\accent"A8 }\n        \\def\\ddots{\\mathinner{\\char"22F1}}\n        \\def\\deg{\\mathop{\\rm deg}\\nolimits}\n        \\def\\det{\\mathop{\\rm det}}\n        \\def\\dim{\\mathop{\\rm dim}\\nolimits}\n        \\def\\dot{\\accent"02D9 }\n        \\def\\empty{}\n        \\def\\exp{\\mathop{\\rm exp}\\nolimits}\n        \\def\\gcd{\\mathop{\\rm gcd}}\n        \\def\\grave{\\accent"60 }\n        \\def\\hat{\\accent"5E }\n        \\def\\hom{\\mathop{\\rm hom}\\nolimits}\n        \\def\\hphantom#1{\\vbox to0pt{\\phantom#1}}\n        \\def\\iff{\\;\\Longleftrightarrow\\;}\n        \\def\\inf{\\mathop{\\rm inf}}\n        \\def\\iterate{\\body \\let\\next=\\iterate\\else\\let\\next=\\relax\\fi\\next}\n        \\def\\joinrel{\\mathrel{\\mkern-3mu}}\n        \\def\\ker{\\mathop{\\rm ker}\\nolimits}\n        \\def\\lbrack{[}\n        \\def\\ldots{\\mathinner{\\ldotp\\ldotp\\ldotp}}\n        \\def\\lg{\\mathop{\\rm lg}\\nolimits}\n        \\def\\lim{\\mathop{\\rm lim}}\n        \\def\\liminf{\\mathop{\\rm lim\\,inf}}\n        \\def\\limsup{\\mathop{\\rm lim\\,sup}}\n        \\def\\ln{\\mathop{\\rm ln}\\nolimits}\n        \\def\\log{\\mathop{\\rm log}\\nolimits}\n        \\def\\loop#1\\repeat{\\def\\body{#1}\\iterate}\n        \\def\\lq{`}\n        \\def\\mathstrut{\\vphantom(}\n        \\def\\matrix#1{\\,\\halign{\\hfil##\\hfil&&\\quad\\hfil##\\hfil\\cr              #1\\crcr}\\,}\n        \\def\\max{\\mathop{\\rm max}}\n        \\def\\min{\\mathop{\\rm min}}\n        \\def\\n@space{\\nulldelimiterspace=0pt\\relax}\n        \\def\\not{\\@ifnextchar={\\mathchar"32260\\@gobble}{\\hbox to 0pt{/}}}}\n        \\def\\null{\\hbox{}}\n        \\def\\pmatrix#1{\\left(\\matrix{#1}\\right)}\n        \\def\\pmod#1{\\mkern18mu({\\rm mod}\\,\\,#1)}\n        \\def\\rbrack{]}\n        \\def\\rq{\'}\n        \\def\\sec{\\mathop{\\rm sec}\\nolimits}\n        \\def\\sin{\\mathop{\\rm sin}\\nolimits}\n        \\def\\sinh{\\mathop{\\rm sinh}\\nolimits}\n        \\def\\skew#1#2#3{            {\\muskip0 #1mu\\divide\\muskip0by2 \\mkern\\muskip0%\n            #2{\\mkern-\\muskip0{#3}\\mkern\\muskip0}\\mkern-\\muskip0}{}}\n        \\def\\strut{\\vrule height.708333333emdepth.291666666emwidth0pt\\relax}\n        \\def\\sup{\\mathop{\\rm sup}}\n        \\def\\surd{{\\mathchar"1221A}}\n        \\def\\t{\\accent"0311 }\n        \\def\\tan{\\mathop{\\rm tan}\\nolimits}\n        \\def\\tanh{\\mathop{\\rm tanh}\\nolimits}\n        \\def\\thinspace{\\kern.1667em}\n        \\def\\tilde{\\accent"02DC }\n        \\def\\u{\\accent"02D8 }\n        \\def\\v{\\accent"02C7 }\n        \\def\\vdots{\\mathinner{\\char"22EE}}\n        \\def\\vphantom#1{\\hbox to0pt{\\phantom#1}}\n        \\def\\Big#1{{\\n@space\\left#1\\vbox to 1.3em{}\\right.}}\n        \\def\\Bigl{\\mathopen\\Big}\n        \\def\\Bigm{\\mathrel\\Big}\n        \\def\\Bigr{\\mathclose\\Big}\n        \\def\\Bigg#1{{\\n@space\\left#1\\vbox to 1.9em{}\\right.}}\n        \\def\\Biggl{\\mathopen\\Bigg}\n        \\def\\Biggm{\\mathrel\\Bigg}\n        \\def\\Biggr{\\mathclose\\Bigg}\n        \\def\\H{\\accent"02DD }\n        \\def\\Pr{\\mathop{\\rm Pr}}\n        \\def\\TeX{T\\kern-.1667em{\\lower.5exE}\\kern-.125emX}\n        \\let\\bgroup={\n        \\let\\displaymath=\\[\n        \\let\\enddisplaymath=\\]\n        \\let\\egroup=}\n        \\let\\endline=\\cr\n        \\let\\math=\\(\n        \\let\\endmath=\\)\n        \\let\\sb=^\n        \\let\\sp=_\n        \\let\\repeat=\\fi\n        \\def\\negthinspace{\\kern-.1667em}\n        \\def\\enspace{\\kern.5em}\n        \\def\\enskip{\\hskip.5em\\relax}\n        \\def\\quad{\\hskip1em\\relax}\n        \\def\\qquad{\\hskip2em\\relax}\n        \\def\\smallskip{\\vskip\\smallskipamount}\n        \\def\\medskip{\\vskip\\medskipamount}\n        \\def\\bigskip{\\vskip\\bigskipamount}\n        \\def~{\\char"00A0\\relax}\n        \\def\\obeyspaces{\\catcode`\\ =13\\relax}\n        \\catcode`\\ =12\\def\\space{ }\\obeyspaces\\let =\\space\n        \\catcode`\\ =10\n        \\newcount\\mscount\n        \\def\\multispan#1{\\omit \\mscount#1\\relax\\loop\\ifnum\\mscount>1\\sp@n\\repeat}\n        \\def\\sp@n{\\span\\omit\\advance\\mscount-1}\n        \\def\\two@digits#1{\\ifnum#1<10 0\\fi\\the#1}\n        \\def\\dospecials{            \\do\\ \\do\\\\\\do\\{\\do\\}\\do\\$\\do\\&\\do\\#\\do\\^\\do\\^^K\\do\\_\\do\\^^A\\do\\%\\do\\~}\n        \\def\\mathpalette#1#2{            \\mathchoice{#1\\displaystyle{#2}}{#1\\textstyle{#2}}{#1\\scriptstyle{#2}}{#1\\scriptscriptstyle{#2}}}\n        \\def\\frac#1#2{{{#1}\\over{#2}}}\n        \\def\\mathrm#1{{\\rm#1}}\n        \\def\\textrm#1{{\\rm#1}}\n        \\def\\mathbf#1{{\\bf#1}}\n        \\def\\textbf#1{{\\bf#1}}\n        \\def\\mathit#1{{\\it#1}}\n        \\def\\textit#1{{\\it#1}}\n        \\def\\mathsl#1{{\\sl#1}}\n        \\def\\textsl#1{{\\sl#1}}\n        \\def\\@gobble#1{}\n        \\def\\@ifnextchar#1#2#3{            \\let\\@ifnextchar@charone=#1\n            \\def\\@ifnextchar@true{#2}\n            \\def\\@ifnextchar@false{#3}\n            \\futurelet\\@ifnextchar@chartwo\\@ifnextchar@check}\n        \\def\\@ifnextchar@check{            \\ifx\\@ifnextchar@charone\\@ifnextchar@chartwo\\@ifnextchar@true\\else\\@ifnextchar@false\\fi        }\n        \\def\\newcommand#1{\\@ifnextchar[{\\@newcommand#1}{\\@newcommand#1[0]}}\n        \\def\\@newcommand#1[#2]{            \\count0=#2            \\ifnum\\count0<0                \\Error{NotEnoughParameters}            \\else                \\ifnum\\count0>9                    \\Error{TooManyParameters}                \\else                    \\@ifnextchar[{\\ifnum\\count0<1                        \\Error{ParameterNumberMustBe>0}                    \\else                        \\@newcommand@optarg#1[#2]                    \\fi}{\\@newcommand@nooptarg#1[#2]}                \\fi            \\fi        }\n        \\def\\@paramnums#1{            \\ifcase#1            \\or####1            \\or####1####2            \\or####1####2####3            \\or####1####2####3####4            \\or####1####2####3####4####5            \\or####1####2####3####4####5####6            \\or####1####2####3####4####5####6####7            \\or####1####2####3####4####5####6####7####8            \\or####1####2####3####4####5####6####7####8####9\\fi}\n        \\def\\@paramnums@bracket#1{            \\ifcase#1            \\or[####1]            \\or[####1]####2            \\or[####1]####2####3            \\or[####1]####2####3####4            \\or[####1]####2####3####4####5            \\or[####1]####2####3####4####5####6            \\or[####1]####2####3####4####5####6####7            \\or[####1]####2####3####4####5####6####7####8            \\or[####1]####2####3####4####5####6####7####8####9\\fi}\n        \\def\\@newcommand@nooptarg#1[#2]#{            \\edef\\@newcommand@make{\\def\\noexpand#1\\@paramnums#2}\n            \\@newcommand@make}\n        \\def\\@newcommand@optarg#1[#2][#3]#{            \\def#1{                \\@ifnextchar[{\\csname\\string#1\\endcsname}{\\csname\\string#1\\endcsname[#3]}}            \\edef\\@newcommand@make{                \\noexpand\\expandafter\\def                \\noexpand\\csname\\noexpand\\string\\noexpand#1\\endcsname\\@paramnums@bracket#2}\n            \\@newcommand@make}\n        \\newcommand\\sqrt[1][]{\\root #1\\of }}\n        \\makeatother    ',
"display");fontTeX.fontDimen={widthOf:function(a,b,d){this.isInit||this.init();d={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"];if(this.cache[b]&&this.cache[b][d]&&this.cache[b][d][a]&&!isNaN(this.cache[b][d][a].width))return this.cache[b][d][a].width;this.context.font=(d||"")+" 500px "+b;this.cache[b]=this.cache[b]||{};this.cache[b][d]=this.cache[b][d]||{};this.cache[b][d][a]=this.cache[b][d][a]||{};return this.cache[b][d][a].width=this.context.measureText(a).width/500},visibleWidthOf:function(a,
b,d){function c(e,f,h){if(7==h)return e;this.context.clearRect(0,0,150,150);var k=Math.pow(2,h);this.context.font=(d||"")+" "+100*k+"px "+b;this.context.fillText(a,75+150*k*(.5-e),75+150*k*(.5-f));k=this.context.getImageData(0,0,150,150).data;for(var l=!1,m=0,n=0;150>n;n++){for(var q=0;150>q;q++){var v=k[4*n+600*q+3];v>l&&(l=v,m=q)}if(l)break}return!1===l&&0==h?-1:250<v?e+(n/150-.5)/Math.pow(2,h):c.call(this,e+(n/150-.5)/Math.pow(2,h),f+(m/150-.5)/Math.pow(2,h),h+1)}function e(c,f,h){if(7==h)return c;
this.context.clearRect(0,0,150,150);var k=Math.pow(2,h);this.context.font=(d||"")+" "+100*k+"px "+b;this.context.fillText(a,75+150*k*(.5-c),75+150*k*(.5-f));k=this.context.getImageData(0,0,150,150).data;for(var l=!1,m=0,n=149;0<=n;n--){for(var q=0;150>q;q++){var v=k[4*n+600*q+3];v>l&&(l=v,m=q)}if(l)break}return 250<v?c+(n/150-.5)/Math.pow(2,h):e.call(this,c+(n/150-.5)/Math.pow(2,h),f+(m/150-.5)/Math.pow(2,h),h+1)}this.isInit||this.init();d={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"];
if(this.cache[b]&&this.cache[b][d]&&this.cache[b][d][a]&&!isNaN(this.cache[b][d][a].vWidth))return this.cache[b][d][a].vWidth;this.context.textBaseline="middle";this.context.textAlign="center";var h=c.call(this,.5,.5,0);if(-1==h)return this.cache[b]=this.cache[b]||{},this.cache[b][d]=this.cache[b][d]||{},this.cache[b][d][a]=this.cache[b][d][a]||{},this.cache[b][d][a].vWidth=0;var n=e.call(this,.5,.5,0);this.cache[b]=this.cache[b]||{};this.cache[b][d]=this.cache[b][d]||{};this.cache[b][d][a]=this.cache[b][d][a]||
{};return this.cache[b][d][a].vWidth=1.5*(n-h)+.021},heightOf:function(a,b,d){function c(e,h,n){if(7==n)return h;this.context.clearRect(0,0,150,150);var f=Math.pow(2,n);this.context.font=(d||"")+" "+100*f+"px "+b;this.context.fillText(a,75+150*f*(.5-e),75+150*f*(1-h));f=this.context.getImageData(0,0,150,150).data;for(var m=!1,v=0,t=0;150>t;t++){for(var l=0;150>l;l++){var B=f[600*t+4*l+3];B>m&&(m=B,v=l)}if(m)break}return!1===m&&0==n?1:250<B?h+(t/150-.5)/Math.pow(2,n):c.call(this,e+(v/150-.5)/Math.pow(2,
n),h+(t/150-.5)/Math.pow(2,n),n+1)}this.isInit||this.init();d={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"];if(this.cache[b]&&this.cache[b][d]&&this.cache[b][d][a]&&!isNaN(this.cache[b][d][a].height))return this.cache[b][d][a].height;this.context.textBaseline="alphabetic";this.context.textAlign="center";this.cache[b]=this.cache[b]||{};this.cache[b][d]=this.cache[b][d]||{};this.cache[b][d][a]=this.cache[b][d][a]||{};return this.cache[b][d][a].height=1.5*(1-c.call(this,.5,.5,0))},depthOf:function(a,
b,d){function c(e,h,n){if(7==n)return h;this.context.clearRect(0,0,150,150);var f=Math.pow(2,n);this.context.font=(d||"")+" "+100*f+"px "+b;this.context.fillText(a,75+150*f*(.5-e),75+150*f*(.5-h));f=this.context.getImageData(0,0,150,150).data;for(var m=!1,v=0,t=149;0<=t;t--){for(var l=0;150>l;l++){var B=f[600*t+4*l+3];B>m&&(m=B,v=l)}if(m)break}return!1===m&&0==n?.5:250<B?h+(t/150-.5)/Math.pow(2,n):c.call(this,e+(v/150-.5)/Math.pow(2,n),h+(t/150-.5)/Math.pow(2,n),n+1)}this.isInit||this.init();d={nm:"",
rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"];if(this.cache[b]&&this.cache[b][d]&&this.cache[b][d][a]&&!isNaN(this.cache[b][d][a].depth))return Math.max(0,this.cache[b][d][a].depth);this.context.textBaseline="alphabetic";this.context.textAlign="center";this.cache[b]=this.cache[b]||{};this.cache[b][d]=this.cache[b][d]||{};this.cache[b][d][a]=this.cache[b][d][a]||{};return Math.max(0,this.cache[b][d][a].depth=1.5*(c.call(this,.5,.5,0)-.5))},trueDepthOf:function(a,b,d){this.depthOf(a,b,d);return this.cache[b][{nm:"",
rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"]][a].depth},italCorrOf:function(a,b){function d(c,e,h){if(7==h)return c;this.context.clearRect(0,0,150,150);var f=Math.pow(2,h);this.context.font="italic "+100*f+"px "+b;this.context.fillText(a,75+150*f*-c,75+150*f*(.5-e));f=this.context.getImageData(0,0,150,150).data;for(var k=!1,m=0,n=149;0<=n;n--){for(var v=0;150>v;v++){var l=f[4*n+600*v+3];l>k&&(k=l,m=v)}if(k)break}return!1===k&&0==h?0:250<l?c+(n/150-.5)/Math.pow(2,h):d.call(this,c+(n/150-.5)/
Math.pow(2,h),e+(m/150-.5)/Math.pow(2,h),h+1)}this.isInit||this.init();if(this.cache[b]&&this.cache[b].italic&&this.cache[b].italic[a]&&!isNaN(this.cache[b].italic[a].italCorr))return this.cache[b].italic[a].italCorr;this.context.textBaseline="middle";this.context.textAlign="left";this.cache[b]=this.cache[b]||{};this.cache[b].italic=this.cache[b].italic||{};this.cache[b].italic[a]=this.cache[b].italic[a]||{};return this.cache[b].italic[a].italCorr=Math.max(0,1.5*d.call(this,.5,.5,0)-fontTeX.fontDimen.widthOf(a,
b,"it"))},scriptOffsetOf:function(a,b,d){function c(e,f,h){if(7==h)return e;this.context.clearRect(0,0,150,150);var k=Math.pow(2,h);this.context.font=(d||"")+" "+100*k+"px "+b;this.context.fillText(a,75+150*k*(.5-e),75+150*k*(.5-f));for(var l=this.context.getImageData(0,0,150,150).data,m=!1,n=0,q=149;0<=q;q--){for(var v=0;v<Math.max(150,Math.min(0,v<75+150*k*(.5-f)));v++){var t=l[4*q+600*v+3];t>m&&(m=t,n=v)}if(m)break}return!1===m&&0==h?0:250<t?e+(q/150-.5)/Math.pow(2,h):c.call(this,e+(q/150-.5)/
Math.pow(2,h),f+(n/150-.5)/Math.pow(2,h),h+1)}function e(c,f,h){if(7==h)return c;this.context.clearRect(0,0,150,150);var k=Math.pow(2,h);this.context.font=(d||"")+" "+100*k+"px "+b;this.context.fillText(a,75+150*k*(.5-c),75+150*k*(.5-f));for(var l=this.context.getImageData(0,0,150,150).data,m=!1,n=0,q=149;0<=q;q--){for(var v=75;v<Math.max(150,v<75+150*k*(1-c));v++){var t=l[4*q+600*v+3];t>m&&(m=t,n=v)}if(m)break}return!1===m&&0==h?1:250<t?c+(q/150-.5)/Math.pow(2,h):e.call(this,c+(q/150-.5)/Math.pow(2,
h),f+(n/150-.5)/Math.pow(2,h),h+1)}this.isInit||this.init();d={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"];if(this.cache[b]&&this.cache[b][d]&&this.cache[b][d][a]&&!isNaN(this.cache[b][d][a].scriptOffset))return this.cache[b][d][a].scriptOffset;this.context.textBaseline="middle";this.context.textAlign="left";var h=c.call(this,.5,.5,0),n=e.call(this,.5,.5,0);this.cache[b]=this.cache[b]||{};this.cache[b][d]=this.cache[b][d]||{};this.cache[b][d][a]=this.cache[b][d][a]||{};return this.cache[b][d][a].scriptOffset=
1.5*Math.max(h-n,0)},leftOffsetOf:function(a,b,d){function c(e,h,n){if(7==n)return e;this.context.clearRect(0,0,150,150);var f=Math.pow(2,n);this.context.font=(d||"")+" "+100*f+"px "+b;this.context.fillText(a,75+150*f*(.5-e),75+150*f*(.5-h));f=this.context.getImageData(0,0,150,150).data;for(var m=!1,v=0,t=0;150>t;t++){for(var l=0;150>l;l++){var z=f[4*t+600*l+3];z>m&&(m=z,v=l)}if(m)break}return!1===m&&0==n?-1:250<z?e+(t/150-.5)/Math.pow(2,n):c.call(this,e+(t/150-.5)/Math.pow(2,n),h+(v/150-.5)/Math.pow(2,
n),n+1)}this.isInit||this.init();d={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[d||"nm"];if(this.cache[b]&&this.cache[b][d]&&this.cache[b][d][a]&&!isNaN(this.cache[b][d][a].leftOffset))return this.cache[b][d][a].leftOffset;this.context.textBaseline="middle";this.context.textAlign="start";this.cache[b]=this.cache[b]||{};this.cache[b][d]=this.cache[b][d]||{};this.cache[b][d][a]=this.cache[b][d][a]||{};return this.cache[b][d][a].leftOffset=-1.5*(c.call(this,.5,.5,0)-.5)},baselineHeightOf:function(a){function b(c,
d,e){this.context.textBaseline="bottom";if(7==e)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,e);this.context.font=100*f+"px "+a;this.context.fillText("A",75+150*f*(.5-c),75+150*f*(1-d));f=this.context.getImageData(0,0,150,150).data;for(var h=!1,m=0,n=0;150>n;n++){for(var v=0;150>v;v++){var l=f[600*n+4*v+3];l>h&&(h=l,m=v)}if(h)break}return!1===h&&0==e?1:250<l?d+(n/150-.5)/Math.pow(2,e):b.call(this,c+(m/150-.5)/Math.pow(2,e),d+(n/150-.5)/Math.pow(2,e),e+1)}function d(b,e,h){this.context.textBaseline=
"alphabetic";if(7==h)return e;this.context.clearRect(0,0,150,150);var c=Math.pow(2,h);this.context.font=100*c+"px "+a;this.context.fillText("A",75+150*c*(.5-b),75+150*c*(1-e));c=this.context.getImageData(0,0,150,150).data;for(var f=!1,m=0,n=0;150>n;n++){for(var t=0;150>t;t++){var l=c[600*n+4*t+3];l>f&&(f=l,m=t)}if(f)break}return!1===f&&0==h?1:250<l?e+(n/150-.5)/Math.pow(2,h):d.call(this,b+(m/150-.5)/Math.pow(2,h),e+(n/150-.5)/Math.pow(2,h),h+1)}this.isInit||this.init();if(this.cache[a]&&!isNaN(this.cache[a].baseline))return this.cache[a].baseline;
this.context.textAlign="center";this.cache[a]=this.cache[a]||{};return this.cache[a].baseline=1.5*(d.call(this,.5,.5,0)-b.call(this,.5,.5,0))},init:function(){this.canvas=document.createElement("canvas");this.canvas.style.position="fixed";this.canvas.style.top="100vh";this.canvas.style.left="100vw";this.canvas.style.pointerEvents="none";this.canvas.style.opacity=0;this.canvas.width=150;this.canvas.height=150;this.context=this.canvas.getContext("2d");document.body.appendChild(this.canvas);this.isInit=
!0},isInit:!1,cache:{}};fontTeX._debug={data:b}}}();