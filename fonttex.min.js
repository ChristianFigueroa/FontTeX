var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(E,r,qa){E!=Array.prototype&&E!=Object.prototype&&(E[r]=qa.value)};$jscomp.getGlobal=function(E){return"undefined"!=typeof window&&window===E?E:"undefined"!=typeof global&&null!=global?global:E};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var E=0;return function(r){return $jscomp.SYMBOL_PREFIX+(r||"")+E++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var E=$jscomp.global.Symbol.iterator;E||(E=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[E]&&$jscomp.defineProperty(Array.prototype,E,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(E){var r=0;return $jscomp.iteratorPrototype(function(){return r<E.length?{done:!1,value:E[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(E){$jscomp.initSymbolIterator();E={next:E};E[$jscomp.global.Symbol.iterator]=function(){return this};return E};
!function(){function E(){console.log.apply(console,arguments)}function r(a,b){this.name=a;this.type="primitive";this["function"]=b}function qa(a,b){this.type="macro";a instanceof r||a instanceof qa?(a.proxy&&(a=a.original),this.proxy=!0,this.isLet=!!b,this.original=a):(this.proxy=!1,this.replacement=a||[],this.parameters=b||[])}function k(a,b,d,f){this.type="integer";this.register=!0;this.message=f||"";a instanceof k?(this.value=a.value,this.parent=a,this.min=a.min,this.max=a.max):(this.min=null===
b||void 0===b?-9007199254740991:b,this.max=null===d||void 0===b?9007199254740991:d,a=Math.round(a),isFinite(a)||(a=9007199254740991*Math.sign(a)),9007199254740991<a?a=-9007199254740991+a%9007199254740991:-9007199254740991>a&&(a=9007199254740991+a%9007199254740991),this.value=isNaN(a)?0:Math.round(a))}function u(a,b,d){this.type="dimension";this.message=d||"";this.register=!0;a instanceof u?(this.sp=new k(a.sp),this.em=new k(a.em),this.message=b||"",this.parent=a):a instanceof H?(this.sp=new k(0),
this.em=new k(a.mu/18),this.message=b||""):(this.sp=new k(a),this.em=new k(b))}function H(a,b){this.type="mu dimension";this.message=b||"";this.register=!0;a instanceof H?(this.mu=new k(a.mu),this.parent=a):this.mu=a instanceof u?new k(a.em/18+a.sp/65536/12*18):new k(a)}function T(a,b,d,f){this.type="glue";this.message=f||"";this.register=!0;a instanceof T?(this.start=new u(a.start),this.stretch=new u(a.stretch),this.shrink=new u(a.shrink),this.parent=a):(this.start=new u(a),this.stretch=b instanceof
A?b:new u(b),this.shrink=d instanceof A?d:new u(d))}function fa(a,b,d,f){this.type="mu glue";this.message=f||"";this.register=!0;a instanceof fa?(this.start=new H(a.start),this.stretch=new H(a.stretch),this.shrink=new H(a.shrink),this.parent=a):(this.start=new H(a),this.stretch=b instanceof A?b:new H(b),this.shrink=d instanceof A?d:new H(d))}function A(a,b,d){this.type="infinite dimension";this.message=d||"";this.register=!0;this.number=new k(a);this.magnitude=new k(b)}function Y(a,b,c,f){function h(a){for(;;){var f=
b.eat();if(!f)break;else if("command"==f.type||"character"==f.type&&f.cat===d.cats.active)if(f="command"==f.type?c.last.defs.primitive[f.name]||c.last.defs.macros[f.name]:c.last.defs.active[f["char"]])if(f===d.defs.primitive["if"]||f.isLet&&f.original===d.defs.primitive["if"]||f===d.defs.primitive.ifcase||f.isLet&&f.original===d.defs.primitive.ifcase||f===d.defs.primitive.ifcat||f.isLet&&f.original===d.defs.primitive.ifcat||f===d.defs.primitive.ifdim||f.isLet&&f.original===d.defs.primitive.ifdim||
f===d.defs.primitive.ifeof||f.isLet&&f.original===d.defs.primitive.ifeof||f===d.defs.primitive.iffalse||f.isLet&&f.original===d.defs.primitive.iffalse||f===d.defs.primitive.ifodd||f.isLet&&f.original===d.defs.primitive.ifodd||f===d.defs.primitive.ifnum||f.isLet&&f.original===d.defs.primitive.ifnum||f===d.defs.primitive.ifhmode||f.isLet&&f.original===d.defs.primitive.ifhmode||f===d.defs.primitive.ifinner||f.isLet&&f.original===d.defs.primitive.ifinner||f===d.defs.primitive.ifmmode||f.isLet&&f.original===
d.defs.primitive.ifmmode||f===d.defs.primitive.iftrue||f.isLet&&f.original===d.defs.primitive.iftrue||f===d.defs.primitive.ifvmode||f.isLet&&f.original===d.defs.primitive.ifvmode||f===d.defs.primitive.ifvoid||f.isLet&&f.original===d.defs.primitive.ifvoid||f===d.defs.primitive.ifx||f.isLet&&f.original===d.defs.primitive.ifx)h("fi"),b.eat();else{if("else"==a&&(f===d.defs.primitive["else"]||f.isLet&&f.original===d.defs.primitive["else"]))break;if(f===d.defs.primitive.fi||f.isLet&&f.original===d.defs.primitive.fi){b.revert();
break}}}}function m(){for(var a=[];;){var f=b.eat();if(f)if("command"==f.type||"character"==f.type&&f.cat===d.cats.active){var h="command"==f.type?c.last.defs.primitive[f.name]||c.last.defs.macros[f.name]:c.last.defs.active[f["char"]];if(h){if(h===d.defs.primitive["if"]||h.isLet&&h.original===d.defs.primitive["if"]||h===d.defs.primitive.ifcase||h.isLet&&h.original===d.defs.primitive.ifcase||h===d.defs.primitive.ifcat||h.isLet&&h.original===d.defs.primitive.ifcat||h===d.defs.primitive.ifdim||h.isLet&&
h.original===d.defs.primitive.ifdim||h===d.defs.primitive.ifeof||h.isLet&&h.original===d.defs.primitive.ifeof||h===d.defs.primitive.iffalse||h.isLet&&h.original===d.defs.primitive.iffalse||h===d.defs.primitive.ifodd||h.isLet&&h.original===d.defs.primitive.ifodd||h===d.defs.primitive.ifnum||h.isLet&&h.original===d.defs.primitive.ifnum||h===d.defs.primitive.ifhmode||h.isLet&&h.original===d.defs.primitive.ifhmode||h===d.defs.primitive.ifinner||h.isLet&&h.original===d.defs.primitive.ifinner||h===d.defs.primitive.ifmmode||
h.isLet&&h.original===d.defs.primitive.ifmmode||h===d.defs.primitive.iftrue||h.isLet&&h.original===d.defs.primitive.iftrue||h===d.defs.primitive.ifvmode||h.isLet&&h.original===d.defs.primitive.ifvmode||h===d.defs.primitive.ifvoid||h.isLet&&h.original===d.defs.primitive.ifvoid||h===d.defs.primitive.ifx||h.isLet&&h.original===d.defs.primitive.ifx)if(h=m()){a.push(f);a.push.apply(a,h);continue}else return null;a.push(f);if(h===d.defs.primitive.fi||h.isLet&&h.original===d.defs.primitive.fi)return a}else a.push(f)}else a.push(f);
else return null}}var k=[];if(a)for(;;)if(a=b.eat())if("command"==a.type||"character"==a.type&&a.cat==d.cats.active){var g="command"==a.type?c.last.defs.primitive[a.name]||c.last.defs.macros[a.name]:c.last.defs.active[a["char"]];if(g)if(g===d.defs.primitive["if"]||g.isLet&&g.original===d.defs.primitive["if"]||g===d.defs.primitive.ifcase||g.isLet&&g.original===d.defs.primitive.ifcase||g===d.defs.primitive.ifcat||g.isLet&&g.original===d.defs.primitive.ifcat||g===d.defs.primitive.ifdim||g.isLet&&g.original===
d.defs.primitive.ifdim||g===d.defs.primitive.ifeof||g.isLet&&g.original===d.defs.primitive.ifeof||g===d.defs.primitive.iffalse||g.isLet&&g.original===d.defs.primitive.iffalse||g===d.defs.primitive.ifodd||g.isLet&&g.original===d.defs.primitive.ifodd||g===d.defs.primitive.ifnum||g.isLet&&g.original===d.defs.primitive.ifnum||g===d.defs.primitive.ifhmode||g.isLet&&g.original===d.defs.primitive.ifhmode||g===d.defs.primitive.ifinner||g.isLet&&g.original===d.defs.primitive.ifinner||g===d.defs.primitive.ifmmode||
g.isLet&&g.original===d.defs.primitive.ifmmode||g===d.defs.primitive.iftrue||g.isLet&&g.original===d.defs.primitive.iftrue||g===d.defs.primitive.ifvmode||g.isLet&&g.original===d.defs.primitive.ifvmode||g===d.defs.primitive.ifvoid||g.isLet&&g.original===d.defs.primitive.ifvoid||g===d.defs.primitive.ifx||g.isLet&&g.original===d.defs.primitive.ifx)if(g=m())k.push(a),k.push.apply(k,g);else return this.invalid=!0,b.loadState(f),[this];else if(g===d.defs.primitive["else"]||g.proxy&&g.original===d.defs.primitive["else"])h("fi");
else if(g===d.defs.primitive.fi||g.proxy&&g.original===d.defs.primitive.fi)break;else k.push(a);else k.push(a)}else k.push(a);else return this.invalid=!0,b.loadState(f),[this];else for(h("else");;)if(a=b.eat())if("command"==a.type||"character"==a.type&&a.cat==d.cats.active)if(g="command"==a.type?c.last.defs.primitive[a.name]||c.last.defs.macros[a.name]:c.last.defs.active[a["char"]])if(g===d.defs.primitive["if"]||g.isLet&&g.original===d.defs.primitive["if"]||g===d.defs.primitive.ifcase||g.isLet&&g.original===
d.defs.primitive.ifcase||g===d.defs.primitive.ifcat||g.isLet&&g.original===d.defs.primitive.ifcat||g===d.defs.primitive.ifdim||g.isLet&&g.original===d.defs.primitive.ifdim||g===d.defs.primitive.ifeof||g.isLet&&g.original===d.defs.primitive.ifeof||g===d.defs.primitive.iffalse||g.isLet&&g.original===d.defs.primitive.iffalse||g===d.defs.primitive.ifodd||g.isLet&&g.original===d.defs.primitive.ifodd||g===d.defs.primitive.ifnum||g.isLet&&g.original===d.defs.primitive.ifnum||g===d.defs.primitive.ifhmode||
g.isLet&&g.original===d.defs.primitive.ifhmode||g===d.defs.primitive.ifinner||g.isLet&&g.original===d.defs.primitive.ifinner||g===d.defs.primitive.ifmmode||g.isLet&&g.original===d.defs.primitive.ifmmode||g===d.defs.primitive.iftrue||g.isLet&&g.original===d.defs.primitive.iftrue||g===d.defs.primitive.ifvmode||g.isLet&&g.original===d.defs.primitive.ifvmode||g===d.defs.primitive.ifvoid||g.isLet&&g.original===d.defs.primitive.ifvoid||g===d.defs.primitive.ifx||g.isLet&&g.original===d.defs.primitive.ifx)if(g=
m())k.push(a),k.push.apply(k,g);else return this.invalid=!0,b.loadState(f),[this];else if(g&&(g===d.defs.primitive.fi||g.proxy&&g.original===d.defs.primitive.fi))break;else k.push(a);else k.push(a);else k.push(a);else return this.invalid=!0,b.loadState(f),[this];return k}window.fontTeX=window.fontTeX||{};if(!(fontTeX.version&&["0","4","1"].map(function(a){return String.fromCharCode(48+ +a)}).join("")<fontTeX.version.split(".").map(function(a){return String.fromCharCode(48+ +a)}).join(""))){fontTeX.version=
"0.4.1";fontTeX.config=function(a,b){var d="autoupdate.enabled autoupdate.rate parsehtml radical.build radical.w radical.t radical.h radical.verticalthreshold".split(" ");if("string"==typeof a&&d.includes(a.toLowerCase())){1<arguments.length&&(b=ca[a.toLowerCase()][1](b),"number"!=typeof b||isFinite(b)||(b=0),ca[a.toLowerCase()][0]=b);var f=ca[a.toLowerCase()][0]}else{if("string"==typeof a)return null;f={};for(var h=0,m=d.length;h<m;h++){var k=d[h];a&&k in a&&(a[k]=ca[k][1](a[k]),"number"!=typeof a[k]||
isFinite(a[k])||(a[k]=0),ca[k][0]=a[k]);f[k]=ca[k][0]}}if(!!ha.interval!=!!ca["autoupdate.enabled"][0]||ha.rate!=ca["autoupdate.rate"][0])clearInterval(ha.interval),ha.rate=Math.max(ca["autoupdate.rate"][0],0)||ha.rate,ca["autoupdate.enabled"][0]&&Math.max(ca["autoupdate.rate"][0],0)?(ha.interval=setInterval(ha.listener,ha.rate),ha.listener()):ha.interval=0;return f};var ca={"autoupdate.enabled":[!0,Boolean],"autoupdate.rate":[500,Number],parsehtml:[!0,Boolean],"radical.build":[!0,Boolean],"radical.w":[.5,
Number],"radical.t":[.15,Number],"radical.h":[1.25,Number],"radical.verticalthreshold":[2.75,Number]},ha={interval:0,data:[],rate:ca["autoupdate.rate"][0],listener:function(){for(var a=ha.data,b=0,d=a.length,f=0;b<d;b++)if(a[b].styles.fontSize!=a[b].oldFontSize||a[b].styles.fontFamily!=a[b].oldFontFamily)a[b].texInstance.renderIn(a[b].elem),a[b].oldFontSize=a[b].styles.fontSize,a[b].oldFontFamily=a[b].styles.fontFamily,f++;return f}};ha.interval=setInterval(ha.listener,ca["autoupdate.rate"][0]);fontTeX.updateTeX=
ha.listener;fontTeX.render=function(a){for(var b=[],c=a;a;)if(a.charCodeAt(0)in d.cats){var f=function(b){var c=a[b]||"",f=d.cats[c.charCodeAt(0)];if(!f||0!=f.value&&3!=f.value&&13!=f.value)return[{},0];f=f.value;if(f==d.cats.escape){if(a.charCodeAt(b+1)in d.cats&&d.cats[a.charCodeAt(b+1)].value==d.cats.letter){f="";for(b+=1;a[b]&&a.charCodeAt(b)in d.cats&&d.cats[a.charCodeAt(b)].value==d.cats.letter;b++)f+=a[b];if(d.defs.macros[f])b=d.defs.macros[f];else return[{},0]}else if(a[b+1]&&(d.defs.primitive[a[b+
1]]||d.defs.macros[a[b+1]]))f=a[b+1],b=d.defs.primitive[a[b+1]]||d.defs.macros[a[b+1]];else return[{},0];var h=!1;b.isLet&&(b=b.original,h=!0);return b===d.defs.primitive["["]?[{type:"command",name:"[",cat:-1},f.length+1]:b===d.defs.primitive["("]?[{type:"command",name:"(",cat:-1},f.length+1]:h&&b.replacement&&1==b.replacement.length&&b.replacement[0].cat==d.cats.math?[{"char":c,cat:d.cats.math},f.length+1]:[{},0]}if(f==d.cats.math)return[{"char":c,cat:d.cats.math},1];if(f==d.cats.active&&d.defs.active[c])return d.defs.active[c].isLet&&
d.defs.active[c].original===d.defs.primitive["["]?[{type:"command",name:"[",cat:-1},1]:d.defs.active[c].isLet&&d.defs.active[c].original===d.defs.primitive["("]?[{type:"command",name:"(",cat:-1},1]:d.defs.active[c].isLet&&d.defs.active[c].original.replacement&&1==d.defs.active[c].original.replacement.length&&d.defs.active[c].original.replacement[0].cat==d.cats.math?[{"char":c,cat:d.cats.math},1]:[{},0]},h=f(0),m=null,k=0;3==h[0].cat?(k+=h[1],f=f(h[1]),3==f[0].cat?(m="display",k+=f[1]):m="inline"):
"command"==h[0].type&&"["==h[0].name?(m="display",k+=h[1]):"command"==h[0].type&&"("==h[0].name&&(m="inline",k+=h[1]);if("display"==m){m=fontTeX._tokenize(a.substring(k),"display");if(!m[2]){b.push(a);a="";break}a=m[1];b.push([m[0],"display"])}else if("inline"==m){m=fontTeX._tokenize(a.substring(k),"inline");if(!m[2]){b.push(a);a="";break}a=m[1];b.push([m[0],"text"])}else"string"==typeof b[b.length-1]?b[b.length-1]+=a[0]:b.push(a[0]),a=a.substring(1)}else"string"==typeof b[b.length-1]?b[b.length-
1]+=a[0]:b.push(a[0]),a=a.substring(1);return new fontTeX.ParsedFontTeX(c,b)};fontTeX.ParsedFontTeX=function(a,b){this.TeXstring=a;this.parsedTokens=b};fontTeX.ParsedFontTeX.prototype={"in":function(a){var b=this.parsedTokens;if("string"==typeof a)return this["in"](document.querySelectorAll(a));if(a instanceof HTMLElement)return this["in"]([a]);if(!isNaN(a.length))for(var d=0,f=a.length;d<f;d++){a[d].innerHTML="";if(a[d].hasAttribute("data-fontTeX-container-id")){var h=ha.data,m=+a[d].getAttribute("data-fontTeX-container-id"),
k=ha.data[m].styles;h[m]={elem:a[d],styles:h[m].styles,texInstance:this,oldFontFamily:k.fontFamily,oldFontSize:k.fontSize}}else h=ha.data,m=h.length,k=getComputedStyle(a[d]),a[d].setAttribute("data-fontTeX-container-id",m),h[m]={elem:a[d],styles:k,texInstance:this,oldFontFamily:k.fontFamily,oldFontSize:k.fontSize};if(ca.parsehtml[0]){var g="",p=[];h=0;for(m=b.length;h<m;h++)if("string"==typeof b[h])g+=b[h];else{var r=(Math.random()*Math.random()+"").replace(".",""),O=(Math.random()*Math.random()+
"").replace(".","");p.push([r,O,fontTeX._genHTML(a[d],b[h][0],b[h][1],k)]);g+="<span data-fontTeX-ID-1"+r+" data-fontTeX-ID-2"+O+"></span>"}k=document.createElement("div");k.innerHTML=g;h=0;for(m=p.length;h<m;h++)if(g=k.querySelector("[data-fontTeX-ID-1"+p[h][0]+"][data-fontTeX-ID-2"+p[h][1]+"]"))g.parentNode.insertBefore(p[h][2],g),g.parentNode.removeChild(g);h=0;for(m=k.childNodes.length;h<m;h++)a[d].appendChild(k.firstChild)}else{p=document.createDocumentFragment();h=0;for(m=b.length;h<m;h++)"string"==
typeof b[h]?p.appendChild(document.createTextNode(b[h])):p.appendChild(fontTeX._genHTML(a[d],b[h][0],b[h][1],k));a[d].appendChild(p)}}},renderIn:function(a){this["in"].apply(this,arguments)},again:function(){},rerender:function(){this.again.apply(this,arguments)}};fontTeX._tokenize=function(a,b){function c(a,g){function l(a,c){c||(c=this);if(a&&("command"==a.type||"character"==a.type&&a.cat==d.cats.active)){if(a.invalid){var l=("command"==a.type?a.escapeChar+a.name:a["char"]).split("");l=l.map(function(b){return{type:"character",
cat:d.cats.all,"char":b,code:b.charCodeAt(0),invalid:!0,recognized:a.recognized}});return[{type:"character",cat:1,"char":"{",code:123,invalid:!0}].concat(l).concat({type:"character",cat:2,"char":"}",code:125,invalid:!0})}if(a.ignore)return[{type:"ignored command",token:a}];if("command"==a.type){if(a.name in t.last.defs.macros){if(t.last.defs.macros[a.name].proxy&&"primitive"==t.last.defs.macros[a.name].original.type)return l=t.last.defs.macros[a.name].original["function"].call(a,{mouth:c,tokens:t.last.tokens,
toggles:da,catOf:h,mathCodeOf:m,scopes:t,openGroups:z,contexts:F,Scope:f,style:b}),a.recognized=!0,Array.isArray(l)?l:[];a.recognized=!0;l=t.last.defs.macros[a.name];l.proxy&&(l=l.original);$jscomp.initSymbol();var g=Symbol();c.saveState(g);for(var I=[],k=0,p=l.parameters.length;k<p;k++){var ka=l.parameters[k];if(ka.cat==d.cats.param)if(l.parameters[k+1]&&l.parameters[k+1].cat!=d.cats.param){ka=l.parameters[k+1];I.push([]);for(Xa=0;;){var n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(g),
[a];if(n[0].type==ka.type&&n[0].cat==ka.cat&&n[0].code==ka.code&&n[0].name==ka.name){c.revert();break}I[I.length-1]=I[I.length-1].concat(n);Xa++}1==Xa&&I[I.length-1][0].cat==d.cats.open&&I[I.length-1][I[I.length-1].length-1].cat==d.cats.close&&(I[I.length-1].shift(),I[I.length-1].pop())}else{n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(g),[a];2<n.length&&(n.shift(),n.pop());I.push(n)}else if(n=c.eat(),!ka||!n||ka.type!=n.type||ka.cat!=n.cat||ka.code!=n.code||ka.name!=n.name)return a.invalid=
!0,c.loadState(g),[a]}n=[];k=0;for(p=l.replacement.length;k<p;k++)if(l.replacement[k].cat==d.cats.param)l.replacement[k+1].cat==d.cats.param?(n.push(l.replacement[k+1]),k++):(g=l.replacement[k+1]["char"]-1,g>I.length?n=n.concat({type:"character",cat:d.cats.all,"char":l.replacement[k]["char"],code:macros.replacement[k].code,invalid:!0}):(n=n.concat(I[g]),k++));else{g={};for(var q in l.replacement[k])g[q]=l.replacement[k][q];n.push(g)}return n}if(a.name in t.last.defs.primitive)return l=t.last.defs.primitive[a.name]["function"].call(a,
{mouth:c,tokens:t.last.tokens,toggles:da,catOf:h,scopes:t,openGroups:z,contexts:F,Scope:f,style:b}),a.recognized=!0,Array.isArray(l)?l:[];if(a.name in t.last.registers.named)return[t.last.registers.named[a.name]];a.invalid=!0;return[a]}if("character"==a.type){if(a["char"]in t.last.defs.active){if(t.last.defs.active[a["char"]].proxy&&"primitive"==t.last.defs.active[a["char"]].original.type)return l=(t.last.defs.active[a["char"]].proxy?t.last.defs.active[a["char"]].original:t.last.defs.active[a["char"]])["function"].call(a,
{mouth:c,tokens:t.last.tokens,toggles:da,catOf:h,scopes:t,openGroups:z,contexts:F,Scope:f,style:b}),a.recognized=!0,Array.isArray(l)?l:[];a.recognized=!0;$jscomp.initSymbol();l=t.last.defs.active[a["char"]];g=Symbol();c.saveState(g);l.proxy&&(l=l.original);I=[];k=0;for(p=l.parameters.length;k<p;k++)if(ka=l.parameters[k],ka.cat==d.cats.param)if(l.parameters[k+1]&&l.parameters[k+1].cat!=d.cats.param){ka=l.parameters[k+1];var Xa=0;for(I.push([]);;){n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(g),
[a];if(n[0].type==ka.type&&n[0].cat==ka.cat&&n.code==ka.code&&n.name==n.name){c.revert();break}I[I.length-1].push(n);Xa++}1==Xa&&I[I.length-1][0].cat==d.cats.open&&I[I.length-1][I[I.length-1].length-1].cat==d.cats.close&&(I[I.length-1].shift(),I[I.length-1].pop())}else{n=c.eat("argument");if(!n)return a.invalid=!0,c.loadState(g),[a];2<n.length&&(n.shift(),n.pop());I.push([n])}else if(n=c.eat(),!ka||!n||ka.type!=n.type||ka.cat!=n.cat||ka.code!=n.code||ka.name!=n.name)return a.invalid=!0,c.loadState(g),
[a];n=[];k=0;for(p=l.replacement.length;k<p;k++)if(l.replacement[k].cat==d.cats.param)l.replacement[k+1].cat==d.cats.param?n.push(l.replacement[k+1]):n=n.concat(I[l.replacement[k+1]["char"]-1]),k++;else{g={};for(q in l.replacement[k])g[q]=l.replacement[k][q];n.push(g)}return n}a.invalid=!0;return[a]}}else return[a]}this.queue=(g||Ya).slice();this.string="string"==typeof a?a:E;this.history=[];this.savedStates={};this.eat=function(a){switch(a){default:if(this.queue.length){if(this.queue[0].cat==d.cats.whitespace&&
"pre space"!=a)return this.queue.shift(),this.eat(a);this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});return this.queue.shift()}if(0==this.string.length)return null;if(h(this.string[0])==d.cats.escape){if(!this.string[1]||"\n"==this.string[1])return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),this.string=this.string.substring(2),{type:"command",escapeChar:this.string[0],name:"",nameType:"command"};this.string[1]==
this.string[2]&&h(this.string[1])==d.cats["super"]&&E[4]&&"0123456789abcdef".includes(E[3])&&"0123456789abcdef".includes(E[4])?this.string=this.string[0]+String.fromCharCode(this.string[3]+this.string[4],16)+this.string.substring(5):this.string[1]==this.string[2]&&h(this.string[1])==d.cats["super"]&&128>E[3].charCodeAt(0)&&(this.string=this.string[0]+String.fromCharCode((this.string[3].charCodeAt(0)+64)%128)+this.string.substring(4));if(h(this.string[1])==d.cats.letter){for(var b="",f=1;;f++)if(h(this.string[f])==
d.cats.letter)b+=this.string[f];else if(this.string[f]==this.string[f+1]&&h(this.string[f])==d.cats["super"]&&"0123456789abcdef".includes(this.string[f+2])&&"0123456789abcdef".includes(this.string[f+3]))this.string=this.string.substring(0,f)+String.fromCharCode(this.string.substring(f+2,f+4),16)+this.string.substring(0,f+4),f--;else if(this.string[f]==this.string[f+1]&&h(this.string[f])==d.cats["super"]&&128>this.string.charCodeAt(f+2))this.string=this.string.substring(0,f)+String.fromCharCode((this.string.charCodeAt(f+
2)+64)%128)+this.string.substring(f+3),f--;else break;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});var g={type:"command",escapeChar:this.string[0],name:b,nameType:"command"};this.string=this.string.substring(1+b.length)}else this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),g={type:"command",escapeChar:this.string[0],name:this.string[1],nameType:"symbol"},this.string=this.string.substring(2);return g}if(h(this.string[0])==
d.cats["super"]&&this.string[0]==this.string[1]&&h(this.string[0])==d.cats["super"]&&"0123456789abcdef".includes(this.string[2])&&"0123456789abcdef".includes(this.string[3]))return this.string=String.fromCharCode(parseInt(this.string.substring(2,4),16))+this.string.substring(4),this.eat(a);if(h(this.string[0])==d.cats["super"]&&this.string[0]==this.string[1]&&h(this.string[0])==d.cats["super"]&&128>this.string.charCodeAt(2))return this.string=String.fromCharCode((this.string.charCodeAt(2)+64)%128)+
this.string.substring(3),this.eat(a);if([1,2,3,4,6,7,8,11,12,13].includes(h(this.string[0])))return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),b=this.string[0],this.string=this.string.substring(1),{type:"character","char":b,code:b.charCodeAt(0),cat:h(b)};if(h(this.string[0])==d.cats.eol){b=this.string.indexOf("\n");for(this.string=this.string.substring(~b?b+1:this.string.length);h(this.string[0])==d.cats.whitespace;)this.string=this.string.substring(1);
"pre space"==a&&this.queue.unshift({type:"character","char":" ",code:32,cat:d.cats.whitespace});return this.eat(a)}if(h(this.string[0])==d.cats.comment)return b=this.string.indexOf("\n"),this.string=this.string.substring(~b?b+1:this.string.length),this.eat(a);if(h(this.string[0])==d.cats.whitespace&&"pre space"!=a||h(this.string[0])==d.cats.ignored)return this.string=this.string.substring(1),this.eat();if(h(this.string[0])==d.cats.whitespace&&"pre space"==a)return this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()}),b=this.string[0],this.string=this.string.substring(1),{type:"character","char":b,code:b.charCodeAt(0),cat:d.cats.whitespace};if(h(this.string[0])==d.cats.invalid)return this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()}),b=this.string[0],this.string=this.string.substring(1),{type:"character","char":b,code:b.charCodeAt(0),cat:d.cats.all,invalid:!0};break;case "argument":b=new c(this.string,this.queue);for(var I=
0,m=[];;){if(g=b.eat())g.cat==d.cats.open?I++:g.cat==d.cats.close&&I--;else break;m.push(g);if(0==I)break}if(0<I||0==m.length)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return m;case "integer":b=new c(this.string,this.queue);I=1;a="start";var p=0,n=!1;for(m="pre space";;){g=b.eat(m);if(!g)break;if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==d.cats.active))if((f="command"==g.type?t.last.defs.primitive[g.name]||
t.last.defs.macros[g.name]||t.last.registers.named[g.name]:t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||
f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);
if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||g.cat!=d.cats.whitespace)if("start"==a&&g.cat==d.cats.all&&"-"==g["char"])I*=-1;else if("start"!=a||g.cat!=d.cats.all||"+"!=g["char"])if("start"==a&&g.register){"integer"==g.type?p=g.value:"dimension"==g.type?p=g.sp.value+12*g.em.value:"mu dimension"==g.type?p=12*g.mu.value/18:"glue"==g.type?
p=g.start.sp.value+12*g.start.em.value:"mu glue"==g.type&&(p=12*g.start.mu.value/18);n=!0;break}else if("start"==a)m="unsigned int",b.revert();else{b.revert();break}}if(!n)return null;p*=I;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new k(p);case "dimension":b=new c(this.string,this.queue);I=1;a="start";var q=n=!1;p=" ";var w=0,O=0,r=!1;for(m="pre space";!q;){g=b.eat(m);if(!g)break;if("start"==a&&("command"==
g.type||"character"==g.type&&g.cat==d.cats.active))if((f="command"==g.type?t.last.defs.primitive[g.name]||t.last.defs.macros[g.name]||t.last.registers.named[g.name]:t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||
f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===
d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||g.cat!=d.cats.whitespace)if("start"==a&&g.cat==d.cats.all&&"-"==g["char"])I*=-1;else if("start"!=a||g.cat!=d.cats.all||"+"!=g["char"])if("start"==a&&!n&&g.register){if("integer"==g.type?
(p=g.value,"decimal"==g.message&&(p/=65536),p=" "+p,m="pre space",a="unit start"):"dimension"==g.type?(w=g.sp.value,O=g.em.value,q=!0):"mu dimension"==g.type?(O=g.mu.value/18,q=!0):"glue"==g.type?(w=g.start.sp.value,O=g.start.em.value,q=!0):"mu glue"==g.type&&(O=g.start.mu.value/18,q=!0),n=!0,q)break}else if(n&&"unit start"==a&&g.cat==d.cats.whitespace)a="unit start";else if(n&&g.register){p=parseFloat((p+" ").replace(" .",".").replace(". ","")||"0");"integer"==g.type?w=p*g.value:"dimension"==g.type?
(w=p*g.sp.value,O=p*g.em.value):"mu dimension"==g.type?O=p*g.mu.value/18:"glue"==g.type?(w=p*g.start.sp.value,O=p*g.start.em.value):"mu glue"==g.type&&(O=p*g.start.mu.value);q=!0;break}else if(!n||r||"t"!=g["char"]&&"T"!=g["char"])if(!n||r||"e"!=g["char"]&&"E"!=g["char"])if(!n||"p"!=g["char"]&&"P"!=g["char"])if(!n||"i"!=g["char"]&&"I"!=g["char"])if(!n||"b"!=g["char"]&&"B"!=g["char"])if(!n||"c"!=g["char"]&&"C"!=g["char"])if(!n||"m"!=g["char"]&&"M"!=g["char"])if(!n||"d"!=g["char"]&&"D"!=g["char"])if(!n||
"s"!=g["char"]&&"S"!=g["char"])if("start"!=a||n){b.revert();break}else m="factor",b.revert();else if(g=b.eat("pre space"),!g||"p"!=g["char"]&&"P"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=parseFloat((p+" ").replace(" .",".").replace(". ","")||"0"),q=!0;else if(g=b.eat("pre space"),!g||"d"!=g["char"]&&"D"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=81133568*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0")/1157,q=!0;else if(g=b.eat("pre space"),!g||"m"!=g["char"]&&
"M"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=4718592*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0")/2.54/10,q=!0;else if(g=b.eat("pre space"),!g||"m"!=g["char"]&&"M"!=g["char"]||g.cat==d.cats.active)if(!g||"c"!=g["char"]&&"C"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=81133568*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0")/1157*12,q=!0;else w=4718592*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0")/2.54,q=!0;else if(g=b.eat("pre space"),
!g||"p"!=g["char"]&&"P"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=65536*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0"),q=!0;else if(g=b.eat("pre space"),!g||"n"!=g["char"]&&"N"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=4718592*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0"),q=!0;else if(g=b.eat("pre space"),!g||"t"!=g["char"]&&"T"!=g["char"]||g.cat==d.cats.active)if(!g||"c"!=g["char"]&&"C"!=g["char"]||g.cat==d.cats.active)if(!g||"x"!=g["char"]&&
"X"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else w=786432*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0")/16,q=!0;else w=786432*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0"),q=!0;else w=65536*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0"),q=!0;else{g=b.eat("pre space");if(!g||"m"!=g["char"]&&"M"!=g["char"]||g.cat==d.cats.active)if(!g||"x"!=g["char"]&&"X"!=g["char"]||g.cat==d.cats.active){b.revert(2);break}else O=233*parseFloat((p+" ").replace(" .",
".").replace(". ","")||"0")/480*65536;else O=65536*parseFloat((p+" ").replace(" .",".").replace(". ","")||"0");q=!0}else{a=b.eat("pre space");if(!a||"r"!=a["char"]&&"R"!=a["char"]||a.cat==d.cats.active)b.revert(2);else if(g=b.eat("pre space"),!g||"u"!=g["char"]&&"U"!=a["char"]||g.cat==d.cats.active)b.revert(3);else if(a=b.eat("pre space"),!a||"e"!=a["char"]&&"E"!=a["char"]||a.cat==d.cats.active)b.revert(4);else{r=!0;a="unit start";continue}break}}if(!n||!q)return null;w*=I;O*=I;this.history.push({queue:this.queue.slice(),
string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return r?new u(1E3*w/t.last.registers.named.mag.value,1E3*O/t.last.registers.named.mag.value):new u(w,O);case "mu dimension":b=new c(this.string,this.queue);I=1;a="start";q=n=!1;p=" ";w=0;for(m="pre space";!q;){g=b.eat(m);if(!g)break;if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==d.cats.active))if((f="command"==g.type?t.last.defs.primitive[g.name]||t.last.defs.macros[g.name]||t.last.registers.named[g.name]:
t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===
d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,
f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||g.cat!=d.cats.whitespace)if("start"==a&&g.cat==d.cats.all&&"-"==g["char"])I*=-1;else if("start"!=a||g.cat!=d.cats.all||"+"!=g["char"])if("start"==a&&!n&&g.register){if("integer"==g.type?(p=g.value,"decimal"==g.message&&(p/=65536),p=" "+p,m="pre space",a="unit start"):"dimension"==g.type?(w=g.em.value/65536*18,q=!0):"mu dimension"==g.type?(w=g.mu.value/65536,q=!0):"glue"==g.type?
(w=g.start.em.value/65536*18,q=!0):"mu glue"==g.type&&(w=g.start.mu.value/65536,q=!0),n=!0,q)break}else if(n&&"unit start"==a&&g.cat==d.cats.whitespace)a="unit start";else if(n&&g.register&&"mu glue"==g.type){p=parseFloat((p+" ").replace(" .",".").replace(". ","")||"0");w=p*g.start.mu.value/65536;q=!0;break}else if(!n||"m"!=g["char"]&&"M"!=g["char"])if("start"!=a||n){b.revert();break}else m="factor",b.revert();else{g=b.eat("pre space");if(!g||"u"!=g["char"]&&"U"!=g["char"]||g.cat==d.cats.active){b.revert(2);
break}else w=parseFloat((p+" ").replace(" .",".").replace(". ","")||"0");q=!0}}if(!n||!q)return null;w*=I;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new H(65536*w);case "glue":b=new c(this.string,this.queue);n=p=I=1;a="start";var v=!1;q=!1;m="pre space";for(var z;;){g=b.eat(m);if(!g&&("post start"!=a&&"stretch signs"!=a||"dimension"!=m)&&("post stretch"!=a&&"shrink signs"!=a||"dimension"!=m)){w&&b.loadState(w);
break}if(g||"dimension"!=m)if("start"!=a&&"signs"!=a&&"post start"!=a&&"stretch signs"!=a&&"post stretch"!=a&&"shrink signs"!=a||"command"!=g.type&&("character"!=g.type||g.cat!=d.cats.active)){if("start"!=a&&"signs"!=a&&"post start"!=a&&"post stretch"!=a&&"stretch signs"!=a&&"shrink signs"!=a||g.cat!=d.cats.whitespace)if("start"!=a&&"signs"!=a||g.cat!=d.cats.all||"-"!=g["char"])if("start"!=a&&"signs"!=a||g.cat!=d.cats.all||"+"!=g["char"])if("start"!=a&&"signs"!=a||!g.register||"glue"!=g.type)if("start"!=
a&&"signs"!=a||!g.register||"dimension"!=g.type)if("start"==a||"signs"==a)m="dimension",b.revert();else if("post start"!=a||!O||q||v||"p"!=g["char"])if("post start"==a&&q&&g.cat==d.cats.all&&"-"==g["char"])p*=-1,a="stretch signs";else if("post start"==a&&q&&g.cat==d.cats.all&&"+"==g["char"])a="stretch signs";else if(("post start"==a||"stretch signs"==a)&&q&&g.register&&"dimension"==g.type)r=new u(g.sp.value*p,g.em.value*n),a="post stretch",m="pre space",$jscomp.initSymbol(),b.saveState(w=Symbol());
else if(("post start"==a||"stretch signs"==a)&&q&&g.register&&"integer"==g.type){m="pre space";if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),r=new A(g.value*p,1)):(f=b.eat("pre space"),!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==
d.cats.active?(f&&b.revert(),r=new A(g.value*p,2)):r=new A(g.value*p,3));a="post stretch";$jscomp.initSymbol();b.saveState(w=Symbol());continue}b.loadState(w);break}else if("post start"!=a&&"stretch signs"!=a||!q)if(("post start"!=a||q)&&"post stretch"!=a||v||"m"!=g["char"])if("post stretch"==a&&v&&g.cat==d.cats.all&&"-"==g["char"])n*=-1,a="shrink signs";else if("post stretch"==a&&v&&g.cat==d.cats.all&&"+"==g["char"])a="shrink signs";else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&
v&&g.register&&"dimension"==g.type){z=new u(g.sp.value*n,g.em.value*n);break}else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&v&&g.register&&"integer"==g.type){if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),
z=new A(g.value*n,1)):(f=b.eat("pre space"),!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(f&&b.revert(),z=new A(g.value*n,2)):z=new A(g.value*n,3));break}b.loadState(w);break}else if("post stretch"!=a&&"shrink signs"!=a&&"post start"!=a||!v){w?b.loadState(w):b.revert();break}else m="dimension",b.revert();else{if(!(!(f=b.eat("pre space"))||"i"!=f["char"]&&"I"!=f["char"]||f.cat==d.cats.active||!(g=b.eat("pre space"))||"n"!=g["char"]&&"N"!=g["char"]||g.cat==d.cats.active||!(g=b.eat("pre space"))||
"u"!=g["char"]&&"U"!=g["char"]||g.cat==d.cats.active||!(g=b.eat("pre space"))||"s"!=g["char"]&&"S"!=g["char"])&&g.cat!=d.cats.active){v=!0;continue}b.loadState(w);break}else m="dimension",b.revert();else{if((f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active&&(g=b.eat("pre space"))&&("u"==g["char"]||"U"==g["char"])&&g.cat!=d.cats.active&&(g=b.eat("pre space"))&&("s"==g["char"]||"S"==g["char"])&&g.cat!=d.cats.active){q=!0;continue}b.loadState(w);break}else O=new u(g.sp.value*
I,g.em.value*I),a="post start",m="pre space",$jscomp.initSymbol(),b.saveState(w=Symbol());else{O=new u(g.start.sp.value*I,g.start.em.value*I);r=new u(g.stretch.sp.value*I,g.stretch.em.value*I);z=new u(g.shrink.sp.value*I,g.shrink.em.value*I);break}else"signs"==a;else I*=-1,"signs"==a}else if((f="command"==g.type?t.last.defs.primitive[g.name]||t.last.defs.macros[g.name]||t.last.registers.named[g.name]:t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===
d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||
f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||
b.revert();break}else m="factor"}if(!O)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new T(O,r,z);case "mu glue":b=new c(this.string,this.queue);n=p=I=1;a="start";q=v=!1;for(m="pre space";;){g=b.eat(m);if(!g&&("post start"!=a&&"stretch signs"!=a||"mu dimension"!=m)&&("post stretch"!=a&&"shrink signs"!=a||"mu dimension"!=m)){w&&b.loadState(w);break}if(g||"mu dimension"!=m)if("start"!=a&&"signs"!=a&&
"post start"!=a&&"stretch signs"!=a&&"post stretch"!=a&&"shrink signs"!=a||"command"!=g.type&&("character"!=g.type||g.cat!=d.cats.active)){if("start"!=a&&"signs"!=a&&"post start"!=a&&"post stretch"!=a&&"stretch signs"!=a&&"shrink signs"!=a||g.cat!=d.cats.whitespace)if("start"!=a&&"signs"!=a||g.cat!=d.cats.all||"-"!=g["char"])if("start"!=a&&"signs"!=a||g.cat!=d.cats.all||"+"!=g["char"])if("start"!=a&&"signs"!=a||!g.register||"mu glue"!=g.type)if("start"!=a&&"signs"!=a||!g.register||"mu dimension"!=
g.type)if("start"==a||"signs"==a)m="mu dimension",b.revert();else if("post start"!=a||!O||q||v||"p"!=g["char"])if("post start"==a&&q&&g.cat==d.cats.all&&"-"==g["char"])p*=-1,a="stretch signs";else if("post start"==a&&q&&g.cat==d.cats.all&&"+"==g["char"])a="stretch signs";else if(("post start"==a||"stretch signs"==a)&&q&&g.register&&"mu dimension"==g.type)r=new H(g.mu.value*p),a="post stretch",m="pre space",$jscomp.initSymbol(),b.saveState(w=Symbol());else if(("post start"==a||"stretch signs"==a)&&
q&&g.register&&"integer"==g.type){m="pre space";if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(b.revert(),r=new A(g.value*p,1)):(f=b.eat("pre space"),!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?(b.revert(),r=new A(g.value*p,
2)):r=new A(g.value*p,3));a="post stretch";$jscomp.initSymbol();b.saveState(w=Symbol());continue}b.loadState(w);break}else if("post start"!=a&&"stretch signs"!=a||!q)if(("post start"!=a||q)&&"post stretch"!=a||v||"m"!=g["char"])if("post stretch"==a&&v&&g.cat==d.cats.all&&"-"==g["char"])n*=-1,a="shrink signs";else if("post stretch"==a&&v&&g.cat==d.cats.all&&"+"==g["char"])a="shrink signs";else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&v&&g.register&&"mu dimension"==g.type){z=new H(g.mu.value*
n);break}else if(("post stretch"==a||"shrink signs"==a||"post start"==a)&&v&&g.register&&"integer"==g.type){if((a=b.eat())&&("f"==a["char"]||"F"==a["char"])&&a.cat!=d.cats.active&&(f=b.eat("pre space"))&&("i"==f["char"]||"I"==f["char"])&&f.cat!=d.cats.active&&(f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active){f=b.eat("pre space");!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==d.cats.active?z=new A(g.value*n,1):(f=b.eat("pre space"),z=!f||"l"!=f["char"]&&"L"!=f["char"]||f.cat==
d.cats.active?new A(g.value*n,2):new A(g.value*n,3));break}b.loadState(w);break}else if("post stretch"!=a&&"shrink signs"!=a&&"post start"!=a||!v){w?b.loadState(w):b.revert();break}else m="mu dimension",b.revert();else{if(!(!(f=b.eat("pre space"))||"i"!=f["char"]&&"I"!=f["char"]||f.cat==d.cats.active||!(g=b.eat("pre space"))||"n"!=g["char"]&&"N"!=g["char"]||g.cat==d.cats.active||!(g=b.eat("pre space"))||"u"!=g["char"]&&"U"!=g["char"]||g.cat==d.cats.active||!(g=b.eat("pre space"))||"s"!=g["char"]&&
"S"!=g["char"])&&g.cat!=d.cats.active){v=!0;continue}b.loadState(w);break}else m="mu dimension",b.revert();else{if((f=b.eat("pre space"))&&("l"==f["char"]||"L"==f["char"])&&f.cat!=d.cats.active&&(g=b.eat("pre space"))&&("u"==g["char"]||"U"==g["char"])&&g.cat!=d.cats.active&&(g=b.eat("pre space"))&&("s"==g["char"]||"S"==g["char"])&&g.cat!=d.cats.active){q=!0;continue}b.loadState(w);break}else O=new H(g.mu.value*I),a="post start",m="pre space",$jscomp.initSymbol(),b.saveState(w=Symbol());else{O=new H(g.start.mu.value*
I);r=new H(g.stretch.mu.value*I);z=new H(g.shrink.mu.value*I);break}else"signs"==a;else I*=-1,"signs"==a}else if((f="command"==g.type?t.last.defs.primitive[g.name]||t.last.defs.macros[g.name]||t.last.registers.named[g.name]:t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||
f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||
f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else m="factor"}if(!O)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new fa(O,r,z);case "unsigned int":b=
new c(this.string,this.queue);a="start";p=0;for(n=!1;;){g=b.eat("pre space");if(!g)break;if("grave"==a){if("command"==g.type&&1==g.name.length)p=g.name.charCodeAt(0);else if("character"==g.type)p=g["char"].charCodeAt(0);else return null;n=!0;break}else if("start"==a&&("command"==g.type||"character"==g.type&&g.cat==d.cats.active))if((f="command"==g.type?t.last.defs.primitive[g.name]||t.last.defs.macros[g.name]||t.last.registers.named[g.name]:t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||
f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||
f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||
b.revert();break}else if("start"!=a||g.cat!=d.cats.whitespace)if("start"==a&&g.register&&"integer"==g.type){p=g.value;n=!0;break}else if(("decimal"==a||"start"==a)&&g.cat==d.cats.all&&47<g.code&&58>g.code)p=10*p+ +g["char"],a="decimal",n=!0;else if("start"==a&&g.cat==d.cats.all&&"'"==g["char"])a="octal";else if("start"==a&&g.cat==d.cats.all&&'"'==g["char"])a="hexadecimal";else if("start"==a&&g.cat==d.cats.all&&"`"==g["char"])a="grave";else if("octal"==a&&g.cat==d.cats.all&&47<g.code&&56>g.code)p=
8*p+ +g["char"],n=!0;else if("hexadecimal"==a&&(g.cat==d.cats.all&&47<g.code&&58>g.code||(g.cat==d.cats.all||g.cat==d.cats.letter)&&64<g.code&&71>g.code))p=16*p+parseInt(g["char"],16),n=!0;else{b.revert();break}}if(!n)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new k(p);case "factor":b=new c(this.string,this.queue);a="start";m="pre space";n=!1;for(p="";;){g=b.eat(m);if(!g)break;if("start"==a&&("command"==
g.type||"character"==g.type&&g.cat==d.cats.active))if((f="command"==g.type?t.last.defs.primitive[g.name]||t.last.defs.macros[g.name]||t.last.registers.named[g.name]:t.last.defs.active[g["char"]])&&(f.register||f===d.defs.primitive.catcode||f.proxy&&f.original===d.defs.primitive.catcode||f===d.defs.primitive.count||f.proxy&&f.original===d.defs.primitive.count||f===d.defs.primitive.day||f.proxy&&f.original===d.defs.primitive.day||f===d.defs.primitive.dimen||f.proxy&&f.original===d.defs.primitive.dimen||
f===d.defs.primitive.lccode||f.proxy&&f.original===d.defs.primitive.lccode||f===d.defs.primitive.mathcode||f.proxy&&f.original===d.defs.primitive.mathcode||f===d.defs.primitive.month||f.proxy&&f.original===d.defs.primitive.month||f===d.defs.primitive.muskip||f.proxy&&f.original===d.defs.primitive.muskip||f===d.defs.primitive.skip||f.proxy&&f.original===d.defs.primitive.skip||f===d.defs.primitive.time||f.proxy&&f.original===d.defs.primitive.time||f===d.defs.primitive.uccode||f.proxy&&f.original===
d.defs.primitive.uccode||f===d.defs.primitive.year||f.proxy&&f.original===d.defs.primitive.year)){f=l(g,b);if(1==f.length&&f[0]===g&&g.invalid){b.revert();break}b.queue.unshift.apply(b.queue,f)}else{f&&(f===d.defs.primitive.relax||f.proxy&&f.original===d.defs.primitive.relax)||b.revert();break}else if("start"!=a||g.cat!=d.cats.whitespace)if("start"==a&&g.register&&"integer"==g.type){p=g.value.toString();n=!0;break}else if(("pre decimal"==a||"start"==a)&&g.cat==d.cats.all&&47<g.code&&58>g.code)p+=
g["char"],a="pre decimal",n=!0;else if("pre decimal"!=a&&"start"!=a||g.cat!=d.cats.all||"."!=g["char"]&&","!=g["char"])if("post decimal"==a&&g.cat==d.cats.all&&47<g.code&&58>g.code)p+=g["char"];else if("start"==a)m="unsigned int",b.revert();else{b.revert();break}else p+=".",a="post decimal",n=!0}if(!n)return null;this.history.push({queue:this.queue.slice(),string:this.string,history:this.history.slice()});b.finalize();this.string=b.string;return new k(65536*p,null,null,"decimal")}};this.preview=function(a){(a=
this.eat(a))&&this.revert();return a};this.revert=function(a){for(a="number"==typeof a?a:1;0<a&&0!=this.history.length;a--){this.string=this.history[this.history.length-1].string;for(var b=0,d=this.history[this.history.length-1].queue.length;b<d;b++)this.queue[b]=this.history[this.history.length-1].queue[b];this.queue.length=this.history[this.history.length-1].queue.length;this.history=this.history[this.history.length-1].history}return this};this.finalize=function(){for(var b=0,d=this.queue.length;b<
d;b++)(g||Ya)[b]=this.queue[b];(g||Ya).length=this.queue.length;"string"!=typeof a&&(E=this.string)};this.saveState=function(a){this.savedStates[a]={queue:this.queue.slice(),string:this.string,history:this.history.slice()};return this};this.loadState=function(a){this.string=this.savedStates[a].string;this.history=this.savedStates[a].history;for(var b=0,d=this.savedStates[a].queue.length;b<d;b++)this.queue[b]=this.savedStates[a].queue[b];this.queue.length=this.savedStates[a].queue.length;return this};
this.expand=l}function f(){var a=this.parentScope=t.last||d;this.defs={primitive:{},macros:{},active:{}};this.registers={count:{},dimen:{},skip:{},muskip:{},named:{}};this.cats={};this.mathcodes={};this.lc={};this.uc={};this.font={};for(var b in a.defs.primitive)this.defs.primitive[b]=a.defs.primitive[b];for(b in a.defs.macros)this.defs.macros[b]=a.defs.macros[b];for(b in a.defs.active)this.defs.active[b]=a.defs.active[b];for(b in a.lc)this.lc[b]=new k(a.lc[b]);for(b in a.uc)this.uc[b]=new k(a.uc[b]);
for(b in a.font)this.font[b]=a.font[b];for(b in a.cats)!isNaN(b)&&(this.cats[b]=new k(a.cats[b]));for(b in a.mathcodes)!isNaN(b)&&(this.mathcodes[b]=new k(a.mathcodes[b]));for(b in a.registers.count)this.registers.count[b]=new k(a.registers.count[b]);for(b in a.registers.dimen)this.registers.dimen[b]=new u(a.registers.dimen[b]);for(b in a.registers.skip)this.registers.skip[b]=new T(a.registers.skip[b]);for(b in a.registers.muskip)this.registers.muskip[b]=new fa(a.registers.muskip[b]);for(b in a.registers.named){var c=
a.registers.named[b],f="integer"==c.type?"count":"dimension"==c.type?"dimen":"glue"==c.type?"skip":"muskip";if(Object.values(a.registers[f]).includes(c))for(var g in a.registers[f])a.registers.named[b]===a.registers[f][g]&&(this.registers.named[b]=this.registers[f][g]);else this.registers.named[b]=new ("integer"==c.type?k:"dimension"==c.type?u:"glue"==c.type?T:fa)(c)}this.tokens=[];this.split=!1;t.push(this)}function h(a){if(!a)return null;a=a.charCodeAt(0);return a in t.last.cats?t.last.cats[a].value:
d.cats.all}function m(a){if(!a)return null;a=a.charCodeAt(0);return a in t.last.mathcodes?t.last.mathcodes[a].value:d.mathcodes.ord}function w(a){for(var b=0,d=a.length;b<d;b++)if(a[b].ignore&&"command"==a[b].type)a[b].invalid?(d=(a[b].escapeChar+a[b].name).split("").map(function(d){return{type:"atom",atomType:a[b].recognized?0:7,nucleus:{type:"symbol","char":d,code:d.charCodeAt(0),invalid:!0},superscript:null,subscript:null}}),a.splice(b,1,{type:"atom",atomType:0,nucleus:d,superscript:null,subscript:null})):
a.splice(b,1),d=a.length,b--;else if(a[b].ignore&&!a[b].invalid)a.splice(b,1),d=a.length,b--;else if("fraction"==a[b].type)w(a[b].numerator),w(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++)for(var c=0,f=a[b].cellData[b].length;c<f;c++)w(a[b][c].content);else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&w(a[b].nucleus),Array.isArray(a[b].superscript)&&w(a[b].superscript),Array.isArray(a[b].subscript)&&w(a[b].subscript)):"mathchoice"==a[b].type?w(a[b].groups):
"box"==a[b].type?w([a[b].content]):"family modifier"==a[b].type&&"rad"==a[b].value&&w(a[b].index)}function g(a){for(var b=0,d=a.length;b<d;b++)if("family modifier"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"atom",atomType:a[b].value,nucleus:[a[b+1]],superscript:a[b+1].superscript,subscript:a[b+1].subscript,index:a[b].index}),a[b].nucleus[0].superscript=null,a[b].nucleus[0].subscript=null,d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:
a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)g(a[b].numerator),g(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=a[b].cellData[b].length;c<f;c++)g(a[b][c].content)}else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&g(a[b].nucleus),
Array.isArray(a[b].superscript)&&g(a[b].superscript),Array.isArray(a[b].subscript)&&g(a[b].subscript),Array.isArray(a[b].index)&&g(a[b].index)):"mathchoice"==a[b].type?g(a[b].groups):"box"==a[b].type&&g([a[b].content])}function p(a){for(var b=0,d=a.length;b<d;b++)if("accent modifier"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"atom",atomType:"acc",nucleus:[a[b+1]],superscript:a[b+1].superscript,subscript:a[b+1].subscript,accChar:a[b]["char"],accCode:a[b].code}),a[b].nucleus[0].superscript=
null,a[b].nucleus[0].subscript=null,d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)p(a[b].numerator),p(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<
d;b++){c=0;for(var f=a[b].cellData[b].length;c<f;c++)p(a[b][c].content)}else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&p(a[b].nucleus),Array.isArray(a[b].superscript)&&p(a[b].superscript),Array.isArray(a[b].subscript)&&p(a[b].subscript),Array.isArray(a[b].index)&&p(a[b].index)):"mathchoice"==a[b].type?p(a[b].groups):"box"==a[b].type&&p([a[b].content])}function r(a){for(var b=0,d=a.length;b<d;b++)if("limit modifier"==a[b].type)if(a[b-1]&&"atom"==a[b-1].type&&1==a[b-1].atomType)a[b-1].limits=a[b].value,
a.splice(b,1),d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,subscript:null}}else if("fraction"==a[b].type)r(a[b].numerator),r(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=
a[b].cellData[b].length;c<f;c++)r(a[b][c].content)}else"atom"==a[b].type?(1==a[b].atomType&&(a[b].limits="display"),Array.isArray(a[b].nucleus)&&r(a[b].nucleus),Array.isArray(a[b].superscript)&&r(a[b].superscript),Array.isArray(a[b].subscript)&&r(a[b].subscript),Array.isArray(a[b].index)&&r(a[b].index)):"mathchoice"==a[b].type?r(a[b].groups):"box"==a[b].type&&r([a[b].content])}function O(a){for(var b=0,d=a.length;b<d;b++)if("box wrapper"==a[b].type)if(a[b+1]&&"atom"==a[b+1].type)a.splice(b,2,{type:"box",
boxType:a[b].value,to:a[b].to,spread:a[b].spread,content:a[b+1],superscript:a[b+1].superscript,subscript:a[b+1].subscript}),a[b].content.superscript=null,a[b].content.subscript=null,d=a.length,b--;else{var c=("command"==a[b].token.type?a[b].token.escapeChar+a[b].token.name:a[b].token["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0),invalid:!0},superscript:null,subscript:null}});a[b]={type:"atom",atomType:0,nucleus:c,superscript:null,
subscript:null}}else if("fraction"==a[b].type)O(a[b].numerator),O(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++){c=0;for(var f=a[b].cellData[b].length;c<f;c++)O(a[b][c].content)}else"atom"==a[b].type?(Array.isArray(a[b].nucleus)&&O(a[b].nucleus),Array.isArray(a[b].superscript)&&O(a[b].superscript),Array.isArray(a[b].subscript)&&O(a[b].subscript),Array.isArray(a[b].index)&&O(a[b].index)):"mathchoice"==a[b].type?O(a[b].groups):"box"==a[b].type&&O([a[b].content])}
function n(a){for(var b=0,d=a.length;b<d;b++)if("atom"==a[b].type){if(Array.isArray(a[b].nucleus)&&1==a[b].nucleus.length)if([0,2,3,4,5,6,"inner"].includes(a[b].nucleus[0].atomType)&&!["over","under","rad"].includes(a[b].atomType))if(!a[b].nucleus[0].superscript&&!a[b].nucleus[0].subscript){a[b].nucleus=a[b].nucleus[0].nucleus;b--;continue}else{if(!a[b].superscript&&!a[b].subscript){a[b].superscript=a[b].nucleus[0].superscript;a[b].subscript=a[b].nucleus[0].subscript;a[b].nucleus=a[b].nucleus[0].nucleus;
b--;continue}}else if(7==a[b].nucleus[0].atomType&&0==a[b].atomType)if(!a[b].nucleus[0].superscript&&!a[b].nucleus[0].subscript){a[b].nucleus=a[b].nucleus[0].nucleus;a[b].atomType=7;b--;continue}else{if(!a[b].superscript&&!a[b].subscript){a[b].superscript=a[b].nucleus[0].superscript;a[b].subscript=a[b].nucleus[0].subscript;a[b].nucleus=a[b].nucleus[0].nucleus;a[b].atomType=7;b--;continue}}else if(1!=a[b].nucleus[0].atomType||["over","under","rad"].includes(a[b].atomType))7==a[b].nucleus[0].atomType||
!["over","under","rad","accent"].includes(a[b].atomType)||a[b].nucleus[0].superscript||a[b].nucleus[0].subscript||(a[b].nucleus=a[b].nucleus[0].nucleus);else if(!a[b].nucleus[0].superscript&&!a[b].nucleus[0].subscript){a[b].nucleus=a[b].nucleus[0].nucleus;b--;continue}else if(!a[b].superscript&&!a[b].subscript&&!a[b].nucleus[0].limits){a[b].superscript=a[b].nucleus[0].superscript;a[b].subscript=a[b].nucleus[0].subscript;a[b].nucleus=a[b].nucleus[0].nucleus;b--;continue}Array.isArray(a[b].nucleus)&&
n(a[b].nucleus);Array.isArray(a[b].superscript)&&n(a[b].superscript);Array.isArray(a[b].subscript)&&n(a[b].subscript);Array.isArray(a[b].index)&&n(a[b].index)}else if("fraction"==a[b].type)n(a[b].numerator),n(a[b].denominator);else if("table"==a[b].type)for(b=0,d=a[b].cellData.length;b<d;b++)for(var c=0,f=a[b].cellData[b].length;c<f;c++)n(a[b][c].content);else"mathchoice"==a[b].type?n(a[b].groups):"box"==a[b].type&&n([a[b].content])}if("display"!==b&&"inline"!==b)throw new TypeError('No "display" or "inline" style specified for fontTeX._tokenize.');
var Ya=[],E=a,t=[];Object.defineProperty(t,"last",{get:function(){return this[this.length-1]}});new f;var da={global:!1},F=[];Object.defineProperty(F,"last",{get:function(){return this[this.length-1]}});for(var D=new c,z=[];;){var v=D.eat();if(null===v)return[[],a,!1];if("command"==v.type||"character"==v.type&&v.cat==d.cats.active){"mathchoice"==F.last&&F.last.failed();var q=D.expand(v,D);D.queue.unshift.apply(D.queue,q)}else{if("character"==v.type&&v.cat==d.cats.param)"mathchoice"==F.last&&F.last.failed(),
D.queue.unshift({type:"character",cat:d.cats.all,"char":v["char"],code:v.code,invalid:!0});else if("character"==v.type&&v.cat==d.cats.math)if("mathchoice"==F.last&&F.last.failed(),"display"==b){for(var C=new c(D.string,D.queue),U=!1;;){q=C.eat();if(!q)break;if("command"==q.type||"character"==q.type&&q.cat==d.cats.active)q=C.expand(q,C),C.queue.unshift.apply(C.queue,q);else{"character"==q.type&&q.cat==d.cats.math&&(U=!0,C.finalize(),D.string=C.string);break}}if(U)break;else D.queue.unshift({type:"character",
cat:d.cats.all,"char":v["char"],code:v.code,invalid:!0})}else break;else if("character"==v.type&&v.cat==d.cats["super"]){"mathchoice"==F.last&&F.last.failed();C=null;for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){C=t.last.tokens[q];break}C||(t.last.tokens.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null}),C=t.last.tokens[t.last.tokens.length-1]);C.superscript?t.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol",
"char":v["char"],code:v.code,invalid:!0},superscript:null,subscript:null}):"superscript"==F.last?(C.superscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code,invalid:!0},superscript:null,subscript:null}],F.pop()):"subscript"==F.last?(C.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code,invalid:!0},superscript:null,subscript:null}],F.pop()):(v={type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code},superscript:null,
subscript:null,ignore:!0},t.last.tokens.push(v),F.push({toString:function(){return"superscript"},token:v}))}else if("character"==v.type&&v.cat==d.cats.sub){"mathchoice"==F.last&&F.last.failed();C=null;for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){C=t.last.tokens[q];break}C||(t.last.tokens.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null}),C=t.last.tokens[t.last.tokens.length-1]);C.subscript?t.last.tokens.push({type:"atom",
atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code,invalid:!0},superscript:null,subscript:null}):"superscript"==F.last?(C.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code,invalid:!0},superscript:null,subscript:null}],F.pop()):"subscript"==F.last?(C.subscript=[{type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code,invalid:!0},superscript:null,subscript:null}],F.pop()):(v={type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],
code:v.code},superscript:null,subscript:null,ignore:!0},t.last.tokens.push(v),F.push({toString:function(){return"subscript"},token:v}))}else if("character"==v.type&&v.cat==d.cats.open)C={type:"atom",atomType:0,nucleus:{type:"symbol","char":v["char"],code:v.code},superscript:null,subscript:null,ignore:!0},z.push(C),F.push("scope"),new f,t.last.tokens.push(C);else if("character"==v.type&&v.cat==d.cats.close)if(!z.length||t.last.delimited||t.last.semisimple||t.last.isHalign||t.last.isHalignCell||"scope"!=
F.last)D.queue.unshift({type:"character",cat:d.cats.all,"char":v["char"],code:v.code,invalid:!0});else if(z.pop(),F.pop(),U=t.last.isFrac?[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:t.last.fracNumerator,denominator:t.last.tokens,barWidth:t.last.barWidth,delims:[t.last.fracLeftDelim,t.last.fracRightDelim],nullDelimiterSpace:new u(t.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}]:t.last.tokens,t.last.root&&(t.last.root.invalid=!0),"superscript"==F.last){t.pop();
for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){t.last.tokens[q].superscript=U;break}F.pop()}else if("subscript"==F.last){t.pop();for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){t.last.tokens[q].subscript=U;break}F.pop()}else t.last.isFrac?(t.pop(),t.last.tokens.push(U[0])):(t.pop(),t.last.tokens.push({type:"atom",atomType:0,nucleus:U,superscript:null,subscript:null})),"mathchoice"==F.last&&4==++F.last.current&&
F.last.succeeded();else if("character"==v.type&&v.cat==d.cats.alignment){"mathchoice"==F.last&&F.last.failed();if(!t.last.isHalignCell||"scope"!=F.last){D.queue.unshift({type:"character",cat:d.cats.all,"char":v["char"],code:v.code,invalid:!0});continue}var na=t[t.length-2].cellData[t[t.length-2].cellData.length-1];C=t[t.length-2];if(!na[na.length-1].omit&&!v.postPreamble){var ia=-1;q=0;for(var ca=na.length;q<ca;q++)ia+=na[q].span;if(C.preamble[ia])U=C.preamble[ia][1];else if(~C.repeatPreambleAt)q=
C.preamble.slice(C.repeatPreambleAt,C.preamble.length),U=q[(ia-C.repeatPreambleAt)%q.length][1];else{D.queue.unshift({type:"character",cat:d.cats.all,"char":v["char"],code:v.code,invalid:!0});continue}if(!C.preamble[++ia]&&!~C.repeatPreambleAt){D.queue.unshift({type:"character",cat:d.cats.all,"char":v["char"],code:v.code,invalid:!0});continue}D.queue.unshift.apply(D.queue,U.concat(v));v.postPreamble=!0;continue}e.scopes.last.root&&(e.scopes.last.root.invalid=!0);F.pop();U=t.last.tokens;t.last.isFrac?
(na[na.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:t.last.fracNumerator,denominator:U,barWidth:t.last.barWidth,delims:[t.last.fracLeftDelim,t.last.fracRightDelim],nullDelimiterSpace:new u(t.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),t.pop()):(t.pop(),na[na.length-1].content=na[na.length-1].content.concat(U));$jscomp.initSymbol();ia=Symbol();D.saveState(ia);for(na.push({type:"cell",content:[],omit:!1,span:1});;)if(v=D.eat(),
!v){D.loadState(ia);break}else if("character"==v.type&&v.cat!=d.cats.active){D.loadState(ia);break}else if("command"==v.type||"character"==v.type&&v.cat==d.cats.active){if(v.name in t.last.registers.named){D.loadState(ia);break}q="command"==v.type?t.last.defs.primitive[v.name]||t.last.defs.macros[v.name]:t.last.defs.active[v["char"]];if(!q){D.loadState(ia);break}if(q===d.defs.primitive.the||q.proxy&&q.original===d.defs.primitive.the||q===d.defs.primitive.expandafter||q.proxy&&q.original===d.defs.primitive.expandafter||
q===d.defs.primitive.number||q.proxy&&q.original===d.defs.primitive.number||q===d.defs.primitive.romannumeral||q.proxy&&q.original===d.defs.primitive.romannumeral||q===d.defs.primitive.csname||q.proxy&&q.original===d.defs.primitive.csname||q===d.defs.primitive.string||q.proxy&&q.original===d.defs.primitive.string||q===d.defs.primitive["if"]||q.isLet&&q.original===d.defs.primitive["if"]||q===d.defs.primitive.ifcase||q.isLet&&q.original===d.defs.primitive.ifcase||q===d.defs.primitive.ifcat||q.isLet&&
q.original===d.defs.primitive.ifcat||q===d.defs.primitive.ifdim||q.isLet&&q.original===d.defs.primitive.ifdim||q===d.defs.primitive.ifeof||q.isLet&&q.original===d.defs.primitive.ifeof||q===d.defs.primitive.iffalse||q.isLet&&q.original===d.defs.primitive.iffalse||q===d.defs.primitive.ifodd||q.isLet&&q.original===d.defs.primitive.ifodd||q===d.defs.primitive.ifnum||q.isLet&&q.original===d.defs.primitive.ifnum||q===d.defs.primitive.ifhmode||q.isLet&&q.original===d.defs.primitive.ifhmode||q===d.defs.primitive.ifinner||
q.isLet&&q.original===d.defs.primitive.ifinner||q===d.defs.primitive.ifmmode||q.isLet&&q.original===d.defs.primitive.ifmmode||q===d.defs.primitive.iftrue||q.isLet&&q.original===d.defs.primitive.iftrue||q===d.defs.primitive.ifvmode||q.isLet&&q.original===d.defs.primitive.ifvmode||q===d.defs.primitive.ifvoid||q.isLet&&q.original===d.defs.primitive.ifvoid||q===d.defs.primitive.ifx||q.isLet&&q.original===d.defs.primitive.ifx){if(q=D.expand(v,D),1==q.length&&q[0]===v&&v.invalid){D.loadState(ia);break}}else{if(q===
d.defs.primitive.omit||q.proxy&&q.original===d.defs.primitive.omit){na[na.length-1].omit=!0;break}if("primitive"==q.type||q.proxy&&"primitive"==q.original.type){D.loadState(ia);break}q=D.expand(v,D);if(1==q.length&&q[0]==-v&&v.invalid){D.loadState(ia);break}}D.queue.unshift.apply(D.queue,q)}F.push("scope");new f;t.last.isHalignCell=!0;if(!na[na.length-1].omit){ia=-1;q=0;for(ca=na.length;q<ca;q++)ia+=na[q].span;C.preamble[ia]?U=C.preamble[ia][0]:~C.repeatPreambleAt&&(q=C.preamble.slice(C.repeatPreambleAt,
C.preamble.length),U=q[(ia-C.repeatPreambleAt)%q.length][0]);D.queue.unshift.apply(D.queue,U)}}else if("character"==v.type){"mathchoice"==F.last&&F.last.failed();C={type:"symbol","char":v["char"],code:v.code,invalid:v.invalid};U=v.forcedMathCode+1?v.forcedMathCode:m(C["char"]);v.invalid&&v.recognized&&(U=0);if(U==d.mathcodes.active)if(t.last.defs.active[v["char"]]){D.queue.unshift.apply(D.queue,(t.last.defs.active[v["char"]].replacement||t.last.defs.active[v["char"]].original.replacement).slice());
continue}else v.invalid=C.invalid=!0,U=0;if("superscript"==F.last){for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){t.last.tokens[q].superscript=[{type:"atom",atomType:U,nucleus:C,superscript:null,subscript:null}];break}F.pop()}else if("subscript"==F.last){for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){t.last.tokens[q].subscript=[{type:"atom",atomType:U,nucleus:C,superscript:null,subscript:null}];break}F.pop()}else t.last.tokens.push({type:"atom",
atomType:U,nucleus:C,superscript:null,subscript:null})}else if(v.register)if("mathchoice"==F.last&&F.last.failed(),$jscomp.initSymbol(),C=Symbol(),D.saveState(C),(q=D.eat())&&"character"==q.type&&"="==q["char"]&&q.cat==d.cats.all||q&&D.revert(),"integer"==v.type){var Qa=D.eat("integer");if(Qa){if(Qa.value<v.min||Qa.value>v.max){D.loadState(C);continue}C=v;if(da.global&&0<=t.last.registers.named.globaldefs.value||0<t.last.registers.named.globaldefs.value)for(;v.parent;)v=v.parent,v.value=Qa.value;
C.value=Qa.value;da.global=!1}else D.loadState(C)}else if("dimension"==v.type)if(q=D.eat("dimension")){v.sp.value=q.sp.value;v.em.value=q.em.value;if(da.global&&0<=t.last.registers.named.globaldefs.value||0<t.last.registers.named.globaldefs.value)for(;v.parent;)v=v.parent,v.sp.value=q.sp.value,v.em.value=q.em.value;da.global=!1}else D.loadState(C);else if("mu dimension"==v.type)if(q=D.eat("mu dimension")){v.mu.value=q.mu.value;if(da.global&&0<=t.last.registers.named.globaldefs.value||0<t.last.registers.named.globaldefs.value)for(;v.parent;)v=
v.parent,v.mu.value=Qa.mu.value;da.global=!1}else D.loadState(C);else if("glue"==v.type)if(q=D.eat("glue")){v.start.sp.value=q.start.sp.value;v.start.em.value=q.start.em.value;v.stretch="infinite dimension"==q.stretch.type?new A(q.stretch.number.value,q.stretch.magnitude.value):new u(q.stretch.sp.value,q.stretch.em.value);v.shrink="infinite dimension"==q.shrink.type?new A(q.shrink.number.value,q.shrink.magnitude.value):new u(q.shrink.sp.value,q.shrink.em.value);if(da.global&&0<=t.last.registers.named.globaldefs.value||
0<t.last.registers.named.globaldefs.value)for(;v.parent;)v=v.parent,v.start.sp.value=q.start.sp.value,v.start.em.value=q.start.em.value,v.stretch="infinite dimension"==q.stretch.type?new A(q.stretch.number.value,q.stretch.magnitude.value):new u(q.stretch.sp.value,q.stretch.em.value),v.shrink="infinite dimension"==q.shrink.type?new A(q.shrink.number.value,q.shrink.magnitude.value):new u(q.shrink.sp.value,q.shrink.em.value);da.global=!1}else D.loadState(C);else{if("mu glue"==v.type)if(q=D.eat("mu glue")){v.start.mu.value=
q.start.mu.value;v.stretch="infinite dimension"==q.stretch.type?new A(q.stretch.number.value,q.stretch.magnitude.value):new H(q.stretch.mu.value);v.shrink="infinite dimension"==q.shrink.type?new A(q.shrink.number.value,q.shrink.magnitude.value):new H(q.shrink.mu.value);if(da.global&&0<=t.last.registers.named.globaldefs.value||0<t.last.registers.named.globaldefs.value)for(;v.parent;)v=v.parent,v.start.mu.value=q.start.mu.value,v.stretch="infinite dimension"==q.stretch.type?new A(q.stretch.number.value,
q.stretch.magnitude.value):new H(q.stretch.mu.value),v.shrink="infinite dimension"==q.shrink.type?new A(q.shrink.number.value,q.shrink.magnitude.value):new H(q.shrink.mu.value);da.global=!1}else D.loadState(C)}else if("ignored command"==v.type){t.last.tokens.push(v.token);continue}for(var Ta in da)da[Ta]&&(da[Ta].invalid=!0,da[Ta]=!1)}}if("superscript"==F.last||"subscript"==F.last)F.last.token.invalid=!0,F.last.token.ignore=!1;for(;t.last!=t[0];)if(F.pop(),U=t.last.tokens,t.last.root&&(t.last.root.invalid=
!0),"superscript"==F.last){t.pop();for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){t.last.tokens[q].superscript=U;break}F.pop()}else if("subscript"==F.last){t.pop();for(q=t.last.tokens.length-1;0<=q;q--)if("atom"==t.last.tokens[q].type&&!t.last.tokens[q].ignore){t.last.tokens[q].subscript=U;break}F.pop()}else t.last.isFrac?(t[t.length-2].tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:t.last.fracNumerator,denominator:U,
barWidth:t.last.barWidth,delims:[t.last.fracLeftDelim,t.last.fracRightDelim],nullDelimiterSpace:new u(t.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),t.pop()):(t.pop(),t.last.tokens.push({type:"atom",atomType:0,nucleus:U,superscript:null,subscript:null}));t[0].isFrac&&(U=t[0].tokens,t[0].tokens=[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:t[0].fracNumerator,denominator:U,barWidth:t[0].barWidth,delims:[t[0].fracLeftDelim,t[0].fracRightDelim],nullDelimiterSpace:new u(t[0].registers.named.nulldelimiterspace)}],
superscript:null,subscript:null}]);q=0;for(ca=z.length;q<ca;q++)z[q].invalid=!0;w(t[0].tokens);g(t[0].tokens);p(t[0].tokens);r(t[0].tokens);O(t[0].tokens);n(t[0].tokens);D.finalize();return 2<arguments.length&&arguments[2]?t[0]:[t[0].tokens,E,!0]};fontTeX.format=function(a){a=fontTeX._tokenize(a+"$","inline",!0);d.defs.macros={};d.defs.active={};d.registers.count={};d.registers.dimen={};d.registers.skip={};d.registers.muskip={};d.registers.named={};for(var b in a.defs.macros)d.defs.macros[b]=a.defs.macros[b];
for(b in a.defs.active)d.defs.active[b]=a.defs.active[b];var c=[];for(b in a.registers.count)d.registers.count[b]=new k(a.registers.count[b].value);for(b in a.registers.dimen)d.registers.dimen[b]=new u(a.registers.dimen[b].sp.value,a.registers.dimen[b].em.value);for(b in a.registers.skip)d.registers.skip[b]=new T,d.registers.skip[b].start.sp.value=a.registers.skip[b].start.sp.value,d.registers.skip[b].start.em.value=a.registers.skip[b].start.em.value,d.registers.skip[b].stretch="infinite dimension"==
a.registers.skip[b].stretch.type?new A(a.registers.skip[b].stretch.number.value,a.registers.skip[b].stretch.magnitude.value):new u(a.registers.skip[b].stretch.sp.value,a.registers.skip[b].stretch.em.value),d.registers.skip[b].shrink="infinite dimension"==a.registers.skip[b].shrink.type?new A(a.registers.skip[b].shrink.number.value,a.registers.skip[b].shrink.magnitude.value):new u(a.registers.skip[b].shrink.sp.value,a.registers.skip[b].shrink.em.value);for(b in a.registers.muskip)d.registers.muskip[b]=
new fa,d.registers.muskip[b].start.mu.value=a.registers.muskip[b].start.mu.value,d.registers.muskip[b].stretch="infinite dimension"==a.registers.muskip[b].stretch.type?new A(a.registers.muskip[b].stretch.number.value,a.registers.muskip[b].stretch.magnitude.value):new H(a.registers.muskip[b].stretch.mu.value),d.registers.muskip[b].shrink="infinite dimension"==a.registers.muskip[b].shrink.type?new A(a.registers.muskip[b].shrink.number.value,a.registers.muskip[b].shrink.magnitude.value):new H(a.registers.muskip[b].shrink.mu.value);
for(b in a.registers.named)c.includes(a.registers.named[b])?d.registers.named[b]=a.registers.named[b]:"integer"==a.registers.named[b].type?d.registers.named[b]=new k(a.registers.named[b].value):"dimension"==a.registers.named[b].type?d.registers.named[b]=new u(a.registers.named[b].sp.value,a.registers.named[b].em.value):"mu dimension"==a.registers.named[b].type?d.registers.named[b]=new H(a.registers.named[b].mu.value):"glue"==a.registers.named[b].type?(d.registers.named[b]=new T,d.registers.named[b].start.sp.value=
a.registers.named[b].start.sp.value,d.registers.named[b].start.em.value=a.registers.named[b].start.em.value,d.registers.named[b].stretch="infinite dimension"==a.registers.named[b].stretch.type?new A(a.registers.named[b].stretch.number.value,a.registers.named[b].stretch.magnitude.value):new u(a.registers.named[b].stretch.sp.value,a.registers.named[b].stretch.em.value),d.registers.named[b].shrink="infinite dimension"==a.registers.named[b].shrink.type?new A(a.registers.named[b].shrink.number.value,a.registers.named[b].shrink.magnitude.value):
new u(a.registers.named[b].shrink.sp.value,a.registers.named[b].shrink.em.value)):"mu glue"==a.registers.named[b].type&&(d.registers.named[b]=new fa,d.registers.named[b].start.mu.value=a.registers.named[b].start.mu.value,d.registers.named[b].stretch="infinite dimension"==a.registers.named[b].stretch.type?new A(a.registers.named[b].stretch.number.value,a.registers.named[b].stretch.magnitude.value):new H(a.registers.named[b].stretch.mu.value),d.registers.named[b].shrink="infinite dimension"==a.registers.named[b].shrink.type?
new A(a.registers.named[b].shrink.number.value,a.registers.named[b].shrink.magnitude.value):new H(a.registers.named[b].shrink.mu.value));for(b in a.cats)d.cats[b].value=a.cats[b].value;for(b in a.mathcodes)d.mathcodes[b].value=a.mathcodes[b].value;for(b in a.uc)d.uc[b].value=a.uc[b].value;for(b in a.lc)d.lc[b].value=a.lc[b].value};fontTeX._genHTML=function(a,b,d,f){function c(a){for(var b=0,d=a.children.length;b<d;b++)c(a.children[b]);a.style.flexWrap&&(a.style.flexWrap="nowrap");return a}function m(b,
f,h,k,w){function n(d,w,t){var l=b[w],r=b[w+1]||{};switch(d){default:if("glue"!=l.type&&"kern"!=l.type&&"vglue"!=l.type&&"vkern"!=l.type)return n(2,w,t);l.italicCorrection&&(l.italicCorrection=O||"");if("glue"==l.type&&l.isNonScript)return"script"!=f&&"scriptscript"!=f||"glue"!=r.type&&"vglue"!=r.type&&"kern"!=r.type&&"vkern"!=r.type||(b.splice(w+1,1),t--),[w,t];"glue"==l.type&&"mu glue"==l.glue.type?l.glue=new T(new u(0,l.glue.start.mu.value/18),"infinite dimension"==l.glue.stretch.type?l.glue.stretch:
new u(0,~~(l.glue.stretch.mu.value/18)),"infinite dimension"==l.glue.shrink.type?l.glue.shrink:new u(0,~~(l.glue.shrink.mu.value/18))):"kern"==l.type&&"mu dimension"==l.dimen.type?l.dimen=new u(0,~~(l.dimen.mu.value/18)):"vglue"==l.type&&(l.type="vkern",l.dimen=l.glue.start,delete l.glue);v.push(l);break;case 2:return"font modifier"==l.type?(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"].includes(l.value)?f=l.value.substring(0,l.value.length-5):k=l.value,b.splice(w,1),w--,t--,[w,t]):
n(3,w,t);case 3:if("mathchoice"==l.type){var z=l.groups[{display:0,text:1,script:2,scriptscript:3}[f]];b.splice.bind(b,w,1).apply(b,z.nucleus);t+=z.nucleus.length-1;w--;return[w,t]}return n(4,w,t);case 4:if("atom"==l.type&&2==l.atomType){if(!q[0]||[1,2,3,4,6].includes(q[q.length-1].atomType))l.atomType=0;return n(10,w,t)}return n(5,w,t);case 5:if("atom"!=l.type||!q.length||3!=l.atomType&&5!=l.atomType&&6!=l.atomType)return n(6,w,t);q[0]&&2==q[q.length-1].atomType&&(q[q.length-1].atomType=0);return n(10,
w,t);case 6:return"atom"==l.type&&[4,"inner","over","under","vcenter","rad","acc"].includes(l.atomType)?n(10,w,t):n(7,w,t);case 7:return"atom"==l.type&&1==l.atomType?("display"==l.limits&&(l.limits="display"==f),n(10,w,t)):n(8,w,t);case 8:if("fraction"==l.type&&l){var A=function(a,b,d){switch(b){default:v.splice(v.length-(d?1:0),0,{type:"kern",dimen:l.nullDelimiterSpace});break;case "|":case "/":case "\\":case "\u2016":case "\u23aa":case "\u23d0":case "\u27e8":case "\u27e9":var c=Math.max(db,fontTeX.fontDimen.heightOf(b,
p)+fontTeX.fontDimen.depthOf(b,p));a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";a.height=100;a.width=fontTeX.fontDimen.widthOf(b,p)/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))*100;c=a.getContext("2d");c.textAlign="center";c.font=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))+"px "+p;c.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,p)/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,
p)));l.div.insertBefore(a,d?l.div.firstElementChild:null);break;case "(":case ")":c=Math.max(db,fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";if(2>=c)a.height=100,a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p)),c=a.getContext("2d"),c.textAlign="center",c.font=100/(fontTeX.fontDimen.heightOf(b,
p)+fontTeX.fontDimen.depthOf(b,p))+"px "+p,c.translate(0,100),c.fillText(b,a.width/2,100*-fontTeX.fontDimen.depthOf(b,p)/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p)));else{var f=fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p);a.height=50*c;a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));c=a.getContext("2d");c.textAlign="center";c.font=100/f+"px "+p;c.fillText(b,a.width/2,
50-100*fontTeX.fontDimen.depthOf(b,p)/f);var g=c.getImageData(0,0,a.width,50);c.clearRect(0,0,a.width,a.height);c.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,p)/f);c.clearRect(0,50,a.width,a.height);c.putImageData(g,0,a.height-50);var h=c.createImageData(a.width,a.height-100);b=c.getImageData(0,49,a.width,1).data;f=g.data.slice(0,4*a.width);for(var m=0,k=h.height/2;m<k;m++)for(var n=0,w=a.width;n<w;n++)h.data[m*a.width*4+4*n]=b[4*n],h.data[m*a.width*4+4*n+1]=b[4*n+1],h.data[m*a.width*
4+4*n+2]=b[4*n+2],h.data[m*a.width*4+4*n+3]=b[4*n+3],h.data[~~(m+h.height/2)*a.width*4+4*n]=f[4*n],h.data[~~(m+h.height/2)*a.width*4+4*n+1]=f[4*n+1],h.data[~~(m+h.height/2)*a.width*4+4*n+2]=f[4*n+2],h.data[~~(m+h.height/2)*a.width*4+4*n+3]=f[4*n+3];c.putImageData(h,0,50)}l.div.insertBefore(a,d?l.div.firstElementChild:null);break;case "[":case "]":case "\u27ee":case "\u27ef":case "\u2191":case "\u2193":case "\u2195":case "\u21d1":case "\u21d3":case "\u21d5":case "\u2308":case "\u2309":case "\u230a":case "\u230b":case "\u23b0":case "\u23b1":c=
Math.max(db,fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";f=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.height=100*Math.max(c,1);a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));c=a.getContext("2d");c.textAlign="center";c.font=f+"px "+p;c.fillText(b,a.width/2,50-
fontTeX.fontDimen.depthOf(b,p)*f);g=c.getImageData(0,0,a.width,50);c.clearRect(0,0,a.width,a.height);c.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,p)*f);c.clearRect(0,50,a.width,a.height);c.putImageData(g,0,a.height-50);if(100<a.height){h=c.createImageData(a.width,a.height-100);b=c.getImageData(0,49,a.width,1).data;f=g.data.slice(0,4*a.width);m=0;for(k=h.height/2;m<k;m++)for(n=0,w=a.width;n<w;n++)h.data[m*a.width*4+4*n]=b[4*n],h.data[m*a.width*4+4*n+1]=b[4*n+1],h.data[m*a.width*4+4*n+2]=
b[4*n+2],h.data[m*a.width*4+4*n+3]=b[4*n+3],h.data[~~(m+h.height/2)*a.width*4+4*n]=f[4*n],h.data[~~(m+h.height/2)*a.width*4+4*n+1]=f[4*n+1],h.data[~~(m+h.height/2)*a.width*4+4*n+2]=f[4*n+2],h.data[~~(m+h.height/2)*a.width*4+4*n+3]=f[4*n+3];c.putImageData(h,0,50)}l.div.insertBefore(a,d?l.div.firstElementChild:null);break;case "{":case "}":c=Math.max(db,fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.style.height=c+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign=
"middle";f=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.height=100*Math.max(c,1);a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));c=a.getContext("2d");c.textAlign="center";c.font=f+"px "+p;c.fillText(b,a.width/2,33-fontTeX.fontDimen.depthOf(b,p)*f);g=c.getImageData(0,0,a.width,33);c.clearRect(0,0,a.width,a.height);c.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,p)*f);m=c.getImageData(0,
0,a.width,33);c.clearRect(0,0,a.width,a.height);c.fillText(b,a.width/2,a.height/2+50-fontTeX.fontDimen.depthOf(b,p)*f);c.clearRect(0,0,a.width,Math.floor(a.height/2)-17);c.clearRect(0,Math.ceil(a.height/2)+17,a.width,a.height);c.putImageData(m,0,0);c.putImageData(g,0,a.height-33);if(100<a.height){h=c.createImageData(a.width,Math.ceil(a.height/2)-50);b=m.data.slice(128*a.width,132*a.width);f=c.getImageData(0,Math.ceil(a.height/2)-16,a.width,1).data;m=0;for(k=h.height/2;m<k;m++)for(n=0,w=a.width;n<
w;n++)h.data[m*a.width*4+4*n]=b[4*n],h.data[m*a.width*4+4*n+1]=b[4*n+1],h.data[m*a.width*4+4*n+2]=b[4*n+2],h.data[m*a.width*4+4*n+3]=b[4*n+3],h.data[~~(m+h.height/2)*a.width*4+4*n]=f[4*n],h.data[~~(m+h.height/2)*a.width*4+4*n+1]=f[4*n+1],h.data[~~(m+h.height/2)*a.width*4+4*n+2]=f[4*n+2],h.data[~~(m+h.height/2)*a.width*4+4*n+3]=f[4*n+3];var q=c.createImageData(a.width,Math.ceil(a.height/2)-50);b=c.getImageData(0,Math.floor(a.height/2)+16,a.width,1).data;f=g.data.slice(0,4*a.width);m=0;for(k=h.height/
2;m<k;m++)for(n=0,w=a.width;n<w;n++)q.data[m*a.width*4+4*n]=b[4*n],q.data[m*a.width*4+4*n+1]=b[4*n+1],q.data[m*a.width*4+4*n+2]=b[4*n+2],q.data[m*a.width*4+4*n+3]=b[4*n+3],q.data[~~(m+h.height/2)*a.width*4+4*n]=f[4*n],q.data[~~(m+h.height/2)*a.width*4+4*n+1]=f[4*n+1],q.data[~~(m+h.height/2)*a.width*4+4*n+2]=f[4*n+2],q.data[~~(m+h.height/2)*a.width*4+4*n+3]=f[4*n+3];c.putImageData(h,0,33);c.putImageData(q,0,a.height/2+17)}l.div.insertBefore(a,d?l.div.firstElementChild:null)}},C={type:"atom",atomType:"inner",
nucleus:null,superscript:null,subscript:null,style:f,div:document.createElement("div")};v.push(C);q.push(C);l.style=f;l.div=C.div;l.div.style.display="inline-block";l.div.style.whiteSpace="nowrap";var ja=fontTeX.fontDimen.heightOf("x",p)/2+fontTeX.fontDimen.baselineHeightOf(p),E=document.createElement("div"),F=document.createElement("div");E.style.display=F.style.display="inline-block";E.style.verticalAlign="text-bottom";E.style.position="relative";F.style.verticalAlign="text-bottom";F.style.position=
"relative";m(l.numerator,"display"==f?"text":"text"==f?"script":"scriptscript",h,k,E);m(l.denominator,"display"==f?"text":"text"==f?"script":"scriptscript",!0,k,F);var H="from font"==l.barWidth?new u(0,65536*fontTeX.fontDimen.visibleWidthOf("|",p)):new u(l.barWidth);H.em.value+=H.sp.value/65536/6*8/g*65536;H.sp.value=0;var U=H.sp.value?H.em.value?"calc("+H.em.value/65536+"em + "+H.sp.value/65536+"pt)":H.sp.value/65536+"pt":H.em.value/65536+"em";if("text"==f||"script"==f)H.em.value*=.707106781;var da=
H.sp.value?H.em.value?"calc("+H.em.value/65536+"em + "+H.sp.value/65536+"pt)":H.sp.value/65536+"pt":H.em.value/65536+"em",Y=document.createElement("div");Y.style.height="1em";a.appendChild(Y);var Ya=Y.getBoundingClientRect().height;Y.style.height=da;Y.style.fontSize="script"==f||"scriptscript"==f?".707106781em":"1em";var ia=Y.getBoundingClientRect().height;Y.style.height="1em";ia/=Y.getBoundingClientRect().height;a.removeChild(Y);a.appendChild(E);E.getBoundingClientRect();var Qa=E.getBoundingClientRect().width;
a.removeChild(E);a.appendChild(F);var Ta=F.getBoundingClientRect(),ha=Ta.height/Ya,na=Ta.width,qa=ha*("text"==f||"script"==f?.707106781:1);a.removeChild(F);"text"==f||"script"==f?(E.style.fontSize=F.style.fontSize=".707106781em",E.style.paddingTop="calc("+ja/.707106781+"em + "+U+" / 2)",E.style.top="calc("+-ja/.707106781+"em - "+U+" / 2)",F.style.top="calc("+(ha-ja/.707106781)+"em + "+U+"/ 2 - "+ha+"em)",l.div.style.paddingBottom="calc("+(qa-ja)+"em + "+da+" / 2)"):(E.style.fontSize=F.style.fontSize=
"",E.style.paddingTop="calc("+ja+"em + "+da+" / 2)",E.style.top="calc("+-ja+"em - "+da+" / 2)",F.style.top="calc("+(ha-ja)+"em + "+da+"/ 2 - "+ha+"em)",l.div.style.paddingBottom="calc("+(ha-ja)+"em + "+da+" / 2)");F.style.height=0;var ya=Qa>na?F:E,fa=Qa>na?E:F,La=document.createElement("div"),Ra=document.createElement("div"),oa=document.createElement("div");La.style.display="inline-block";La.style.position="relative";La.style.verticalAlign="text-bottom";La.style.top=-ja+"em";La.style.width=".05em";
La.style.height=0;Ra.style.borderTop=da+" solid currentColor";Ra.style.padding="0 .05em";Ra.style.position="relative";Ra.style.top="calc("+da+" / -2)";Ra.style.display="inline-block";Ra.style.height=0;oa.style.display="inline-block";oa.style.visibility="hidden";La.style.webkitUserSelect=La.style.mozUserSelect=La.style.msUserSelect=La.style.userSelect="none";oa.appendChild(c(fa.cloneNode(!0)));Ra.appendChild(oa);La.appendChild(Ra);l.div.appendChild(La);var la=document.createElement("div"),Na=document.createElement("div"),
Ua=document.createElement("div"),aa=document.createElement("div"),Va=ya.firstElementChild,ob=c(fa.cloneNode(!0)),Wa=c(ya.cloneNode(!0)),jb=document.createElement("div"),kb=document.createElement("div");ob.style.fontSize=Wa.style.fontSize="";Wa.style.paddingTop=0;Wa.style.margin=0;Wa.style.border=0;Wa.style.padding=0;Va&&(Va.style.width="100%",Va.insertBefore(jb,Va.firstElementChild),Va.appendChild(kb),Ua.appendChild(Va));la.style.position="relative";Na.style.height=0;Na.style.verticalAlign="middle";
Na.style.display="inline-block";Na.style.visibility="hidden";Na.style.webkitUserSelect=Na.style.mozUserSelect=Na.style.msUserSelect=Na.style.userSelect=aa.style.webkitUserSelect=aa.style.mozUserSelect=aa.style.msUserSelect=aa.style.userSelect="none";la.style.display="inline-block";aa.style.display="inline-block";aa.style.width=0;aa.style.visibility="hidden";Ua.style.position="absolute";jb.style.flexGrow=kb.style.flexGrow=jb.style.flexShrink=kb.style.flexShrink=1;ya.style.width=Ua.style.left=Ua.style.right=
Ua.style.top=0;aa.appendChild(Wa);la.appendChild(aa);la.appendChild(Ua);Na.appendChild(ob);la.appendChild(Na);ya.appendChild(la);l.div.appendChild(ya);l.div.appendChild(fa);var lb=document.createElement("div");lb.style.display="inline-block";lb.style.width=".05em";l.div.appendChild(lb);var Za=document.createElement("canvas"),$a=document.createElement("canvas"),db="display"==f?2.416666666:"text"==f?1.416666666:0;Za.style.display=$a.style.display="inline-block";">"==l.delims[0]&&(l.delims[0]="\u27e9");
">"==l.delims[1]&&(l.delims[1]="\u27e9");"<"==l.delims[0]&&(l.delims[0]="\u27e8");"<"==l.delims[1]&&(l.delims[1]="\u27e8");A(Za,l.delims[0],!0);A($a,l.delims[1],!1);var M={display:{display:1,text:1,script:.707106781,scriptscript:.5},text:{display:1,text:1,script:.707106781,scriptscript:.5},script:{display:1.414213562,text:1.414213562,script:1,scriptscript:.707106781},scriptscript:{display:2,text:2,script:1.414213562,scriptscript:1}}[D.displayedStyle][f];l.div.renderedDepth=(qa-fontTeX.fontDimen.heightOf("x",
p)/2+ia/2+(-F.baseline-F.baselineOffset+F.renderedDepth)*("text"==f||"script"==f?.707106781:1))*M;l.div.renderedHeight=(fontTeX.fontDimen.heightOf("x",p)/2+ia/2+(E.baseline+E.baselineOffset+E.renderedHeight)*("text"==f||"script"==f?.707106781:1))*M;l.div.baseline=F.baseline*M*("text"==f||"script"==f?.707106781:1);l.div.baselineOffset=(qa-fontTeX.fontDimen.heightOf("x",p)/2+ia/2-F.baseline*("text"==f||"script"==f?.70716781:1))*M;O=" "}else n(9,w,t);break;case 9:n(10,w,t);break;case 10:var Fa=!1;"box"==
l.type&&(Fa=l,l=l.content);if("atom"==l.type){M={display:{display:1,text:1,script:.707106781,scriptscript:.5},text:{display:1,text:1,script:.707106781,scriptscript:.5},script:{display:1.414213562,text:1.414213562,script:1,scriptscript:.707106781},scriptscript:{display:2,text:2,script:1.414213562,scriptscript:1}}[D.displayedStyle][f];if(["over","under","rad"].includes(l.atomType)&&(l.subscript||l.superscript)||"rad"==l.atomType&&1!=M)l={type:"atom",atomType:0,nucleus:[l],superscript:l.superscript,
subscript:l.subscript,invalid:l.invalid},l.nucleus[0].subscript=l.nucleus[0].superscript=null;v.push(l);q.push(l);l.style=f;l.div=document.createElement("div");l.div.style.display="inline-block";l.div.style.whiteSpace="nowrap";l.div.renderedHeight=0;l.div.renderedDepth=-.5;l.div.baselineOffset=0;if(l.invalid){if(l.nucleus&&"symbol"==l.nucleus.type)l.nucleus.invalid=!0;else if(l.nucleus)for(w=0,t=l.nucleus.length;w<t;w++)l.nucleus[w].invalid=!0;l.superscript&&(l.superscript[0].invalid=!0);l.subscript&&
(l.subscript[0].invalid=!0)}![0,1,2,3,4,5,6,"inner"].includes(l.atomType)||!l.nucleus||1!=l.nucleus.length||1!=l.nucleus[0].atomType||l.nucleus[0].limits||l.superscript||l.subscript||(l.superscript=l.nucleus[0].superscript,l.subscript=l.nucleus[0].subscript,l.nucleus=l[0].nucleus.nucleus);if(l.nucleus&&"symbol"==l.nucleus.type){if(10==l.nucleus.code)l.isLineBreak=!0,l.div.style.width="100%";else{l.div.innerHTML='<div style="white-space:pre;display:inline-block;'+(l.nucleus.invalid?"color:red;":"")+
{nm:7==l.atomType?'font-style:italic"><div style="display:inline-block;margin:0 '+fontTeX.fontDimen.italCorrOf(l.nucleus["char"],p)+"em 0 "+fontTeX.fontDimen.leftOffsetOf(l.nucleus["char"],p,"it")+"em":"",rm:"",bf:"font-weight:bold;",it:"font-style:italic;",sl:"font-style:oblique;"}[k]+'">'+(45==l.nucleus.code?"\u2212":l.nucleus["char"])+"</div>"+(7==l.atomType?"</div>":"");var pb="nm"==k?7==l.atomType?"it":"nm":k;l.div.renderedHeight=fontTeX.fontDimen.heightOf(l.nucleus["char"],p,pb)*M;l.div.renderedDepth=
fontTeX.fontDimen.trueDepthOf(l.nucleus["char"],p,pb)*M;l.div.baseline=fontTeX.fontDimen.baselineHeightOf(p)*M}O=l.nucleus["char"]}else Array.isArray(l.nucleus)&&(O=m(l.nucleus,f,h||"over"==l.atomType||"rad"==l.atomType,k,l.div)||O,l.div.renderedHeight*=M,l.div.renderedDepth*=M,l.div.baseline*=M,l.div.baselineOffset*=M,!l.div.firstElementChild.empty||l.superscript||l.subscript||l.delimited||["rad","acc","over","under"].includes(l.atomType)||(l.div.empty=!0));l.div.style.fontSize=M+"em";if(l.delimited){var qb=
function(a,b,d){switch(b){default:v.splice(v.length-(d?1:0),0,{type:"kern",dimen:l.nullDelimiterSpace});break;case "|":case "/":case "\\":case "\u2016":case "\u23aa":case "\u23d0":case "\u27e8":case "\u27e9":var c=fontTeX.fontDimen.heightOf("x",p)/2,f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";l.div.renderedHeight=Math.max(f/
2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);a.height=100;a.width=fontTeX.fontDimen.widthOf(b,p)/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))*100;var g=a.getContext("2d");g.textAlign="center";g.font=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))+"px "+p;g.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,p)/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p)));l.div.insertBefore(a,d?l.div.firstElementChild:
null);break;case "(":case ")":c=fontTeX.fontDimen.heightOf("x",p)/2;f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";l.div.renderedHeight=Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);if(2>=f)a.height=100,a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*
100*(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p)),g=a.getContext("2d"),g.textAlign="center",g.font=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))+"px "+p,g.translate(0,100),g.fillText(b,a.width/2,100*-fontTeX.fontDimen.depthOf(b,p)/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p)));else{var h=fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p);a.height=50*f;a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*
(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));g=a.getContext("2d");g.textAlign="center";g.font=100/h+"px "+p;g.fillText(b,a.width/2,50-100*fontTeX.fontDimen.depthOf(b,p)/h);c=g.getImageData(0,0,a.width,50);g.clearRect(0,0,a.width,a.height);g.fillText(b,a.width/2,100-100*fontTeX.fontDimen.depthOf(b,p)/h);g.clearRect(0,50,a.width,a.height);g.putImageData(c,0,a.height-50);var m=g.createImageData(a.width,a.height-100);b=g.getImageData(0,49,a.width,1).data;h=c.data.slice(0,4*a.width);
f=0;for(var k=m.height/2;f<k;f++)for(var n=0,w=a.width;n<w;n++)m.data[f*a.width*4+4*n]=b[4*n],m.data[f*a.width*4+4*n+1]=b[4*n+1],m.data[f*a.width*4+4*n+2]=b[4*n+2],m.data[f*a.width*4+4*n+3]=b[4*n+3],m.data[~~(f+m.height/2)*a.width*4+4*n]=h[4*n],m.data[~~(f+m.height/2)*a.width*4+4*n+1]=h[4*n+1],m.data[~~(f+m.height/2)*a.width*4+4*n+2]=h[4*n+2],m.data[~~(f+m.height/2)*a.width*4+4*n+3]=h[4*n+3];g.putImageData(m,0,50)}l.div.insertBefore(a,d?l.div.firstElementChild:null);break;case "[":case "]":case "\u27ee":case "\u27ef":case "\u2191":case "\u2193":case "\u2195":case "\u21d1":case "\u21d3":case "\u21d5":case "\u2308":case "\u2309":case "\u230a":case "\u230b":case "\u23b0":case "\u23b1":c=
fontTeX.fontDimen.heightOf("x",p)/2;f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";h=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.height=100*Math.max(f,1);a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));
g=a.getContext("2d");g.textAlign="center";g.font=h+"px "+p;g.fillText(b,a.width/2,50-fontTeX.fontDimen.depthOf(b,p)*h);l.div.renderedHeight=Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);c=g.getImageData(0,0,a.width,50);g.clearRect(0,0,a.width,a.height);g.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,p)*h);g.clearRect(0,50,a.width,a.height);g.putImageData(c,0,a.height-50);if(100<a.height){m=g.createImageData(a.width,a.height-100);b=g.getImageData(0,
49,a.width,1).data;h=c.data.slice(0,4*a.width);f=0;for(k=m.height/2;f<k;f++)for(n=0,w=a.width;n<w;n++)m.data[f*a.width*4+4*n]=b[4*n],m.data[f*a.width*4+4*n+1]=b[4*n+1],m.data[f*a.width*4+4*n+2]=b[4*n+2],m.data[f*a.width*4+4*n+3]=b[4*n+3],m.data[~~(f+m.height/2)*a.width*4+4*n]=h[4*n],m.data[~~(f+m.height/2)*a.width*4+4*n+1]=h[4*n+1],m.data[~~(f+m.height/2)*a.width*4+4*n+2]=h[4*n+2],m.data[~~(f+m.height/2)*a.width*4+4*n+3]=h[4*n+3];g.putImageData(m,0,50)}l.div.insertBefore(a,d?l.div.firstElementChild:
null);break;case "{":case "}":c=fontTeX.fontDimen.heightOf("x",p)/2;f=2*Math.max(l.div.renderedHeight-c,l.div.renderedDepth+c,(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p))/2);a.style.height=f+"em";a.style.width=fontTeX.fontDimen.widthOf(b,p)+"em";a.style.verticalAlign="middle";h=100/(fontTeX.fontDimen.heightOf(b,p)+fontTeX.fontDimen.depthOf(b,p));a.height=100*Math.max(f,1);a.width=fontTeX.fontDimen.widthOf(b,p)/fontTeX.fontDimen.heightOf(b,p)*100*(fontTeX.fontDimen.heightOf(b,p)+
fontTeX.fontDimen.depthOf(b,p));g=a.getContext("2d");g.textAlign="center";g.font=h+"px "+p;l.div.renderedHeight=Math.max(f/2+c,l.div.renderedHeight);l.div.renderedDepth=Math.max(f/2-c,l.div.renderedDepth);g.fillText(b,a.width/2,33-fontTeX.fontDimen.depthOf(b,p)*h);c=g.getImageData(0,0,a.width,33);g.clearRect(0,0,a.width,a.height);g.fillText(b,a.width/2,100-fontTeX.fontDimen.depthOf(b,p)*h);f=g.getImageData(0,0,a.width,33);g.clearRect(0,0,a.width,a.height);g.fillText(b,a.width/2,a.height/2+50-fontTeX.fontDimen.depthOf(b,
p)*h);g.clearRect(0,0,a.width,Math.floor(a.height/2)-17);g.clearRect(0,Math.ceil(a.height/2)+17,a.width,a.height);g.putImageData(f,0,0);g.putImageData(c,0,a.height-33);if(100<a.height){m=g.createImageData(a.width,Math.ceil(a.height/2)-50);b=f.data.slice(128*a.width,132*a.width);h=g.getImageData(0,Math.ceil(a.height/2)-16,a.width,1).data;f=0;for(k=m.height/2;f<k;f++)for(n=0,w=a.width;n<w;n++)m.data[f*a.width*4+4*n]=b[4*n],m.data[f*a.width*4+4*n+1]=b[4*n+1],m.data[f*a.width*4+4*n+2]=b[4*n+2],m.data[f*
a.width*4+4*n+3]=b[4*n+3],m.data[~~(f+m.height/2)*a.width*4+4*n]=h[4*n],m.data[~~(f+m.height/2)*a.width*4+4*n+1]=h[4*n+1],m.data[~~(f+m.height/2)*a.width*4+4*n+2]=h[4*n+2],m.data[~~(f+m.height/2)*a.width*4+4*n+3]=h[4*n+3];var q=g.createImageData(a.width,Math.ceil(a.height/2)-50);b=g.getImageData(0,Math.floor(a.height/2)+16,a.width,1).data;h=c.data.slice(0,4*a.width);f=0;for(k=m.height/2;f<k;f++)for(n=0,w=a.width;n<w;n++)q.data[f*a.width*4+4*n]=b[4*n],q.data[f*a.width*4+4*n+1]=b[4*n+1],q.data[f*a.width*
4+4*n+2]=b[4*n+2],q.data[f*a.width*4+4*n+3]=b[4*n+3],q.data[~~(f+m.height/2)*a.width*4+4*n]=h[4*n],q.data[~~(f+m.height/2)*a.width*4+4*n+1]=h[4*n+1],q.data[~~(f+m.height/2)*a.width*4+4*n+2]=h[4*n+2],q.data[~~(f+m.height/2)*a.width*4+4*n+3]=h[4*n+3];g.putImageData(m,0,33);g.putImageData(q,0,a.height/2+17)}l.div.insertBefore(a,d?l.div.firstElementChild:null)}};Za=document.createElement("canvas");$a=document.createElement("canvas");Za.style.display=$a.style.display="inline-block";">"==l.delims[0]&&(l.delims[0]=
"\u27e9");">"==l.delims[1]&&(l.delims[1]="\u27e9");"<"==l.delims[0]&&(l.delims[0]="\u27e8");"<"==l.delims[1]&&(l.delims[1]="\u27e8");qb(Za,l.delims[0],!0);qb($a,l.delims[1],!1)}if((l.superscript||l.subscript)&&(1!=l.atomType||!l.limits))if(l.subscript&&!l.superscript){var y=document.createElement("div"),N=document.createElement("div");y.style.display="inline-block";y.style.verticalAlign="text-bottom";y.style.position="relative";N.style.verticalAlign="text-top";N.innerText="\u00a0";N.style.display=
"inline-block";N.style.width=0;m(l.subscript,"display"==f||"text"==f?"script":"scriptscript",!0,k,y);y.style.fontSize="50px";a.appendChild(y);var S=y.getBoundingClientRect().height/50;a.removeChild(y);"scriptscript"==f?(y.style.fontSize="",y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)+Math.max(Math.max(l.div.renderedDepth,0)/M+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",p))-S+"em",N.style.paddingBottom=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)+
Math.max(Math.max(l.div.renderedDepth,0)/M+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",p))-S+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(y.renderedDepth+Math.max(Math.max(l.div.renderedDepth,0)/M+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",p)))*M)):(y.style.fontSize=".707106781em",y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)/.707106781+Math.max(Math.max(l.div.renderedDepth,0)/M/.707106781+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",
p))-S+"em",N.style.paddingBottom=.707106781*Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/M/.707106781+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",p))+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(.707106781*y.renderedDepth+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/M/.707106781+.2,y.renderedHeight-fontTeX.fontDimen.heightOf("x",p)))*M));y.style.height=0;l.div.appendChild(y);l.div.insertBefore(N,
y)}else if(l.superscript&&!l.subscript){var x=document.createElement("div");m(l.superscript,"display"==f||"text"==f?"script":"scriptscript",h,k,x);x.style.display="inline-block";x.style.verticalAlign="text-bottom";x.style.position="relative";"scriptscript"==f?(x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)-Math.max(l.div.renderedHeight/M+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",x.style.paddingTop=-Math.max(x.baseline,
x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(p)+Math.max(l.div.renderedHeight/M+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,(x.renderedHeight+Math.max(l.div.renderedHeight/M+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p)))*M)):(x.style.fontSize=".707106781em",x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)/.707106781-
Math.max(l.div.renderedHeight/M/.707106781+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",x.style.paddingTop=-Math.max(x.baseline,x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(p)/.707106781+Math.max(l.div.renderedHeight/M/.707106781+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,.707106781*(x.renderedHeight+Math.max(l.div.renderedHeight/M/.707106781+(h?
.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p)))*M));l.div.appendChild(x)}else{if(l.subscript&&l.superscript){y=document.createElement("div");N=document.createElement("div");y.style.display="inline-block";N.style.verticalAlign="text-top";N.innerText="\u00a0";N.style.display="inline-block";N.style.width=0;m(l.subscript,"display"==f||"text"==f?"script":"scriptscript",!0,k,y);y.style.fontSize="50px";a.appendChild(y);var mb=y.getBoundingClientRect();a.removeChild(y);
x=document.createElement("div");x.style.display="inline-block";m(l.superscript,"display"==f||"text"==f?"script":"scriptscript",h,k,x);x.style.fontSize="50px";a.appendChild(x);var nb=x.getBoundingClientRect();a.removeChild(x);ya=nb.width>mb.width?y:x;fa=nb.width>mb.width?x:y;S=nb.height/50;var za=mb.height/50;y.style.verticalAlign="text-bottom";x.style.verticalAlign="text-bottom";x.style.position=y.style.position="relative";"scriptscript"==f?(y.style.fontSize=x.style.fontSize="",x.style.top=Math.max(x.baseline,
x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)-Math.max(l.div.renderedHeight/M+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",x.style.paddingTop=-Math.max(x.baseline,x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(p)+Math.max(l.div.renderedHeight/M+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,(x.renderedHeight+Math.max(l.div.renderedHeight/M+(h?
.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p)))*M),y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)+Math.max(Math.max(l.div.renderedDepth,0)/M+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",p))-za+"em",N.style.paddingBottom=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)+Math.max(Math.max(l.div.renderedDepth,0)/M+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",p))-S+"em",l.div.renderedDepth=
Math.max(l.div.renderedDepth,(y.renderedDepth+Math.max(Math.max(l.div.renderedDepth,0)/M+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",p)))*M)):(y.style.fontSize=x.style.fontSize=".707106781em",x.style.top=Math.max(x.baseline,x.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)/.707106781-Math.max(l.div.renderedHeight/M/.707106781+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",x.style.paddingTop=-Math.max(x.baseline,x.renderedDepth)+fontTeX.fontDimen.baselineHeightOf(p)/
.707106781+Math.max(l.div.renderedHeight/M/.707106781+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p))+"em",l.div.renderedHeight=Math.max(l.div.renderedHeight,.707106781*(x.renderedHeight+Math.max(l.div.renderedHeight/M/.707106781+(h?.1:.2)-x.renderedHeight,x.renderedDepth+(h?.9:1)*fontTeX.fontDimen.heightOf("x",p)))*M),y.style.top=Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)/.707106781+Math.max(Math.max(l.div.renderedDepth,0)/M/
.707106781+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",p))-za+"em",N.style.paddingBottom=.707106781*Math.max(y.baseline,y.renderedDepth)-fontTeX.fontDimen.baselineHeightOf(p)+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/M/.707106781+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",p))+"em",l.div.renderedDepth=Math.max(l.div.renderedDepth,(.707106781*y.renderedDepth+.707106781*Math.max(Math.max(l.div.renderedDepth,0)/M/.707106781+.2,y.renderedHeight-.8*fontTeX.fontDimen.heightOf("x",
p)))*M));y.style.height=0;ya.style.width=0;l.div.appendChild(N);l.div.appendChild(ya);l.div.appendChild(fa)}}else if((l.superscript||l.subscript)&&1==l.atomType&&l.limits){var xa=l.div.firstElementChild;a.appendChild(l.div);var Oa=l.div.getBoundingClientRect().width;a.removeChild(l.div);if(l.subscript&&!l.superscript){l.div.renderedDepth=Math.max(l.div.renderedDepth,0);y=document.createElement("div");N=document.createElement("div");y.style.display="inline-block";y.style.verticalAlign="text-bottom";
y.style.position="relative";N.innerText="\u00a0";N.style.verticalAlign="text-top";N.style.display="inline-block";N.style.width=0;m(l.subscript,"display"==f||"text"==f?"script":"scriptscript",!0,k,y);y.style.fontSize="scriptscript"==f?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)";a.appendChild(y);var V=y.getBoundingClientRect().width;y.style.fontSize="50px";S=y.getBoundingClientRect().height/50;a.removeChild(y);"scriptscript"==f?(y.style.fontSize="",y.style.top=-y.baseline-y.baselineOffset-
l.div.renderedDepth+"em",N.style.paddingBottom=S-l.div.baseline+l.div.baselineOffset+l.div.renderedDepth+"em"):(y.style.fontSize=".707106781em",y.style.top=(-l.div.baseline-l.div.baselineOffset+l.div.renderedDepth)/.707106781+"em",N.style.paddingBottom=.707106781*S-l.div.baseline-l.div.baselineOffset+l.div.renderedDepth+"em");y.style.height=0;V<Oa?(ya=y.firstElementChild,fa=xa,l.div.insertBefore(y,xa),y.style.width=0):(ya=xa,fa=y.firstElementChild,l.div.appendChild(y));la=document.createElement("div");
la.style.display="inline-block";la.style.position="relative";aa=document.createElement("div");aa.style.display="inline-block";aa.style.width=0;aa.style.visibility="hidden";aa.style.webkitUserSelect=aa.style.mozUserSelect=aa.style.msUserSelect=aa.style.userSelect="none";aa.appendChild(c(ya.cloneNode(!0)));la.appendChild(aa);oa=document.createElement("div");oa.style.position="absolute";oa.style.left=oa.style.right=0;oa.style.textAlign="center";oa.style.display="inline-block";oa.appendChild(ya);la.appendChild(oa);
var W=c(fa.cloneNode(!0));W.style.visibility="hidden";W.style.webkitUserSelect=W.style.mozUserSelect=W.style.msUserSelect=W.style.userSelect="none";W.style.fontSize="scriptscript"==f?"":V<Oa?"1.414213562em":".707106781em";W.style.height=0;W.style.verticalAlign="top";la.appendChild(W);if(V<Oa)y.appendChild(la);else{var ra=document.createElement("div");ra.style.display="inline-block";ra.style.width=0;ra.appendChild(la);l.div.insertBefore(ra,y)}l.div.insertBefore(N,l.div.firstElementChild);l.div.renderedDepth+=
(S*("scriptscript"==f?1:.707106781)-y.baseline-y.baselineOffset+y.renderedDepth)*M}else if(l.superscript&&!l.subscript)x=document.createElement("div"),x.style.display="inline-block",x.style.verticalAlign="text-bottom",m(l.superscript,"display"==f||"text"==f?"script":"scriptscript",h,k,x),x.style.fontSize="scriptscript"==f?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)",a.appendChild(x),V=x.getBoundingClientRect().width,x.style.fontSize="50px",S=x.getBoundingClientRect().height/
50,a.removeChild(x),"scriptscript"==f?(x.style.fontSize="",x.style.marginBottom=l.div.baseline+l.div.baselineOffset+l.div.renderedHeight+"em"):(x.style.fontSize=".707106781em",x.style.marginBottom=(l.div.baseline+l.div.baselineOffset+l.div.renderedHeight)/.707106781+"em"),V<Oa?(ya=x.firstElementChild,fa=xa,l.div.insertBefore(x,xa),x.style.width=0):(ya=xa,fa=x.firstElementChild,l.div.appendChild(x)),la=document.createElement("div"),la.style.display="inline-block",la.style.position="relative",aa=document.createElement("div"),
aa.style.display="inline-block",aa.style.width=0,aa.style.visibility="hidden",aa.style.webkitUserSelect=aa.style.mozUserSelect=aa.style.msUserSelect=aa.style.userSelect="none",aa.appendChild(c(ya.cloneNode(!0))),la.appendChild(aa),oa=document.createElement("div"),oa.style.position="absolute",oa.style.left=oa.style.right=0,oa.style.textAlign="center",oa.style.display="inline-block",oa.appendChild(ya),la.appendChild(oa),W=c(fa.cloneNode(!0)),W.style.visibility="hidden",W.style.webkitUserSelect=W.style.mozUserSelect=
W.style.msUserSelect=W.style.userSelect="none",W.style.fontSize="scriptscript"==f?"":V<Oa?"1.414213562em":".707106781em",W.style.height=0,W.style.verticalAlign="top",la.appendChild(W),V<Oa?x.appendChild(la):(ra=document.createElement("div"),ra.style.display="inline-block",ra.style.width=0,ra.appendChild(la),l.div.insertBefore(ra,x)),l.div.renderedHeight+=(x.baseline+x.baselineOffset+x.renderedHeight)*("scriptscript"==f?1:.707106781)*M;else if(l.superscript&&l.subscript){l.div.renderedDepth=Math.max(l.div.renderedDepth,
0);y=document.createElement("div");y.style.display="inline-block";y.style.verticalAlign="text-bottom";y.style.position="relative";m(l.subscript,"display"==f||"text"==f?"script":"scriptscript",!0,k,y);y.style.fontSize="scriptscript"==f?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)";a.appendChild(y);var eb=y.getBoundingClientRect().width;y.style.fontSize="50px";var rb=y.getBoundingClientRect().height/50;a.removeChild(y);x=document.createElement("div");x.style.display="inline-block";
x.style.verticalAlign="text-bottom";x.style.position="relative";m(l.superscript,"display"==f||"text"==f?"script":"scriptscript",h,k,x);x.style.fontSize="scriptscript"==f?l.div.style.fontSize:"calc("+l.div.style.fontSize+" * .707106781)";a.appendChild(x);var fb=x.getBoundingClientRect().width;x.style.fontSize="50px";x.getBoundingClientRect();a.removeChild(x);N=document.createElement("div");N.innerText="\u00a0";N.style.verticalAlign="text-top";N.style.display="inline-block";N.style.width=0;"scriptscript"==
f?(y.style.fontSize=x.style.fontSize="",y.style.top=-y.baseline-y.baselineOffset-l.div.renderedDepth+"em",N.style.paddingBottom=S-l.div.baseline+l.div.baselineOffset+l.div.renderedDepth+"em",x.style.marginBottom=l.div.baseline+l.div.baselineOffset+l.div.renderedHeight+"em"):(y.style.fontSize=x.style.fontSize=".707106781em",y.style.top=(-l.div.baseline-l.div.baselineOffset+l.div.renderedDepth)/.707106781+"em",N.style.paddingBottom=.707106781*rb-l.div.baseline+l.div.baselineOffset+l.div.renderedDepth+
"em",x.style.marginBottom=(l.div.baseline+l.div.baselineOffset+l.div.renderedHeight)/.707106781+"em");y.style.height=0;if(eb<=fb&&Oa<=fb){l.div.insertBefore(y,xa);l.div.appendChild(x);y.style.width=xa.style.width=0;var Ga=document.createElement("div"),Ha=document.createElement("div");Ga.style.display=Ha.style.display="inline-block";Ga.style.position=Ha.style.position="relative";var sa=document.createElement("div"),ta=document.createElement("div");sa.style.display=ta.style.display="inline-block";sa.style.width=
ta.style.width=0;sa.style.visibility=ta.style.visibility="hidden";sa.style.webkitUserSelect=sa.style.mozUserSelect=sa.style.msUserSelect=sa.style.userSelect=ta.style.webkitUserSelect=ta.style.mozUserSelect=ta.style.msUserSelect=ta.style.userSelect="none";sa.appendChild(c(y.firstElementChild.cloneNode(!0)));ta.appendChild(c(xa.cloneNode(!0)));Ga.appendChild(sa);Ha.appendChild(ta);var Ba=document.createElement("div"),Ca=document.createElement("div");Ba.style.position=Ca.style.position="absolute";Ba.style.left=
Ba.style.right=0;Ca.style.left=Ca.style.right=0;Ba.style.textAlign=Ca.style.textAlign="center";Ba.style.display=Ca.style.display="inline-block";Ba.appendChild(y.firstElementChild);Ca.appendChild(xa);Ga.appendChild(Ba);Ha.appendChild(Ca);var ma=c(x.firstElementChild.cloneNode(!0)),ua=ma.cloneNode(!0);ma.style.visibility=ua.style.visibility="hidden";ma.style.webkitUserSelect=ma.style.mozUserSelect=ma.style.msUserSelect=ma.style.userSelect=ua.style.webkitUserSelect=ua.style.mozUserSelect=ua.style.msUserSelect=
ua.style.userSelect="none";ma.style.fontSize="";ua.style.fontSize="scriptscript"==f?"":".707106781em";ma.style.height=ua.style.height=0;ma.style.verticalAlign=ua.style.verticalAlign="top";Ga.appendChild(ma);Ha.appendChild(ua);y.appendChild(Ga);ra=document.createElement("div");ra.style.display="inline-block";ra.style.width=0;ra.appendChild(Ha);l.div.insertBefore(ra,x)}else if(eb<=Oa&&fb<=Oa){l.div.insertBefore(y,xa);l.div.insertBefore(x,xa);y.style.width=x.style.width=0;Ga=document.createElement("div");
var Ia=document.createElement("div");Ga.style.display=Ia.style.display="inline-block";Ga.style.position=Ia.style.position="relative";sa=document.createElement("div");var va=document.createElement("div");sa.style.display=va.style.display="inline-block";sa.style.width=va.style.width=0;sa.style.visibility=va.style.visibility="hidden";sa.style.webkitUserSelect=sa.style.mozUserSelect=sa.style.msUserSelect=sa.style.userSelect=va.style.webkitUserSelect=va.style.mozUserSelect=va.style.msUserSelect=va.style.userSelect=
"none";sa.appendChild(c(y.firstElementChild.cloneNode(!0)));va.appendChild(c(x.firstElementChild.cloneNode(!0)));Ga.appendChild(sa);Ia.appendChild(va);Ba=document.createElement("div");var Da=document.createElement("div");Ba.style.position=Da.style.position="absolute";Ba.style.left=Ba.style.right=0;Da.style.left=Da.style.right=0;Ba.style.textAlign=Da.style.textAlign="center";Ba.style.display=Da.style.display="inline-block";Ba.appendChild(y.firstElementChild);Da.appendChild(x.firstElementChild);Ga.appendChild(Ba);
Ia.appendChild(Da);ma=c(xa.cloneNode(!0));var pa=ma.cloneNode(!0);ma.style.visibility=pa.style.visibility="hidden";ma.style.webkitUserSelect=ma.style.mozUserSelect=ma.style.msUserSelect=ma.style.userSelect=pa.style.webkitUserSelect=pa.style.mozUserSelect=pa.style.msUserSelect=pa.style.userSelect="none";ma.style.fontSize=pa.style.fontSize="scriptscript"==f?"":"1.414213562em";ma.style.height=pa.style.height=0;ma.style.verticalAlign=pa.style.verticalAlign="top";Ga.appendChild(ma);Ia.appendChild(pa);
y.appendChild(Ga);x.appendChild(Ia)}else Oa<=eb&&fb<=eb&&(l.div.insertBefore(x,xa),l.div.appendChild(y),x.style.width=xa.style.width=0,Ia=document.createElement("div"),Ha=document.createElement("div"),Ia.style.display=Ha.style.display="inline-block",Ia.style.position=Ha.style.position="relative",va=document.createElement("div"),ta=document.createElement("div"),va.style.display=ta.style.display="inline-block",va.style.width=ta.style.width=0,va.style.visibility=ta.style.visibility="hidden",va.style.webkitUserSelect=
va.style.mozUserSelect=va.style.msUserSelect=va.style.userSelect=ta.style.webkitUserSelect=ta.style.mozUserSelect=ta.style.msUserSelect=ta.style.userSelect="none",va.appendChild(c(x.firstElementChild.cloneNode(!0))),ta.appendChild(c(xa.cloneNode(!0))),Ia.appendChild(va),Ha.appendChild(ta),Da=document.createElement("div"),Ca=document.createElement("div"),Da.style.position=Ca.style.position="absolute",Da.style.left=Da.style.right=0,Ca.style.left=Ca.style.right=0,Da.style.textAlign=Ca.style.textAlign=
"center",Da.style.display=Ca.style.display="inline-block",Da.appendChild(x.firstElementChild),Ca.appendChild(xa),Ia.appendChild(Da),Ha.appendChild(Ca),pa=c(y.firstElementChild.cloneNode(!0)),ua=pa.cloneNode(!0),pa.style.visibility=ua.style.visibility="hidden",pa.style.webkitUserSelect=pa.style.mozUserSelect=pa.style.msUserSelect=pa.style.userSelect=ua.style.webkitUserSelect=ua.style.mozUserSelect=ua.style.msUserSelect=ua.style.userSelect="none",pa.style.fontSize="",ua.style.fontSize="scriptscript"==
f?"":".707106781em",pa.style.height=ua.style.height=0,pa.style.verticalAlign=ua.style.verticalAlign="top",Ia.appendChild(pa),Ha.appendChild(ua),x.appendChild(Ia),ra=document.createElement("div"),ra.style.display="inline-block",ra.style.width=0,ra.appendChild(Ha),l.div.insertBefore(ra,y));l.div.insertBefore(N,l.div.firstElementChild);l.div.renderedDepth+=(rb*("scriptscript"==f?1:.707106781)-y.baseline-y.baselineOffset+y.renderedDepth)*M;l.div.renderedHeight+=(x.baseline+x.baselineOffset+x.renderedHeight)*
("scriptscript"==f?1:.707106781)*M}}if(Fa&&"horizontal"==Fa.boxType){if(Fa.to)V=new u(Fa.to),V.em.value+=V.sp.value/65536/6*8/g*65536,V.sp.value=0;else if(Fa.spread){V=new u(Fa.spread);V.em.value+=V.sp.value/65536/6*8/g*65536;V.sp.value=0;var ab=l.div.style.fontSize;l.div.style.fontSize="50px";a.appendChild(l.div);var sb=l.div.getBoundingClientRect().width/50;a.removeChild(l.div);l.div.style.fontSize=ab;V.em.value+=65536*sb}0>V.em.value?(v.splice(v.length-1,0,{type:"kern",dimen:V}),l.div.firstElementChild.style.width=
0):l.div.firstElementChild.style.width=V.em.value/65536+"em";l.div.firstElementChild.style.flexWrap=""}else if(Fa&&"vertical"==Fa.boxType){if(Fa.to)S=new u(Fa.to),S.em.value+=S.sp.value/65536/6*8/g*65536,S.sp.value=0;else if(Fa.spread){S=new u(Fa.spread);S.em.value+=S.sp.value/65536/6*8/g*65536;S.sp.value=0;ab=l.div.style.fontSize;l.div.style.fontSize="50px";a.appendChild(l.div);var tb=l.div.getBoundingClientRect().height/50;a.removeChild(l.div);l.div.style.fontSize=ab;S.em.value+=65536*tb}0>S.em.value?
(l.div.firstElementChild.style.height=0,l.div.firstElementChild.style.verticalAlign="text-bottom",l.div.firstElementChild.style.position="relative",l.div.firstElementChild.style.top=-S.em.value/65536+"em",l.div.renderedHeight=0,l.div.renderedDepth=0):(l.div.firstElementChild.style.height=S.em.value/65536+"em",l.div.firstElementChild.style.verticalAlign="text-bottom",l.div.renderedDepth=Math.min(fontTeX.fontDimen.baselineHeightOf(p),S.em.value/65536),l.div.renderedHeight=Math.max(S.em.value/65536-
fontTeX.fontDimen.baselineHeightOf(p),0));l.div.firstElementChild.style.flexWrap=""}switch(l.atomType){case "over":l.div.renderedHeight=Math.max(l.div.renderedHeight||0,fontTeX.fontDimen.heightOf("x",p)/2);var Ma=document.createElement("div"),X=document.createElement("div"),ba=document.createElement("div");N=document.createElement("div");W=c(l.div.cloneNode(!0));X.style.display="inline-block";X.style.width=X.style.height=0;X.style.position="relative";X.style.top=-fontTeX.fontDimen.baselineHeightOf(p)-
l.div.renderedHeight/M-fontTeX.fontDimen.visibleWidthOf("|",p)-.12+"em";X.style.verticalAlign="text-bottom";X.style.pointerEvents="none";ba.style.display="inline-block";ba.style.webkitUserSelect=ba.style.mozUserSelect=ba.style.msUserSelect=ba.style.userSelect="none";ba.style.position="relative";Ma.style.position="absolute";Ma.style.left=Ma.style.right=0;Ma.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",p)+"em solid currentColor";ba.appendChild(Ma);W.style.visibility="hidden";W.style.fontSize=
"";ba.appendChild(W);X.appendChild(ba);l.div.insertBefore(X,l.div.firstElementChild);N.style.height=l.div.renderedHeight/M+fontTeX.fontDimen.visibleWidthOf("|",p)+.16+"em";N.style.display="inline-block";N.style.width=0;l.div.insertBefore(N,X);l.div.renderedHeight+=fontTeX.fontDimen.visibleWidthOf("|",p)+.16;break;case "under":l.div.renderedDepth=Math.max(l.div.renderedDepth||0,0);var bb=document.createElement("div");X=document.createElement("div");ba=document.createElement("div");N=document.createElement("div");
W=c(l.div.cloneNode(!0));X.style.display="inline-block";X.style.width=X.style.height=0;X.style.position="relative";X.style.top=-fontTeX.fontDimen.baselineHeightOf(p)+l.div.renderedDepth/M+.12+"em";X.style.verticalAlign="text-bottom";X.style.pointerEvents="none";ba.style.display="inline-block";ba.style.webkitUserSelect=ba.style.mozUserSelect=ba.style.msUserSelect=ba.style.userSelect="none";ba.style.position="relative";bb.style.position="absolute";bb.style.left=bb.style.right=0;bb.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",
p)+"em solid currentColor";ba.appendChild(bb);W.style.visibility="hidden";W.style.fontSize="";W.style.height=0;ba.appendChild(W);X.appendChild(ba);l.div.insertBefore(X,l.div.firstElementChild);N.style.verticalAlign="text-top";N.innerText="\u00a0";N.style.paddingBottom=fontTeX.fontDimen.visibleWidthOf("|",p)+.16-fontTeX.fontDimen.baselineHeightOf(p)+l.div.renderedDepth/M+"em";N.style.display="inline-block";N.style.width=0;l.div.insertBefore(N,X);l.div.renderedDepth+=fontTeX.fontDimen.visibleWidthOf("|",
p)+.16;break;case "acc":var Ea=document.createElement("div"),gb=document.createElement("div");Ea.style.display="inline-block";Ea.style.position="relative";"it"==k?Ea.style.fontStyle="italic":"sl"==k?Ea.style.fontStyle="oblique":"bf"==k&&(Ea.style.fontWeight="bold");Ea.style.top=Math.min(fontTeX.fontDimen.heightOf("x",p),l.div.renderedHeight)-l.div.renderedHeight+"em";Ea.style.width=0;Ea.style.lineHeight=1.1;Ea.style.height="1.1em";Ea.style.verticalAlign="text-bottom";Ea.innerText=l.accChar;var Sa=
!l.nucleus||"symbol"!=l.nucleus.type||"it"!=k&&"sl"!=k?0:fontTeX.fontDimen.italCorrOf(l.accChar,p);Sa=Sa||(l.nucleus&&1==l.nucleus.length&&l.nucleus[0].nucleus&&"symbol"==l.nucleus[0].nucleus.type&&7==l.nucleus[0].atomType&&"nm"==k?fontTeX.fontDimen.italCorrOf(l.accChar,p):0);ab=l.div.style.fontSize;l.div.style.fontSize="50px";a.appendChild(l.div);Ea.style.left=(l.div.getBoundingClientRect().width/50-fontTeX.fontDimen.widthOf(l.accChar,p,k))/2+Sa+"em";a.removeChild(l.div);l.div.style.fontSize=ab;
l.div.insertBefore(Ea,l.div.firstElementChild);gb.style.display="inline-block";gb.style.width=0;gb.style.height=l.div.renderedHeight-Math.min(fontTeX.fontDimen.heightOf("x",p),l.div.renderedHeight)+fontTeX.fontDimen.heightOf(l.accChar,p,k)+"em";l.div.insertBefore(gb,Ea);l.div.renderedHeight=l.div.renderedHeight-Math.min(fontTeX.fontDimen.heightOf("x",p),l.div.renderedHeight)+fontTeX.fontDimen.heightOf(l.accChar,p,k);break;case "vcenter":ja=fontTeX.fontDimen.heightOf("x",p)/2;Sa=l.div.renderedHeight-
ja-(l.div.renderedDepth+ja);l.div.style.position="relative";l.div.style.top=Sa/2+"em";l.div.renderedHeight-=Sa/2;l.div.renderedDepth+=Sa/2;break;case "rad":l.div.renderedHeight=Math.max(l.div.renderedHeight||0,fontTeX.fontDimen.heightOf("x",p)/2);l.div.renderedDepth=Math.max(l.div.renderedDepth||0,0);Ma=document.createElement("div");X=document.createElement("div");ba=document.createElement("div");N=document.createElement("div");W=c(l.div.cloneNode(!0));X.style.display="inline-block";X.style.width=
X.style.height=0;X.style.position="relative";X.style.top=-fontTeX.fontDimen.baselineHeightOf(p)-l.div.renderedHeight/M-fontTeX.fontDimen.visibleWidthOf("|",p)-.12+"em";X.style.verticalAlign="text-bottom";X.style.pointerEvents="none";ba.style.display="inline-block";ba.style.webkitUserSelect=ba.style.mozUserSelect=ba.style.msUserSelect=ba.style.userSelect="none";ba.style.position="relative";Ma.style.position="absolute";Ma.style.left=Ma.style.right=0;Ma.style.borderTop=fontTeX.fontDimen.visibleWidthOf("|",
p)+"em solid currentColor";ba.appendChild(Ma);W.style.visibility="hidden";W.style.fontSize="";ba.appendChild(W);X.appendChild(ba);l.div.insertBefore(X,l.div.firstElementChild);N.style.height=l.div.renderedHeight/M+fontTeX.fontDimen.visibleWidthOf("|",p)+.16+"em";N.style.display="inline-block";N.style.width=0;l.div.insertBefore(N,X);l.div.renderedHeight+=(fontTeX.fontDimen.visibleWidthOf("|",p)+.16)*M;var Q=document.createElement("canvas"),hb=0,ib=0;if(ca["radical.build"][0]){da=fontTeX.fontDimen.visibleWidthOf("|",
p);Q.height=(l.div.renderedDepth+l.div.renderedHeight)*g;Q.style.height=l.div.renderedDepth+l.div.renderedHeight+"em";Q.style.position="relative";Q.style.top=l.div.renderedDepth+"em";Q.style.marginLeft=".1em";Q.style.marginTop=-l.div.renderedDepth+"em";var J=da,P=l.div.renderedHeight+l.div.renderedDepth-.04-J/2,L=Math.max(ca["radical.w"][0]),R=Math.max(0,Math.min(L,ca["radical.t"][0])),K=Math.max(0,ca["radical.h"][0]),B=P/Math.max(0,ca["radical.verticalthreshold"][0]),Ja=Math.sqrt(B),G=Math.sqrt(3);
if(l.div.renderedHeight+l.div.renderedDepth<Math.max(0,ca["radical.verticalthreshold"][0])){K=Math.min(l.div.renderedHeight+l.div.renderedDepth,K/Math.max(ca["radical.verticalthreshold"][0],0));var ea=J*B*G/(6*B*B+2);Q.width=(-J*(R*(B-1)-B*L-P*Ja+L)/(2*P)+ea+L)*g;Q.style.width=(-J*R*(B-1)+J*B*L-L*(J-2*P)+P*(J+2*ea))/(2*P)+"em";var Z=Q.getContext("2d"),cb=[Math.max(-J*(R*(B-1)-B*L-P*Ja+L)/(2*P),0)+ea+L,P-J/2],Pa=[Math.min(-J*(-R*(B-1)+B*L+P*Ja-L)/(2*P)+ea+L,cb[0]),P+J/2],Aa=[-(4*R*R*B*G*(B-1)*(B-1)-
R*(B-1)*(4*B*B*L*G+3*J*G*Math.pow(B,1.5)-4*B*(P*(K-1)-ea*G)+4*P*K)-P*(4*B*B*L*(K-1)+J*Math.pow(B,1.5)*(3*K+2)-4*B*(K*L-ea*(K-1))-3*J*K*Ja-4*K*ea))/(4*(G*R*B*(B-1)+P*(B*(K-1)-K))),-(K*P+B*R*G)/(B*(L-R))*(-(4*R*R*B*G*(B-1)*(B-1)-R*(B-1)*(4*B*B*L*G+3*J*G*Math.pow(B,1.5)-4*B*(P*(K-1)-ea*G)+4*P*K)-P*(4*B*B*L*(K-1)+J*Math.pow(B,1.5)*(3*K+2)-4*B*(K*L-ea*(K-1))-3*J*K*Ja-4*K*ea))/(4*(G*R*B*(B-1)+P*(B*(K-1)-K)))-B*(L-R)-R-3*J*Ja/4-ea)],ub=[Math.max(-R*(B-1)+B*L+J/2*Ja+ea,-Aa[1]*(Pa[0]-Aa[0])/(Pa[1]-Aa[1])+
Aa[0]+cb[0]-(Pa[0]-Aa[0])/(Pa[1]-Aa[1])*(cb[1]-Aa[1]+(Pa[1]-Aa[1])/(Pa[0]-Aa[0])*Aa[0])),0];Z.beginPath();Z.moveTo(cb[0]*g,Q.height-cb[1]*g);Z.lineTo((-J*(R*(B-1)-B*L-P*Ja+L)/(2*P)+ea+L)*g,Q.height-(P+J/2)*g);Z.lineTo(Pa[0]*g,Q.height-Pa[1]*g);Z.lineTo(Aa[0]*g,Q.height-Aa[1]*g);Z.lineTo((8*R*R*B*G*(B-1)-R*(8*B*B*L*G+6*J*Math.pow(B,1.5)*G+B*(J+8*ea*G)+8*P*K)+J*B*L-6*J*P*K*Ja-8*P*K*ea)/(8*(R*B*G*(B-1)-B*B*L*G-P*K))*g,Q.height-(ib=B*G*(8*R*R*B*G*(B-1)-R*(8*B*B*L*G+6*J*Math.pow(B,1.5)*G+B*(J+8*ea*G)+
8*P*K)+J*B*L-6*J*P*K*Ja-8*P*K*ea)/(8*(R*B*G*(B-1)-B*B*L*G-P*K))+K*P+J/8)*g);Z.lineTo(0,Q.height-(K*P+J/8)*g);Z.lineTo(2*ea*g,Q.height-(K*P-J/8)*g);Z.lineTo((8*R*R*B*G*(B-1)-R*(8*B*B*G*(L-2*ea)-6*J*Math.pow(B,1.5)*G-B*(J-8*ea*G)+8*P*K)-16*ea*B*B*L*G-J*B*L+6*J*P*K*Ja-8*P*K*ea)/(8*(R*B*G*(B-1)-B*B*L*G-P*K))*g,Q.height-(B*G*((8*R*R*B*G*(B-1)-R*(8*B*B*G*(L-2*ea)-6*J*Math.pow(B,1.5)*G-B*(J-8*ea*G)+8*P*K)-16*ea*B*B*L*G-J*B*L+6*J*P*K*Ja-8*P*K*ea)/(8*(R*B*G*(B-1)-B*B*L*G-P*K))-2*ea)+K*P-J/8)*g);Z.lineTo((-R*
(B-1)+B*L-.75*J*Ja+ea)*g,Q.height);Z.lineTo(ub[0]*g,Q.height);Z.closePath();Z.fill();hb=(Pa[0]-Aa[0])/(Pa[1]-Aa[1])*(ib-Aa[1])+Aa[0]}else K=Math.max(0,Math.min(P,ca["radical.h"][0])),Q.width=(8*L+J*(4+G))/8*g,Q.style.width=(8*L+J*(4+G))/8+"em",Z=Q.getContext("2d"),Z.beginPath(),Z.moveTo((L+J*(G+4)/8)*g,.04*g),Z.lineTo((L+J*(G-4)/8)*g,.04*g),Z.lineTo((L+J*(G-4)/8)*g,Q.height-5*J*(K+R*G)/(4*(L-R))*g),Z.lineTo((R*(4*L*G+J*(3*G+2)+4*K)-J*(2*L-3*K-1.5*L-K/2*G))/(4*(L*G+K))*g,Q.height-(ib=(R*(4*L*G+J*(3*
G+2)+4*K)-J*(2*L-3*K))/(4*(L*G+K))*G+K+J/2)*g),Z.lineTo(0,Q.height-(J/8+K)*g),Z.lineTo(J*G/4*g,Q.height-(-J/8+K)*g),Z.lineTo((R*(4*L*G-J*(3*G+2)+4*K)+J*(2*L-3*K+1.5*L+K/2*G))/(4*(L*G+K))*g,Q.height-((R*(4*L*G-J*(3*G+2)+4*K)+J*(2*L-3*K))/(4*(L*G+K))*G+K-J/2)*g),Z.lineTo((L-J*(6-G)/8)*g,Q.height),Z.lineTo((L+J*(G+4)/8)*g,Q.height),Z.closePath(),Z.fill(),hb=L+J*(G-4)/8}else Q.height=(fontTeX.fontDimen.heightOf("\u221a",p)+fontTeX.fontDimen.depthOf("\u221a",p))*g,Q.width=fontTeX.fontDimen.widthOf("\u221a",
p)*g,Z=Q.getContext("2d"),Q.style.height=l.div.renderedHeight+l.div.renderedDepth+"em",Q.style.width=fontTeX.fontDimen.widthOf("\u221a",p)+"em",Q.style.position="relative",Q.style.top=l.div.renderedDepth+"em",Q.style.marginTop=-l.div.renderedDepth+"em",Z.textAlign="center",Z.font=g+"px "+p,Z.fillText("\u221a",Q.width/2,Q.height*(1-fontTeX.fontDimen.depthOf("\u221a",p)));l.div.insertBefore(Q,N);if(l.index.length){var Ka=document.createElement("div");Ka.style.display="inline-block";Ka.style.position=
"relative";m(l.index,"scriptscript",!1,k,Ka);Ka.style.fontSize="50px";a.appendChild(Ka);Ka.style.marginLeft=Math.max(-Ka.getBoundingClientRect().width/50,-(hb+.05)/("script"==f?.707106781:"scriptscript"==f?1:.5))+"em";a.removeChild(Ka);Ka.style.fontSize=("script"==f?.707106781:"scriptscript"==f?1:.5)+"em";Ka.style.top=-Math.max(ib-l.div.renderedDepth,fontTeX.fontDimen.heightOf("x",p)/2)/("script"==f?.707106781:"scriptscript"==f?1:.5)-Ka.renderedDepth-.1+"em";Ka.style.left=(.05+hb)/("script"==f?.707106781:
"scriptscript"==f?1:.5)+"em";l.div.insertBefore(Ka,Q)}}}else n(11,w,t);break;case 11:if("rule"==l.type){var wa=document.createElement("div");S=V="100%";za="";wa.style.background="currentColor";l.height&&(S=new u(l.height),S.em.value+=S.sp.value/65536/6*8/g*65536,S=S.em.value/65536);l.depth&&(za=new u(l.depth),za.em.value+=za.sp.value/65536/6*8/g*65536,za=za.em.value/65536);l.width&&(V=new u(l.width),V.em.value+=V.sp.value/65536/6*8/g*65536,V=V.em.value/65536);"v"==l.ruleType?("100%"==S?(wa.style.alignSelf=
"stretch",wa.renderedDepth=wa.renderedHeight=0):(wa.style.height=Math.max(S+za,0)+"em",wa.style.marginBottom=wa.style.top=za+"em",wa.style.marginTop=-za+"em",wa.style.position="relative",wa.renderedHeight=Math.max(S,0),wa.renderedDepth=Math.max(za,0)),0>V?v.add({type:"kern",dimen:new u(0,65536*V)}):wa.style.width=V+"em"):"h"==l.ruleType&&(wa.style.width="100%"==V?"100%":V+"em",wa.style.height=Math.max(S+za,0)+"em",wa.style.marginBottom=wa.style.top=za+"em",wa.style.marginTop=-za+"em",wa.style.position=
"relative",v.push({type:"atom",atomType:0,nucleus:{},superscript:null,subscript:null,style:f,isLineBreak:!0,div:document.createElement("div")}),v[v.length-1].div.style.width="100%",q.push(v[v.length-1]));C={type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null,style:f,div:wa,isLineBreak:"h"==l.ruleType};v.push(C);q.push(C);"h"==l.ruleType&&(v.push({type:"atom",atomType:0,nucleus:null,superscript:null,subscript:null,isLineBreak:!0,div:document.createElement("div")}),v[v.length-1].div.style.width=
"100%",q.push(v[v.length-1]))}}}function r(a,b,d){var c=v[b],h=q.indexOf(c);switch(a){case 1:c.italicCorrection&&(c.dimen=new u(0,65536*fontTeX.fontDimen.italCorrOf(c.italicCorrection,p)));"glue"==c.type&&"dimension"==c.glue.stretch.type&&0==c.glue.stretch.sp.value&&0==c.glue.stretch.em.value&&"dimension"==c.glue.shrink.type&&0==c.glue.shrink.sp.value&&0==c.glue.shrink.em.value&&(c.type="kern",c.dimen=c.glue.start);if("vkern"==c.type&&(c.dimen.sp.value||c.dimen.em.value))C+=c.dimen.em.value,C+=c.dimen.sp.value/
65536/6*8/g*65536,z.push(document.createElement("div")),z.last.style.display="inline-flex",z.last.style.flexWrap="nowrap",z.last.style.alignItems="baseline",C&&(z.last.style.position="relative",z.last.style.marginTop=C/65536+"em",z.last.style.marginBottom=-C/65536+"em",z.last.style.top=-C/65536+"em",z.last.verticalRaise=C);else if("kern"==c.type&&(c.dimen.sp.value||c.dimen.em.value)){if(!z.last.lastElementChild||z.last.lastElementChild.style.marginRight)h=document.createElement("div"),h.style.display=
"inline-block",z.last.appendChild(h);z.last.lastElementChild.style.marginRight=c.dimen.sp.value?c.dimen.em.value?"calc("+c.dimen.sp.value/65536+"pt + "+c.dimen.em.value/65536+"em)":c.dimen.sp.value/65536+"pt":c.dimen.em.value/65536+"em"}else if("glue"==c.type){h=document.createElement("div");h.style.width=c.glue.start.sp.value?c.glue.start.em.value?"calc("+c.glue.start.sp.value/65536+"pt + "+c.glue.start.em.value/65536+"em)":c.glue.start.sp.value/65536+"pt":c.glue.start.em.value/65536+"em";if("infinite dimension"==
c.glue.stretch.type)h.style.flexGrow=Math.pow(1290,c.glue.stretch.magnitude.value);else if(c.glue.stretch.sp.value||c.glue.stretch.em.value)h.style.flexGrow=1,h.style.maxWidth="calc("+(c.glue.start.sp.value?c.glue.start.em.value?"("+c.glue.start.sp.value/65536+"pt + "+c.glue.start.em.value/65536+"em)":c.glue.start.sp.value/65536+"pt":c.glue.start.em.value/65536+"em")+" + "+(c.glue.stretch.sp.value?c.glue.stretch.em.value?"("+c.glue.stretch.sp.value/65536+"pt + "+c.glue.stretch.em.value/65536+"em)":
c.glue.stretch.sp.value/65536+"pt":c.glue.stretch.em.value/65536+"em")+")";if("infinite dimension"==c.glue.shrink.type)h.style.flexShrink=Math.pow(1290,c.glue.shrink.magnitude.value);else if(c.glue.shrink.sp.value||c.glue.shrink.em.value)h.style.flexShrink=1,h.style.minWidth="calc("+(c.glue.start.sp.value?c.glue.start.em.value?"("+c.glue.start.sp.value/65536+"pt + "+c.glue.start.em.value/65536+"em)":c.glue.start.sp.value/65536+"pt":c.glue.start.em.value/65536+"em")+" - "+(c.glue.shrink.sp.value?c.glue.shrink.em.value?
"("+c.glue.shrink.sp.value/65536+"pt + "+c.glue.shrink.em.value/65536+"em)":c.glue.shrink.sp.value/65536+"pt":c.glue.shrink.em.value/65536+"em")+")";z.push(h);z.push(document.createElement("div"));z.last.style.display="inline-flex";z.last.style.flexWrap="nowrap";z.last.style.alignItems="baseline";C&&(z.last.style.position="relative",z.last.style.marginTop=C/65536+"em",z.last.style.marginBottom=-C/65536+"em",z.last.style.top=-C/65536+"em",z.last.verticalRaise=C)}r(2,b,d);break;case 2:if("atom"==c.type){if(0!=
h&&2==c.atomType){if("display"==f||"text"==f)z.push(document.createElement("div")),z.last.style.flexShrink=1,z.last.style.flexGrow=1,z.last.style.maxWidth=".3333333em",z.last.style.width=".2222222em";z.push(document.createElement("div"));z.last.style.display="inline-flex";z.last.style.flexWrap="nowrap";z.last.style.alignItems="baseline";C&&(z.last.style.position="relative",z.last.style.marginTop=C/65536+"em",z.last.style.marginBottom=-C/65536+"em",z.last.style.top=-C/65536+"em",z.last.verticalRaise=
C)}if(0!=h&&3==c.atomType){if("display"==f||"text"==f&&3!=q[h-1].atomType&&4!=q[h-1].atomType)z.push(document.createElement("div")),6==q[h-1].atomType?z.last.style.width=".1666667em":(z.last.style.flexGrow=1,z.last.style.maxWidth=".5555555em",z.last.style.width=".2777778em");z.push(document.createElement("div"));z.last.style.display="inline-flex";z.last.style.flexWrap="nowrap";z.last.style.alignItems="baseline";C&&(z.last.style.position="relative",z.last.style.marginTop=C/65536+"em",z.last.style.marginBottom=
-C/65536+"em",z.last.style.top=-C/65536+"em",z.last.verticalRaise=C)}if(0!=h){b=q[h-1].atomType;d=c.atomType;b={0:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},1:{0:1,1:1,3:0,4:0,5:0,6:0,7:1,inner:-1},2:{0:-2,1:-2,4:-2,7:-2,inner:-2},3:{0:-3,1:-3,3:0,4:-3,5:0,6:0,7:-3,inner:-3},4:{0:0,1:0,3:0,4:0,5:0,6:0,7:0,inner:0},5:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},6:{0:0,1:0,3:0,4:0,5:0,6:0,7:0,inner:0},7:{0:0,1:1,2:0,3:0,4:0,5:0,6:0,7:0,inner:-1},inner:{0:-1,1:1,2:0,3:0,4:-1,5:0,6:-1,7:-1,inner:-1}}["string"==
typeof b&&"inner"!=b?0:b]["string"==typeof d&&"inner"!=d?0:d];d=document.createElement("div");0>b&&(b="script"==c.style||"scriptscript"==c.style?0:-b);switch(b){case 1:d.style.width=".1666667em";break;case 2:d.style.width=".2222222em";d.style.maxWidth=".3333333em";d.style.flexGrow="1";d.style.flexShrink="1";break;case 3:d.style.width=".2777778em",d.style.maxWidth=".5555555em",d.style.flexGrow="1"}b&&z.last.appendChild(d)}z.last.renderedHeight=Math.max(z.last.renderedHeight||0,c.div.renderedHeight);
z.last.renderedDepth=Math.max(z.last.renderedDepth||0,c.div.renderedDepth);z.last.baseline+z.last.baselineOffset>c.div.baseline+c.div.baselineOffset?(z.last.baseline=z.last.baseline||0,z.last.baselineOffset=z.last.baselineOffset||0):(z.last.baseline=c.div.baseline,z.last.baselineOffset=c.div.baselineOffset);c.isLineBreak?(z.push(c.div),z.push(document.createElement("div")),z.last.style.display="inline-flex",z.last.style.flexWrap="nowrap",z.last.style.alignItems="baseline",C&&(z.last.style.position=
"relative",z.last.style.marginTop=C/65536+"em",z.last.style.marginBottom=-C/65536+"em",z.last.style.top=-C/65536+"em",z.last.verticalRaise=C)):z.last.appendChild(c.div);if(6==c.atomType){if("display"==f||"text"==f&&q[h+1]&&3!=q[h+1].atomType)z.push(document.createElement("div")),z.last.style.width=".1666667em";z.push(document.createElement("div"));z.last.style.display="inline-flex";z.last.style.flexWrap="nowrap";z.last.style.alignItems="baseline";C&&(z.last.style.position="relative",z.last.style.marginTop=
C/65536+"em",z.last.style.marginBottom=-C/65536+"em",z.last.style.top=-C/65536+"em",z.last.verticalRaise=C)}}}}if(b.length){var O=null,D=document.createElement("div");D.style.display="inline-flex";D.style.flexWrap="wrap";D.style.alignItems="baseline";D.displayedStyle=f;D.crampedStyle=h;D.style.justifyContent="display"==d?"center":"initial";var z=[document.createElement("div")];Object.defineProperty(z,"last",{get:function(){return this[this.length-1]}});z[0].style.display="inline-flex";z[0].style.flexWrap=
"nowrap";z[0].style.alignItems="baseline";for(var v=[],q=[],C=0,A=0,ja=b.length;A<ja;A++){var E=n(1,A,ja);E&&(A=E[0],ja=E[1])}q.length&&2==q[q.length-1].atomType&&(q[q.length-1].atomType=0);v.length||(D.empty=!0);A=0;for(ja=v.length;A<ja;A++)if(E=r(1,A,ja))A=E[0],ja=E[1];A=0;for(ja=z.length;A<ja;A++)D.appendChild(z[A]),D.renderedHeight=Math.max(D.renderedHeight||0,(z[A].renderedHeight||0)+(z[A].verticalRaise||0)/65536),D.renderedDepth=Math.max(D.renderedDepth||0,(z[A].renderedDepth||0)-(z[A].verticalRaise||
0)/65536),D.baselineOffset+D.baseline>z[A].baselineOffset+z[A].baseline?(D.baseline=D.baseline||0,D.baselineOffset=D.baselineOffset||0):(D.baseline=z[A].baseline,D.baselineOffset=z[A].baselineOffset);w.appendChild(D);w.renderedHeight=Math.max(w.renderedHeight||0,D.renderedHeight);w.renderedDepth=Math.max(w.renderedDepth||0,D.renderedDepth);w.baselineOffset+w.baseline>D.baselineOffset+D.baseline?(w.baseline=w.baseline||0,w.baselineOffset=w.baselineOffset||0):(w.baseline=D.baseline,w.baselineOffset=
D.baselineOffset);return O}A=document.createElement("div");A.style.display="inline-flex";A.displayedStyle=f;A.crampedStyle=h;A.renderedDepth=0;A.renderedHeight=0;w.renderedHeight=w.renderedHeight||0;w.renderedDepth=w.renderedDepth||0;w.baseline=fontTeX.fontDimen.baselineHeightOf(p);w.baselineOffset=0;w.appendChild(A);A.empty=!0}var k=document.createElement("div");"display"==d?k.style.textAlign="center":k.style.display="inline-block";var g=parseFloat(f.fontSize),p=f.fontFamily;m(b,d,!1,"nm",k);k.firstElementChild.empty&&
1==k.children.length&&(k=document.createTextNode(""));return k};var d={defs:{primitive:{"(":new r("(",function(a){this.invalid=!0;return[this]}),")":new r(")",function(a){if("inline"==a.style)return[{type:"character","char":"$",code:36,cat:d.cats.math}];this.invalid=!0;return[this]}),"/":new r("/",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:new u(0),italicCorrection:!0});return[]}),"[":new r("[",function(a){this.invalid=
!0;return[this]}),"]":new r("]",function(a){if("display"==a.style)return[{type:"character","char":"$",code:36,cat:d.cats.math},{type:"character","char":"$",code:36,cat:d.cats.math}];this.invalid=!0;return[this]}),above:new r("above",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth=b;a.scopes.last.root&&
(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),abovewithdelims:new r("abovewithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("dimension");if(!c)return this.invalid=!0,[this];for(;;){var f=a.mouth.eat();if(f&&("command"==f.type||"character"==f.type&&f.cat==d.cats.active))f=
a.mouth.expand(f,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,f);else if(f&&"character"==f.type&&d.delims.includes(f.code)&&(f.cat==d.cats.all||f.cat==d.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=f["char"];break}else a.scopes.last.fracLeftDelim=f["char"];else return this.invalid=!0,a.mouth.loadState(b),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth=c;a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=
!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),accent:new r("accent",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("integer");if(!c||0>c.value)return this.invalid=!0,a.mouth.loadState(b),[this];a.tokens.push({type:"accent modifier","char":String.fromCharCode(c.value),code:c.value,token:this});return[]}),advance:new r("advance",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register){var f=a.mouth.eat();if(!f||"character"!=f.type||"b"!=f["char"]&&"B"!=f["char"]||f.cat==d.cats.active)if(f)a.mouth.revert();else return this.invalid=
!0,a.mouth.loadState(b),[this];else f=a.mouth.eat(),(!f||"character"!=f.type||"y"!=f["char"]&&"Y"!=f["char"]||f.cat==d.cats.active)&&a.mouth.revert(2);if("integer"==c.type)if(f=a.mouth.eat("integer")){c.value+=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.value=b.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("dimension"==c.type)if(f=a.mouth.eat("dimension")){c.sp.value+=
f.sp.value;c.em.value+=f.em.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.sp.value=b.sp.value,c.em.value=b.em.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("mu dimension"==c.type)if(f=a.mouth.eat("mu dimension")){c.mu.value+=f.mu.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=
c.parent,c.mu.value=b.mu.value;a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("glue"==c.type)if(f=a.mouth.eat("glue")){c.start.sp.value+=f.start.sp.value;c.start.em.value+=f.start.em.value;if("infinite dimension"==f.stretch.type)if("infinite dimension"==c.stretch.type&&c.stretch.magnitude.value==f.stretch.magnitude.value)c.stretch.value+=f.stretch.value;else{if("infinite dimension"!=c.stretch.type||c.stretch.magnitude.value<f.stretch.magnitude.value)c.stretch=
new A(f.stretch.number.value,f.stretch.magnitude.value)}else"infinite dimension"!=c.stretch.type&&(c.stretch.sp.value+=f.stretch.sp.value,c.stretch.em.value+=f.stretch.em.value);if("infinite dimension"==f.shrink.type)if("infinite dimension"==c.shrink.type&&c.shrink.magnitude.value==f.shrink.magnitude.value)c.shrink.value+=f.shrink.value;else{if("infinite dimension"!=c.shrink.type||c.shrink.magnitude.value<f.shrink.magnitude.value)c.shrink=new A(f.shrink.number.value,f.shrink.magnitude.value)}else"infinite dimension"!=
c.shrink.type&&(c.shrink.sp.value+=f.shrink.sp.value,c.shrink.em.value+=f.shrink.em.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.sp.value+=f.start.sp.value,c.start.em.value+=f.start.em.value,c.stretch="infinite dimension"==b.stretch.type?new A(b.stretch.number.value,b.stretch.magnitude.value):new u(b.stretch.sp.value,b.stretch.em.value),c.shrink="infinite dimension"==b.shrink.type?
new A(b.shrink.number.value,b.shrink.magnitude.value):new u(b.shrink.sp.value,b.shrink.em.value);a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("mu glue"==c.type)if(f=a.mouth.eat("mu glue")){c.start.mu.value+=f.start.mu.value;if("infinite dimension"==f.stretch.type)if("infinite dimension"==c.stretch.type&&c.stretch.magnitude.value==f.stretch.magnitude.value)c.stretch.value+=f.stretch.value;else{if("infinite dimension"!=c.stretch.type||c.stretch.magnitude.value<
f.stretch.magnitude.value)c.stretch=new A(f.stretch.number.value,f.stretch.magnitude.value)}else"infinite dimension"!=c.stretch.type&&(c.stretch.mu.value+=f.stretch.mu.value);if("infinite dimension"==f.shrink.type)if("infinite dimension"==c.shrink.type&&c.shrink.magnitude.value==f.shrink.magnitude.value)c.shrink.value+=f.shrink.value;else{if("infinite dimension"!=c.shrink.type||c.shrink.magnitude.value<f.shrink.magnitude.value)c.shrink=new A(f.shrink.number.value,f.shrink.magnitude.value)}else"infinite dimension"!=
c.shrink.type&&(c.shrink.mu.value+=f.shrink.mu.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.mu.value=b.start.mu.value,c.stretch="infinite dimension"==b.stretch.type?new A(b.stretch.number.value,b.stretch.magnitude.value):new H(b.stretch.mu.value),"infinite dimension"==b.shrink.type?c.shrink=new A(b.shrink.number.value,b.shrink.magnitude.value):c.stretch=new H(b.shrink.mu.value);
a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];break}else return this.invalid=!0,a.mouth.loadState(b),[this]}return[]}),atop:new r("atop",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracLeftDelim=a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth=new u(0);a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;
a.scopes.last.tokens=[];return[]}),atopwithdelims:new r("atopwithdelims",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=
c["char"];break}else a.scopes.last.fracLeftDelim=c["char"];else return this.invalid=!0,a.mouth.loadState(b),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth=new u(0);a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),begingroup:new r("begingroup",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();
var b=Symbol();a.mouth.saveState(b);new a.Scope;a.scopes.last.semisimple=!0;a.openGroups.push(this);a.contexts.push("scope");this.ignore=!0;a.scopes.last.tokens.push(this);return[]}),bf:new r("bf",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"bf"});return[]}),catcode:new r("catcode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");
if(b){if(0>b.value)return a.mouth.revert(),this.invalid=!0,[this];if(!(b.value in d.cats)){d.cats[b.value]=new k(d.cats.all,0,15);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].cats[b.value]=new k((0==c?d:a.scopes[c-1]).cats[b.value])}return[a.scopes.last.cats[b.value]]}this.invalid=!0;return[this]}),"char":new r("char",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];a.mouth.queue.unshift({type:"character",cat:d.cats.all,"char":String.fromCharCode(b.value),
code:b.value});return[]}),chardef:new r("chardef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=
!0,a.mouth.loadState(b),[!0];b=new qa([{type:"character",cat:d.cats.all,"char":String.fromCharCode(f.value),code:f.value}],[]);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){d.defs.macros[c.name]=b;delete d.registers.named[c.name];f=0;for(var h=a.scopes.length;f<h;f++)a.scopes[f].defs.macros[c.name]=b,delete a.scopes[f].registers.named[c.name]}else a.scopes.last.defs.macros[c.name]=b,delete a.scopes.last.registers.named[c.name];
a.toggles.global=!1}else return this.invalid=!0,a.mouth.loadState(b),[!0]}),count:new r("count",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.count[b.value]){d.registers.count[b.value]=new k(0);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.count[b.value]=new k((c?a.scopes[c-1]:d).registers.count[b.value])}return[a.scopes.last.registers.count[b.value]]}),countdef:new r("countdef",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];c=c.name;f=f.value;if(!d.registers.count[f]){d.registers.count[f]=
new k(0);b=0;for(var h=a.scopes.length;b<h;b++)a.scopes[b].registers.count[f]=new k((b?a.scopes[b-1]:d).registers.count[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.count[f],delete d.defs.macros[c],b=0,h=a.scopes.length;b<h;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.count[f],delete a.scopes[b].defs.macros[c];else a.scopes.last.registers.named[c]=a.scopes.last.registers.count[f],
delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(b),[!0]}),cr:new r("cr",function(a){if(!a.scopes.last.isHalign&&!a.scopes.last.isHalignCell||"scope"!=a.contexts.last)return this.invalid=!0,[this];if(a.scopes.last.isHalignCell){var b=a.scopes[a.scopes.length-2].cellData[a.scopes[a.scopes.length-2].cellData.length-1],c=a.scopes[a.scopes.length-2];if(!b[b.length-1].omit&&!this.postPreamble){a=-1;for(var f=0,h=b.length;f<h;f++)a+=b[f].span;if(c.preamble[a])c=c.preamble[a][1];
else if(~c.repeatPreambleAt)b=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),c=b[(a-c.repeatPreambleAt)%b.length][1];else return this.invalid=!0,[this];this.postPreamble=!0;return c.concat(this)}a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.contexts.pop();c=a.scopes.last.tokens;a.scopes.last.isFrac?(b[b.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:c,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,
a.scopes.last.fracRightDelim],nullDelimiterSpace:new u(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),b=a.scopes.last.cellData[a.scopes.last.cellData.length-1],b[b.length-1].content=b[b.length-1].content.concat(c))}$jscomp.initSymbol();f=Symbol();for(a.mouth.saveState(f);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}else if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);
a.scopes.last.noAligns.push(null);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||
b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||
b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||
b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===
c&&c.invalid){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}}else{if(b===d.defs.primitive.noalign||b.proxy&&b.original===d.defs.primitive.noalign){b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}a.scopes.last.noAligns.push(b);break}if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]==-c&&
c.invalid){a.mouth.loadState(f);a.scopes.last.noAligns.push(null);break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}$jscomp.initSymbol();f=Symbol();for(a.mouth.saveState(f);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(f);break}else if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||
a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||
b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||
b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===
d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);break}}else{if(b===d.defs.primitive.crcr||b.proxy&&b.original===d.defs.primitive.crcr)break;if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);break}b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);
break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}$jscomp.initSymbol();f=Symbol();for(a.mouth.saveState(f);;)if(c=a.mouth.eat()){if("character"==c.type&&c.cat==d.cats.close){c=a.scopes.last;if(~c.repeatPreambleAt)for(b=Math.max.apply(Math,c.cellData.map(function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c].span;return b})),f=c.tabSkips.slice(c.repeatPreambleAt+1,c.tabSkips.length),h=0;c.tabSkips.length<b+1;)c.tabSkips.push(f[h]),h=(h+1)%f.length;a.scopes.pop();a.scopes.last.tokens.push({type:"atom",
atomType:"inner",nucleus:{type:"table",cellData:c.cellData,tabSkips:c.tabSkips,noAligns:c.noAligns},superscript:null,subscript:null});return[]}if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);
break}if(b===d.defs.primitive.the||b.proxy&&b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||
b.isLet&&b.original===d.defs.primitive["if"]||b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||
b.isLet&&b.original===d.defs.primitive.ifnum||b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||
b===d.defs.primitive.ifx||b.isLet&&b.original===d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);break}}else{if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);break}b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}}else{a.mouth.loadState(f);break}$jscomp.initSymbol();f=Symbol();a.mouth.saveState(f);for(a.scopes.last.cellData.push([{type:"cell",
content:[],omit:!1,span:1}]);;)if(c=a.mouth.eat(),!c){a.mouth.loadState(f);break}else if("character"==c.type&&c.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){if(c.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}b="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!b){a.mouth.loadState(f);break}if(b===d.defs.primitive.the||b.proxy&&
b.original===d.defs.primitive.the||b===d.defs.primitive.expandafter||b.proxy&&b.original===d.defs.primitive.expandafter||b===d.defs.primitive.number||b.proxy&&b.original===d.defs.primitive.number||b===d.defs.primitive.romannumeral||b.proxy&&b.original===d.defs.primitive.romannumeral||b===d.defs.primitive.csname||b.proxy&&b.original===d.defs.primitive.csname||b===d.defs.primitive.string||b.proxy&&b.original===d.defs.primitive.string||b===d.defs.primitive["if"]||b.isLet&&b.original===d.defs.primitive["if"]||
b===d.defs.primitive.ifcase||b.isLet&&b.original===d.defs.primitive.ifcase||b===d.defs.primitive.ifcat||b.isLet&&b.original===d.defs.primitive.ifcat||b===d.defs.primitive.ifdim||b.isLet&&b.original===d.defs.primitive.ifdim||b===d.defs.primitive.ifeof||b.isLet&&b.original===d.defs.primitive.ifeof||b===d.defs.primitive.iffalse||b.isLet&&b.original===d.defs.primitive.iffalse||b===d.defs.primitive.ifodd||b.isLet&&b.original===d.defs.primitive.ifodd||b===d.defs.primitive.ifnum||b.isLet&&b.original===d.defs.primitive.ifnum||
b===d.defs.primitive.ifhmode||b.isLet&&b.original===d.defs.primitive.ifhmode||b===d.defs.primitive.ifinner||b.isLet&&b.original===d.defs.primitive.ifinner||b===d.defs.primitive.ifmmode||b.isLet&&b.original===d.defs.primitive.ifmmode||b===d.defs.primitive.iftrue||b.isLet&&b.original===d.defs.primitive.iftrue||b===d.defs.primitive.ifvmode||b.isLet&&b.original===d.defs.primitive.ifvmode||b===d.defs.primitive.ifvoid||b.isLet&&b.original===d.defs.primitive.ifvoid||b===d.defs.primitive.ifx||b.isLet&&b.original===
d.defs.primitive.ifx){if(b=a.mouth.expand(c,a.mouth),1==b.length&&b[0]===c&&c.invalid){a.mouth.loadState(f);break}}else{if(b===d.defs.primitive.omit||b.proxy&&b.original===d.defs.primitive.omit){a.scopes.last.cellData[a.scopes.last.cellData.length-1][0].omit=!0;break}if("primitive"==b.type||b.proxy&&"primitive"==b.original.type){a.mouth.loadState(f);break}b=a.mouth.expand(c,a.mouth);if(1==b.length&&b[0]==-c&&c.invalid){a.mouth.loadState(f);break}}a.mouth.queue.unshift.apply(a.mouth.queue,b)}c=a.scopes.last;
a.contexts.push("scope");new a.Scope;a.scopes.last.isHalignCell=!0;return c.cellData[c.cellData.length-1][0].omit?[]:c.preamble[0][0]}),crcr:new r("crcr",null),csname:new r("csname",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=[];;){var f=a.mouth.eat("pre space");if(f){if(0!=c.length||f.cat!=d.cats.whitespace)if("command"==f.type||"character"==f.type&&f.cat==d.cats.active){if(f.name in a.scopes.last.registers.named)return this.invalid=!0,a.mouth.loadState(b),[this];
var h="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(!h)return this.invalid=!0,a.mouth.loadState(b),[this];h.proxy&&(h=h.original);if(h===d.defs.primitive.endcsname)break;else if(h===d.defs.primitive.the||h===d.defs.primitive.expandafter||h===d.defs.primitive.number||h===d.defs.primitive.romannumeral||h===d.defs.primitive.csname||h===d.defs.primitive.string||h===d.defs.primitive["if"]||h===d.defs.primitive.ifcase||
h===d.defs.primitive.ifcat||h===d.defs.primitive.ifdim||h===d.defs.primitive.ifeof||h===d.defs.primitive.iffalse||h===d.defs.primitive.ifodd||h===d.defs.primitive.ifnum||h===d.defs.primitive.ifhmode||h===d.defs.primitive.ifinner||h===d.defs.primitive.ifmmode||h===d.defs.primitive.iftrue||h===d.defs.primitive.ifvmode||h===d.defs.primitive.ifvoid||h===d.defs.primitive.ifx){h=a.mouth.expand(f,a.mouth);if(1==h.length&&h[0]===f&&h[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,
h);continue}else if(h instanceof r)return this.invalid=!0,a.mouth.loadState(b),[this];h=a.mouth.expand(f,a.mouth);if(1==h.length&&h[0]===f&&h[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,h)}else c.push(f)}else return this.invalid=!0,a.mouth.loadState(b),[this]}return[{type:"command",nameType:"command",escapeChar:String.fromCharCode(a.scopes.last.registers.named.escapechar.value),name:c.map(function(a){return a["char"]}).join("")}]}),day:new r("day",
function(a){return[new k((new Date).getDate())]}),def:new r("def",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||
c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];for(var h=[],m=0,k=!1;;){var g=a.mouth.eat();if(g)if(g.cat==d.cats.open){a.mouth.revert();break}else if(g.cat==d.cats.param){var p=a.mouth.eat("pre space");if(p)if(p.cat==d.cats.open)k=!0,a.mouth.revert(),h.push({type:"character",cat:d.cats.open,"char":p["char"],code:p.code});else if(48<p.code&&58>p.code&&p.cat==d.cats.all&&+p["char"]==m+1)h.push(g),m++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=
!0,a.mouth.loadState(b),[this]}else h.push(g);else return this.invalid=!0,a.mouth.loadState(b),[this]}m=0;p=[];for(var r=!1;;){if(g=a.mouth.eat("pre space"))if("character"!=g.type||g.cat!=d.cats.param||r)if("character"==g.type&&g.cat==d.cats.open)m++;else if("character"==g.type&&g.cat==d.cats.close){if(m--,0==m)break}else r&&(r=!1);else{var u=a.mouth.eat("pre space");if(u&&(u.cat==d.cats.param||u.cat==d.cats.all&&u["char"]<=h.length&&1<=u["char"]))a.mouth.revert(),u.cat==d.cats.param&&(r=!0);else return this.invalid=
!0,a.mouth.loadState(b),[this]}else return this.invalid=!0,a.mouth.loadState(b),[this];p.push(g)}p.shift();k&&p.push(h[h.length-1]);b=new qa(p,h);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==f)for(d.defs.macros[c]=b,delete d.registers.named[c],f=0,h=a.scopes.length;f<h;f++)a.scopes[f].defs.macros[c]=b,delete a.scopes[f].registers[c];else for(d.defs.active[c]=b,delete d.registers.named[c],f=0,h=a.scopes.length;f<
h;f++)a.scopes[f].defs.ative[c]=b,delete a.scopes[f].registers[c];else a.scopes.last.defs["macro"==f?"macros":"active"][c]=b,delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),dimen:new r("dimen",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.dimen[b.value]){d.registers.dimen[b.value]=new u(0,0);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.dimen[b.value]=new u((c?a.scopes[c-1]:d).registers.dimen[b.value])}return[a.scopes.last.registers.dimen[b.value]]}),
dimendef:new r("dimendef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),
[!0];c=c.name;f=f.value;if(!d.registers.dimen[f]){d.registers.dimen[f]=new u(0,0);b=0;for(var h=a.scopes.length;b<h;b++)a.scopes[b].registers.dimen[f]=new u((b?a.scopes[b-1]:d).registers.dimen[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.dimen[f],delete d.defs.macros[c],b=0,h=a.scopes.length;b<h;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.dimen[f],delete a.scopes[b].defs.macros[c];
else a.scopes.last.registers.named[c]=a.scopes.last.registers.dimen[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(countDefSym),[!0]}),displaylimits:new r("displaylimits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:"display",token:this});return[]}),displaystyle:new r("displaystyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"font modifier",value:"displaystyle"});return[]}),divide:new r("divide",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register)if(c&&c.register){var f=a.mouth.eat();if(!f||
"character"!=f.type||"b"!=f["char"]&&"B"!=f["char"]||f.cat==d.cats.active)if(f)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(b),[this];else f=a.mouth.eat(),(!f||"character"!=f.type||"y"!=f["char"]&&"Y"!=f["char"]||f.cat==d.cats.active)&&a.mouth.revert(2);if(f=a.mouth.eat("integer"))if("integer"==c.type){c.value=~~(c.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,
c.value=b.value;a.toggles.global=!1}else if("dimension"==c.type){c.sp.value=~~(c.sp.value/f.value);c.em.value=~~(c.em.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.sp.value=b.sp.value,c.em.value=b.em.value;a.toggles.global=!1}else if("mu dimension"==c.type){c.mu.value=~~(c.mu.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=
c.parent,c.mu.value=b.mu.value;a.toggles.global=!1}else if("glue"==c.type){c.start.sp.value=~~(c.start.sp.value/f.value);c.start.em.value=~~(c.start.em.value/f.value);"infinite dimension"==c.stretch.type?c.stretch.number.value=~~(c.stretch.number.value/f.value):(c.stretch.sp.value=~~(c.stretch.sp.value/f.value),c.stretch.em.value=~~(c.stretch.em.value/f.value));"infinite dimension"==c.shrink.type?c.shrink.number.value=~~(c.shrink.number.value/f.value):(c.shrink.sp.value=~~(c.shrink.sp.value/f.value),
c.shrink.em.value=~~(c.shrink.em.value/f.value));b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.sp.value=b.start.sp.value,c.start.em.value=b.start.em.value,c.stretch="infinite dimension"==b.stretch.type?new A(b.stretch.number.value,b.stretch.magnitude.value):new u(b.stretch.sp.value,b.stretch.em.value),c.shrink="infinite dimension"==b.shrink.type?new A(b.shrink.number.value,b.shrink.magnitude.value):
new u(b.shrink.sp.value,b.shrink.em.value);a.toggles.global=!1}else{if("mu glue"==c.type){c.start.mu.value=~~(c.start.mu.value/f.value);"infinite dimension"==c.stretch.type?c.stretch.number.value=~~(c.stretch.number.value/f.value):c.stretch.mu.value=~~(c.stretch.mu.value/f.value);"infinite dimension"==c.shrink.type?c.shrink.number.value=~~(c.shrink.number.value/f.value):c.shrink.mu.value=~~(c.shrink.mu.value/f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=
c.parent,c.start.mu.value=b.start.mu.value,c.stretch="infinite dimension"==b.stretch.type?new A(b.stretch.number.value,b.stretch.magnitude.value):new H(b.stretch.mu.value),c.shrink="infinite dimension"==b.shrink.type?new A(b.shrink.number.value,b.shrink.magnitude.value):new H(b.shrink.mu.value);a.toggles.global=!1}}else return this.invalid=!0,a.mouth.loadState(b),[this];break}else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}return[]}),
edef:new r("edef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=
!0,a.mouth.loadState(b),[this];for(var h=[],m=0,k=!1;;){var g=a.mouth.eat();if(g)if(g.cat==d.cats.open){a.mouth.revert();break}else if(g.cat==d.cats.param){var p=a.mouth.eat("pre space");if(p)if(p.cat==d.cats.open)k=!0,a.mouth.revert(),h.push({type:"character",cat:d.cats.open,"char":p["char"],code:p.code});else if(48<p.code&&58>p.code&&p.cat==d.cats.all&&+p["char"]==m+1)h.push(g),m++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}else h.push(g);
else return this.invalid=!0,a.mouth.loadState(b),[this]}m=0;p=[];for(var u=!1,O=!1;;)if(g=a.mouth.eat())if("character"!=g.type||g.cat!=d.cats.param||O)if("character"==g.type&&g.cat==d.cats.open)m++,p.push(g),u=!1;else if("character"==g.type&&g.cat==d.cats.close){m--;if(0==m)break;p.push(g);u=!1}else if(u)p.push(g),u=!1;else if("command"==g.type||"character"==g.type&&g.cat==d.cats.active)if(g.name in a.scopes.last.registers.named)p.push(g);else{var n="command"==g.type?a.scopes.last.defs.primitive[g.name]||
a.scopes.last.defs.macros[g.name]:a.scopes.last.defs.active[g["char"]];if(!n)return this.invalid=!0,a.mouth.loadState(b),[this];if(n===d.defs.primitive.the||n.proxy&&n.original===d.defs.primitive.the||n===d.defs.primitive.expandafter||n.proxy&&n.original===d.defs.primitive.expandafter||n===d.defs.primitive.number||n.proxy&&n.original===d.defs.primitive.number||n===d.defs.primitive.romannumeral||n.proxy&&n.original===d.defs.primitive.romannumeral||n===d.defs.primitive.csname||n.proxy&&n.original===
d.defs.primitive.csname||n===d.defs.primitive.string||n.proxy&&n.original===d.defs.primitive.string||n===d.defs.primitive["if"]||n.isLet&&n.original===d.defs.primitive["if"]||n===d.defs.primitive.ifcase||n.isLet&&n.original===d.defs.primitive.ifcase||n===d.defs.primitive.ifcat||n.isLet&&n.original===d.defs.primitive.ifcat||n===d.defs.primitive.ifdim||n.isLet&&n.original===d.defs.primitive.ifdim||n===d.defs.primitive.ifeof||n.isLet&&n.original===d.defs.primitive.ifeof||n===d.defs.primitive.iffalse||
n.isLet&&n.original===d.defs.primitive.iffalse||n===d.defs.primitive.ifodd||n.isLet&&n.original===d.defs.primitive.ifodd||n===d.defs.primitive.ifnum||n.isLet&&n.original===d.defs.primitive.ifnum||n===d.defs.primitive.ifhmode||n.isLet&&n.original===d.defs.primitive.ifhmode||n===d.defs.primitive.ifinner||n.isLet&&n.original===d.defs.primitive.ifinner||n===d.defs.primitive.ifmmode||n.isLet&&n.original===d.defs.primitive.ifmmode||n===d.defs.primitive.iftrue||n.isLet&&n.original===d.defs.primitive.iftrue||
n===d.defs.primitive.ifvmode||n.isLet&&n.original===d.defs.primitive.ifvmode||n===d.defs.primitive.ifvoid||n.isLet&&n.original===d.defs.primitive.ifvoid||n===d.defs.primitive.ifx||n.isLet&&n.original===d.defs.primitive.ifx){n=a.mouth.expand(g,a.mouth);if(1==n.length&&n[0]===g&&g.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,n)}else n===d.defs.primitive.noexpand||n.proxy&&n.original===d.defs.primitive.noexpand?u=!0:n instanceof r||n.proxy&&n.original instanceof
r?p.push(g):a.mouth.queue.unshift.apply(a.mouth.queue,a.mouth.expand(g,a.mouth))}else p.push(g);else{if((n=a.mouth.eat("pre space"))&&(n.cat==d.cats.param||n.cat==d.cats.all&&n["char"]<=h.length&&1<=n["char"]))a.mouth.revert(),n.cat==d.cats.param&&(O=!0);else return this.invalid=!0,a.mouth.loadState(b),[this];p.push(g);u=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];p.shift();k&&p.push(h[h.length-1]);n=new qa(p,h);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value)if("macro"==f)for(d.defs.macros[c]=n,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.macros[c]=n,delete a.scopes[b].registers.named[c];else for(d.defs.active[c]=n,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.ative[c]=n,delete a.scopes[b].registers.named[c];else a.scopes.last.defs["macro"==f?"macros":"active"][c]=n,delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),"else":new r("else",
function(a){this.invalid=!0;return[this]}),endcsname:new r("endcsname",function(a){this.invalid=!0;return[this]}),endgroup:new r("endgroup",function(a){if(!a.openGroups.length||a.scopes.last.delimited||a.scopes.last.isHalign||a.scopes.last.isHalignCell||!a.scopes.last.semisimple||"scope"!=a.contexts.last)return this.invalid=!0,[this];a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.openGroups.pop();a.contexts.pop();var b=a.scopes.last.tokens;a.scopes.last.isFrac?(a.scopes[a.scopes.length-2].tokens.push({type:"atom",
atomType:0,nucleus:[{type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:b,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new u(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),a.scopes.last.tokens.push({type:"atom",atomType:0,nucleus:b,superscript:null,subscript:null}))}),Error:new r("Error",
function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"character"==c.type&&c.cat==d.cats.open){for(var f=0,h=[];;)if(c=a.mouth.eat("pre space"))if("character"==c.type&&c.cat==d.cats.open)f++,h.push(c["char"]);else if("character"==c.type&&c.cat==d.cats.close){if(!f)break;f--;h.push(c["char"])}else"command"==c.type?(h.push(c.escapeChar),h.push.apply(h,c.name.split(""))):h.push(c["char"]);else return this.invalid=!0,a.mouth.loadState(b),[this];return h.map(function(a){return{type:"character",
"char":a,code:a.charCodeAt(0),cat:12,invalid:!0,recognized:!0}})}this.invalid=!0;return[this]}),expandafter:new r("expandafter",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];var d=a.mouth.eat(),h=a.mouth.expand(d,a.mouth);return 1==h.length&&h[0]===d&&d.invalid?(this.invalid=!0,a.mouth.loadState(b),[this]):[c].concat(h)}),ExpandedError:new r("ExpandedError",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
var c=a.mouth.eat();if(c&&"character"==c.type&&c.cat==d.cats.open){for(var f=0,h=[],m=!1;;)if(c=a.mouth.eat("pre space")){if("character"==c.type&&c.cat==d.cats.open)f++,h.push(c["char"]);else if("character"==c.type&&c.cat==d.cats.close){if(!f)break;f--;h.push(c["char"])}else if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){var k="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:a.scopes.last.defs.active[c["char"]];if(!k)return this.invalid=!0,
a.mouth.loadState(b),[this];k.proxy&&(k=k.original);if(k===d.defs.primitive.noexpand){m=!0;continue}else if(!m&&(k===d.defs.primitive.the||k===d.defs.primitive.expandafter||k===d.defs.primitive.number||k===d.defs.primitive.romannumeral||k===d.defs.primitive.csname||k===d.defs.primitive.string||k===d.defs.primitive["if"]||k===d.defs.primitive.ifcase||k===d.defs.primitive.ifcat||k===d.defs.primitive.ifdim||k===d.defs.primitive.ifeof||k===d.defs.primitive.iffalse||k===d.defs.primitive.ifodd||k===d.defs.primitive.ifnum||
k===d.defs.primitive.ifhmode||k===d.defs.primitive.ifinner||k===d.defs.primitive.ifmmode||k===d.defs.primitive.iftrue||k===d.defs.primitive.ifvmode||k===d.defs.primitive.ifvoid||k===d.defs.primitive.ifx)){m=a.mouth.expand(c,a.mouth);if(1==m.length&&m[0]===c&&m[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m);m=!1;continue}else if(k instanceof r){h.push(String.fromCharCode(a.scopes.last.registers.named.escapechar.value));h.push.apply(h,k.name.split(""));
m=!1;continue}if(m)h.push(String.fromCharCode(a.scopes.last.registers.named.escapechar.value)),h.push.apply(h,c.name.split(""));else{m=a.mouth.expand(c,a.mouth);if(1==m.length&&m[0]===c&&m[0].invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m)}}else h.push(c["char"]);m=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];return h.map(function(a){return{type:"character","char":a,code:a.charCodeAt(0),cat:12,invalid:!0,recognized:!0}})}this.invalid=
!0;return[this]}),fi:new r("fi",function(a){this.invalid=!0;return[this]}),futurelet:new r("futurelet",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",
c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];var h=a.mouth.eat();h&&"character"==h.type&&"="==h["char"]&&h.cat==d.cats.all||h&&a.mouth.revert();h=a.mouth.eat();if(!h)return this.invalid=!0,a.mouth.loadState(b),[this];var m=a.mouth.eat();if(m)if("command"==m.type||"character"==m.type&&m.cat==d.cats.active)if(b="command"==m.type?a.scopes.last.defs.primitive[m.name]||a.scopes.last.defs.macros[m.name]:a.scopes.last.defs.active[m.name])b=
new qa(b,"primitive"==b.type||b.isLet);else{if("command"==m.type&&"macro"==f){var k=a.scopes.last.registers.named[m.name];if(k){if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value){d.registers.named[c]=k;delete d.defs.macros[c];var g=0;for(f=a.scopes.length;g<f;g++)a.scopes[g].registers.named[c]=k,delete a.scopes[g].defs.macros[c]}else a.scopes.last.registers.named[c]=k,delete a.scopes.last.defs.macros[c];a.toggles.global=!1;return[]}}}else b=
new qa(new qa([m]),!0);else return this.invalid=!0,a.mouth.loadState(b),[this];if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==f)for(b?d.defs.macros[c]=b:delete d.defs.macros[c],delete d.registers.named[c],g=0,f=a.scopes.length;g<f;g++)b?a.scopes[g].defs.macros[c]=b:delete a.scopes[g].defs.macros[c],delete a.scopes[g].registers.named[c];else for(b?d.defs.active[c]=b:delete a.scopes[g].defs.macros[c],delete d.registers.named[c],
g=0,f=a.scopes.length;g<f;g++)b?a.scopes[g].defs.ative[c]=b:delete a.scopes[g].defs.macros[c],delete a.scopes[g].registers.named[c];else b?a.scopes.last.defs["macro"==f?"macros":"active"][c]=b:delete a.scopes.last.defs["macro"==f?"macros":"active"][c],delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[h,m]}),gdef:new r("gdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];for(var h=[],m=0,k=!1;;){var g=a.mouth.eat();if(g)if(g.cat==d.cats.open){a.mouth.revert();break}else if(g.cat==d.cats.param){var p=a.mouth.eat("pre space");
if(p)if(p.cat==d.cats.open)k=!0,a.mouth.revert(),h.push({type:"character",cat:d.cats.open,"char":p["char"],code:p.code});else if(48<p.code&&58>p.code&&p.cat==d.cats.all&&+p["char"]==m+1)h.push(g),m++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}else h.push(g);else return this.invalid=!0,a.mouth.loadState(b),[this]}m=0;p=[];for(var r=!1;;){g=a.mouth.eat();if(!g)return this.invalid=!0,a.mouth.loadState(b),[this];if("character"==g.type&&
g.cat==d.cats.param&&!r){var u=a.mouth.eat("pre space");if(u&&(u.cat==d.cats.param||u.cat==d.cats.all&&u["char"]<=h.length&&1<=u["char"]))a.mouth.revert(),u.cat==d.cats.param&&(r=!0);else return this.invalid=!0,a.mouth.loadState(b),[this]}else if("character"==g.type&&g.cat==d.cats.open)m++;else if("character"==g.type&&g.cat==d.cats.close&&(m--,0==m))break;p.push(g)}p.shift();k&&p.push(h[h.length-1]);b=new qa(p,h);if(0>a.scopes.last.registers.named.globaldefs.value)a.scopes.last.defs["macro"==f?"macros":
"active"][c]=b,delete a.scopes.last.registers.named[c];else if("macro"==f)for(d.defs.macros[c]=b,delete d.registers.named[c],f=0,h=a.scopes.length;f<h;f++)a.scopes[f].defs.macros[c]=b,delete a.scopes[f].registers.named[c];else for(d.defs.active[c]=b,delete d.registers.named[c],f=0,h=a.scopes.length;f<h;f++)a.scopes[f].defs.ative[c]=b,delete a.scopes[f].registers.named[c];a.toggles.global=!1;return[]}),global:new r("global",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.toggles.global=this;this.ignore=!0;return[this]}),halign:new r("halign",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c||c.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];for(var f=[[[]]],h=-1,m=[new T(a.scopes.last.registers.named.tabskip)],k=!1;;){c=a.mouth.eat("pre space");if(!c)return this.invalid=!0,a.mouth.loadState(b),[this];if("command"==c.type||"character"==c.type&&c.car==d.cats.active){var g="command"==c.type?
a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]||a.scopes.last.registers.named[c.name]:a.scopes.last.defs.active[c["char"]];if(!g){(f[f.length-1][1]||f[f.length-1][0]).push(c);continue}else if(g===d.defs.primitive.cr||g.isLet&&g.original===d.defs.primitive.cr)if(f[f.length-1][1]){m.push(new T(a.scopes.last.registers.named.tabskip));g=k||m[0];c=a.scopes.last.registers.named.tabskip;c.start.sp.value=g.start.sp.value;c.start.em.value=g.start.em.value;c.stretch="infinite dimension"==
g.stretch.type?new A(g.stretch.number.value,g.stretch.magnitude.value):new u(g.stretch.sp.value,g.stretch.em.value);c.shrink="infinite dimension"==g.shrink.type?new A(g.shrink.number.value,g.shrink.magnitude.value):new u(g.shrink.sp.value,g.shrink.em.value);break}else return this.invalid=!0,a.mouth.loadState(b),[this];else if(g===a.scopes.last.registers.named.tabskip){$jscomp.initSymbol();var p=Symbol();a.mouth.saveState(p);(g=a.mouth.eat())&&"character"==g.type&&"="==g["char"]&&g.cat==d.cats.all||
g&&a.mouth.revert();g=a.mouth.eat("glue");if(!g){a.mouth.loadState(p);(f[f.length-1][1]||f[f.length-1][0]).push(c);continue}c=a.scopes.last.registers.named.tabskip;c.start.sp.value=g.start.sp.value;c.start.em.value=g.start.em.value;c.stretch="infinite dimension"==g.stretch.type?new A(g.stretch.number.value,g.stretch.magnitude.value):new u(g.stretch.sp.value,g.stretch.em.value);c.shrink="infinite dimension"==g.shrink.type?new A(g.shrink.number.value,g.shrink.magnitude.value):new u(g.shrink.sp.value,
g.shrink.em.value);if(0<a.scopes.last.registers.named.globaldefs.value)for(k=new T(c);c.parent;)c=c.parent,c.start.sp.value=g.start.sp.value,c.start.em.value=g.start.em.value,c.stretch="infinite dimension"==g.stretch.type?new A(g.stretch.number.value,g.stretch.magnitude.value):new u(g.stretch.sp.value,g.stretch.em.value),"infinite dimension"==g.shrink.type?m.shrink=new A(g.shrink.number.value,g.shrink.magnitude.value):c.shrink=new u(g.shrink.sp.value,g.shrink.em.value);continue}else if(g===d.defs.primitive.span||
g.isLet&&g.original===d.defs.primitive.span){c=a.mouth.eat();if(!c)return this.invalid=!0,a.mouth.loadState(b),[this];g=a.mouth.expand(c,a.mouth);if(1==g.length&&g[0]===c&&c.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,g);continue}else if(g.isLet&&g.original.replacement[0]&&g.original.replacement[0].cat==d.cats.param){if(f[f.length-1][1])return this.invalid=!0,a.mouth.loadState(b),[this];f[f.length-1][1]=[];continue}else if(g.isLet&&g.original.replacement[0]&&
g.original.replacement[0].cat==d.cats.alignment){if(~h||f[f.length-1][0].length||f[f.length-1][1])if(f[f.length-1][1])f.push([[]]),m.push(new T(a.scopes.last.registers.named.tabskip));else return this.invalid=!0,a.mouth.loadState(b),[this];else h=f.length-1;continue}}else if(c.cat==d.cats.param){if(f[f.length-1][1])return this.invalid=!0,a.mouth.loadState(b),[this];f[f.length-1][1]=[];continue}else if(c.cat==d.cats.alignment){if(~h||f[f.length-1][0].length||f[f.length-1][1])if(f[f.length-1][1])f.push([[]]),
m.push(new T(a.scopes.last.registers.named.tabskip));else return this.invalid=!0,a.mouth.loadState(b),[this];else h=f.length-1;continue}else if(c.cat==d.cats.whitespace&&!f[f.length-1][0].length&&!f[f.length-1][1])continue;(f[f.length-1][1]||f[f.length-1][0]).push(c)}b={type:"atom",atomType:0,nucleus:("command"==this.type?this.escapeChar+this.name:this["char"]).split("").map(function(a){return{type:"atom",atomType:0,nucleus:{type:"symbol","char":a,code:a.charCodeAt(0)},superscript:null,subscript:null}}),
superscript:null,subscript:null,ignore:!0};a.openGroups.push(b);a.contexts.push("scope");new a.Scope;a.scopes.last.tokens.push(b);a.scopes.last.isHalign=!0;a.scopes.last.cellData=[];a.scopes.last.preamble=f;a.scopes.last.repeatPreambleAt=h;a.scopes.last.tabSkips=m;a.scopes.last.noAligns=[];a.mouth.revert();return[]}),hbox:new r("hbox",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c,
f;;){var h=a.mouth.eat();if(!h)return this.invalid=!0,[this];if("command"==h.type||"character"==h.type&&h.cat==d.cats.active){var m="command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h["char"]];if(m&&(m===d.defs.primitive.relax||m.proxy&&m.original===d.defs.primitive.relax))break;h=a.mouth.expand(h,a.mouth);a.mouth.queue.unshift.apply(a.mouth.queue,h)}else if("character"!=h.type||"t"!=h["char"]&&"T"!=h["char"])if("character"!=h.type||
"s"!=h["char"]&&"S"!=h["char"])if("character"==h.type&&h.cat==d.cats.open){a.mouth.revert();break}else return this.invalid=!0,a.mouth.loadState(b),[this];else{c=a.mouth.eat();h=a.mouth.eat();m=a.mouth.eat();var k=a.mouth.eat(),g=a.mouth.eat();if(!c||"character"!=c.type||"p"!=c["char"]&&"P"!=c["char"]||c.cat==d.cats.active||!h||"character"!=h.type||"r"!=h["char"]&&"R"!=h["char"]||h.cat==d.cats.active||!m||"character"!=m.type||"e"!=m["char"]&&"E"!=m["char"]||m.cat==d.cats.active||!k||"character"!=k.type||
"a"!=k["char"]&&"A"!=k["char"]||k.cat==d.cats.active||!g||"character"!=g.type||"d"!=g["char"]&&"D"!=g["char"]||g.cat==d.cats.active||!(h=a.mouth.eat("dimension")))return this.invalid=!0,a.mouth.loadState(b),[this];c=h;break}else if(f=a.mouth.eat("pre space"),f&&"character"==f.type&&("o"==f["char"]||"O"==h["char"])&&h.cat!=d.cats.active&&(h=a.mouth.eat("dimension"))){f=h;break}else return this.invalid=!0,a.mouth.loadState(b),[this]}h=a.mouth.preview();if(!h||"character"!=h.type||h.cat!=d.cats.open)return this.invalid=
!0,a.mouth.loadState(b),[this];f||c||(c=new u(0,0));a.tokens.push({type:"box wrapper",value:"horizontal",to:f,spread:c,token:this});return[]}),hfil:new r("hfil",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:new T(new u(0),new A(1,1),new u(0))});return[]}),hfill:new r("hfill",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",
glue:new T(new u(0),new A(1,2),new u(0))});return[]}),hrule:new r("hrule",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=b=!1,f=!1;;){var h=a.mouth.eat();if(!h){a.mouth.revert();break}if("h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)if("d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active)if("w"!=h["char"]&&"W"!=h["char"]||h.cat==d.cats.active)a.mouth.revert();else if(h=
a.mouth.eat("pre space"),!h||"i"!=h["char"]&&"I"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?2:1);else if(h=a.mouth.eat("pre space"),!h||"d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?3:2);else if(h=a.mouth.eat("pre space"),!h||"t"!=h["char"]&&"T"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?4:3);else if(h=a.mouth.eat("pre space"),!h||"h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?5:4);else if(h=a.mouth.eat("dimension")){f=h;continue}else a.mouth.revert(5);
else if(h=a.mouth.eat("pre space"),!h||"e"!=h["char"]&&"E"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?2:1);else if(h=a.mouth.eat("pre space"),!h||"p"!=h["char"]&&"P"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?3:2);else if(h=a.mouth.eat("pre space"),!h||"t"!=h["char"]&&"T"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?4:3);else if(h=a.mouth.eat("pre space"),!h||"h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?5:4);else if(h=a.mouth.eat("dimension")){c=h;continue}else a.mouth.revert(5);
else if(h=a.mouth.eat("pre space"),!h||"e"!=h["char"]&&"E"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?2:1);else if(h=a.mouth.eat("pre space"),!h||"i"!=h["char"]&&"I"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?3:2);else if(h=a.mouth.eat("pre space"),!h||"g"!=h["char"]&&"G"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?4:3);else if(h=a.mouth.eat("pre space"),!h||"h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?5:4);else if(h=a.mouth.eat("pre space"),!h||"t"!=h["char"]&&
"T"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?6:5);else if(h=a.mouth.eat("dimension")){b=h;continue}else a.mouth.revert(6);break}b=b||new u(0,65536/30);c=c||new u(0,0);a.tokens.push({type:"rule",ruleType:"h",height:b,depth:c,width:f});return[]}),hskip:new r("hskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"glue",glue:b});return[]}),"if":new r("if",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=[],f=!1;2>c.length;){var h=a.mouth.eat("pre space");if(h){if("character"!=h.type||h.cat!=d.cats.whitespace||0!=c.length)if("character"==h.type&&c.cat!=d.cats.active)c.push(h),f=!1;else if(f)c.push(h),f=!1;else if("command"==h.type||"character"==h.type&&h.cat==d.cats.active)if(h.name in a.scopes.last.registers.named)c.push(h);else{var m=
"command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h["char"]];if(!m)return this.invalid=!0,a.mouth.loadState(b),[this];if(m===d.defs.primitive.the||m.proxy&&m.original===d.defs.primitive.the||m===d.defs.primitive.expandafter||m.proxy&&m.original===d.defs.primitive.expandafter||m===d.defs.primitive.number||m.proxy&&m.original===d.defs.primitive.number||m===d.defs.primitive.romannumeral||m.proxy&&m.original===d.defs.primitive.romannumeral||
m===d.defs.primitive.csname||m.proxy&&m.original===d.defs.primitive.csname||m===d.defs.primitive.string||m.proxy&&m.original===d.defs.primitive.string||m===d.defs.primitive["if"]||m.isLet&&m.original===d.defs.primitive["if"]||m===d.defs.primitive.ifcase||m.isLet&&m.original===d.defs.primitive.ifcase||m===d.defs.primitive.ifcat||m.isLet&&m.original===d.defs.primitive.ifcat||m===d.defs.primitive.ifdim||m.isLet&&m.original===d.defs.primitive.ifdim||m===d.defs.primitive.ifeof||m.isLet&&m.original===d.defs.primitive.ifeof||
m===d.defs.primitive.iffalse||m.isLet&&m.original===d.defs.primitive.iffalse||m===d.defs.primitive.ifodd||m.isLet&&m.original===d.defs.primitive.ifodd||m===d.defs.primitive.ifnum||m.isLet&&m.original===d.defs.primitive.ifnum||m===d.defs.primitive.ifhmode||m.isLet&&m.original===d.defs.primitive.ifhmode||m===d.defs.primitive.ifinner||m.isLet&&m.original===d.defs.primitive.ifinner||m===d.defs.primitive.ifmmode||m.isLet&&m.original===d.defs.primitive.ifmmode||m===d.defs.primitive.iftrue||m.isLet&&m.original===
d.defs.primitive.iftrue||m===d.defs.primitive.ifvmode||m.isLet&&m.original===d.defs.primitive.ifvmode||m===d.defs.primitive.ifvoid||m.isLet&&m.original===d.defs.primitive.ifvoid||m===d.defs.primitive.ifx||m.isLet&&m.original===d.defs.primitive.ifx){m=a.mouth.expand(h,a.mouth);if(1==m.length&&m[0]===h&&h.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m)}else if(m===d.defs.primitive.noexpand||m.proxy&&m.original===d.defs.primitive.noexpand)f=!0;
else if(m instanceof r||m.proxy&&m.original instanceof r)c.push(h);else{m=a.mouth.expand(h,a.mouth);if(1==m.length&&m[0]==-h&&h.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m)}}else c.push(h)}else return this.invalid=!0,a.mouth.loadState(b),[this]}return Y.call(this,"command"==c[0].type&&"command"==c[1].type||"character"==c[0].type&&c[0]["char"]==c[1]["char"],a.mouth,a.scopes,b)}),ifcase:new r("ifcase",function(a){function b(c){for(;;){var f=
a.mouth.eat();if(!f)break;else if("command"==f.type||"character"==f.type&&f.cat===d.cats.active)if(f="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]])if(f===d.defs.primitive["if"]||f.isLet&&f.original===d.defs.primitive["if"]||f===d.defs.primitive.ifcase||f.isLet&&f.original===d.defs.primitive.ifcase||f===d.defs.primitive.ifcat||f.isLet&&f.original===d.defs.primitive.ifcat||f===d.defs.primitive.ifdim||f.isLet&&f.original===
d.defs.primitive.ifdim||f===d.defs.primitive.ifeof||f.isLet&&f.original===d.defs.primitive.ifeof||f===d.defs.primitive.iffalse||f.isLet&&f.original===d.defs.primitive.iffalse||f===d.defs.primitive.ifodd||f.isLet&&f.original===d.defs.primitive.ifodd||f===d.defs.primitive.ifnum||f.isLet&&f.original===d.defs.primitive.ifnum||f===d.defs.primitive.ifhmode||f.isLet&&f.original===d.defs.primitive.ifhmode||f===d.defs.primitive.ifinner||f.isLet&&f.original===d.defs.primitive.ifinner||f===d.defs.primitive.ifmmode||
f.isLet&&f.original===d.defs.primitive.ifmmode||f===d.defs.primitive.iftrue||f.isLet&&f.original===d.defs.primitive.iftrue||f===d.defs.primitive.ifvmode||f.isLet&&f.original===d.defs.primitive.ifvmode||f===d.defs.primitive.ifvoid||f.isLet&&f.original===d.defs.primitive.ifvoid||f===d.defs.primitive.ifx||f.isLet&&f.original===d.defs.primitive.ifx)b("fi"),a.mouth.eat();else{if("or"==c&&(f===d.defs.primitive.or||f.isLet&&f.original===d.defs.primitive.or))break;if(("or"==c||"else"==c)&&(f===d.defs.primitive["else"]||
f.isLet&&f.original===d.defs.primitive["else"])){h=!0;break}if(f===d.defs.primitive.fi||f.isLet&&f.original===d.defs.primitive.fi){a.mouth.revert();break}}}}if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var c=Symbol();a.mouth.saveState(c);var f=a.mouth.eat("integer");if(!f)return this.invalid=!0,[this];c=[];var h=!1;f=f.value;if(0>f)b("else");else for(;0<f&&!h;f--)b("or");for(;;)if(f=a.mouth.eat())if("command"==f.type||"character"==
f.type&&f.cat==d.cats.active){var m="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:a.scopes.last.defs.active[f["char"]];if(m&&(m===d.defs.primitive.fi||m.isLet&&m.original===d.defs.primitive.fi))return c;!h&&m&&(m===d.defs.primitive.or||m.isLet&&m.original===d.defs.primitive.or||m===d.defs.primitive["else"]||m.isLet&&m.original===d.defs.primitive["else"])?b("fi"):(f=a.mouth.expand(f,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,f))}else c.push(f);else return this.invalid=
!0,a.mouth.loadState(stateSymbol),[this]}),ifcat:new r("ifcat",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=[],f=!1;2>c.length;){var h=a.mouth.eat("pre space");if(h){if("character"!=h.type||h.cat!=d.cats.whitespace||0!=c.length)if("character"==h.type&&c.cat!=d.cats.active)c.push(h),f=!1;else if(f)c.push(h),f=!1;else if("command"==h.type||"character"==h.type&&h.cat==d.cats.active)if(h.name in
a.scopes.last.registers.named)c.push(h);else{var m="command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h["char"]];if(!m)return this.invalid=!0,a.mouth.loadState(b),[this];if(m===d.defs.primitive.the||m.proxy&&m.original===d.defs.primitive.the||m===d.defs.primitive.expandafter||m.proxy&&m.original===d.defs.primitive.expandafter||m===d.defs.primitive.number||m.proxy&&m.original===d.defs.primitive.number||m===d.defs.primitive.romannumeral||
m.proxy&&m.original===d.defs.primitive.romannumeral||m===d.defs.primitive.csname||m.proxy&&m.original===d.defs.primitive.csname||m===d.defs.primitive.string||m.proxy&&m.original===d.defs.primitive.string||m===d.defs.primitive["if"]||m.isLet&&m.original===d.defs.primitive["if"]||m===d.defs.primitive.ifcase||m.isLet&&m.original===d.defs.primitive.ifcase||m===d.defs.primitive.ifcat||m.isLet&&m.original===d.defs.primitive.ifcat||m===d.defs.primitive.ifdim||m.isLet&&m.original===d.defs.primitive.ifdim||
m===d.defs.primitive.ifeof||m.isLet&&m.original===d.defs.primitive.ifeof||m===d.defs.primitive.iffalse||m.isLet&&m.original===d.defs.primitive.iffalse||m===d.defs.primitive.ifodd||m.isLet&&m.original===d.defs.primitive.ifodd||m===d.defs.primitive.ifnum||m.isLet&&m.original===d.defs.primitive.ifnum||m===d.defs.primitive.ifhmode||m.isLet&&m.original===d.defs.primitive.ifhmode||m===d.defs.primitive.ifinner||m.isLet&&m.original===d.defs.primitive.ifinner||m===d.defs.primitive.ifmmode||m.isLet&&m.original===
d.defs.primitive.ifmmode||m===d.defs.primitive.iftrue||m.isLet&&m.original===d.defs.primitive.iftrue||m===d.defs.primitive.ifvmode||m.isLet&&m.original===d.defs.primitive.ifvmode||m===d.defs.primitive.ifvoid||m.isLet&&m.original===d.defs.primitive.ifvoid||m===d.defs.primitive.ifx||m.isLet&&m.original===d.defs.primitive.ifx){m=a.mouth.expand(h,a.mouth);if(1==m.length&&m[0]===h&&h.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m)}else if(m===d.defs.primitive.noexpand||
m.proxy&&m.original===d.defs.primitive.noexpand)f=!0;else if(m instanceof r||m.proxy&&m.original instanceof r)c.push(h);else{m=a.mouth.expand(h,a.mouth);if(1==m.length&&m[0]==-h&&h.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,m)}}else c.push(h)}else return this.invalid=!0,a.mouth.loadState(b),[this]}return Y.call(this,"command"==c[0].type&&"command"==c[1].type||"character"==c[0].type&&c[0].cat==c[1].cat,a.mouth,a.scopes,b)}),ifdim:new r("ifdim",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("dimension");if(!c)return this.invalid=!0,[this];c=c.sp.value+12*c.em.value;var f=a.mouth.eat();if(!f||f.cat==d.cats.active&&("<"==f["char"]||"="==f["char"]||">"==f["char"]))return this.invalid=!0,a.mouth.loadState(b),[this];var h=a.mouth.eat("dimension");if(!h)return this.invalid=!0,a.mouth.loadState(b),[this];h=h.sp.value+
12*h.em.value;return Y.call(this,"<"==f["char"]?c<h:"="==f["char"]?c==h:c>h,a.mouth,a.scopes,b)}),ifeof:new r("ifeof",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return Y.call(this,!0,a.mouth,a.scopes,b)}),iffalse:new r("iffalse",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
return Y.call(this,!1,a.mouth,a.scopes,b)}),ifodd:new r("ifodd",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("integer");return c?Y.call(this,1==c.value%2,a.mouth,a.scopes,b):(this.invalid=!0,[this])}),ifnum:new r("ifnum",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);
var c=a.mouth.eat("integer");if(!c)return this.invalid=!0,[this];var f=a.mouth.eat();if(!f||f.cat==d.cats.active&&("<"==f["char"]||"="==f["char"]||">"==f["char"]))return this.invalid=!0,a.mouth.loadState(b),[this];var h=a.mouth.eat("integer");return h?Y.call(this,"<"==f["char"]?c.value<h.value:"="==f["char"]?c.value==h.value:c.value>h.value,a.mouth,a.scopes,b):(this.invalid=!0,a.mouth.loadState(b),[this])}),ifhmode:new r("ifhmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return Y.call(this,!1,a.mouth,a.scopes,b)}),ifinner:new r("ifinner",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return Y.call(this,"inline"==a.style,a.mouth,a.scopes,b)}),ifmmode:new r("ifmmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();
var b=Symbol();a.mouth.saveState(b);return Y.call(this,!0,a.mouth,a.scopes,b)}),iftrue:new r("iftrue",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return Y.call(this,!0,a.mouth,a.scopes,b)}),ifvmode:new r("ifvmode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return Y.call(this,
!1,a.mouth,a.scopes,b)}),ifvoid:new r("ifvoid",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);return Y.call(this,!0,a.mouth,a.scopes,b)}),ifx:new r("ifx",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];var f=a.mouth.eat("pre space");
if(!f)return this.invalid=!0,a.mouth.loadState(b),[this];(c="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:"character"==c.type&&c.cat==d.cats.active?a.scopes.last.defs.active[c["char"]]:c)&&c.proxy&&(c=c.original);(f="command"==f.type?a.scopes.last.defs.primitive[f.name]||a.scopes.last.defs.macros[f.name]:"character"==f.type&&f.cat==d.cats.active?a.scopes.last.defs.active[f["char"]]:f)&&f.proxy&&(f=f.original);if(!c&&!f)return Y.call(this,!0,a.mouth,a.scopes,
b);if(!c||!f||c.type!=f.type)return Y.call(this,!1,a.mouth,a.scopes,b);if("character"==c.type)return Y.call(this,c["char"]==f["char"]&&c.cat==f.cat,a.mouth,a.scopes,b);if("primitive"==c.type)return Y.call(this,c===f,a.mouth,a.scopes,b);if(c.parameters.length!=f.parameters.length||c.replacement.length!=f.replacement.length)return Y.call(this,!1,a.mouth,a.scopes,b);for(var h=0,m=c.parameters.length;h<m;h++)if("character"!=c.parameters[h].type||c.parameters[h]["char"]!=f.parameters[h]["char"]||c.parameters[h].cat!=
f.parameters[h].cat)if("command"!=c.parameters[h].type||c.parameters[h].name!=f.parameters[h].name)return Y.call(this,!1,a.mouth,a.scopes,b);h=0;for(m=c.replacement.length;h<m;h++)if("character"!=c.replacement[h].type||c.replacement[h]["char"]!=f.replacement[h]["char"]||c.replacement[h].cat!=f.replacement[h].cat)if("command"!=c.replacement[h].type||c.replacement[h].name!=f.replacement[h].name)return Y.call(this,!1,a.mouth,a.scopes,b);return Y.call(this,!0,a.mouth,a.scopes,b)}),it:new r("it",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"it"});return[]}),kern:new r("kern",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:b});return[]}),lccode:new r("lccode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];
var b=a.mouth.eat("integer");if(b||0>b.value)return[a.scopes.last.lc[b.value]=a.scopes.last.lc[b.value]||new k(0)];this.invalid=!0;return[this]}),left:new r("left",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&
"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter)){new a.Scope;a.scopes.last.delimited=!0;a.scopes.last.leftDelimiter=c["char"];a.scopes.last.nullDelimiterSpace=new u(a.scopes.last.registers.named.nulldelimiterspace);a.openGroups.push(this);a.contexts.push("scope");a.scopes.last.tokens.push(this);a.scopes.last.tokens.push({type:"atom",atomType:0,nucleus:{type:"symbol","char":c["char"],code:c.code},subscript:null,superscript:null});this.ignore=!0;break}else return this.invalid=
!0,a.mouth.loadState(b),[this]}}),let:new r("let",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=
!0,a.mouth.loadState(b),[this];var h=a.mouth.eat();h&&"character"==h.type&&"="==h["char"]&&h.cat==d.cats.all||h&&a.mouth.revert();if(h=a.mouth.eat())if("command"==h.type||"character"==h.type&&h.cat==d.cats.active)if(b="command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h.name])b=new qa(b,"primitive"==b.type||b.isLet);else{if("command"==h.type&&"macro"==f&&(h=a.scopes.last.registers.named[h.name])){if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value){d.registers.named[c]=h;delete d.defs.macros[c];f=0;for(var m=a.scopes.length;f<m;f++)a.scopes[f].registers.named[c]=h,delete a.scopes[f].defs.macros[c]}else a.scopes.last.registers.named[c]=h,delete a.scopes.last.defs.macros[c];a.toggles.global=!1;return[]}}else b=new qa(new qa([h]),!0);else return this.invalid=!0,a.mouth.loadState(b),[this];if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)if("macro"==
f)for(b?d.defs.macros[c]=b:delete d.defs.macros[c],delete d.registers.named[c],f=0,m=a.scopes.length;f<m;f++)b?a.scopes[f].defs.macros[c]=b:delete a.scopes[f].defs.macros[c],delete a.scopes[f].registers.named[c];else for(b?d.defs.active[c]=b:delete d.defs.active[c],delete d.registers.named[c],f=0,m=a.scopes.length;f<m;f++)b?a.scopes[f].defs.active[c]=b:delete a.scopes[f].defs.active[c],delete a.scopes[f].registers[c];else b?a.scopes.last.defs["macro"==f?"macros":"active"][c]=b:delete a.scopes.last.defs["macro"==
f?"macros":"active"][c],delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),limits:new r("limits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:!0,token:this});return[]}),lower:new r("lower",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");if(!b)return this.invalid=!0,[this];b.sp.value*=-1;
b.em.value*=-1;a.tokens.push({type:"vkern",dimen:b});return[]}),lowercase:new r("lowercase",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat("pre space");if(!c||c.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];c=[];for(var f=1;;){var h=a.mouth.eat("pre space");if(h)if("character"==h.type&&h.cat==d.cats.open)f++,c.push(h);else if("character"==h.type&&
h.cat==d.cats.close)if(f--,0<f)c.push(h);else break;else c.push(h);else return this.invalid=!0,a.mouth.loadState(b),[this]}b=0;for(f=c.length;b<f;b++)"character"==c[b].type&&a.scopes.last.lc[c[b].code]&&0<a.scopes.last.lc[c[b].code].value&&(c[b].code=a.scopes.last.lc[c[b].code].value,c[b]["char"]=String.fromCharCode(c[b].code));return c}),mathbin:new r("mathbin",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",
value:2,token:this});return[]}),mathchar:new r("mathchar",function(a){var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(65536>b.value)var c=0;else if(524288>b.value){var f=b.value%65536;c=(b.value-f)/65536;b.value=f}else c=0;a.mouth.queue.unshift({type:"character",cat:d.cats.all,"char":String.fromCharCode(b.value),code:b.value,forcedMathCode:c});return[]}),mathchardef:new r("mathchardef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];if(65536>f.value)b=0;else if(524288>f.value){var h=f.value%65536;b=(f.value-h)/65536;f.value=h}else b=
0;f=new qa([{type:"character",cat:d.cats.all,"char":String.fromCharCode(f.value),code:f.value,forcedMathCode:b}],[]);if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.defs.macros[c.name]=f,delete d.registers.named[c.name],b=0,h=a.scopes.length;b<h;b++)a.scopes[b].defs.macros[c.name]=f,delete a.scopes[b].registers.named[c.name];else a.scopes.last.defs.macros[c.name]=f,delete a.scopes.last.registers.named[c.name];a.toggles.global=
!1}else return this.invalid=!0,a.mouth.loadState(b),[!0]}),mathchoice:new r("mathchoice",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b={type:"command",nameType:"command",escapeChar:this.escapeChar,name:"mathchoice",recognized:!0};a.contexts.push({toString:function(){return"mathchoice"},token:b,current:0,failed:function(){this.token.invalid=!0;a.contexts.pop()},succeeded:function(){a.contexts.pop();this.token.type="mathchoice";this.token.groups=
a.scopes.last.tokens.splice(a.scopes.last.tokens.length-4,4);this.token.ignore=!1}});a.tokens.push(b);b.ignore=!0}),mathclose:new r("mathclose",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:5,token:this});return[]}),mathcode:new r("mathcode",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");if(b){if(0>b.value)return a.mouth.revert(),
this.invalid=!0,[this];if(!(b.value in d.mathcodes)){d.mathcodes[b.value]=new k(d.mathcodes.ord,0,8);for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].mathcodes[b.value]=new k((0==c?d:a.scopes[c-1]).mathcodes[b.value])}return[a.scopes.last.mathcodes[b.value]]}this.invalid=!0;return[this]}),mathinner:new r("mathinner",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"inner",token:this});return[]}),
mathop:new r("mathop",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:1,token:this});return[]}),mathopen:new r("mathopen",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:4,token:this});return[]}),mathord:new r("mathord",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"family modifier",value:0,token:this});return[]}),mathpunct:new r("mathpunct",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:6,token:this});return[]}),mathrel:new r("mathrel",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:3,token:this});return[]}),message:new r("message",
function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(c&&"character"==c.type&&c.cat==d.cats.open){for(var f=0,h=[];;)if(c=a.mouth.eat("pre space"))if("character"==c.type&&c.cat==d.cats.open)f++,h.push(c["char"]);else if("character"==c.type&&c.cat==d.cats.close){if(!f)break;f--;h.push(c["char"])}else"command"==c.type?(h.push(c.escapeChar),h.push.apply(h,c.name.split(""))):h.push(c["char"]);else return this.invalid=!0,a.mouth.loadState(b),[this];E(h.join(""))}else return this.invalid=
!0,[this]}),mkern:new r("mkern",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("mu dimension");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"kern",dimen:b});return[]}),month:new r("month",function(a){return[new k((new Date).getMonth()+1)]}),mskip:new r("mskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("mu glue");if(!b)return this.invalid=
!0,[this];a.tokens.push({type:"glue",glue:b});return[]}),multiply:new r("multiply",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register)if(c&&c.register){var f=a.mouth.eat();if(!f||"character"!=f.type||
"b"!=f["char"]&&"B"!=f["char"]||f.cat==d.cats.active)if(f)a.mouth.revert();else return this.invalid=!0,a.mouth.loadState(b),[this];else f=a.mouth.eat(),(!f||"character"!=f.type||"y"!=f["char"]&&"Y"!=f["char"]||f.cat==d.cats.active)&&a.mouth.revert(2);if(f=a.mouth.eat("integer"))if("integer"==c.type){c.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.value=b.value;a.toggles.global=
!1}else if("dimension"==c.type){c.sp.value*=f.value;c.em.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.sp.value=b.sp.value,c.em.value=b.em.value;a.toggles.global=!1}else if("mu dimension"==c.type){c.mu.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.mu.value=
b.mu.value;a.toggles.global=!1}else if("glue"==c.type){c.start.sp.value*=f.value;c.start.em.value*=f.value;"infinite dimension"==c.stretch.type?c.stretch.number.value*=f.value:(c.stretch.sp.value*=f.value,c.stretch.em.value*=f.value);"infinite dimension"==c.shrink.type?c.shrink.number.value*=f.value:(c.shrink.sp.value*=f.value,c.shrink.em.value*=f.value);b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,
c.start.sp.value=b.start.sp.value,c.start.em.value=b.start.em.value,c.stretch="infinite dimension"==b.stretch.type?new A(b.stretch.number.value,b.stretch.magnitude.value):new u(b.stretch.sp.value,b.stretch.em.value),c.shrink="infinite dimension"==b.shrink.type?new A(b.shrink.number.value,b.shrink.magnitude.value):new u(b.shrink.sp.value,b.shrink.em.value);a.toggles.global=!1}else{if("mu glue"==c.type){c.start.mu.value*=f.value;"infinite dimension"==c.stretch.type?c.stretch.number.value*=f.value:c.stretch.mu.value*=
f.value;"infinite dimension"==c.shrink.type?c.shrink.number.value*=f.value:c.shrink.mu.value*=f.value;b=c;if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(;c.parent;)c=c.parent,c.start.mu.value=b.start.mu.value,c.stretch="infinite dimension"==b.stretch.type?new A(b.stretch.number.value,b.stretch.magnitude.value):new H(b.stretch.mu.value),c.shrink="infinite dimension"==b.shrink.type?new A(b.shrink.number.value,b.shrink.magnitude.value):
new H(b.shrink.mu.value);a.toggles.global=!1}}else return this.invalid=!0,a.mouth.loadState(b),[this];break}else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}return[]}),muskip:new r("muskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.muskip[b.value]){d.registers.muskip[b.value]=new fa(new H(0,
0),new H(0,0),new H(0,0));for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.muskip[b.value]=new fa((c?a.scopes[c-1]:d).registers.muskip[b.value])}return[a.scopes.last.registers.muskip[b.value]]}),muskipdef:new r("muskipdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=
!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];c=c.name;f=f.value;if(!d.registers.muskip[f]){d.registers.muskip[f]=new fa(new H(0),new H(0),new H(0));b=0;for(var h=a.scopes.length;b<h;b++)a.scopes[b].registers.muskip[f]=new fa((b?a.scopes[b-1]:d).registers.muskip[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||
0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.muskip[f],delete d.defs.macros[c],b=0,h=a.scopes.length;b<h;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.muskip[f],delete a.scopes[b].defs.macros[c];else a.scopes.last.registers.named[c]=a.scopes.last.registers.muskip[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(countDefSym),[!0]}),noexpand:new r("noexpand",function(a){var b=a.mouth.eat();if(!b)return this.invalid=
!0,[this];a.mouth.revert();return"command"==b.type||"character"==b.type&&b.cat==d.cats.active?(this.invalid=!0,[this]):[]}),nolimits:new r("nolimits",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"limit modifier",value:!1,token:this});return[]}),nonscript:new r("nonscript",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"glue",isNonScript:!0});
return[]}),normalfont:new r("normalfont",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"nm"});return[]}),number:new r("number",function(a){a=a.mouth.eat("integer");return a?a.value.toString().split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}}):(this.invalid=!0,[this])}),of:new r("of",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];if(a.scopes.last.root){var b=a.scopes.last.tokens.indexOf(a.scopes.last.root);a.tokens.push({type:"family modifier",value:"rad",index:a.scopes.last.tokens.splice(b,a.scopes.last.tokens.length-b+1).slice(1),token:this});a.scopes.last.root=!1;return[]}this.invalid=!0;return[this]}),omit:new r("omit",function(a){this.invalid=!0;return[this]}),or:new r("or",function(a){this.invalid=!0;return[this]}),over:new r("over",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.scopes.last.isFrac=!0;a.scopes.last.fracLeftDelim=a.scopes.last.fracRightDelim=".";a.scopes.last.barWidth="from font";a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),overline:new r("overline",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"over",token:this});return[]}),overwithdelims:new r("overwithdelims",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter))if(a.scopes.last.fracLeftDelim){a.scopes.last.fracRightDelim=c["char"];
break}else a.scopes.last.fracLeftDelim=c["char"];else return this.invalid=!0,a.mouth.loadState(b),delete a.scopes.last.fracLeftDelim,[this]}a.scopes.last.isFrac=!0;a.scopes.last.barWidth="from font";a.scopes.last.root&&(a.scopes.last.root.invalid=!0,a.scopes.last.root=!1);a.scopes.last.fracNumerator=a.scopes.last.tokens;a.scopes.last.tokens=[];return[]}),raise:new r("raise",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("dimension");
if(!b)return this.invalid=!0,[this];a.tokens.push({type:"vkern",dimen:b});return[]}),relax:new r("relax",function(a){return"superscript"==a.contexts.last||"subscript"==a.contexts.last?(this.invalid=!0,[this]):[]}),right:new r("right",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last||!a.openGroups.length||!a.scopes.last.delimited||a.scopes.last.isHalign||a.scopes.last.isHalignCell||a.scopes.last.semisimple)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();
for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&"character"==c.type&&d.delims.includes(c.code)&&(c.cat==d.cats.all||c.cat==d.cats.letter)){if("scope"!=a.contexts.last)return this.invalid=!0,a.mouth.loadState(b),[this];a.openGroups.pop();a.contexts.pop();b=a.scopes.last.tokens;a.scopes.last.root&&(a.scopes.last.root.invalid=!0);if(a.scopes.last.isFrac)a.scopes.last.fracNumerator.shift(),
a.scopes.last.fracNumerator.shift(),a.scopes[a.scopes.length-2].tokens.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",numerator:a.scopes.last.fracNumerator,denominator:b,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new u(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null,delimited:!0,nullDelimiterSpace:new u(a.scopes.last.registers.named.nulldelimiterspace),delims:[a.scopes.last.leftDelimiter,
c["char"]]}),a.scopes.pop();else{b.shift();b.shift();var f=a.scopes.last.leftDelimiter;a.scopes.pop();a.scopes.last.tokens.push({type:"atom",atomType:"inner",nucleus:b,superscript:null,subscript:null,delimited:!0,nullDelimiterSpace:new u(a.scopes.last.registers.named.nulldelimiterspace),delims:[f,c["char"]]})}break}else return this.invalid=!0,a.mouth.loadState(b),[this]}}),rm:new r("rm",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",
value:"rm"});return[]}),romannumeral:new r("romannumeral",function(a){var b=a.mouth.eat("integer");if(!b)return this.invalid=!0,[this];if(0>=b.value)return this.invalid=!0,a.mouth.revert(),[this];var c="";b=b.value;c=~~(b/1E3);b%=1E3;a=~~(b/100);b%=100;var f=~~(b/10);b%=10;c=Array(c+1).join("m");c=3>a?c+Array(a+1).join("c"):4==a?c+"cd":9>a?c+("d"+Array(a%5+1).join("c")):c+"cm";c=3>f?c+Array(f+1).join("x"):4==f?c+"xl":9>f?c+("l"+Array(f%5+1).join("x")):c+"xc";c=3>b?c+Array(b+1).join("i"):4==b?c+"iv":
9>b?c+("v"+Array(b%5+1).join("i")):c+"ix";return c.split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}})}),scriptscriptstyle:new r("scriptscriptstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"scriptscriptstyle"});return[]}),scriptstyle:new r("scriptstyle",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"font modifier",value:"scriptstyle"});return[]}),show:new r("show",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.string,c=a.mouth.eat();if(!c)return this.invalid=!0,[this];b='"'+this.escapeChar+this.name+b.substring(0,b.length-a.mouth.string.length)+'":\n';if("command"==c.type||"character"==c.type&&c.cat==d.cats.active){var f="command"==c.type?a.scopes.last.defs.primitive[c.name]||a.scopes.last.defs.macros[c.name]:
a.scopes.last.defs.active[c["char"]];if(f){if("primitive"==f.type||f.isLet&&"primitive"==f.original.type)return E(b+c.escapeChar+c.name+"="+String.fromCharCode(a.scopes.last.registers.named.escapechar.value)+(f.original||f).name),[];if(f.isLet)b+=(c.escapeChar+c.name||c["char"])+"=",c=f.original.replacement[0];else{f.proxy&&(f=f.original);b+=(c.escapeChar+c.name||c["char"])+"=macro:\n";c=a=0;for(var h=f.parameters.length;c<h;c++)b="character"==f.parameters[c].type&&f.parameters[c].cat!=d.cats.param?
b+f.parameters[c]["char"]:"character"==f.parameters[c].type?b+(f.parameters[c]["char"]+ ++a):b+(f.parameters[c].escapeChar+f.parameters[c].name);b+="->";c=0;for(h=f.replacement.length;c<h;c++)b="character"==f.replacement[c].type?b+f.replacement[c]["char"]:b+(f.replacement[c].escapeChar+f.replacement[c].name);E(b);return[]}}else return E(b+c.escapeChar+c.name+"=undefined."),[]}switch(c.cat){case d.cats.open:E(b+"begin-group character "+c["char"]+".");break;case d.cats.close:E(b+"end-group character "+
c["char"]+".");break;case d.cats.math:E(b+"math shift character "+c["char"]+".");break;case d.cats.alignment:E(b+"alignment tab character "+c["char"]+".");break;case d.cats.param:E(b+"macro parameter character "+c["char"]+".");break;case d.cats["super"]:E(b+"superscript character "+c["char"]+".");break;case d.cats.sub:E(b+"subscript character "+c["char"]+".");break;case d.cats.whitespace:E(b+"blank space "+c["char"]+".");break;case d.cats.letter:E(b+"the letter "+c["char"]+".");break;default:E(b+
"the character "+c["char"]+".")}return[]}),showthe:new r("showthe",function(a){$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else{if(c&&c.register)return"integer"==c.type?E(c.value+"."):"dimension"==c.type?(b=Math.round(c.sp.value/65536*1E5)/1E5,b+=Math.round(c.em.value/65536*1E5)/1E5*12,E(b+(Number.isInteger(b)?".0pt.":
"pt."))):"mu dimension"==c.type?(b=Math.round(c.mu.value/65536*1E5)/1E5,E(b+(Number.isInteger(b)?".0mu.":"mu."))):"glue"==c.type?(b=Math.round(c.start.sp.value/65536*1E5)/1E5,b+=Math.round(c.start.em.value/65536*1E5)/1E5*12,a=b+(Number.isInteger(b)?".0pt":"pt"),c.stretch instanceof u&&(c.stretch.sp.value||c.stretch.em.value)?(b=Math.round(c.stretch.sp.value/65536*1E5)/1E5,b+=Math.round(c.stretch.em.value/65536*1E5)/1E5*12,a+=" plus "+b+(Number.isInteger(b)?".0pt":"pt")):c.stretch instanceof A&&c.stretch.number.value&&
(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof u&&(c.shrink.sp.value||c.shrink.em.value)?(b=Math.round(c.shrink.sp.value/65536*1E5)/1E5,b+=Math.round(c.shrink.em.value/65536*1E5)/1E5*12,a+=" minus "+b+(Number.isInteger(b)?".0pt":"pt")):c.shrink instanceof A&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+
Array(c.shrink.magnitude.value).join("l")),E(a+".")):"mu glue"==c.type&&(b=Math.round(c.start.mu.value/65536*1E5)/1E5,a=b+(Number.isInteger(b)?".0mu":"mu"),c.stretch instanceof H&&c.stretch.mu.value?(b=Math.round(c.stretch.mu.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0mu":"mu")):c.stretch instanceof A&&c.stretch.number.value&&(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof
H&&c.shrink.mu.value?(b=Math.round(c.shrink.mu.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0mu":"mu")):c.shrink instanceof A&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.shrink.magnitude.value).join("l")),E(a+".")),[];this.invalid=!0;a.mouth.loadState(b);return[this]}}}),skip:new r("skip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=
a.mouth.eat("integer");if(!b||0>b.value)return this.invalid=!0,[this];if(!d.registers.skip[b.value]){d.registers.skip[b.value]=new T(new u(0,0),new u(0,0),new u(0,0));for(var c=0,f=a.scopes.length;c<f;c++)a.scopes[c].registers.skip[b.value]=new T((c?a.scopes[c-1]:d).registers.skip[b.value])}return[a.scopes.last.registers.skip[b.value]]}),skipdef:new r("skipdef",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();
a.mouth.saveState(b);var c=a.mouth.eat();if("command"==c.type){if(c.name in d.defs.primitive||c.name in d.parameters)return this.invalid=!0,a.mouth.loadState(b),[!0];var f=a.mouth.eat();f&&"character"==f.type&&"="==f["char"]&&f.cat==d.cats.all||f&&a.mouth.revert();f=a.mouth.eat("integer");if(!f||0>f.value)return this.invalid=!0,a.mouth.loadState(b),[!0];c=c.name;f=f.value;if(!d.registers.skip[f]){d.registers.skip[f]=new T(new u(0,0),new u(0,0),new u(0,0));b=0;for(var h=a.scopes.length;b<h;b++)a.scopes[b].registers.skip[f]=
new T((b?a.scopes[b-1]:d).registers.skip[f])}if(a.toggles.global&&0<=a.scopes.last.registers.named.globaldefs.value||0<a.scopes.last.registers.named.globaldefs.value)for(d.registers.named[c]=d.registers.skip[f],delete d.defs.macros[c],b=0,h=a.scopes.length;b<h;b++)a.scopes[b].registers.named[c]=a.scopes[b].registers.skip[f],delete a.scopes[b].defs.macros[c];else a.scopes.last.registers.named[c]=a.scopes.last.registers.skip[f],delete a.scopes.last.defs.macros[c]}else return this.invalid=!0,a.mouth.loadState(countDefSym),
[!0]}),sl:new r("sl",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"sl"});return[]}),span:new r("span",function(a){if(!a.scopes.last.isHalignCell||"scope"!=a.contexts.last)return this.invalid=!0,[this];var b=a.scopes[a.scopes.length-2].cellData[a.scopes[a.scopes.length-2].cellData.length-1],c=a.scopes[a.scopes.length-2];if(!b[b.length-1].omit&&!this.postPreamble){for(var f=-1,h,m=0,k=b.length;m<k;m++)f+=
b[m].span;if(c.preamble[f])h=c.preamble[f][1];else if(~c.repeatPreambleAt)b=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),h=b[(f-c.repeatPreambleAt)%b.length][1];else return this.invalid=!0,[this];if(!c.preamble[f+1]&&!~c.repeatPreambleAt)return this.invalid=!0,[this];this.postPreamble=!0;return h.concat(this)}a.scopes.last.root&&(a.scopes.last.root.invalid=!0);a.contexts.pop();h=a.scopes.last.tokens;a.scopes.last.isFrac?(b[b.length-1].content.push({type:"atom",atomType:"inner",nucleus:[{type:"fraction",
numerator:a.scopes.last.fracNumerator,denominator:h,barWidth:a.scopes.last.barWidth,delims:[a.scopes.last.fracLeftDelim,a.scopes.last.fracRightDelim],nullDelimiterSpace:new u(a.scopes.last.registers.named.nulldelimiterspace)}],superscript:null,subscript:null}),a.scopes.pop()):(a.scopes.pop(),b[b.length-1].content=b[b.length-1].content.concat(h));$jscomp.initSymbol();f=Symbol();a.mouth.saveState(f);b[b.length-1].omit=!1;for(b[b.length-1].span++;;)if(m=a.mouth.eat(),!m){a.mouth.loadState(f);break}else if("character"==
m.type&&m.cat!=d.cats.active){a.mouth.loadState(f);break}else if("command"==m.type||"character"==m.type&&m.cat==d.cats.active){if(m.name in a.scopes.last.registers.named){a.mouth.loadState(f);break}k="command"==m.type?a.scopes.last.defs.primitive[m.name]||a.scopes.last.defs.macros[m.name]:a.scopes.last.defs.active[m["char"]];if(!k){a.mouth.loadState(f);break}if(k===d.defs.primitive.the||k.proxy&&k.original===d.defs.primitive.the||k===d.defs.primitive.expandafter||k.proxy&&k.original===d.defs.primitive.expandafter||
k===d.defs.primitive.number||k.proxy&&k.original===d.defs.primitive.number||k===d.defs.primitive.romannumeral||k.proxy&&k.original===d.defs.primitive.romannumeral||k===d.defs.primitive.csname||k.proxy&&k.original===d.defs.primitive.csname||k===d.defs.primitive.string||k.proxy&&k.original===d.defs.primitive.string||k===d.defs.primitive["if"]||k.isLet&&k.original===d.defs.primitive["if"]||k===d.defs.primitive.ifcase||k.isLet&&k.original===d.defs.primitive.ifcase||k===d.defs.primitive.ifcat||k.isLet&&
k.original===d.defs.primitive.ifcat||k===d.defs.primitive.ifdim||k.isLet&&k.original===d.defs.primitive.ifdim||k===d.defs.primitive.ifeof||k.isLet&&k.original===d.defs.primitive.ifeof||k===d.defs.primitive.iffalse||k.isLet&&k.original===d.defs.primitive.iffalse||k===d.defs.primitive.ifodd||k.isLet&&k.original===d.defs.primitive.ifodd||k===d.defs.primitive.ifnum||k.isLet&&k.original===d.defs.primitive.ifnum||k===d.defs.primitive.ifhmode||k.isLet&&k.original===d.defs.primitive.ifhmode||k===d.defs.primitive.ifinner||
k.isLet&&k.original===d.defs.primitive.ifinner||k===d.defs.primitive.ifmmode||k.isLet&&k.original===d.defs.primitive.ifmmode||k===d.defs.primitive.iftrue||k.isLet&&k.original===d.defs.primitive.iftrue||k===d.defs.primitive.ifvmode||k.isLet&&k.original===d.defs.primitive.ifvmode||k===d.defs.primitive.ifvoid||k.isLet&&k.original===d.defs.primitive.ifvoid||k===d.defs.primitive.ifx||k.isLet&&k.original===d.defs.primitive.ifx){if(k=a.mouth.expand(m,a.mouth),1==k.length&&k[0]===m&&m.invalid){a.mouth.loadState(f);
break}}else{if(k===d.defs.primitive.omit||k.proxy&&k.original===d.defs.primitive.omit){b[b.length-1].omit=!0;break}if("primitive"==k.type||k.proxy&&"primitive"==k.original.type){a.mouth.loadState(f);break}k=a.mouth.expand(m,a.mouth);if(1==k.length&&k[0]==-m&&m.invalid){a.mouth.loadState(f);break}}a.mouth.queue.unshift.apply(a.mouth.queue,k)}a.contexts.push("scope");new a.Scope;a.scopes.last.isHalignCell=!0;if(!b[b.length-1].omit){f=-1;m=0;for(k=b.length;m<k;m++)f+=b[m].span;c.preamble[f]?h=c.preamble[f][0]:
~c.repeatPreambleAt&&(b=c.preamble.slice(c.repeatPreambleAt,c.preamble.length),h=b[(f-c.repeatPreambleAt)%b.length][0]);a.mouth.queue.unshift.apply(a.mouth.queue,h)}}),radical:new r("sqrt",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"rad",index:[],token:this});return[]}),root:new r("root",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last||a.scopes.last.root)return this.invalid=
!0,[this];this.ignore=!0;a.scopes.last.root=this;return[this]}),string:new r("string",function(a){var b=a.mouth.eat();if(!b)return this.invalid=!0,[this];if("character"==b.type)return[{type:"character",cat:d.cats.all,"char":b["char"],code:b.code}];if("command"==b.type)return(String.fromCharCode(a.scopes.last.registers.named.escapechar.value)+b.name).split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});this.invalid=!0;a.mouth.revert();return[this]}),textstyle:new r("textstyle",
function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"font modifier",value:"textstyle"});return[]}),the:new r("the",function(a){$jscomp.initSymbol();var b=Symbol();for(a.mouth.saveState(b);;){var c=a.mouth.eat();if(c&&("command"==c.type||"character"==c.type&&c.cat==d.cats.active))c=a.mouth.expand(c,a.mouth),a.mouth.queue.unshift.apply(a.mouth.queue,c);else if(c&&c.register){if("integer"==c.type)return c.value.toString().split("").map(function(a){return{type:"character",
cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});if("dimension"==c.type)return b=Math.round(c.sp.value/65536*1E5)/1E5,b+=Math.round(c.em.value/65536*1E5)/1E5*12,(b+(Number.isInteger(b)?".0pt":"pt")).split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});if("mu dimension"==c.type)return b=Math.round(c.mu.value/65536*1E5)/1E5,(b+(Number.isInteger(b)?".0mu":"mu")).split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});
if("glue"==c.type)return a="",b=Math.round(c.start.sp.value/65536*1E5)/1E5,b+=Math.round(c.start.em.value/65536*1E5)/1E5*12,a=b+(Number.isInteger(b)?".0pt":"pt"),c.stretch instanceof u&&(c.stretch.sp.value||c.stretch.em.value)?(b=Math.round(c.stretch.sp.value/65536*1E5)/1E5,b+=Math.round(c.stretch.em.value/65536*1E5)/1E5*12,a+=" plus "+b+(Number.isInteger(b)?".0pt":"pt")):c.stretch instanceof A&&c.stretch.number.value&&(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?
".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof u&&(c.shrink.sp.value||c.shrink.em.value)?(b=Math.round(c.shrink.sp.value/65536*1E5)/1E5,b+=Math.round(c.shrink.em.value/65536*1E5)/1E5*12,a+=" minus "+b+(Number.isInteger(b)?".0pt":"pt")):c.shrink instanceof A&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.shrink.magnitude.value).join("l")),a.split("").map(function(a){return{type:"character",
cat:d.cats.all,"char":a,code:a.charCodeAt(0)}});if("mu glue"==c.type)return a="",b=Math.round(c.start.mu.value/65536*1E5)/1E5,a=b+(Number.isInteger(b)?".0mu":"mu"),c.stretch instanceof H&&c.stretch.mu.value?(b=Math.round(c.stretch.mu.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0mu":"mu")):c.stretch instanceof A&&c.stretch.number.value&&(b=Math.round(c.stretch.number.value/65536*1E5)/1E5,a+=" plus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.stretch.magnitude.value).join("l")),c.shrink instanceof
H&&c.shrink.mu.value?(b=Math.round(c.shrink.mu.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0mu":"mu")):c.shrink instanceof A&&c.shrink.number.value&&(b=Math.round(c.shrink.number.value/65536*1E5)/1E5,a+=" minus "+b+(Number.isInteger(b)?".0":"")+"fil"+Array(c.shrink.magnitude.value).join("l")),a.split("").map(function(a){return{type:"character",cat:d.cats.all,"char":a,code:a.charCodeAt(0)}})}else return this.invalid=!0,a.mouth.loadState(b),[this]}}),time:new r("time",function(a){a=new Date;
return[new k(60*a.getHours()+a.getMinutes())]}),uccode:new r("uccode",function(a){var b=a.mouth.eat("integer");if(b||0>b.value)return[a.scopes.last.uc[b.value]=a.scopes.last.uc[b.value]||new k(0)];this.invalid=!0;return[this]}),underline:new r("underline",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"family modifier",value:"under",token:this});return[]}),uppercase:new r("uppercase",function(a){if("superscript"==a.contexts.last||
"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c||c.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];c=[];for(var f=1;;){var h=a.mouth.eat("pre space");if(h)if("character"==h.type&&h.cat==d.cats.open)f++,c.push(h);else if("character"==h.type&&h.cat==d.cats.close)if(f--,0<f)c.push(h);else break;else c.push(h);else return this.invalid=!0,a.mouth.loadState(b),[this]}b=0;for(f=c.length;b<f;b++)"character"==
c[b].type&&a.scopes.last.uc[c[b].code]&&0<a.scopes.last.uc[c[b].code].value&&(c[b].code=a.scopes.last.uc[c[b].code].value,c[b]["char"]=String.fromCharCode(c[b].code));return c}),vbox:new r("vbox",function(a){$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c,f;;){var h=a.mouth.eat();if(!h)return this.invalid=!0,[this];if("command"==h.type||"character"==h.type&&h.cat==d.cats.active){var k="command"==h.type?a.scopes.last.defs.primitive[h.name]||a.scopes.last.defs.macros[h.name]:a.scopes.last.defs.active[h["char"]];
if(k&&(k===d.defs.primitive.relax||k.proxy&&k.original===d.defs.primitive.relax))break;h=a.mouth.expand(h,a.mouth);a.mouth.queue.unshift.apply(a.mouth.queue,h)}else if("character"!=h.type||"t"!=h["char"]&&"T"!=h["char"])if("character"!=h.type||"s"!=h["char"]&&"S"!=h["char"])if("character"==h.type&&h.cat==d.cats.open){a.mouth.revert();break}else return this.invalid=!0,a.mouth.loadState(b),[this];else{c=a.mouth.eat();h=a.mouth.eat();k=a.mouth.eat();var r=a.mouth.eat(),g=a.mouth.eat();if(!c||"character"!=
c.type||"p"!=c["char"]&&"P"!=c["char"]||c.cat==d.cats.active||!h||"character"!=h.type||"r"!=h["char"]&&"R"!=h["char"]||h.cat==d.cats.active||!k||"character"!=k.type||"e"!=k["char"]&&"E"!=k["char"]||k.cat==d.cats.active||!r||"character"!=r.type||"a"!=r["char"]&&"A"!=r["char"]||r.cat==d.cats.active||!g||"character"!=g.type||"d"!=g["char"]&&"D"!=g["char"]||g.cat==d.cats.active||!(h=a.mouth.eat("dimension")))return this.invalid=!0,a.mouth.loadState(b),[this];c=h;break}else if(f=a.mouth.eat("pre space"),
f&&"character"==f.type&&("o"==f["char"]||"O"==h["char"])&&h.cat!=d.cats.active&&(h=a.mouth.eat("dimension"))){f=h;break}else return this.invalid=!0,a.mouth.loadState(b),[this]}h=a.mouth.preview();if(!h||"character"!=h.type||h.cat!=d.cats.open)return this.invalid=!0,a.mouth.loadState(b),[this];f||c||(c=new u(0,0));a.tokens.push({type:"box wrapper",value:"vertical",to:f,spread:c,token:this});return[]}),vcenter:new r("vcenter",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=
!0,[this];a.tokens.push({type:"family modifier",value:"vcenter",token:this});return[]}),vfil:new r("vfil",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:new T(new u(0),new A(1,1),new u(0))});return[]}),vfill:new r("vfill",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:new T(new u(0),new A(1,2),new u(0))});return[]}),
vrule:new r("vrule",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);for(var c=b=!1,f=!1;;){var h=a.mouth.eat();if(!h){a.mouth.revert();break}if("h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)if("d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active)if("w"!=h["char"]&&"W"!=h["char"]||h.cat==d.cats.active)a.mouth.revert();else if(h=a.mouth.eat("pre space"),!h||"i"!=h["char"]&&"I"!=
h["char"]||h.cat==d.cats.active)a.mouth.revert(h?2:1);else if(h=a.mouth.eat("pre space"),!h||"d"!=h["char"]&&"D"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?3:2);else if(h=a.mouth.eat("pre space"),!h||"t"!=h["char"]&&"T"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?4:3);else if(h=a.mouth.eat("pre space"),!h||"h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?5:4);else if(h=a.mouth.eat("dimension")){f=h;continue}else a.mouth.revert(5);else if(h=a.mouth.eat("pre space"),
!h||"e"!=h["char"]&&"E"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?2:1);else if(h=a.mouth.eat("pre space"),!h||"p"!=h["char"]&&"P"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?3:2);else if(h=a.mouth.eat("pre space"),!h||"t"!=h["char"]&&"T"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?4:3);else if(h=a.mouth.eat("pre space"),!h||"h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?5:4);else if(h=a.mouth.eat("dimension")){c=h;continue}else a.mouth.revert(5);else if(h=
a.mouth.eat("pre space"),!h||"e"!=h["char"]&&"E"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?2:1);else if(h=a.mouth.eat("pre space"),!h||"i"!=h["char"]&&"I"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?3:2);else if(h=a.mouth.eat("pre space"),!h||"g"!=h["char"]&&"G"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?4:3);else if(h=a.mouth.eat("pre space"),!h||"h"!=h["char"]&&"H"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?5:4);else if(h=a.mouth.eat("pre space"),!h||"t"!=h["char"]&&
"T"!=h["char"]||h.cat==d.cats.active)a.mouth.revert(h?6:5);else if(h=a.mouth.eat("dimension")){b=h;continue}else a.mouth.revert(6);break}f=f||new u(0,65536/30);a.tokens.push({type:"rule",ruleType:"v",height:b,depth:c,width:f});return[]}),vskip:new r("vskip",function(a){if("superscript"==a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];var b=a.mouth.eat("glue");if(!b)return this.invalid=!0,[this];a.tokens.push({type:"vglue",glue:b});return[]}),xdef:new r("xdef",function(a){if("superscript"==
a.contexts.last||"subscript"==a.contexts.last)return this.invalid=!0,[this];$jscomp.initSymbol();var b=Symbol();a.mouth.saveState(b);var c=a.mouth.eat();if(!c)return this.invalid=!0,[this];if("character"==c.type)if(a.catOf(c["char"])==d.cats.active){var f="active";c=c["char"]}else return this.invalid=!0,a.mouth.loadState(b),[this];else if("command"==c.type&&(f="macro",c=c.name,c in a.scopes.last.defs.primitive||c in d.parameters))return this.invalid=!0,a.mouth.loadState(b),[this];for(var h=[],k=0,
w=!1;;){var g=a.mouth.eat();if(g)if(g.cat==d.cats.open){a.mouth.revert();break}else if(g.cat==d.cats.param){var p=a.mouth.eat("pre space");if(p)if(p.cat==d.cats.open)w=!0,a.mouth.revert(),h.push({type:"character",cat:d.cats.open,"char":p["char"],code:p.code});else if(48<p.code&&58>p.code&&p.cat==d.cats.all&&+p["char"]==k+1)h.push(g),k++;else return this.invalid=!0,a.mouth.loadState(b),[this];else return this.invalid=!0,a.mouth.loadState(b),[this]}else h.push(g);else return this.invalid=!0,a.mouth.loadState(b),
[this]}k=0;p=[];for(var u=!1,A=!1;;)if(g=a.mouth.eat())if("character"!=g.type||g.cat!=d.cats.param||A)if("character"==g.type&&g.cat==d.cats.open)k++,p.push(g),u=!1;else if("character"==g.type&&g.cat==d.cats.close){k--;if(0==k)break;p.push(g);u=!1}else if(u)p.push(g),u=!1;else if("command"==g.type||"character"==g.type&&g.cat==d.cats.active)if(g.name in a.scopes.last.registers.named)p.push(g);else{var n="command"==g.type?a.scopes.last.defs.primitive[g.name]||a.scopes.last.defs.macros[g.name]:a.scopes.last.defs.active[g["char"]];
if(!n)return this.invalid=!0,a.mouth.loadState(b),[this];if(n===d.defs.primitive.the||n.proxy&&n.original===d.defs.primitive.the||n===d.defs.primitive.expandafter||n.proxy&&n.original===d.defs.primitive.expandafter||n===d.defs.primitive.number||n.proxy&&n.original===d.defs.primitive.number||n===d.defs.primitive.romannumeral||n.proxy&&n.original===d.defs.primitive.romannumeral||n===d.defs.primitive.csname||n.proxy&&n.original===d.defs.primitive.csname||n===d.defs.primitive.string||n.proxy&&n.original===
d.defs.primitive.string||n===d.defs.primitive["if"]||n.isLet&&n.original===d.defs.primitive["if"]||n===d.defs.primitive.ifcase||n.isLet&&n.original===d.defs.primitive.ifcase||n===d.defs.primitive.ifcat||n.isLet&&n.original===d.defs.primitive.ifcat||n===d.defs.primitive.ifdim||n.isLet&&n.original===d.defs.primitive.ifdim||n===d.defs.primitive.ifeof||n.isLet&&n.original===d.defs.primitive.ifeof||n===d.defs.primitive.iffalse||n.isLet&&n.original===d.defs.primitive.iffalse||n===d.defs.primitive.ifodd||
n.isLet&&n.original===d.defs.primitive.ifodd||n===d.defs.primitive.ifnum||n.isLet&&n.original===d.defs.primitive.ifnum||n===d.defs.primitive.ifhmode||n.isLet&&n.original===d.defs.primitive.ifhmode||n===d.defs.primitive.ifinner||n.isLet&&n.original===d.defs.primitive.ifinner||n===d.defs.primitive.ifmmode||n.isLet&&n.original===d.defs.primitive.ifmmode||n===d.defs.primitive.iftrue||n.isLet&&n.original===d.defs.primitive.iftrue||n===d.defs.primitive.ifvmode||n.isLet&&n.original===d.defs.primitive.ifvmode||
n===d.defs.primitive.ifvoid||n.isLet&&n.original===d.defs.primitive.ifvoid||n===d.defs.primitive.ifx||n.isLet&&n.original===d.defs.primitive.ifx){n=a.mouth.expand(g,a.mouth);if(1==n.length&&n[0]===g&&g.invalid)return this.invalid=!0,a.mouth.loadState(b),[this];a.mouth.queue.unshift.apply(a.mouth.queue,n)}else n===d.defs.primitive.noexpand||n.proxy&&n.original===d.defs.primitive.noexpand?u=!0:n instanceof r||n.proxy&&n.original instanceof r?p.push(g):a.mouth.queue.unshift.apply(a.mouth.queue,a.mouth.expand(g,
a.mouth))}else p.push(g);else{if((n=a.mouth.eat("pre space"))&&(n.cat==d.cats.param||n.cat==d.cats.all&&n["char"]<=h.length&&1<=n["char"]))a.mouth.revert(),n.cat==d.cats.param&&(A=!0);else return this.invalid=!0,a.mouth.loadState(b),[this];p.push(g);u=!1}else return this.invalid=!0,a.mouth.loadState(b),[this];p.shift();w&&p.push(h[h.length-1]);n=new qa(p,h);if(0>a.scopes.last.registers.named.globaldefs.value)a.scopes.last.defs["macro"==f?"macros":"active"][c]=n,delete a.scopes.last.registers.named[c];
else if("macro"==f)for(d.defs.macros[c]=n,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.macros[c]=n,delete a.scopes.last.registers.named[c];else for(d.defs.active[c]=n,delete d.registers.named[c],b=0,f=a.scopes.length;b<f;b++)a.scopes[b].defs.ative[c]=n,delete a.scopes.last.registers.named[c];a.toggles.global=!1;return[]}),year:new r("year",function(a){return[new k((new Date).getFullYear())]}),"@debug":new r("@debug",function(a){debugger}),"@exec@JavaScript":new r("@exec@JavaScript",
function(a){})},macros:{},active:{}},registers:{count:{},dimen:{},skip:{},muskip:{},named:{pretolerance:new k(100),tolerance:new k(200),hbadness:new k(1E3),vbadness:new k(1E3),linepenalty:new k(10),hypenpenalty:new k(50),exhyphenpenalty:new k(50),binoppenalty:new k(700),relpenalty:new k(500),clubpenalty:new k(150),widowpenalty:new k(150),displaywidowpenalty:new k(50),brokenpenalty:new k(100),predisplaypenalty:new k(1E4),postdisplaypenalty:new k(0),floatingpenalty:new k(0),interlinepenalty:new k(0),
outputpenalty:new k(-10001),doublehyphendemerits:new k(1E4),finalhyphendemerits:new k(5E3),adjdemerits:new k(1E4),looseness:new k(0),pausing:new k(0),holdinginserts:new k(0),tracingonline:new k(0),tracingmacros:new k(0),tracingstats:new k(0),tracingparagraphs:new k(0),tracingpages:new k(0),tracingoutput:new k(0),tracinglostchars:new k(0),tracingcommands:new k(0),tracingrestores:new k(0),language:new k(0),uchyph:new k(1),lefthyphenmin:new k(2),righthyphenmin:new k(3),globaldefs:new k(0),defaulthyphenchar:new k(45),
defaultskewchar:new k(-1),escapechar:new k(92),endlinechar:new k(13),newlinechar:new k(10),maxdeadcycles:new k(100),hangafter:new k(1),fam:new k(0),mag:new k(1E3),delimiterfactor:new k(901),showboxbreadth:new k(-1),showboxdepth:new k(-1),errorcontextlines:new k(-1),hfuzz:new u(6553.6,0),vfuzz:new u(6553.6,0),overfullrule:new u(0,0),emergencystetch:new u(0,0),hsize:new u(22609920,0),vsize:new u(36044800,0),maxdepth:new u(327680,0),splitmaxdepth:new u(1074397184,-65536),boxmaxdepth:new u(1074397184,
-65536),lineskiplimit:new u(0,0),delimitershortfall:new u(327680,0),nulldelimiterspace:new u(0,6553.6),scriptspace:new u(32768,0),mathsurround:new u(0,0),predisplaystyle:new u(0,0),displaywidth:new u(0,0),displayindent:new u(0,0),parindent:new u(983040,0),hangindent:new u(0,0),hoffset:new u(0,0),voffset:new u(0,0),baselineskip:new T(new u(786432,0)),lineskip:new T(new u(65536,0)),parskip:new T(new u(0,0),new u(65536,0)),abovedisplayskip:new T(new u(655360,0),new u(131072,0),new u(327680,0)),abovedisplayshortskip:new T(new u(0,
0),new u(196608,0)),belowdisplayskip:new T(new u(0,0),new u(196608,0)),belowdisplayshortskip:new T(new u(393216,0),new u(196608,0),new u(196608,0)),leftskip:new T(new u(0,0)),rightskip:new T(new u(0,0)),topskip:new T(new u(655360,0)),splittopskip:new T(new u(655360,0)),tabskip:new T(new u(0,0)),spaceskip:new T(new u(0,0)),xspaceskip:new T(new u(0,0)),parfillskip:new T(new u(0,0),new A(65536,1)),thinmuskip:new fa(new H(196608)),medmuskip:new fa(new H(262144),new H(131072),new H(262144)),thickmuskip:new fa(new H(327680),
new H(327680))}},cats:function(){for(var a={92:new k(0,0,15),123:new k(1,0,15),125:new k(2,0,15),36:new k(3,0,15),38:new k(4,0,15),10:new k(5,0,15),35:new k(6,0,15),94:new k(7,0,15),95:new k(8,0,15),0:new k(9,0,15),9:new k(10,0,15),32:new k(10,0,15),126:new k(13,0,15),37:new k(14,0,15),127:new k(15,0,15),escape:0,open:1,close:2,math:3,alignment:4,eol:5,param:6,"super":7,sub:8,ignored:9,whitespace:10,letter:11,all:12,active:13,comment:14,invalid:15},b=0;52>b;b++)a["abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charCodeAt(b)]=
new k(11);return a}(),mathcodes:function(){for(var a={ord:0,op:1,bin:2,rel:3,open:4,close:5,punct:6,variable:7,active:8},b=0,c=0;b<c;b++)a["".charCodeAt(b)]=new k(1,0,8);b=0;for(c=34;b<c;b++)a["+-*\u00b1\u2213\u2216\u00d7\u2217\u22c6\u22c4\u2218\u2219\u00f7\u2229\u222a\u228e\u2293\u2294\u25c3\u25b9\u2240\u25ef\u25b3\u25bd\u2228\u2227\u2295\u2296\u2297\u2298\u2299\u2020\u2021\u2a3f".charCodeAt(b)]=new k(2,0,8);b=0;for(c=63;b<c;b++)a['<>=:"\u2264\u227a\u2aaf\u226a\u2282\u2286\u228f\u2291\u2208\u22a2\u2323\u2322\u2265\u227b\u2ab0\u226b\u2283\u2287\u2290\u2292\u220b\u22a3\u2261\u223c\u2243\u224d\u2248\u2245\u22c8\u221d\u22a8\u2250\u22a5\u226e\u2270\u2280\u2282\u0338\u2288\u2291\u0338\u226f\u2271\u2281\u2283\u0338\u2289\u2292\u0338\u2260\u2261\u0338\u2241\u2243\u0338\u2246\u224d\u0338'.charCodeAt(b)]=
new k(3,0,8);b=0;for(c=4;b<c;b++)a["([{`".charCodeAt(b)]=new k(4,0,8);b=0;for(c=5;b<c;b++)a["}])!?".charCodeAt(b)]=new k(5,0,8);b=0;for(c=2;b<c;b++)a[",;".charCodeAt(b)]=new k(6,0,8);b=0;for(c=82;b<c;b++)a["abcdefgh\u0127ijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\u03b1\u03b2\u03b3\u03b4\u03f5\u03b5\u03b6\u03b7\u03b8\u03d1\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03c0\u03d6\u03c1\u03f1\u03c3\u03c2\u03c4\u03c5\u03d5\u03c6\u03c7\u03c8\u03c9".charCodeAt(b)]=new k(7,0,8);return a}(),delims:[40,41,46,60,
62,47,91,92,93,123,124,125,8214,8593,8595,8597,8657,8659,8661,8741,8968,8969,8970,8971,9130,9136,9137,9168,10216,10217,10222,10223],parameters:"pretolerance tolerance hbadness vbadness linepenalty hypenpenalty exhyphenpenalty binoppenalty relpenalty clubpenalty widowpenalty displaywidowpenalty brokenpenalty predisplaypenalty postdisplaypenalty floatingpenalty interlinepenalty outputpenalty doublehyphendemerits finalhyphendemerits adjdemerits looseness pausing holdinginserts tracingonline tracingmacros tracingstats tracingparagraphs tracingpages tracingoutput tracinglostchars tracingcommands tracingrestores language uchyph lefthyphenmin righthyphenmin globaldefs defaulthyphenchar defaultskewchar escapechar endlinechar newlinechar maxdeadcycles hangafter fam mag delimiterfactor showboxbreadth showboxdepth errorcontextlines hfuzz vfuzz overfullrule emergencystetch hsize vsize maxdepth splitmaxdepth boxmaxdepth lineskiplimit delimitershortfall nulldelimiterfall scriptspace mathsurround predisplaystyle displaywidth displayindent parindent hangindent hoffset voffset baselineskip lineskip parskip abovedisplayskip abovedisplayshortskip belowdisplayskip belowdisplayshortskip leftskip rightskip topskip splittopskip tabskip spaceskip xspaceskip parfillskip thinmuskip medmuskip thickmuskip".split(" "),
lc:{65:new k(97),66:new k(98),67:new k(99),68:new k(100),69:new k(101),70:new k(102),71:new k(103),72:new k(104),73:new k(105),74:new k(106),75:new k(107),76:new k(108),77:new k(109),78:new k(110),79:new k(111),80:new k(112),81:new k(113),82:new k(114),83:new k(115),84:new k(116),85:new k(117),86:new k(118),87:new k(119),88:new k(120),89:new k(121),90:new k(122),97:new k(97),98:new k(98),99:new k(99),100:new k(100),101:new k(101),102:new k(102),103:new k(103),104:new k(104),105:new k(105),106:new k(106),
107:new k(107),108:new k(108),109:new k(109),110:new k(110),111:new k(111),112:new k(112),113:new k(113),114:new k(114),115:new k(115),116:new k(116),117:new k(117),118:new k(118),119:new k(119),120:new k(120),121:new k(121),122:new k(122),913:new k(945),914:new k(946),915:new k(947),916:new k(948),917:new k(949),918:new k(950),919:new k(951),920:new k(952),921:new k(953),922:new k(954),923:new k(955),924:new k(956),925:new k(957),926:new k(958),927:new k(959),928:new k(960),929:new k(961),931:new k(963),
932:new k(964),933:new k(965),934:new k(966),935:new k(967),936:new k(968),937:new k(969),945:new k(945),946:new k(946),947:new k(947),948:new k(948),949:new k(949),950:new k(950),951:new k(951),952:new k(952),953:new k(953),954:new k(954),955:new k(955),956:new k(956),957:new k(957),958:new k(958),959:new k(959),960:new k(960),961:new k(961),963:new k(963),964:new k(964),965:new k(965),966:new k(966),967:new k(967),968:new k(968),969:new k(969)},uc:{65:new k(65),66:new k(66),67:new k(67),68:new k(68),
69:new k(69),70:new k(70),71:new k(71),72:new k(72),73:new k(73),74:new k(74),75:new k(75),76:new k(76),77:new k(77),78:new k(78),79:new k(79),80:new k(80),81:new k(81),82:new k(82),83:new k(83),84:new k(84),85:new k(85),86:new k(86),87:new k(87),88:new k(88),89:new k(89),90:new k(90),97:new k(65),98:new k(66),99:new k(67),100:new k(68),101:new k(69),102:new k(70),103:new k(71),104:new k(72),105:new k(73),106:new k(74),107:new k(75),108:new k(76),109:new k(77),110:new k(78),111:new k(79),112:new k(80),
113:new k(81),114:new k(82),115:new k(83),116:new k(84),117:new k(85),118:new k(86),119:new k(87),120:new k(88),121:new k(89),122:new k(90),913:new k(913),914:new k(914),915:new k(915),916:new k(916),917:new k(917),918:new k(918),919:new k(919),920:new k(920),921:new k(921),922:new k(922),923:new k(923),924:new k(924),925:new k(925),926:new k(926),927:new k(927),928:new k(928),929:new k(929),931:new k(931),932:new k(932),933:new k(933),934:new k(934),935:new k(935),936:new k(936),937:new k(937),945:new k(913),
946:new k(914),947:new k(915),948:new k(916),949:new k(917),950:new k(918),951:new k(919),952:new k(920),953:new k(921),954:new k(922),955:new k(923),956:new k(924),957:new k(925),958:new k(926),959:new k(927),960:new k(928),961:new k(929),963:new k(931),964:new k(932),965:new k(933),966:new k(934),967:new k(935),968:new k(936),969:new k(937)}};d.defs.primitive.crcr["function"]=d.defs.primitive.cr["function"];fontTeX.format('        \\def\\makeatletter{\\catcode `\\@=11\\relax}\n        \\def\\makeatother{\\catcode `\\@=12\\relax}\n        \\makeatletter\n        \\count10=23\n        \\count11=9\n        \\count12=9\n        \\count13=9\n        \\countdef\\insc@unt=20\n        \\countdef\\allocationnumber=21\n        \\countdef\\m@ne=22 \\m@ne=-1\n        \\countdef\\count@=255\n        \\dimendef\\dimen@=0\n        \\dimendef\\dimen@i=1\n        \\dimendef\\dimen@ii=2\n        \\skipdef\\skip@=0\n        \\def\\newcount{\\alloc@0\\count\\countdef}\n        \\def\\newdimen{\\alloc@1\\dimen\\dimendef}\n        \\def\\newskip{\\alloc@2\\skip\\skipdef}\n        \\def\\newmuskip{\\alloc@3\\muskip\\muskipdef}\n        \\def\\alloc@#1#2#3#4{\n          \\advance\\count1#1by1\n          \\allocationnumber=\\count1#1\n          #3#4=\\allocationnumber\n        }\n        \\newdimen\\maxdimen \\maxdimen=137438953471.99998pt\n        \\newskip\\hideskip \\hideskip=-1000pt plus 1fil\n        \\newskip\\centering \\centering=0pt plus 1000pt minus 1000pt\n        \\def\\newif#1{\n            {\\lccode`9=`i \\lccode`8=`f \\lowercase{\\gdef\\@remove@if##198##2{##2}}}\n            \\expandafter\\expandafter\\expandafter\n            \\def\\expandafter\\expandafter\\expandafter\n            \\@if@name\\expandafter\\expandafter\\expandafter{\\expandafter\\@remove@if\\string#1}\n            \\expandafter\\def\\expandafter\\@if@name@bool\\expandafter##\\expandafter1\\expandafter{\\@if@name##1}\n            \\expandafter\\def\\csname\\@if@name@bool{true}\\endcsname{\n                \\let#1=\\iftrue\n            }\n            \\expandafter\\def\\csname\\@if@name@bool{false}\\endcsname{\n                \\let#1=\\iffalse\n            }\n            \\let#1=\\iffalse\n            \\let\\@if@name=\\undefined\n            \\let\\@if@name@bool=\\undefined\n            \\let\\@remove@if=\\undefined\n        }\n        \\newcount\\active \\active=13\n        \\newskip\\smallskipamount \\smallskipamount=3pt plus 1pt minus 1pt\n        \\newskip\\medskipamount \\medskipamount=6pt plus 2pt minus 2pt\n        \\newskip\\bigskipamount \\bigskipamount=12pt plus 4pt minus 4pt\n        \\newskip\\normalbaselineskip \\normalbaselineskip=12pt\n        \\newskip\\normallineskip \\normallineskip=1pt\n        \\newdimen\\normallineskiplimit \\normallineskiplimit=0pt\n        \\newdimen\\jot \\jot=3pt\n        \\newcount\\interdisplaylinepenalty \\interdisplaylinepenalty=100\n        \\newcount\\interfootnotelinepenalty \\interfootnotelinepenalty=100\n        \\chardef\\\\="000A\n        \\chardef\\{=`\\{\n        \\chardef\\}=`\\}\n        \\chardef\\$=`\\$\n        \\chardef\\#=`\\#\n        \\chardef\\%=`\\%\n        \\chardef\\&=`\\&\n        \\chardef\\_=`\\_\n        \\chardef\\|="2016\n        \\chardef\\AA="00C5\n        \\chardef\\aa="00E5\n        \\chardef\\AE="00C8\n        \\chardef\\ae="00E6\n        \\chardef\\Arrowvert="2225\n        \\chardef\\arrowvert="23D0\n        \\chardef\\backslash=`\\\\\n        \\chardef\\bracevert="23AA\n        \\chardef\\dag="2020\n        \\chardef\\ddag="2021\n        \\chardef\\downarrow="2193\n        \\chardef\\Downarrow="21D3\n        \\chardef\\equiv="2261\n        \\chardef\\infty="221E\n        \\chardef\\L="0141\n        \\chardef\\l="0142\n        \\chardef\\langle="27E8\n        \\chardef\\lbrace=`\\{\n        \\chardef\\lceil="2308\n        \\chardef\\lfloor="230A\n        \\chardef\\lgroup="27EE\n        \\chardef\\lmoustache="23B0\n        \\chardef\\O="00D8\n        \\chardef\\o="00F8\n        \\chardef\\OE="0152\n        \\chardef\\oe="0153\n        \\chardef\\P="00B6\n        \\chardef\\rangle="27E9\n        \\chardef\\rbrace=`\\}\n        \\chardef\\rceil="2309\n        \\chardef\\rfloor="230B\n        \\chardef\\rgroup="27EF\n        \\chardef\\rmoustache="23B1\n        \\chardef\\S="00A7\n        \\chardef\\ss="00DF\n        \\chardef\\Vert="2016\n        \\chardef\\vert=`\\|\n        \\chardef\\Uparrow="21D1\n        \\chardef\\uparrow="2191\n        \\chardef\\updownarrow="2195\n        \\chardef\\Updownarrow="21D5\n        \\mathchardef\\alpha="003B1\n        \\mathchardef\\angle="02220\n        \\mathchardef\\beta="003B2\n        \\mathchardef\\chi="003C7\n        \\mathchardef\\clubsuit="02663\n        \\mathchardef\\colon="6003A\n        \\mathchardef\\delta="003B4\n        \\mathchardef\\diamondsuit="02662\n        \\mathchardef\\epsilon="003F5\n        \\mathchardef\\eta="003B7\n        \\mathchardef\\gamma="003B3\n        \\mathchardef\\hbar="70127\n        \\mathchardef\\heartsuit="02661\n        \\mathchardef\\imath="70131\n        \\mathchardef\\intop="1222B \\def\\int{\\intop\\nolimits}\n        \\mathchardef\\iota="003B9\n        \\mathchardef\\jmath="70237\n        \\mathchardef\\kappa="003BA\n        \\mathchardef\\lambda="003BB\n        \\mathchardef\\leftarrow="32190 \\let\\gets=\\leftarrow\n        \\mathchardef\\Leftarrow="321D0\n        \\mathchardef\\leftrightarrow="32194\n        \\mathchardef\\Leftrightarrow="321D4\n        \\mathchardef\\ldotp="6002E\n        \\mathchardef\\mu="003BC\n        \\mathchardef\\nu="003BD\n        \\mathchardef\\omega="003C9\n        \\mathchardef\\phi="003D5\n        \\mathchardef\\pi="003C0\n        \\mathchardef\\psi="003C8\n        \\mathchardef\\rho="003C1\n        \\mathchardef\\rightarrow="32192 \\let\\to=\\rightarrow\n        \\mathchardef\\Rightarrow="321D2\n        \\mathchardef\\sigma="003C3\n        \\mathchardef\\tau="003C4\n        \\mathchardef\\theta="003B8\n        \\mathchardef\\upsilon="003C5\n        \\mathchardef\\varepsilon="003B5\n        \\mathchardef\\varphi="003C6\n        \\mathchardef\\varpi="003D6\n        \\mathchardef\\varrho="003F1\n        \\mathchardef\\varsigma="003C2\n        \\mathchardef\\vartheta="003D1\n        \\mathchardef\\xi="003BE\n        \\mathchardef\\zeta="003B6\n        \\mathchardef\\Delta="00394\n        \\mathchardef\\Gamma="00393\n        \\mathchardef\\Lambda="0039B\n        \\mathchardef\\Omega="003A9\n        \\mathchardef\\Phi="003A6\n        \\mathchardef\\Pi="003A0\n        \\mathchardef\\Psi="003A8\n        \\mathchardef\\Sigma="003A3\n        \\mathchardef\\spadesuit="02660\n        \\mathchardef\\Theta="00398\n        \\mathchardef\\Upsilon="003A5\n        \\mathchardef\\Xi="0039E\n        \\def\\~{\\accent"02DC }\n        \\def\\,{\\mskip\\thinmuskip}\n        \\def\\>{\\mskip\\medmuskip}\n        \\def\\;{\\mskip\\thickmuskip}\n        \\def\\!{\\mskip-\\thinmuskip}\n        \\def\\"{\\accent"A8 }\n        \\def\\={\\accent"AF }\n        \\def\\^{\\accent"5E }\n        \\def\\.{\\accent"02D9 }\n        \\def\\acute{\\accent"B4 }\n        \\def\\arccos{\\mathop{\\rm arccos}\\nolimits}\n        \\def\\arcsin{\\mathop{\\rm arcsin}\\nolimits}\n        \\def\\arctan{\\mathop{\\rm arctan}\\nolimits}\n        \\def\\arg{\\mathop{\\rm arg}\\nolimits}\n        \\def\\bar{\\accent"AF }\n        \\def\\bmod{            \\nonscript\\mskip-\\medmuskip\\mkern5mu\\mathbin{\\rm mod}\\mkern5mu\\nonscript\\mskip-\\medmuskip}\n        \\def\\breve{\\accent"02D8 }\n        \\def\\cdot{\\mathbin{\\vcenter.}}}\n        \\def\\cdotp{\\mathpunct{\\vcenter.}}}\n        \\def\\cdots{\\mathinner{\\cdotp\\cdotp\\cdotp}}\n        \\def\\check{\\accent"02C7 }\n        \\def\\cong{\\mathrel{\\tilde=}}\n        \\def\\cos{\\mathop{\\rm cos}\\nolimits}\n        \\def\\cosh{\\mathop{\\rm cosh}\\nolimits}\n        \\def\\cot{\\mathop{\\rm cot}\\nolimits}\n        \\def\\coth{\\mathop{\\rm coth}\\nolimits}\n        \\def\\csc{\\mathop{\\rm csc}\\nolimits}\n        \\def\\ddot{\\accent"A8 }\n        \\def\\deg{\\mathop{\\rm deg}\\nolimits}\n        \\def\\det{\\mathop{\\rm det}}\n        \\def\\dim{\\mathop{\\rm dim}\\nolimits}\n        \\def\\dot{\\accent"02D9 }\n        \\def\\empty{}\n        \\def\\exp{\\mathop{\\rm exp}\\nolimits}\n        \\def\\gcd{\\mathop{\\rm gcd}}\n        \\def\\grave{\\accent"60 }\n        \\def\\H{\\accent"02DD }\n        \\def\\hat{\\accent"5E }\n        \\def\\hom{\\mathop{\\rm hom}\\nolimits}\n        \\def\\inf{\\mathop{\\rm inf}}\n        \\def\\iterate{\\body \\let\\next=\\iterate\\else\\let\\next=\\relax\\fi\\next}\n        \\def\\joinrel{\\mathrel{\\mkern-3mu}}\n        \\def\\ker{\\mathop{\\rm ker}\\nolimits}\n        \\def\\lbrack{[}\n        \\def\\ldots{\\mathinner{\\ldotp\\ldotp\\ldotp}}\n        \\def\\lg{\\mathop{\\rm lg}\\nolimits}\n        \\def\\lim{\\mathop{\\rm lim}}\n        \\def\\liminf{\\mathop{\\rm lim\\,inf}}\n        \\def\\limsup{\\mathop{\\rm lim\\,sup}}\n        \\def\\ln{\\mathop{\\rm ln}\\nolimits}\n        \\def\\log{\\mathop{\\rm log}\\nolimits}\n        \\def\\loop#1\\repeat{\\def\\body{#1}\\iterate}\n        \\def\\lq{`}\n        \\def\\max{\\mathop{\\rm max}}\n        \\def\\min{\\mathop{\\rm min}}\n        \\def\\not{\\@ifnextchar={\\char"2260\\@gobble}{\\hbox to 0pt{/}}}\n        \\def\\null{\\hbox{}}\n        \\def\\pmod#1{\\mkern18mu({\\rm mod}\\,\\,#1)}\n        \\def\\Pr{\\mathop{\\rm Pr}}\n        \\def\\rbrack{]}\n        \\def\\rq{\'}\n        \\def\\sec{\\mathop{\\rm sec}\\nolimits}\n        \\def\\sin{\\mathop{\\rm sin}\\nolimits}\n        \\def\\sinh{\\mathop{\\rm sinh}\\nolimits}\n        \\def\\skew#1#2#3{            {\\muskip0 #1mu\\divide\\muskip0by2 \\mkern\\muskip0%\n            #2{\\mkern-\\muskip0{#3}\\mkern\\muskip0}\\mkern-\\muskip0}{}}\n        \\def\\strut{\\vrule height.708333333emdepth.291666666emwidth0pt\\relax}\n        \\def\\sup{\\mathop{\\rm sup}}\n        \\def\\surd{{\\mathchar"1221A}}\n        \\def\\t{\\accent"0311 }\n        \\def\\tan{\\mathop{\\rm tan}\\nolimits}\n        \\def\\tanh{\\mathop{\\rm tanh}\\nolimits}\n        \\def\\TeX{T\\kern-.1667em{\\lower.5exE}\\kern-.125emX}\n        \\def\\tilde{\\accent"02DC }\n        \\def\\u{\\accent"02D8 }\n        \\def\\v{\\accent"02C7 }\n        \\let\\bgroup={\n        \\let\\egroup=}\n        \\let\\endline=\\cr\n        \\let\\sb=^\n        \\let\\sp=_\n        \\let\\repeat=\\fi\n        \\def\\obeyspaces{\\catcode`\\ =13\\relax}\n        \\catcode`\\ =12\\def\\space{ }\\obeyspaces\\let =\\space\n        \\catcode`\\ =10\n        \\def\\thinspace{\\kern.1667em}\n        \\def\\negthinspace{\\kern-.1667em}\n        \\def\\enspace{\\kern.5em}\n        \\def\\enskip{\\hskip.5em\\relax}\n        \\def\\quad{\\hskip1em\\relax}\n        \\def\\qquad{\\hskip2em\\relax}\n        \\def\\smallskip{\\vskip\\smallskipamount}\n        \\def\\medskip{\\vskip\\medskipamount}\n        \\def\\bigskip{\\vskip\\bigskipamount}\n        \\def~{\\char"00A0\\relax}\n        \\mathcode`\\\u22c5=8 \\catcode`\\\u22c5=\\active\n        \\def\u22c5{\\mathchoice{\\mathbin{\\vcenter.}}{\\mathbin{\\vcenter.}}{{\\vcenter.}}{{\\vcenter.}}}\n        \\catcode`\\\u22c5=12\n        \\newcount\\mscount\n        \\def\\multispan#1{\\omit \\mscount#1\\relax\\loop\\ifnum\\mscount>1\\sp@n\\repeat}\n        \\def\\sp@n{\\span\\omit\\advance\\mscount-1}\n        \\def\\two@digits#1{\\ifnum#1<10 0\\fi\\the#1}\n        \\def\\dospecials{            \\do\\ \\do\\\\\\do\\{\\do\\}\\do\\$\\do\\&\\do\\#\\do\\^\\do\\^^K\\do\\_\\do\\^^A\\do\\%\\do\\~}\n        \\def\\choose{\\atopwithdelims()}\n        \\def\\brack{\\atopwithdelims[]}\n        \\def\\brace{\\atopwithdelims\\{\\}}\n        \\def\\mathpalette#1#2{            \\mathchoice{#1\\displaystyle{#2}}{#1\\textstyle{#2}}{#1\\scriptstyle{#2}}{#1\\scriptscriptstyle{#2}}}\n        \\def\\frac#1#2{{#1\\over#2}}\n        \\def\\mathrm#1{{\\rm#1}}\n        \\def\\textrm#1{{\\rm#1}}\n        \\def\\mathbf#1{{\\bf#1}}\n        \\def\\textbf#1{{\\bf#1}}\n        \\def\\mathit#1{{\\it#1}}\n        \\def\\textit#1{{\\it#1}}\n        \\def\\mathsl#1{{\\sl#1}}\n        \\def\\textsl#1{{\\sl#1}}\n        \\def\\@gobble#1{}\n        \\def\\@ifnextchar#1#2#3{            \\let\\@ifnextchar@charone=#1\n            \\def\\@ifnextchar@true{#2}\n            \\def\\@ifnextchar@false{#3}\n            \\futurelet\\@ifnextchar@chartwo\\@ifnextchar@check}\n        \\def\\@ifnextchar@check{            \\ifx\\@ifnextchar@charone\\@ifnextchar@chartwo\\@ifnextchar@true\\else\\@ifnextchar@false\\fi        }\n        \\def\\newcommand#1{\\@ifnextchar[{\\@newcommand#1}{\\@newcommand#1[0]}}\n        \\def\\@newcommand#1[#2]{            \\count0=#2            \\ifnum\\count0<0                \\Error{NotEnoughParameters}            \\else                \\ifnum\\count0>9                    \\Error{TooManyParameters}                \\else                    \\@ifnextchar[{\\ifnum\\count0<1                        \\Error{ParameterNumberMustBe>0}                    \\else                        \\@newcommand@optarg#1[#2]                    \\fi}{\\@newcommand@nooptarg#1[#2]}                \\fi            \\fi        }\n        \\def\\@paramnums#1{            \\ifcase#1            \\or####1            \\or####1####2            \\or####1####2####3            \\or####1####2####3####4            \\or####1####2####3####4####5            \\or####1####2####3####4####5####6            \\or####1####2####3####4####5####6####7            \\or####1####2####3####4####5####6####7####8            \\or####1####2####3####4####5####6####7####8####9\\fi}\n        \\def\\@paramnums@bracket#1{            \\ifcase#1            \\or[####1]            \\or[####1]####2            \\or[####1]####2####3            \\or[####1]####2####3####4            \\or[####1]####2####3####4####5            \\or[####1]####2####3####4####5####6            \\or[####1]####2####3####4####5####6####7            \\or[####1]####2####3####4####5####6####7####8            \\or[####1]####2####3####4####5####6####7####8####9\\fi}\n        \\def\\@newcommand@nooptarg#1[#2]#{            \\edef\\@newcommand@make{\\def\\noexpand#1\\@paramnums#2}\n            \\@newcommand@make}\n        \\def\\@newcommand@optarg#1[#2][#3]#{            \\def#1{                \\@ifnextchar[{\\csname\\string#1\\endcsname}{\\csname\\string#1\\endcsname[#3]}}            \\edef\\@newcommand@make{                \\noexpand\\expandafter\\def                \\noexpand\\csname\\noexpand\\string\\noexpand#1\\endcsname\\@paramnums@bracket#2}\n            \\@newcommand@make}\n        \\newcommand\\sqrt[1][]{\\root #1\\of }}\n        \\makeatother    ',
"display");fontTeX.fontDimen={widthOf:function(a,b,c){this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].width))return this.cache[b][c][a].width;this.context.font=(c||"")+" 500px "+b;this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].width=this.context.measureText(a).width/500},visibleWidthOf:function(a,
b,c){function d(f,h,k){if(7==k)return f;this.context.clearRect(0,0,150,150);var g=Math.pow(2,k);this.context.font=(c||"")+" "+100*g+"px "+b;this.context.fillText(a,75+150*g*(.5-f),75+150*g*(.5-h));g=this.context.getImageData(0,0,150,150).data;for(var m=!1,p=0,r=0;150>r;r++){for(var t=0;150>t;t++){var w=g[4*r+600*t+3];w>m&&(m=w,p=t)}if(m)break}return!1===m&&0==k?-1:250<w?f+(r/150-.5)/Math.pow(2,k):d.call(this,f+(r/150-.5)/Math.pow(2,k),h+(p/150-.5)/Math.pow(2,k),k+1)}function h(d,f,k){if(7==k)return d;
this.context.clearRect(0,0,150,150);var g=Math.pow(2,k);this.context.font=(c||"")+" "+100*g+"px "+b;this.context.fillText(a,75+150*g*(.5-d),75+150*g*(.5-f));g=this.context.getImageData(0,0,150,150).data;for(var m=!1,p=0,r=149;0<=r;r--){for(var t=0;150>t;t++){var w=g[4*r+600*t+3];w>m&&(m=w,p=t)}if(m)break}return 250<w?d+(r/150-.5)/Math.pow(2,k):h.call(this,d+(r/150-.5)/Math.pow(2,k),f+(p/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];
if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].vWidth))return this.cache[b][c][a].vWidth;this.context.textBaseline="middle";this.context.textAlign="center";var k=d.call(this,.5,.5,0);if(-1==k)return this.cache[b]=this.cache[b]||{},this.cache[b][c]=this.cache[b][c]||{},this.cache[b][c][a]=this.cache[b][c][a]||{},this.cache[b][c][a].vWidth=0;var r=h.call(this,.5,.5,0);this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||
{};return this.cache[b][c][a].vWidth=1.5*(r-k)+.021},heightOf:function(a,b,c){function d(f,k,r){if(7==r)return k;this.context.clearRect(0,0,150,150);var g=Math.pow(2,r);this.context.font=(c||"")+" "+100*g+"px "+b;this.context.fillText(a,75+150*g*(.5-f),75+150*g*(1-k));g=this.context.getImageData(0,0,150,150).data;for(var h=!1,m=0,w=0;150>w;w++){for(var n=0;150>n;n++){var u=g[600*w+4*n+3];u>h&&(h=u,m=n)}if(h)break}return!1===h&&0==r?1:250<u?k+(w/150-.5)/Math.pow(2,r):d.call(this,f+(m/150-.5)/Math.pow(2,
r),k+(w/150-.5)/Math.pow(2,r),r+1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].height))return this.cache[b][c][a].height;this.context.textBaseline="alphabetic";this.context.textAlign="center";this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].height=1.5*(1-d.call(this,.5,.5,0))},depthOf:function(a,
b,c){function d(f,k,r){if(7==r)return k;this.context.clearRect(0,0,150,150);var g=Math.pow(2,r);this.context.font=(c||"")+" "+100*g+"px "+b;this.context.fillText(a,75+150*g*(.5-f),75+150*g*(.5-k));g=this.context.getImageData(0,0,150,150).data;for(var h=!1,m=0,u=149;0<=u;u--){for(var n=0;150>n;n++){var w=g[600*u+4*n+3];w>h&&(h=w,m=n)}if(h)break}return!1===h&&0==r?.5:250<w?k+(u/150-.5)/Math.pow(2,r):d.call(this,f+(m/150-.5)/Math.pow(2,r),k+(u/150-.5)/Math.pow(2,r),r+1)}this.isInit||this.init();c={nm:"",
rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].depth))return Math.max(0,this.cache[b][c][a].depth);this.context.textBaseline="alphabetic";this.context.textAlign="center";this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return Math.max(0,this.cache[b][c][a].depth=1.5*(d.call(this,.5,.5,0)-.5))},trueDepthOf:function(a,b,c){this.depthOf(a,b,c);return this.cache[b][{nm:"",
rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"]][a].depth},italCorrOf:function(a,b){function c(d,h,k){if(7==k)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,k);this.context.font="italic "+100*f+"px "+b;this.context.fillText(a,75+150*f*-d,75+150*f*(.5-h));f=this.context.getImageData(0,0,150,150).data;for(var g=!1,m=0,r=149;0<=r;r--){for(var u=0;150>u;u++){var n=f[4*r+600*u+3];n>g&&(g=n,m=u)}if(g)break}return!1===g&&0==k?0:250<n?d+(r/150-.5)/Math.pow(2,k):c.call(this,d+(r/150-.5)/
Math.pow(2,k),h+(m/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();if(this.cache[b]&&this.cache[b].italic&&this.cache[b].italic[a]&&!isNaN(this.cache[b].italic[a].italCorr))return this.cache[b].italic[a].italCorr;this.context.textBaseline="middle";this.context.textAlign="left";this.cache[b]=this.cache[b]||{};this.cache[b].italic=this.cache[b].italic||{};this.cache[b].italic[a]=this.cache[b].italic[a]||{};return this.cache[b].italic[a].italCorr=Math.max(0,1.5*c.call(this,.5,.5,0)-fontTeX.fontDimen.widthOf(a,
b,"it"))},leftOffsetOf:function(a,b,c){function d(f,k,r){if(7==r)return f;this.context.clearRect(0,0,150,150);var g=Math.pow(2,r);this.context.font=(c||"")+" "+100*g+"px "+b;this.context.fillText(a,75+150*g*(.5-f),75+150*g*(.5-k));g=this.context.getImageData(0,0,150,150).data;for(var h=!1,m=0,u=0;150>u;u++){for(var n=0;150>n;n++){var w=g[4*u+600*n+3];w>h&&(h=w,m=n)}if(h)break}return!1===h&&0==r?-1:250<w?f+(u/150-.5)/Math.pow(2,r):d.call(this,f+(u/150-.5)/Math.pow(2,r),k+(m/150-.5)/Math.pow(2,r),r+
1)}this.isInit||this.init();c={nm:"",rm:"",sl:"oblique",it:"italic",bf:"bold"}[c||"nm"];if(this.cache[b]&&this.cache[b][c]&&this.cache[b][c][a]&&!isNaN(this.cache[b][c][a].leftOffset))return this.cache[b][c][a].leftOffset;this.context.textBaseline="middle";this.context.textAlign="start";this.cache[b]=this.cache[b]||{};this.cache[b][c]=this.cache[b][c]||{};this.cache[b][c][a]=this.cache[b][c][a]||{};return this.cache[b][c][a].leftOffset=-1.5*(d.call(this,.5,.5,0)-.5)},baselineHeightOf:function(a){function b(c,
d,k){this.context.textBaseline="bottom";if(7==k)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,k);this.context.font=100*f+"px "+a;this.context.fillText("A",75+150*f*(.5-c),75+150*f*(1-d));f=this.context.getImageData(0,0,150,150).data;for(var g=!1,h=0,m=0;150>m;m++){for(var r=0;150>r;r++){var n=f[600*m+4*r+3];n>g&&(g=n,h=r)}if(g)break}return!1===g&&0==k?1:250<n?d+(m/150-.5)/Math.pow(2,k):b.call(this,c+(h/150-.5)/Math.pow(2,k),d+(m/150-.5)/Math.pow(2,k),k+1)}function c(b,d,k){this.context.textBaseline=
"alphabetic";if(7==k)return d;this.context.clearRect(0,0,150,150);var f=Math.pow(2,k);this.context.font=100*f+"px "+a;this.context.fillText("A",75+150*f*(.5-b),75+150*f*(1-d));f=this.context.getImageData(0,0,150,150).data;for(var g=!1,h=0,m=0;150>m;m++){for(var r=0;150>r;r++){var n=f[600*m+4*r+3];n>g&&(g=n,h=r)}if(g)break}return!1===g&&0==k?1:250<n?d+(m/150-.5)/Math.pow(2,k):c.call(this,b+(h/150-.5)/Math.pow(2,k),d+(m/150-.5)/Math.pow(2,k),k+1)}this.isInit||this.init();if(this.cache[a]&&!isNaN(this.cache[a].baseline))return this.cache[a].baseline;
this.context.textAlign="center";this.cache[a]=this.cache[a]||{};return this.cache[a].baseline=1.5*(c.call(this,.5,.5,0)-b.call(this,.5,.5,0))},init:function(){this.canvas=document.createElement("canvas");this.canvas.style.position="fixed";this.canvas.style.top="100vh";this.canvas.style.left="100vw";this.canvas.style.pointerEvents="none";this.canvas.style.opacity=0;this.canvas.width=150;this.canvas.height=150;this.context=this.canvas.getContext("2d");document.body.appendChild(this.canvas);this.isInit=
!0},isInit:!1,cache:{}};fontTeX._debug={data:d}}}();